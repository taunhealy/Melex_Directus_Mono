import{i as R5,d as a3,e as D5,f as CG,u as SG,p as xG,_ as TG}from"./index.5574472a.entry.js";import{w as n2,d as bj,be as vj,e as ql,n as uj,q as kG,aL as EG,b as _G,a as OG,h as dj,c as Kk,a$ as Pi,b0 as AG,aS as jf,a9 as K0,j as Rr,u as kn,aH as mj,ba as bi,a8 as s3,br as tl,ae as r3,aa as Lr,az as kp,bt as fj,a7 as A5,H as CW}from"./runtime-core.esm-bundler-474556af.js";import{useI18n as DG}from"./vue-i18n.2a6793e5.entry.js";import"./pinia.c34b9328.entry.js";import"./vue.runtime.esm-bundler-af75f279.js";import"./index-16d1f70d.js";import"./vue-router.60d75471.entry.js";var RG=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],MG=function(ct){return RG.map(function(En){return En.toLowerCase()}).indexOf(ct.toLowerCase())!==-1},NG=function(ct,En,sn){Object.keys(En).filter(MG).forEach(function(pt){var Rt=En[pt];typeof Rt=="function"&&(pt==="onInit"?Rt(ct,sn):sn.on(pt.substring(2),function(Jt){return Rt(Jt,sn)}))})},BG=function(ct,En,sn,pt){var Rt=ct.modelEvents?ct.modelEvents:null,Jt=Array.isArray(Rt)?Rt.join(" "):Rt;n2(pt,function(Hn,_t){sn&&typeof Hn=="string"&&Hn!==_t&&Hn!==sn.getContent({format:ct.outputFormat})&&sn.setContent(Hn)}),sn.on(Jt||"change input undo redo",function(){En.emit("update:modelValue",sn.getContent({format:ct.outputFormat}))})},$G=function(ct,En,sn,pt,Rt,Jt){pt.setContent(Jt()),sn.attrs["onUpdate:modelValue"]&&BG(En,sn,pt,Rt),NG(ct,sn.attrs,pt)},gj=0,yj=function(ct){var En=Date.now(),sn=Math.floor(Math.random()*1e9);return gj++,ct+"_"+sn+gj+String(En)},PG=function(ct){return ct!==null&&ct.tagName.toLowerCase()==="textarea"},hj=function(ct){return typeof ct>"u"||ct===""?[]:Array.isArray(ct)?ct:ct.split(" ")},IG=function(ct,En){return hj(ct).concat(hj(En))},FG=function(ct){return ct==null},pj=function(){return{listeners:[],scriptId:yj("tiny-script"),scriptLoaded:!1}},LG=function(){var ct=pj(),En=function(Rt,Jt,Hn,_t){var Zt=Jt.createElement("script");Zt.referrerPolicy="origin",Zt.type="application/javascript",Zt.id=Rt,Zt.src=Hn;var Wn=function(){Zt.removeEventListener("load",Wn),_t()};Zt.addEventListener("load",Wn),Jt.head&&Jt.head.appendChild(Zt)},sn=function(Rt,Jt,Hn){ct.scriptLoaded?Hn():(ct.listeners.push(Hn),Rt.getElementById(ct.scriptId)||En(ct.scriptId,Rt,Jt,function(){ct.listeners.forEach(function(_t){return _t()}),ct.scriptLoaded=!0}))},pt=function(){ct=pj()};return{load:sn,reinitialize:pt}},HG=LG(),VG=function(){return typeof window<"u"?window:global},e2=function(){var ct=VG();return ct&&ct.tinymce?ct.tinymce:null},zG={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(ct){return ct==="html"||ct==="text"}}},t2=globalThis&&globalThis.__assign||function(){return t2=Object.assign||function(ct){for(var En,sn=1,pt=arguments.length;sn<pt;sn++){En=arguments[sn];for(var Rt in En)Object.prototype.hasOwnProperty.call(En,Rt)&&(ct[Rt]=En[Rt])}return ct},t2.apply(this,arguments)},UG=function(ct,En,sn,pt){return ct(pt||"div",{id:En,ref:sn})},WG=function(ct,En,sn){return ct("textarea",{id:En,visibility:"hidden",ref:sn})},ZG=bj({props:zG,setup:function(ct,En){var sn=ct.init?t2({},ct.init):{},pt=vj(ct),Rt=pt.disabled,Jt=pt.modelValue,Hn=pt.tagName,_t=ql(null),Zt=null,Wn=ct.id||yj("tiny-vue"),vn=ct.init&&ct.init.inline||ct.inline,un=!!En.attrs["onUpdate:modelValue"],Qt=!0,dt=ct.initialValue?ct.initialValue:"",Ht="",it=function(qe){return un?function(){return Jt!=null&&Jt.value?Jt.value:""}:function(){return qe?dt:Ht}},ot=function(){var qe=it(Qt),G=t2(t2({},sn),{readonly:ct.disabled,target:_t.value,plugins:IG(sn.plugins,ct.plugins),toolbar:ct.toolbar||sn.toolbar,inline:vn,setup:function(Xe){Zt=Xe,Xe.on("init",function(Nt){return $G(Nt,ct,En,Xe,Jt,qe)}),typeof sn.setup=="function"&&sn.setup(Xe)}});PG(_t.value)&&(_t.value.style.visibility=""),e2().init(G),Qt=!1};n2(Rt,function(qe){var G;Zt!==null&&(typeof((G=Zt.mode)===null||G===void 0?void 0:G.set)=="function"?Zt.mode.set(qe?"readonly":"design"):Zt.setMode(qe?"readonly":"design"))}),n2(Hn,function(qe){var G;un||(Ht=Zt.getContent()),(G=e2())===null||G===void 0||G.remove(Zt),uj(function(){return ot()})}),kG(function(){if(e2()!==null)ot();else if(_t.value&&_t.value.ownerDocument){var qe=ct.cloudChannel?ct.cloudChannel:"6",G=ct.apiKey?ct.apiKey:"no-api-key",Xe=FG(ct.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(G,"/tinymce/").concat(qe,"/tinymce.min.js"):ct.tinymceScriptSrc;HG.load(_t.value.ownerDocument,Xe,ot)}}),EG(function(){e2()!==null&&e2().remove(Zt)}),vn||(_G(function(){Qt||ot()}),OG(function(){var qe;un||(Ht=Zt.getContent()),(qe=e2())===null||qe===void 0||qe.remove(Zt)}));var Sn=function(qe){var G;Ht=Zt.getContent(),(G=e2())===null||G===void 0||G.remove(Zt),sn=t2(t2({},sn),qe),uj(function(){return ot()})};return En.expose({rerender:Sn,getEditor:function(){return Zt}}),function(){return vn?UG(dj,Wn,_t,ct.tagName):WG(dj,Wn,_t)}}});const jG=""+new URL("FiraMono-Medium-33e88fa9.woff2",import.meta.url).href,GG=""+new URL("FiraMono-Medium-f2ff9941.woff",import.meta.url).href,qG=""+new URL("merriweather-regular-2661709b.woff2",import.meta.url).href,KG=""+new URL("merriweather-regular-ff8db8bc.woff",import.meta.url).href;function nl(ct){return getComputedStyle(document.body).getPropertyValue(ct)}function YG(ct){return`
@font-face {
	font-family: 'Fira Mono';
	font-style: normal;
	src: url(${jG}) format('woff2'),
	url(${GG}) format('woff');
}

@font-face {
	font-family: 'Merriweather';
	font-style: normal;
	src: url(${qG}) format('woff2'),
	url(${KG}) format('woff');
}

::selection {
	background: ${nl("--background-normal-alt")};
}
body {
	color: ${nl("--foreground-normal")};
	background-color: ${nl("--background-input")};
	margin: 20px;
	font-family: ${nl("--family-sans-serif")};
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
	-moz-osx-font-smoothing: grayscale;
}
body.mce-content-readonly {
	color: ${nl("--foreground-subdued")};
	background-color: ${nl("--background-subdued")};
}
.mce-offscreen-selection {
	display: none;
}
h1, h2, h3, h4, h5, h6 {
	font-family: ${nl(`--family-${ct}`)}, serif;
	color: ${nl("--foreground-normal-alt")};
	font-weight: 700;
	margin-bottom: 0;
}
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
	margin-top: 0.5em;
}
h1 {
	font-size: 36px;
	line-height: 46px;
	margin-top: 1em;
}
h2 {
	font-size: 24px;
	line-height: 34px;
	margin-top: 1.25em;
}
h3 {
	font-size: 19px;
	line-height: 29px;
	margin-top: 1.25em;
}
h4 {
	font-size: 16px;
	line-height: 26px;
	margin-top: 1.5em;
}
h5 {
	font-size: 14px;
	line-height: 24px;
	margin-top: 2em;
}
h6 {
	font-size: 12px;
	line-height: 22px;
	margin-top: 2em;
}
p {
	font-family: ${nl(`--family-${ct}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
a {
	color: ${nl("--primary-125")};
	text-decoration: none;
}
ul, ol {
	font-family: ${nl(`--family-${ct}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
ul ul,
	ol ol,
		ul ol,
			ol ul {
	margin: 0;
}
b, strong {
	font-weight: 700;
}
code {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 2px 4px;
	font-family: ${nl("--family-monospace")}, monospace;
	background-color: ${nl("--background-normal")};
	border-radius: ${nl("--border-radius")};
	overflow-wrap: break-word;
}
pre {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 1em;
	font-family: ${nl("--family-monospace")}, monospace;
	background-color: ${nl("--background-normal")};
	border-radius: ${nl("--border-radius")};
	overflow: auto;
}
blockquote {
	font-family: ${nl(`--family-${ct}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	border-left: 2px solid ${nl("--border-normal")};
	padding-left: 1em;
	margin-left: 0px;
}
video,
img {
	max-width: 100%;
	border-radius: ${nl("--border-radius")};
	height: auto;
}
iframe {
	max-width: 100%;
	border-radius: ${nl("--border-radius")};
}
hr {
	background-color: ${nl("--border-normal")};
	height: 1px;
	border: none;
	margin-top: 2em;
	margin-bottom: 2em;
}
table {
	border-collapse: collapse;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
}
table th,
table td {
	border: 1px solid ${nl("--border-normal")};
	padding: 0.4rem;
}
figure {
	display: table;
	margin: 1rem auto;
}
figure figcaption {
	color: #999;
	display: block;
	margin-top: 0.25rem;
	text-align: center;
}`}function XG(ct,En,sn){const pt=ql(!1),Rt=ql(null),Jt=ql();n2(()=>{var un;return(un=Rt.value)==null?void 0:un.transformationKey},un=>{Jt.value=sn.storageAssetPresets.value.find(Qt=>Qt.key===un),Jt.value&&(Rt.value.width=Jt.value.width??void 0,Rt.value.height=Jt.value.height??void 0)});const Hn={icon:"image",tooltip:R5.global.t("wysiwyg_options.image"),onAction:un=>{if(pt.value=!0,un===!0||un.isActive()){const Qt=ct.value.selection.getNode(),dt=Qt.getAttribute("src"),Ht=dt?new URL(dt).searchParams:void 0,it=Qt.getAttribute("alt"),ot=Number((Ht==null?void 0:Ht.get("width"))||void 0)||void 0,Sn=Number((Ht==null?void 0:Ht.get("height"))||void 0)||void 0,qe=(Ht==null?void 0:Ht.get("key"))||void 0;if(dt===null||it===null)return;qe&&(Jt.value=sn.storageAssetPresets.value.find(G=>G.key===qe)),Rt.value={imageUrl:dt,alt:it,width:Jt.value?Jt.value.width??void 0:ot,height:Jt.value?Jt.value.height??void 0:Sn,transformationKey:qe,previewUrl:vn(dt,En.value??a3())}}else Rt.value=null},onSetup:un=>{const Qt=dt=>{un.setActive(dt.element.tagName==="IMG")};return ct.value.on("NodeChange",Qt),function(){ct.value.off("NodeChange",Qt)}}};return{imageDrawerOpen:pt,imageSelection:Rt,closeImageDrawer:_t,onImageSelect:Zt,saveImage:Wn,imageButton:Hn};function _t(){Rt.value=null,pt.value=!1}function Zt(un){const Qt=D5()+"assets/"+un.id;Rt.value={imageUrl:vn(Qt,En.value),alt:un.title,width:un.width,height:un.height,previewUrl:vn(Qt,En.value??a3())}}function Wn(){ct.value.fire("focus");const un=Rt.value;if(un===null)return;const Qt={},dt=new URL(un.imageUrl);dt.searchParams.delete("width"),dt.searchParams.delete("height"),dt.searchParams.delete("key"),sn.storageAssetTransform.value==="all"?un.transformationKey?Qt.key=un.transformationKey:(Qt.width=un.width,Qt.height=un.height):sn.storageAssetTransform.value==="presets"&&un.transformationKey&&(Qt.key=un.transformationKey);const it=`<img src="${CG(dt.toString(),Qt)}" alt="${un.alt}" />`;ct.value.selection.setContent(it),ct.value.undoManager.add(),_t()}function vn(un,Qt){if(!un.includes(D5()+"assets/"))return un;try{const dt=new URL(un),Ht=new URLSearchParams(dt.search);return Qt?Ht.set("access_token",Qt):Ht.delete("access_token"),Array.from(Ht).length>0?`${dt.origin}${dt.pathname}?${Ht.toString()}`:`${dt.origin}${dt.pathname}`}catch{return un}}}function JG(ct){const En=ql(!1),sn={url:null,displayText:null,title:null,newTab:!0},pt=ql(sn),Rt=ql(null),Jt=ql(null),Hn={icon:"link",tooltip:R5.global.t("wysiwyg_options.link"),onAction:()=>{if(ct.value.plugins.fullscreen.isFullscreen()&&ct.value.execCommand("mceFullScreen"),En.value=!0,Rt.value){ct.value.selection.select(Jt.value);const vn=Rt.value.getAttribute("href"),un=Rt.value.getAttribute("title"),Qt=Rt.value.innerText,dt=Rt.value.getAttribute("target");if(vn===null||Qt===null)return;pt.value={url:vn,displayText:Qt,title:un||null,newTab:dt==="_blank"}}else{const vn={displayText:ct.value.selection.getContent()||null};_t(vn)}},onSetup:vn=>{const un=Qt=>{let dt=Qt.element;for(Jt.value=Qt.element,Rt.value=null;dt&&dt.id!=="tinymce";){if(dt.tagName==="A"){Rt.value=dt;break}dt=dt.parentElement}vn.setActive(!!Rt.value)};return ct.value.on("NodeChange",un),function(){ct.value.off("NodeChange",un)}}};return{linkDrawerOpen:En,linkSelection:pt,linkNode:Rt,closeLinkDrawer:Zt,saveLink:Wn,linkButton:Hn};function _t(vn={}){pt.value=Object.assign({},sn,vn)}function Zt(){_t(),En.value=!1}function Wn(){ct.value.fire("focus");const vn=pt.value;if(vn.url===null){Rt.value&&(ct.value.selection.setContent(Rt.value.innerText),Zt());return}const un=`<a href="${vn.url}" ${vn.title?`title="${vn.title}"`:""} target="${vn.newTab?"_blank":"_self"}" >${vn.displayText||vn.url}</a>`;!Rt.value||Jt.value===Rt.value?ct.value.selection.setContent(un):Jt.value&&(Jt.value.innerHTML=vn.displayText||vn.url,Rt.value.setAttribute("data-mce-href",vn.url),Rt.value.setAttribute("href",vn.url),vn.title&&Rt.value.setAttribute("title",vn.title),Rt.value.setAttribute("target",vn.newTab?"_blank":"_self"),ct.value.selection.select(Rt.value),ct.value.selection.setNode(Rt.value)),ct.value.undoManager.add(),Zt()}}function QG(ct,En){const sn=ql(!1),pt=ql(null),Rt=ql(["video","audio"]),Jt=ql(""),Hn=ql(""),_t={icon:"embed",tooltip:R5.global.t("wysiwyg_options.media"),onAction:it=>{if(sn.value=!0,it.isActive()){if(ct.value.selection.getContent()===null)return;Jt.value=ct.value.selection.getContent(),Hn.value=Jt.value}else pt.value=null},onSetup:it=>{const ot=Sn=>{it.setActive(Sn.element.tagName==="SPAN"&&Sn.element.classList.contains("mce-preview-object"))};return ct.value.on("NodeChange",ot),function(){ct.value.off("NodeChange",ot)}}},Zt=Kk({get(){var it;return(it=pt.value)==null?void 0:it.sourceUrl},set(it){pt.value={...pt.value,sourceUrl:it},pt.value.previewUrl=Ht(it,En.value||a3())}}),Wn=Kk({get(){var it;return(it=pt.value)==null?void 0:it.width},set(it){pt.value!==null&&(pt.value={...pt.value,width:it})}}),vn=Kk({get(){var it;return(it=pt.value)==null?void 0:it.height},set(it){pt.value!==null&&(pt.value={...pt.value,height:it})}});return n2(pt,it=>{if(Jt.value===""){if(it===null)return;Jt.value=`<${it.tag} width="${it.width}" height="${it.height}" controls><source src="${it.sourceUrl}" type="${it.type}" /></${it.tag}>`}else Jt.value=Jt.value.replace(/src=".*?"/g,`src="${it==null?void 0:it.sourceUrl}"`).replace(/width=".*?"/g,`width="${it==null?void 0:it.width}"`).replace(/height=".*?"/g,`height="${it==null?void 0:it.height}"`).replace(/type=".*?"/g,`type="${it==null?void 0:it.type}"`).replaceAll(/<(video|audio|iframe)/g,`<${it==null?void 0:it.tag}`).replaceAll(/<\/(video|audio|iframe)/g,`</${it==null?void 0:it.tag}`)}),n2(Jt,it=>{var ot,Sn,qe,G,Xe;if(it==="")pt.value=null;else{const Nt=(ot=/<(video|audio|iframe)/g.exec(it))==null?void 0:ot[1],at=((Sn=/src="(.*?)"/g.exec(it))==null?void 0:Sn[1])||void 0,q=Number((qe=/width="(.*?)"/g.exec(it))==null?void 0:qe[1])||void 0,ft=Number((G=/height="(.*?)"/g.exec(it))==null?void 0:G[1])||void 0,Mn=((Xe=/type="(.*?)"/g.exec(it))==null?void 0:Xe[1])||void 0;if(at===void 0)return;const Bt=Ht(at,En.value||a3());pt.value={tag:Nt,sourceUrl:at,width:q,height:ft,type:Mn,previewUrl:Bt}}}),{mediaDrawerOpen:sn,mediaSelection:pt,closeMediaDrawer:un,openMediaTab:Rt,onMediaSelect:Qt,embed:Jt,saveMedia:dt,startEmbed:Hn,mediaHeight:vn,mediaWidth:Wn,mediaSource:Zt,mediaButton:_t};function un(){Jt.value="",Hn.value="",pt.value=null,sn.value=!1,Rt.value=["video"]}function Qt(it){const ot=D5()+"assets/"+it.id,Sn=it.type.startsWith("audio")?"audio":"video";pt.value={sourceUrl:Ht(ot,En.value),width:it.width||300,height:it.height||150,tag:Sn,type:it.type,previewUrl:Ht(ot,En.value||a3())}}function dt(){if(ct.value.fire("focus"),Jt.value!==""){if(Hn.value!==""){const it=ct.value.getContent().replace(Hn.value,Jt.value);ct.value.setContent(it)}else ct.value.selection.setContent(Jt.value);ct.value.undoManager.add(),un()}}function Ht(it,ot){if(!it.includes(D5()+"assets/"))return it;try{const Sn=new URL(it),qe=new URLSearchParams(Sn.search);return ot?qe.set("access_token",ot):qe.delete("access_token"),Array.from(qe).length>0?`${Sn.origin}${Sn.pathname}?${qe.toString()}`:`${Sn.origin}${Sn.pathname}`}catch{return it}}}function eq(ct){const En=ql(!1),sn=ql(),pt={icon:"sourcecode",tooltip:R5.global.t("wysiwyg_options.source_code"),onAction:()=>{En.value=!0,sn.value=ct.value.getContent()}};return{codeDrawerOpen:En,code:sn,closeCodeDrawer:Rt,saveCode:Jt,sourceCodeButton:pt};function Rt(){En.value=!1}function Jt(){ct.value.fire("focus"),ct.value.setContent(sn.value),ct.value.undoManager.add(),Rt()}}var tq={exports:{}};(function(ct){(function(){var En=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},sn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},pt=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Rt=function(e,n){return Jt(function(o,r){return e.eq(n(o),n(r))})},Jt=function(e){return{eq:e}},Hn=Jt(function(e,n){return e===n}),_t=Hn,Zt=function(e){return Jt(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Wn=function(e,n){return Rt(Zt(e),function(o){return pt(o,n)})},vn=function(e){return Jt(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Wn(_t).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},un=Jt(function(e,n){if(e===n)return!0;var o=En(e),r=En(n);return o!==r?!1:sn(o)?e===n:o==="array"?Zt(un).eq(e,n):o==="object"?vn(un).eq(e,n):!1});const Qt=Object.getPrototypeOf,dt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Ht=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&dt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},it=e=>n=>Ht(n)===e,ot=e=>n=>typeof n===e,Sn=e=>n=>e===n,qe=(e,n)=>Xe(e)&&dt(e,n,(o,r)=>Qt(o)===r),G=it("string"),Xe=it("object"),Nt=e=>qe(e,Object),at=it("array"),q=Sn(null),ft=ot("boolean"),Mn=Sn(void 0),Bt=e=>e==null,Pe=e=>!Bt(e),fe=ot("function"),Vo=ot("number"),Zn=(e,n)=>{if(at(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},jt=()=>{},O=(e,n)=>(...o)=>e(n.apply(null,o)),Eo=(e,n)=>o=>e(n(o)),nt=e=>()=>e,No=e=>e,dn=(e,n)=>e===n;function je(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const po=e=>n=>!e(n),Xo=e=>()=>{throw new Error(e)},Bo=e=>e(),Ps=e=>{e()},_e=nt(!1),gt=nt(!0);class H{constructor(n,o){this.tag=n,this.value=o}static some(n){return new H(!0,n)}static none(){return H.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?H.some(n(this.value)):H.none()}bind(n){return this.tag?n(this.value):H.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:H.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Pe(n)?H.some(n):H.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}H.singletonNone=new H(!1);const Hr=Array.prototype.slice,Fn=Array.prototype.indexOf,ms=Array.prototype.push,In=(e,n)=>Fn.call(e,n),js=(e,n)=>{const o=In(e,n);return o===-1?H.none():H.some(o)},Tt=(e,n)=>In(e,n)>-1,$t=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Vt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},De=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Gs=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},cs=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},rn=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Ea=(e,n,o)=>(Gs(e,(r,c)=>{o=n(o,r,c)}),o),zo=(e,n,o)=>(De(e,(r,c)=>{o=n(o,r,c)}),o),_a=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return H.some(u);if(o(u,r))break}return H.none()},ls=(e,n)=>_a(e,n,_e),Ms=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return H.some(o)}return H.none()},Wr=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!at(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ms.apply(n,e[o])}return n},ur=(e,n)=>Wr(Vt(e,n)),Jo=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},Uo=e=>{const n=Hr.call(e,0);return n.reverse(),n},tt=(e,n)=>rn(e,o=>!Tt(n,o)),Ye=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},qt=(e,n)=>{const o=Hr.call(e,0);return o.sort(n),o},en=(e,n)=>n>=0&&n<e.length?H.some(e[n]):H.none(),Bn=e=>en(e,0),Yt=e=>en(e,e.length-1),Ns=fe(Array.from)?Array.from:e=>Hr.call(e),ga=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return H.none()},rr=(e,n)=>{const o=[],r=fe(n)?c=>$t(o,u=>n(u,c)):c=>Tt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},xs=Object.keys,Mr=Object.hasOwnProperty,ht=(e,n)=>{const o=xs(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},so=(e,n)=>ha(e,(o,r)=>({k:r,v:n(o,r)})),ha=(e,n)=>{const o={};return ht(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},ar=e=>(n,o)=>{e[o]=n},Uc=(e,n,o,r)=>{ht(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Ka=(e,n)=>{const o={},r={};return Uc(e,n,ar(o),ar(r)),{t:o,f:r}},Qo=(e,n)=>{const o={};return Uc(e,n,ar(o),jt),o},Ya=(e,n)=>{const o=[];return ht(e,(r,c)=>{o.push(n(r,c))}),o},pa=e=>Ya(e,No),Wo=(e,n)=>_n(e,n)?H.from(e[n]):H.none(),_n=(e,n)=>Mr.call(e,n),Zr=(e,n)=>_n(e,n)&&e[n]!==void 0&&e[n]!==null,Oa=(e,n,o=un)=>vn(o).eq(e,n),Xa=e=>{const n={};return De(e,o=>{n[o]={}}),xs(n)},Ja=e=>e.length!==void 0,Is=Array.isArray,dr=e=>{if(Is(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ys=(e,n,o)=>{if(!e)return!1;if(o=o||e,Ja(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(_n(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},yr=(e,n)=>{const o=[];return ys(e,(r,c)=>{o.push(n(r,c,e))}),o},ue=(e,n)=>{const o=[];return ys(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},se=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Be=(e,n,o,r)=>{let c=Mn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Re=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Xt=e=>e[e.length-1],yn=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},no=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),w=c||!u&&f&&r("(min-device-width:768px)"),k=u||f&&!w,N=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!k&&!w&&!N;return{isiPad:nt(c),isiPhone:nt(u),isTablet:nt(w),isPhone:nt(k),isTouch:nt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:nt(N),isDesktop:nt(R)}},jo=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Yn=(e,n)=>{const o=jo(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Fo(r(1),r(2))},uo=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?pe():Yn(e,o)},pe=()=>Fo(0,0),Fo=(e,n)=>({major:e,minor:n}),wr={nu:Fo,detect:uo,unknown:pe},mr=(e,n)=>ga(n.brands,o=>{const r=o.brand.toLowerCase();return ls(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:wr.nu(parseInt(o.version,10),0)}))}),Wc=(e,n)=>{const o=String(n).toLowerCase();return ls(e,r=>r.search(o))},bo=(e,n)=>Wc(e,n).map(o=>{const r=wr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Cl=(e,n)=>Wc(e,n).map(o=>{const r=wr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Cr=(e,n)=>e.substring(n),fr=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,qs=(e,n)=>fs(e,n)?Cr(e,n.length):e,Ts=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Mn(r)?!0:c+n.length<=r:!1},fs=(e,n)=>fr(e,n,0),Zc=(e,n)=>fr(e,n,e.length-n.length),Qa=e=>n=>n.replace(e,""),hc=Qa(/^\s+|\s+$/g),ol=Qa(/^\s+/g),sl=Qa(/\s+$/g),Lo=e=>e.length>0,ba=e=>!Lo(e),Ac=(e,n)=>n<=0?"":new Array(n+1).join(e),pc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?H.none():H.some(o)},Aa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Sr=e=>n=>Ts(n,e),_s=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ts(e,"edge/")&&Ts(e,"chrome")&&Ts(e,"safari")&&Ts(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Aa],search:e=>Ts(e,"chrome")&&!Ts(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ts(e,"msie")||Ts(e,"trident")},{name:"Opera",versionRegexes:[Aa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Sr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Sr("firefox")},{name:"Safari",versionRegexes:[Aa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ts(e,"safari")||Ts(e,"mobile/"))&&Ts(e,"applewebkit")}],au=[{name:"Windows",search:Sr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ts(e,"iphone")||Ts(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Sr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Sr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Sr("linux"),versionRegexes:[]},{name:"Solaris",search:Sr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Sr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Sr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Kl={browsers:nt(_s),oses:nt(au)},es="Edge",sa="Chromium",va="IE",Ks="Opera",Yl="Firefox",ec="Safari",ra=()=>bc({current:void 0,version:wr.unknown()}),bc=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(es),isChromium:r(sa),isIE:r(va),isOpera:r(Ks),isFirefox:r(Yl),isSafari:r(ec)}},vi={unknown:ra,nu:bc,edge:nt(es),chromium:nt(sa),ie:nt(va),opera:nt(Ks),firefox:nt(Yl),safari:nt(ec)},Sl="Windows",yi="iOS",ya="Android",Dc="Linux",Xl="macOS",jc="Solaris",Jl="FreeBSD",Z="ChromeOS",le=()=>be({current:void 0,version:wr.unknown()}),be=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(Sl),isiOS:r(yi),isAndroid:r(ya),isMacOS:r(Xl),isLinux:r(Dc),isSolaris:r(jc),isFreeBSD:r(Jl),isChromeOS:r(Z)}},$e={unknown:le,nu:be,windows:nt(Sl),ios:nt(yi),android:nt(ya),linux:nt(Dc),macos:nt(Xl),solaris:nt(jc),freebsd:nt(Jl),chromeos:nt(Z)},wn={detect:(e,n,o)=>{const r=Kl.browsers(),c=Kl.oses(),u=n.bind(w=>mr(r,w)).orThunk(()=>bo(r,e)).fold(vi.unknown,vi.nu),f=Cl(c,e).fold($e.unknown,$e.nu),b=no(f,u,e,o);return{browser:u,os:f,deviceType:b}}},os=e=>window.matchMedia(e).matches;let xr=yn(()=>wn.detect(navigator.userAgent,H.from(navigator.userAgentData),os));const wo=()=>xr(),Tr=navigator.userAgent,$o=wo(),Ws=$o.browser,Rc=$o.os,vc=$o.deviceType,Vn=Tr.indexOf("Windows Phone")!==-1,Io={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ws.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ws.isIE(),windowsPhone:Vn,browser:{current:Ws.current,version:Ws.version,isChromium:Ws.isChromium,isEdge:Ws.isEdge,isFirefox:Ws.isFirefox,isIE:Ws.isIE,isOpera:Ws.isOpera,isSafari:Ws.isSafari},os:{current:Rc.current,version:Rc.version,isAndroid:Rc.isAndroid,isChromeOS:Rc.isChromeOS,isFreeBSD:Rc.isFreeBSD,isiOS:Rc.isiOS,isLinux:Rc.isLinux,isMacOS:Rc.isMacOS,isSolaris:Rc.isSolaris,isWindows:Rc.isWindows},deviceType:{isDesktop:vc.isDesktop,isiPad:vc.isiPad,isiPhone:vc.isiPhone,isPhone:vc.isPhone,isTablet:vc.isTablet,isTouch:vc.isTouch,isWebView:vc.isWebView}},jr=/^\s*|\s*$/g,$=e=>Bt(e)?"":(""+e).replace(jr,""),K=(e,n)=>n?n==="array"&&Is(e)?!0:typeof e===n:e!==void 0,ne=(e,n,o={})=>{const r=G(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Ae=_n,Pt=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(_n(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Xn=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ys(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Xn(c,n,o,r),!0)))},Qe={trim:$,isArray:Is,is:K,toArray:dr,makeMap:ne,each:ys,map:yr,grep:ue,inArray:se,hasOwn:Ae,extend:Pt,walk:Xn,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>at(e)?e:e===""?[]:yr(e.split(n||","),$),_addCacheSuffix:e=>{const n=Io.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Br=(e,n,o=dn)=>e.exists(r=>o(r,n)),Ys=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},qr=(e,n,o)=>e.isSome()&&n.isSome()?H.some(o(e.getOrDie(),n.getOrDie())):H.none(),Cd=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?H.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):H.none(),mo=(e,n)=>e?H.some(n):H.none(),Y=typeof window<"u"?window:Function("return this;")(),oe=(e,n)=>{let o=n??Y;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Se=(e,n)=>{const o=e.split(".");return oe(o,n)},Le=(e,n)=>Se(e,n),tn=(e,n)=>{const o=Le(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},_o=Object.getPrototypeOf,Fs=e=>tn("HTMLElement",e),vo=e=>{const n=Se("ownerDocument.defaultView",e);return Xe(e)&&(Fs(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(_o(e).constructor.name))},Bs=8,aa=9,ws=11,yc=1,Gc=3,hs=e=>e.dom.nodeName.toLowerCase(),ca=e=>e.dom.nodeType,Xs=e=>n=>ca(n)===e,Pl=e=>ca(e)===Bs||hs(e)==="#comment",Ii=e=>Os(e)&&vo(e.dom),Os=Xs(yc),wc=Xs(Gc),Il=Xs(aa),Sd=Xs(ws),wi=e=>n=>Os(n)&&hs(n)===e,rl=(e,n,o)=>{if(G(o)||ft(o)||Vo(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Vr=(e,n,o)=>{rl(e.dom,n,o)},tc=(e,n)=>{const o=e.dom;ht(n,(r,c)=>{rl(o,c,r)})},Mc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},al=(e,n)=>H.from(Mc(e,n)),La=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},kr=(e,n)=>{e.dom.removeAttribute(n)},qc=e=>{const n=e.dom.attributes;return n==null||n.length===0},um=e=>zo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),cu=(e,n)=>{const o=Mc(e,n);return o===void 0||o===""?[]:o.split(" ")},lu=(e,n,o)=>{const c=cu(e,n).concat([o]);return Vr(e,n,c.join(" ")),!0},Qm=(e,n,o)=>{const r=rn(cu(e,n),c=>c!==o);return r.length>0?Vr(e,n,r.join(" ")):kr(e,n),!1},xl=e=>e.dom.classList!==void 0,iu=e=>cu(e,"class"),xd=(e,n)=>lu(e,"class",n),$r=(e,n)=>Qm(e,"class",n),dm=(e,n)=>Tt(iu(e),n)?$r(e,n):xd(e,n),Pu=(e,n)=>{xl(e)?e.dom.classList.add(n):xd(e,n)},Iu=e=>{(xl(e)?e.dom.classList:iu(e)).length===0&&kr(e,"class")},Td=(e,n)=>{xl(e)?e.dom.classList.remove(n):$r(e,n),Iu(e)},kd=(e,n)=>{const o=xl(e)?e.dom.classList.toggle(n):dm(e,n);return Iu(e),o},Ed=(e,n)=>xl(e)&&e.dom.classList.contains(n),Fu=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return uu(r.childNodes[0])},ef=(e,n)=>{const r=(n||document).createElement(e);return uu(r)},tf=(e,n)=>{const r=(n||document).createTextNode(e);return uu(r)},uu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},re={fromHtml:Fu,fromTag:ef,fromText:tf,fromDom:uu,fromPoint:(e,n,o)=>H.from(e.dom.elementFromPoint(n,o)).map(uu)},_d=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Nc=(e,n)=>{const o=e.dom;if(o.nodeType!==yc)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Gf=e=>e.nodeType!==yc&&e.nodeType!==aa&&e.nodeType!==ws||e.childElementCount===0,_p=(e,n)=>{const o=n===void 0?document:n.dom;return Gf(o)?[]:Vt(o.querySelectorAll(e),re.fromDom)},Op=(e,n)=>{const o=n===void 0?document:n.dom;return Gf(o)?H.none():H.from(o.querySelector(e)).map(re.fromDom)},ss=(e,n)=>e.dom===n.dom,Fl=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Cc=e=>re.fromDom(e.dom.ownerDocument),cl=e=>Il(e)?e:Cc(e),Qg=e=>re.fromDom(cl(e).dom.documentElement),Fi=e=>re.fromDom(cl(e).dom.defaultView),Tl=e=>H.from(e.dom.parentNode).map(re.fromDom),mm=e=>H.from(e.dom.parentElement).map(re.fromDom),qf=(e,n)=>{const o=fe(n)?n:_e;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=re.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},eh=e=>{const n=o=>rn(o,r=>!ss(e,r));return Tl(e).map(Da).map(n).getOr([])},Kc=e=>H.from(e.dom.previousSibling).map(re.fromDom),Od=e=>H.from(e.dom.nextSibling).map(re.fromDom),th=e=>Uo(_d(e,Kc)),ll=e=>_d(e,Od),Da=e=>Vt(e.dom.childNodes,re.fromDom),Ad=(e,n)=>{const o=e.dom.childNodes;return H.from(o[n]).map(re.fromDom)},Dd=e=>Ad(e,0),Ll=e=>Ad(e,e.dom.childNodes.length-1),Bc=e=>e.dom.childNodes.length,nf=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return re.fromDom(n)},of=e=>Sd(e)&&Pe(e.dom.host),sf=fe(Element.prototype.attachShadow)&&fe(Node.prototype.getRootNode),rf=nt(sf),Ql=sf?e=>re.fromDom(e.dom.getRootNode()):cl,fm=e=>of(e)?e:nf(cl(e)),nh=e=>of(e)?e:re.fromDom(cl(e).dom.body),Y0=e=>{const n=Ql(e);return of(n)?H.some(n):H.none()},oh=e=>re.fromDom(e.dom.host),gm=e=>{if(rf()&&Pe(e.target)){const n=re.fromDom(e.target);if(Os(n)&&Kf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Bn(o)}}return H.from(e.target)},Kf=e=>Pe(e.dom.shadowRoot),Li=e=>{const n=wc(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Y0(re.fromDom(n)).fold(()=>o.body.contains(n),Eo(Li,oh))};var Yf=(e,n,o,r,c)=>e(o,r)?H.some(o):fe(c)&&c(o)?H.none():n(o,r,c);const Zs=(e,n,o)=>{let r=e.dom;const c=fe(o)?o:_e;for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r);if(n(u))return H.some(u);if(c(u))break}return H.none()},E=(e,n,o)=>Yf((c,u)=>u(c),Zs,e,n,o),M=(e,n)=>{const o=e.dom;return o.parentNode?z(re.fromDom(o.parentNode),r=>!ss(e,r)&&n(r)):H.none()},z=(e,n)=>{const o=c=>n(re.fromDom(c));return ls(e.dom.childNodes,o).map(re.fromDom)},ie=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=re.fromDom(r.childNodes[c]);if(n(u))return H.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return H.none()};return o(e.dom)},de=(e,n,o)=>Zs(e,r=>Nc(r,n),o),xt=(e,n)=>Op(n,e),On=(e,n,o)=>Yf((c,u)=>Nc(c,u),de,e,n,o),jn=e=>On(e,"[contenteditable]"),fo=(e,n=!1)=>Li(e)?e.dom.isContentEditable:jn(e).fold(nt(n),o=>St(o)==="true"),St=e=>e.dom.contentEditable,gs=e=>e.style!==void 0&&fe(e.style.getPropertyValue),wa=(e,n,o)=>{if(!G(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);gs(e)&&e.style.setProperty(n,o)},kl=(e,n)=>{gs(e)&&e.style.removeProperty(n)},hm=(e,n,o)=>{const r=e.dom;wa(r,n,o)},Xf=(e,n)=>{const o=e.dom;ht(n,(r,c)=>{wa(o,c,r)})},Ci=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!Li(e)?El(o,n):c},El=(e,n)=>gs(e)?e.style.getPropertyValue(n):"",$c=(e,n)=>{const o=e.dom,r=El(o,n);return H.from(r).filter(c=>c.length>0)},Hl=e=>{const n={},o=e.dom;if(gs(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Ha=(e,n)=>{const o=e.dom;kl(o,n),Br(al(e,"style").map(hc),"")&&kr(e,"style")},Eb=e=>e.dom.offsetWidth,is=(e,n)=>{Tl(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Lu=(e,n)=>{Od(e).fold(()=>{Tl(e).each(c=>{Pr(c,n)})},r=>{is(r,n)})},Rd=(e,n)=>{Dd(e).fold(()=>{Pr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Pr=(e,n)=>{e.dom.appendChild(n.dom)},_b=(e,n)=>{is(e,n),Pr(n,e)},X0=(e,n)=>{De(n,(o,r)=>{const c=r===0?e:n[r-1];Lu(c,o)})},Hu=(e,n)=>{De(n,o=>{Pr(e,o)})},$s=e=>{e.dom.textContent="",De(Da(e),n=>{Ls(n)})},Ls=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},la=e=>{const n=Da(e);n.length>0&&X0(e,n),Ls(e)},Md=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Da(re.fromDom(r))},Nd=e=>Vt(e,re.fromDom),pm=e=>e.dom.innerHTML,Bd=(e,n)=>{const r=Cc(e).dom,c=re.fromDom(r.createDocumentFragment()),u=Md(n,r);Hu(c,u),$s(e),Pr(e,c)},Co=e=>{const n=re.fromTag("div"),o=re.fromDom(e.dom.cloneNode(!0));return Pr(n,o),pm(n)},sh=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Ap=e=>{const n=re.fromDom(gm(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=O(r,o);return sh(n,e.clientX,e.clientY,o,r,c,e)},J0=(e,n)=>o=>{e(o)&&n(Ap(o))},Q0=(e,n,o,r,c)=>{const u=J0(o,r);return e.dom.addEventListener(n,u,c),{unbind:je(Ob,e,n,u,c)}},Jf=(e,n,o,r)=>Q0(e,n,o,r,!1),Ob=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Qf=(e,n)=>({left:e,top:n,translate:(r,c)=>Qf(e+r,n+c)}),Si=Qf,Ab=e=>{const n=e.getBoundingClientRect();return Si(n.left,n.top)},rh=(e,n)=>e!==void 0?e:n!==void 0?n:0,Db=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Si(o.offsetLeft,o.offsetTop);const u=rh(r==null?void 0:r.pageYOffset,c.scrollTop),f=rh(r==null?void 0:r.pageXOffset,c.scrollLeft),b=rh(c.clientTop,o.clientTop),w=rh(c.clientLeft,o.clientLeft);return Hi(e).translate(f-w,u-b)},Hi=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Si(r.offsetLeft,r.offsetTop):Li(e)?Ab(n):Si(0,0)},Dp=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Si(o,r)},Vi=(e,n)=>{wo().browser.isSafari()&&fe(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},af=e=>{const n=e===void 0?window:e;return wo().browser.isFirefox()?H.none():H.from(n.visualViewport)},Rb=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),ah=e=>{const n=e===void 0?window:e,o=n.document,r=Dp(re.fromDom(o));return af(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Rb(r.left,r.top,u,f)},c=>Rb(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Rp=(e,n)=>rn(Da(e),n),Mp=(e,n)=>{let o=[];return De(Da(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Mp(r,n))}),o},nc=(e,n)=>_p(n,e),Np=(e,n,o)=>de(e,n,o).isSome();class ia{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const $d=e=>n=>!!n&&n.nodeType===e,il=e=>!!e&&!Object.getPrototypeOf(e),ze=$d(1),zi=e=>{const n=e.toLowerCase();return o=>Pe(o)&&o.nodeName.toLowerCase()===n},ei=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Tt(n,r)}return!1}},Vu=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(ze(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Bp=e=>n=>ze(n)&&n.hasAttribute(e),$p=(e,n)=>o=>ze(o)&&o.getAttribute(e)===n,oc=e=>ze(e)&&e.hasAttribute("data-mce-bogus"),zu=e=>ze(e)&&e.getAttribute("data-mce-bogus")==="all",xi=e=>ze(e)&&e.tagName==="TABLE",Va=e=>n=>!!(ze(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),bm=ei(["textarea","input"]),mt=$d(3),Pp=$d(4),ey=$d(7),Uu=$d(8),Ui=$d(9),ch=$d(11),gr=zi("br"),cf=zi("img"),Wi=Va("true"),oo=Va("false"),Vl=ei(["td","th"]),ul=ei(["td","th","caption"]),_l=ei(["video","audio","object","embed"]),dl=zi("li"),ti="\uFEFF",ps="Â ",Pc=e=>e===ti,lh=e=>e.replace(/\uFEFF/g,""),ml=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?H.from(u.dom.nodeValue):H.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(wc,"text"),eg=e=>ml.get(e),Qr=e=>ml.getOption(e),du=(e,n)=>ml.set(e,n),Ip=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Ti=["td","th"],ty=["thead","tbody","tfoot"],Wu=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Mb=["h1","h2","h3","h4","h5","h6"],Ol=["li","dd","dt"],rs=["ul","ol","dl"],mu=["pre","script","textarea","style"],tg=["pre"].concat(Mb),ea=e=>{let n;return o=>(n=n||Ye(e,gt),_n(n,hs(o)))},fl=ea(Ip),vm=e=>hs(e)==="table",ng=e=>Os(e)&&!fl(e),za=e=>Os(e)&&hs(e)==="br",ih=ea(Wu),xe=ea(rs),Ic=ea(Ol),lf=ea(ty),Sc=ea(Ti),ni=ea(mu),Fc=ea(tg),Ca=e=>Fc(e)||ng(e),ny=e=>{const n=[];let o=e.dom;for(;o;)n.push(re.fromDom(o)),o=o.lastChild;return n},uh=e=>{const n=nc(e,"br"),o=rn(ny(e).slice(-1),za);n.length===o.length&&De(o,Ls)},C=()=>{const e=re.fromTag("br");return Vr(e,"data-mce-bogus","1"),e},S=e=>{$s(e),Pr(e,C())},F=e=>{Ll(e).each(n=>{Kc(n).each(o=>{fl(e)&&za(n)&&fl(o)&&Ls(n)})})},W=ti,me=Pc,Ie=lh,bt=ze,Gt=mt,qn=e=>(Gt(e)&&(e=e.parentNode),bt(e)&&e.hasAttribute("data-mce-caret")),Kn=e=>Gt(e)&&me(e.data),ts=e=>qn(e)||Kn(e),ks=e=>e.firstChild!==e.lastChild||!gr(e.firstChild),cr=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(W),u=e.parentNode;if(n){const f=e.previousSibling;if(Gt(f)){if(ts(f))return f;if(ym(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(Gt(f)){if(ts(f))return f;if(oi(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},gl=e=>{const n=e.container();return mt(n)?n.data.charAt(e.offset())===W||e.isAtStart()&&Kn(n.previousSibling):!1},sc=e=>{const n=e.container();return mt(n)?n.data.charAt(e.offset()-1)===W||e.isAtEnd()&&Kn(n.nextSibling):!1},Zu=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(C().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},oi=e=>Gt(e)&&e.data[0]===W,ym=e=>Gt(e)&&e.data[e.data.length-1]===W,og=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];oc(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},si=e=>e&&e.hasAttribute("data-mce-caret")?(og(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,wm=e=>qn(e.startContainer),dh=Wi,mh=oo,uf=gr,Ra=mt,fu=ei(["script","style","textarea"]),Oo=ei(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Hs=ei(["table"]),Yc=ts,As=e=>Yc(e)?!1:Ra(e)?!fu(e.parentNode):Oo(e)||uf(e)||Hs(e)||Cm(e),fh=e=>ze(e)&&e.getAttribute("unselectable")==="true",Cm=e=>!fh(e)&&mh(e),Sm=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Cm(o))return!1;if(dh(o))return!0}return!0},ki=e=>Cm(e)?!zo(Ns(e.getElementsByTagName("*")),(n,o)=>n||dh(o),!1):!1,df=e=>Oo(e)||ki(e),Nb=(e,n)=>As(e)&&Sm(e,n),ri=/^[ \t\r\n]*$/,mf=e=>ri.test(e),Pd=e=>" \f	\v".indexOf(e)!==-1,gu=e=>e===`
`||e==="\r",Zi=(e,n)=>n<e.length&&n>=0?gu(e[n]):!1,Fp=(e,n=4,o=!0,r=!0)=>{const c=Ac(" ",n),u=e.replace(/\t/g,c);return zo(u,(b,w)=>Pd(w)||w===ps?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Zi(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+ps}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:gu(w),str:b.str+w},{pcIsSpace:!1,str:""}).str},gh=(e,n)=>{const o=re.fromDom(n),r=re.fromDom(e);return Np(r,"pre,code",je(ss,o))},o2=(e,n)=>mt(e)&&mf(e.data)&&!gh(e,n),Yk=e=>ze(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),zr=(e,n)=>As(e)&&!o2(e,n)||Yk(e)||Xk(e),Xk=Bp("data-mce-bookmark"),Id=Bp("data-mce-bogus"),oy=$p("data-mce-bogus","all"),sy=(e,n)=>{let o=0;if(zr(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new ia(r,e);do{if(n){if(oy(r)){r=c.next(!0);continue}if(Id(r)){r=c.next();continue}}if(gr(r)){o++,r=c.next();continue}if(zr(r,e))return!1;r=c.next()}while(r);return o<=1}},Ir=(e,n=!0)=>sy(e.dom,n),hl="data-mce-block",hh=e=>rn(xs(e),n=>!/[A-Z]/.test(n)),sg=e=>hh(e).join(","),s2=(e,n)=>Pe(n.querySelector(e))?(n.setAttribute(hl,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(hl),!1),ph=(e,n)=>{const o=sg(e.getTransparentElements()),r=sg(e.getBlockElements());return rn(n.querySelectorAll(o),c=>s2(r,c))},Lp=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(Ir(re.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},Bb=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Lp(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Lp(u,!1),Ir(re.fromDom(c))||r.insertBefore(c,e),Ir(re.fromDom(n))||r.insertBefore(n,e),Ir(re.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},Jk=(e,n,o)=>{const r=e.getBlockElements(),c=re.fromDom(n),u=b=>hs(b)in r,f=b=>ss(b,c);De(Nd(o),b=>{Zs(b,u,f).each(w=>{const k=Rp(b,N=>u(N)&&!e.isValidChild(hs(w),hs(N)));if(k.length>0){const N=mm(w);De(k,R=>{Zs(R,u,f).each(L=>{Bb(L.dom,R.dom)})}),N.each(R=>ph(e,R.dom))}})})},ry=(e,n,o)=>{De([...o,...ff(e,n)?[n]:[]],r=>De(nc(re.fromDom(r),r.nodeName.toLowerCase()),c=>{ay(e,c.dom)&&la(c)}))},Hp=(e,n)=>{const o=ph(e,n);Jk(e,n,o),ry(e,n,o)},rg=(e,n)=>{if($b(e,n)){const o=sg(e.getBlockElements());s2(o,n)}},Fd=(e,n,o)=>{const r=u=>ss(u,re.fromDom(n)),c=qf(re.fromDom(o),r);en(c,c.length-2).filter(Os).fold(()=>Hp(e,n),u=>Hp(e,u.dom))},ju=e=>e.hasAttribute(hl),xm=(e,n)=>_n(e.getTransparentElements(),n),$b=(e,n)=>ze(n)&&xm(e,n.nodeName),ff=(e,n)=>$b(e,n)&&ju(n),ay=(e,n)=>$b(e,n)&&!ju(n),r2=(e,n)=>n.type===1&&xm(e,n.name)&&G(n.attr(hl)),cy=(e,n)=>n.type===1&&xm(e,n.name)&&Mn(n.attr(hl)),a2=wo().browser,ly=e=>ls(e,Os),Pb=e=>a2.isFirefox()&&hs(e)==="table"?ly(Da(e)).filter(n=>hs(n)==="caption").bind(n=>ly(ll(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Go=(e,n)=>e.children&&Tt(e.children,n),xn=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Ci(re.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!Go(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Go(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Pb(re.fromDom(n))}return{x:r,y:c}},Ld=(e,n={})=>{let o=0;const r={},c=re.fromDom(e),u=cl(c),f=j=>{n.referrerPolicy=j},b=j=>{n.contentCssCors=j},w=j=>{Pr(fm(c),j)},k=j=>{const ee=fm(c);xt(ee,"#"+j).each(Ls)},N=j=>Wo(r,j).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=j=>new Promise((ee,ve)=>{let ge;const we=Qe._addCacheSuffix(j),ke=N(we);r[we]=ke,ke.count++;const Ke=(Ne,Ut)=>{De(Ne,Ps),ke.status=Ut,ke.passed=[],ke.failed=[],ge&&(ge.onload=null,ge.onerror=null,ge=null)},Ot=()=>Ke(ke.passed,2),yt=()=>Ke(ke.failed,3);if(ee&&ke.passed.push(ee),ve&&ke.failed.push(ve),ke.status===1)return;if(ke.status===2){Ot();return}if(ke.status===3){yt();return}ke.status=1;const Me=re.fromTag("link",u.dom);tc(Me,{rel:"stylesheet",type:"text/css",id:ke.id}),n.contentCssCors&&Vr(Me,"crossOrigin","anonymous"),n.referrerPolicy&&Vr(Me,"referrerpolicy",n.referrerPolicy),ge=Me.dom,ge.onload=Ot,ge.onerror=yt,w(Me),Vr(Me,"href",we)}),L=j=>Promise.allSettled(Vt(j,ve=>R(ve).then(nt(ve)))).then(ve=>{const ge=cs(ve,we=>we.status==="fulfilled");return ge.fail.length>0?Promise.reject(Vt(ge.fail,we=>we.reason)):Vt(ge.pass,we=>we.value)}),Q=j=>{const ee=Qe._addCacheSuffix(j);Wo(r,ee).each(ve=>{--ve.count===0&&(delete r[ee],k(ve.id))})};return{load:R,loadAll:L,unload:Q,unloadAll:j=>{De(j,ee=>{Q(ee)})},_setReferrerPolicy:f,_setContentCssCors:b}},bh=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Ql(o).dom;return H.from(e.get(u)).getOrThunk(()=>{const f=Ld(u,r);return e.set(u,f),f})}}})(),Qk=e=>e.nodeName.toLowerCase()==="span",Ib=(e,n)=>Pe(e)&&(zr(e,n)||ng(re.fromDom(e))),Js=(e,n)=>{const o=new ia(e,n).prev(!1),r=new ia(e,n).next(!1),c=Mn(o)||Ib(o,n),u=Mn(r)||Ib(r,n);return c&&u},iy=e=>Qk(e)&&e.getAttribute("data-mce-type")==="bookmark",c2=(e,n)=>mt(e)&&e.data.length>0&&Js(e,n),l2=e=>ze(e)?e.childNodes.length>0:!1,et=e=>ch(e)||Ui(e),zp=(e,n,o)=>{var r;const c=o||n;if(ze(n)&&iy(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)zp(e,u[f],c);if(ze(n)){const f=n.childNodes;f.length===1&&iy(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!et(n)&&!zr(n,c)&&!l2(n)&&!c2(n,c)&&e.remove(n),n},eE=Qe.makeMap,Hd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fb=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vh=/[<>&\"\']/g,Up=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ag={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"},Tm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},yh={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Fr=e=>{const n=re.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Al=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!Tm[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},wh=Al("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Vd=(e,n)=>e.replace(n?Hd:Fb,o=>Tm[o]||o),tE=e=>(""+e).replace(vh,n=>Tm[n]||n),Lb=(e,n)=>e.replace(n?Hd:Fb,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Tm[o]||"&#"+o.charCodeAt(0)+";"),km=(e,n,o)=>{const r=o||wh;return e.replace(n?Hd:Fb,c=>Tm[c]||r[c]||c)},Dl={encodeRaw:Vd,encodeAllRaw:tE,encodeNumeric:Lb,encodeNamed:km,getEncodeFunc:(e,n)=>{const o=Al(n)||wh,r=(f,b)=>f.replace(b?Hd:Fb,w=>Tm[w]!==void 0?Tm[w]:o[w]!==void 0?o[w]:w.length>1?"&#"+((w.charCodeAt(0)-55296)*1024+(w.charCodeAt(1)-56320)+65536)+";":"&#"+w.charCodeAt(0)+";"),c=(f,b)=>km(f,b,o),u=eE(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:km:u.numeric?Lb:Vd},decode:e=>e.replace(Up,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):ag[o]||String.fromCharCode(o)):yh[n]||wh[n]||Fr(n))},Hb={},Gu={},nE={},Ch=Qe.makeMap,pl=Qe.each,gf=Qe.extend,nn=Qe.explode,u2=Qe.inArray,Lc=(e,n)=>(e=Qe.trim(e),e?e.split(n||" "):[]),d2=(e,n={})=>{const o=Ch(e," ",Ch(e.toUpperCase()," "));return gf(o,n)},uy=e=>d2("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),oE=e=>{const n={};let o,r,c,u;const f=(w,k="",N="")=>{const R=Lc(N),L=Lc(w);let Q=L.length;for(;Q--;){const te=Lc([o,k].join(" "));n[L[Q]]={attributes:Ye(te,()=>({})),attributesOrder:te,children:Ye(R,nt(nE))}}},b=(w,k)=>{const N=Lc(w),R=Lc(k);let L=N.length;for(;L--;){const Q=n[N[L]];for(let te=0,j=R.length;te<j;te++)Q.attributes[R[te]]={},Q.attributesOrder.push(R[te])}};if(Hb[e])return Hb[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const w="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+w,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const w="acronym applet basefont big font strike tt";c=[c,w].join(" "),pl(Lc(w),N=>{f(N,"",c)});const k="center dir isindex noframes";r=[r,k].join(" "),u=[r,c].join(" "),pl(Lc(k),N=>{f(N,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&De([n.video,n.audio],w=>{delete w.children.audio,delete w.children.video}),pl(Lc("a form meter progress dfn"),w=>{n[w]&&delete n[w].children[w]}),delete n.caption.children.table,delete n.script,Hb[e]=n,n},Wp=(e,n)=>{if(e){const o={};return G(e)&&(e={"*":e}),pl(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?Ch(r,/[, ]/):nn(r,/[, ]/)}),o}else return},ai=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(Jn,ns,Ta)=>{const or=e[Jn];if(or)return Ch(or,/[, ]/,Ch(or.toUpperCase(),/[, ]/));{let Xr=Gu[Jn];return Xr||(Xr=d2(ns,Ta),Gu[Jn]=Xr),Xr}},w=(n=e.schema)!==null&&n!==void 0?n:"html5",k=oE(w);e.verify_html===!1&&(e.valid_elements="*[*]");const N=Wp(e.valid_styles),R=Wp(e.invalid_styles,"map"),L=Wp(e.valid_classes,"map"),Q=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),te=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),j=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ee=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ve="td th iframe video audio object script code",ge=b("non_empty_elements",ve+" pre",j),we=b("move_caret_before_on_enter_elements",ve+" table",j),ke=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ke=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",ke),Ot=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),yt=b("transparent_elements","a ins del canvas map");pl("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Jn=>{f[Jn]=new RegExp("</"+Jn+"[^>]*>","gi")});const Me=Jn=>new RegExp("^"+Jn.replace(/([?+*])/g,".$1")+"$"),Ne=Jn=>{const ns=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Ta=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,or=/[*?+]/;if(Jn){const Xr=Lc(Jn,",");let Es,vr;o["@"]&&(Es=o["@"].attributes,vr=o["@"].attributesOrder);for(let Ia=0,gd=Xr.length;Ia<gd;Ia++){let wl=ns.exec(Xr[Ia]);if(wl){const Km=wl[1],Nu=wl[2],wb=wl[3],Cb=wl[5],rm={},am=[],qa={attributes:rm,attributesOrder:am};if(Km==="#"&&(qa.paddEmpty=!0),Km==="-"&&(qa.removeEmpty=!0),wl[4]==="!"&&(qa.removeEmptyAttrs=!0),Es&&(ht(Es,(hd,Ym)=>{rm[Ym]=hd}),vr&&am.push(...vr)),Cb){const hd=Lc(Cb,"|");for(let Ym=0,pd=hd.length;Ym<pd;Ym++)if(wl=Ta.exec(hd[Ym]),wl){const bd={},Uf=wl[1],gc=wl[2].replace(/[\\:]:/g,":"),Yg=wl[3],Wf=wl[4];if(Uf==="!"&&(qa.attributesRequired=qa.attributesRequired||[],qa.attributesRequired.push(gc),bd.required=!0),Uf==="-"){delete rm[gc],am.splice(u2(am,gc),1);continue}if(Yg&&(Yg==="="&&(qa.attributesDefault=qa.attributesDefault||[],qa.attributesDefault.push({name:gc,value:Wf}),bd.defaultValue=Wf),Yg==="~"&&(qa.attributesForced=qa.attributesForced||[],qa.attributesForced.push({name:gc,value:Wf}),bd.forcedValue=Wf),Yg==="<"&&(bd.validValues=Ch(Wf,"?"))),or.test(gc)){const cm=bd;qa.attributePatterns=qa.attributePatterns||[],cm.pattern=Me(gc),qa.attributePatterns.push(cm)}else rm[gc]||am.push(gc),rm[gc]=bd}}if(!Es&&Nu==="@"&&(Es=rm,vr=am),wb&&(qa.outputName=Nu,o[wb]=qa),or.test(Nu)){const hd=qa;hd.pattern=Me(Nu),c.push(hd)}else o[Nu]=qa}}}},Ut=Jn=>{c=[],De(xs(o),ns=>{delete o[ns]}),Ne(Jn),pl(k,(ns,Ta)=>{r[Ta]=ns.children})},bn=Jn=>{const ns=/^(~)?(.+)$/;Jn&&(delete Gu.text_block_elements,delete Gu.block_elements,pl(Lc(Jn,","),Ta=>{const or=ns.exec(Ta);if(or){const Xr=or[1]==="~",Es=Xr?"span":"div",vr=or[2];if(r[vr]=r[Es],u[vr]=Es,ge[vr.toUpperCase()]={},ge[vr]={},Xr||(Ke[vr.toUpperCase()]={},Ke[vr]={}),!o[vr]){let Ia=o[Es];Ia=gf({},Ia),delete Ia.removeEmptyAttrs,delete Ia.removeEmpty,o[vr]=Ia}pl(r,(Ia,gd)=>{Ia[Es]&&(r[gd]=Ia=gf({},r[gd]),Ia[vr]=Ia[Es])})}}))},Rn=Jn=>{const ns=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Hb[w],Jn&&pl(Lc(Jn,","),Ta=>{const or=ns.exec(Ta);if(or){const Xr=or[1];let Es;Xr?Es=r[or[2]]:Es=r[or[2]]={"#comment":{}},Es=r[or[2]],pl(Lc(or[3],"|"),vr=>{Xr==="-"?delete Es[vr]:Es[vr]={}})}})},co=Jn=>{const ns=o[Jn];if(ns)return ns;let Ta=c.length;for(;Ta--;){const or=c[Ta];if(or.pattern.test(Jn))return or}};e.valid_elements?Ut(e.valid_elements):(pl(k,(Jn,ns)=>{o[ns]={attributes:Jn.attributes,attributesOrder:Jn.attributesOrder},r[ns]=Jn.children}),pl(Lc("strong/b em/i"),Jn=>{const ns=Lc(Jn,"/");o[ns[1]].outputName=ns[0]}),pl(Ot,(Jn,ns)=>{o[ns]&&(e.padd_empty_block_inline_children&&(o[ns].paddInEmptyBlock=!0),o[ns].removeEmpty=!0)}),pl(Lc("ol ul blockquote a table tbody"),Jn=>{o[Jn]&&(o[Jn].removeEmpty=!0)}),pl(Lc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Jn=>{o[Jn].paddEmpty=!0}),pl(Lc("span"),Jn=>{o[Jn].removeEmptyAttrs=!0})),bn(e.custom_elements),Rn(e.valid_children),Ne(e.extended_valid_elements),Rn("+ol[ul|ol],+ul[ul|ol]"),pl({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Jn,ns)=>{o[ns]&&(o[ns].parentsRequired=Lc(Jn))}),e.invalid_elements&&pl(nn(e.invalid_elements),Jn=>{o[Jn]&&delete o[Jn]}),co("span")||Ne("span[!data-mce-type|*]");const Do=nt(N),vs=nt(R),Us=nt(L),oa=nt(ee),yl=nt(Ke),fc=nt(ke),wt=nt(Ot),ln=nt(Object.seal(j)),Ko=nt(te),Ft=nt(ge),An=nt(we),Nn=nt(Q),Lt=nt(yt),yo=nt(Object.seal(f)),io=(Jn,ns)=>{const Ta=r[Jn.toLowerCase()];return!!(Ta&&Ta[ns.toLowerCase()])},zc=(Jn,ns)=>{const Ta=co(Jn);if(Ta)if(ns){if(Ta.attributes[ns])return!0;const or=Ta.attributePatterns;if(or){let Xr=or.length;for(;Xr--;)if(or[Xr].pattern.test(ns))return!0}}else return!0;return!1},br=nt(u);return{type:w,children:r,elements:o,getValidStyles:Do,getValidClasses:Us,getBlockElements:yl,getInvalidStyles:vs,getVoidElements:ln,getTextBlockElements:fc,getTextInlineElements:wt,getBoolAttrs:oa,getElementRule:co,getSelfClosingElements:Ko,getNonEmptyElements:Ft,getMoveCaretBeforeOnEnterElements:An,getWhitespaceElements:Nn,getTransparentElements:Lt,getSpecialElements:yo,isValidChild:io,isValid:zc,getCustomElements:br,addValidElements:Ne,setValidElements:Ut,addCustomElements:bn,addValidChildren:Rn}},Em=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const w=ti;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const k=(`\\" \\' \\; \\: ; : `+w).split(" ");for(let R=0;R<k.length;R++)u[k[R]]=w+R,u[w+R]=k[R];const N={parse:R=>{const L={};let Q=!1;const te=e.url_converter,j=e.url_converter_scope||N,ee=(Me,Ne,Ut)=>{const bn=L[Me+"-top"+Ne];if(!bn)return;const Rn=L[Me+"-right"+Ne];if(!Rn)return;const co=L[Me+"-bottom"+Ne];if(!co)return;const Do=L[Me+"-left"+Ne];if(!Do)return;const vs=[bn,Rn,co,Do];let Us=vs.length-1;for(;Us--&&vs[Us]===vs[Us+1];);Us>-1&&Ut||(L[Me+Ne]=Us===-1?vs[0]:vs.join(" "),delete L[Me+"-top"+Ne],delete L[Me+"-right"+Ne],delete L[Me+"-bottom"+Ne],delete L[Me+"-left"+Ne])},ve=Me=>{const Ne=L[Me];if(!Ne)return;const Ut=Ne.split(" ");let bn=Ut.length;for(;bn--;)if(Ut[bn]!==Ut[0])return!1;return L[Me]=Ut[0],!0},ge=(Me,Ne,Ut,bn)=>{ve(Ne)&&ve(Ut)&&ve(bn)&&(L[Me]=L[Ne]+" "+L[Ut]+" "+L[bn],delete L[Ne],delete L[Ut],delete L[bn])},we=Me=>(Q=!0,u[Me]),ke=(Me,Ne)=>(Q&&(Me=Me.replace(/\uFEFF[0-9]/g,Ut=>u[Ut])),Ne||(Me=Me.replace(/\\([\'\";:])/g,"$1")),Me),Ke=Me=>String.fromCharCode(parseInt(Me.slice(1),16)),Ot=Me=>Me.replace(/\\[0-9a-f]+/gi,Ke),yt=(Me,Ne,Ut,bn,Rn,co)=>{if(Rn=Rn||co,Rn)return Rn=ke(Rn),"'"+Rn.replace(/\'/g,"\\'")+"'";if(Ne=ke(Ne||Ut||bn||""),!e.allow_script_urls){const Do=Ne.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Do)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Do))return""}return te&&(Ne=te.call(j,Ne,"style")),"url('"+Ne.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,we).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ne=>Ne.replace(/[;:]/g,we));let Me;for(;Me=r.exec(R);){r.lastIndex=Me.index+Me[0].length;let Ne=Me[1].replace(c,"").toLowerCase(),Ut=Me[2].replace(c,"");if(Ne&&Ut){if(Ne=Ot(Ne),Ut=Ot(Ut),Ne.indexOf(w)!==-1||Ne.indexOf('"')!==-1||!e.allow_script_urls&&(Ne==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ut)))continue;Ne==="font-weight"&&Ut==="700"?Ut="bold":(Ne==="color"||Ne==="background-color")&&(Ut=Ut.toLowerCase()),Ut=Ut.replace(o,yt),L[Ne]=Q?ke(Ut,!0):Ut}}ee("border","",!0),ee("border","-width"),ee("border","-color"),ee("border","-style"),ee("padding",""),ee("margin",""),ge("border","border-width","border-style","border-color"),L.border==="medium none"&&delete L.border,L["border-image"]==="none"&&delete L["border-image"]}return L},serialize:(R,L)=>{let Q="";const te=(ee,ve)=>{const ge=ve[ee];if(ge)for(let we=0,ke=ge.length;we<ke;we++){const Ke=ge[we],Ot=R[Ke];Ot&&(Q+=(Q.length>0?" ":"")+Ke+": "+Ot+";")}},j=(ee,ve)=>{if(!b||!ve)return!0;let ge=b["*"];return ge&&ge[ee]?!1:(ge=b[ve],!(ge&&ge[ee]))};return L&&f?(te("*",f),te(L,f)):ht(R,(ee,ve)=>{ee&&j(ve,L)&&(Q+=(Q.length>0?" ":"")+ve+": "+ee+";")}),Q}};return N},m2={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},cg=e=>e instanceof Event||fe(e.initEvent),sE=e=>e.isDefaultPrevented===gt||e.isDefaultPrevented===_e,f2=e=>Bt(e.preventDefault)||cg(e),Sh=(e,n)=>{const o=n??{};for(const r in e)_n(m2,r)||(o[r]=e[r]);return Pe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},lg=(e,n,o,r)=>{var c;const u=Sh(n,r);return u.type=e,Bt(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),f2(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=gt,fe(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=gt,fe(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=gt,u.stopPropagation()},sE(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?gt:_e,u.isPropagationStopped=u.cancelBubble===!0?gt:_e,u.isImmediatePropagationStopped=_e)),u},Vb="mce-data-",ig=/^(?:mouse|contextmenu)|click/,zb=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Zp=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Ub=e=>Pe(e)&&ig.test(e.type),hf=(e,n)=>{const o=lg(e.type,e,document,n);if(Ub(e)&&Mn(e.pageX)&&!Mn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},qu=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Zp(e,"DOMContentLoaded",f),Zp(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():zb(e,"DOMContentLoaded",f),o.domLoaded||zb(e,"load",f)};class rc{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Vb+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,w=L=>{u.executeHandlers(hf(L||b.event),k)};if(!n||mt(n)||Uu(n))return r;let k;n[u.expando]?k=n[u.expando]:(k=u.count++,n[u.expando]=k,u.events[k]={}),c=c||n;const N=o.split(" ");let R=N.length;for(;R--;){let L=N[R],Q=w,te=!1,j=!1;if(L==="DOMContentLoaded"&&(L="ready"),u.domLoaded&&L==="ready"&&n.readyState==="complete"){r.call(c,hf({type:L}));continue}!u.hasFocusIn&&(L==="focusin"||L==="focusout")&&(te=!0,j=L==="focusin"?"focus":"blur",Q=ee=>{const ve=hf(ee||b.event);ve.type=ve.type==="focus"?"focusin":"focusout",u.executeHandlers(ve,k)}),f=u.events[k][L],f?L==="ready"&&u.domLoaded?r(hf({type:L})):f.push({func:r,scope:c}):(u.events[k][L]=f=[{func:r,scope:c}],f.fakeName=j,f.capture=te,f.nativeHandler=Q,L==="ready"?qu(n,Q,u):zb(n,j||L,Q,te))}return n=f=null,r}unbind(n,o,r){if(!n||mt(n)||Uu(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const w=f[b],k=u[w];if(k){if(r){let N=k.length;for(;N--;)if(k[N].func===r){const R=k.nativeHandler,L=k.fakeName,Q=k.capture,te=k.slice(0,N).concat(k.slice(N+1));te.nativeHandler=R,te.fakeName=L,te.capture=Q,u[w]=te}}(!r||k.length===0)&&(delete u[w],Zp(n,k.fakeName||w,k.nativeHandler,k.capture))}}}else ht(u,(f,b)=>{Zp(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(_n(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||mt(n)||Uu(n))return this;const c=hf({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||mt(n)||Uu(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}rc.Event=new rc;const jp=Qe.each,g2=Qe.grep,Wb="data-mce-style",dy=Qe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ci=(e,n,o)=>{Bt(o)||o===""?kr(e,n):Vr(e,n,o)},rE=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),zd=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&mt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},xh=(e,n)=>{const o=Mc(n,"style"),r=e.serialize(e.parse(o),hs(n));ci(n,Wb,r)},h2=(e,n)=>Vo(e)?_n(dy,n)?e+"":e+"px":e,p2=(e,n,o)=>{const r=rE(n);Bt(o)||o===""?Ha(e,r):hm(e,r,h2(o,r))},aE=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,w)=>{const k=re.fromDom(f);fe(n.url_converter)&&Pe(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),w,f));const N="data-mce-"+w;ci(k,N,b),ci(k,w,b)},get:(f,b)=>{const w=re.fromDom(f);return Mc(w,"data-mce-"+b)||Mc(w,b)}},u={style:{set:(f,b)=>{const w=re.fromDom(f);r&&ci(w,Wb,b),kr(w,"style"),G(b)&&Xf(w,e.parse(b))},get:f=>{const b=re.fromDom(f),w=Mc(b,Wb)||Mc(b,"style");return e.serialize(e.parse(w),hs(b))}}};return r&&(u.href=u.src=c),u},Vs=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,w=bh.forElement(re.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),k=[],N=n.schema?n.schema:ai({}),R=Em({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),L=n.ownEvents?new rc:rc.Event,Q=N.getBlockElements(),te=Ee=>G(Ee)?_n(Q,Ee):ze(Ee)&&(_n(Q,Ee.nodeName)||ff(N,Ee)),j=Ee=>Ee&&e&&G(Ee)?e.getElementById(Ee):Ee,ee=Ee=>{const Oe=j(Ee);return Pe(Oe)?re.fromDom(Oe):null},ve=(Ee,Oe,Ct="")=>{let ut;const Tn=ee(Ee);if(Pe(Tn)&&Os(Tn)){const Yo=Tp[Oe];Yo&&Yo.get?ut=Yo.get(Tn.dom,Oe):ut=Mc(Tn,Oe)}return Pe(ut)?ut:Ct},ge=Ee=>{const Oe=j(Ee);return Bt(Oe)?[]:Oe.attributes},we=(Ee,Oe,Ct)=>{ln(Ee,ut=>{if(ze(ut)){const Tn=re.fromDom(ut),Yo=Ct===""?null:Ct,lr=Mc(Tn,Oe),ir=Tp[Oe];ir&&ir.set?ir.set(Tn.dom,Yo,Oe):ci(Tn,Oe,Yo),lr!==Yo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Tn.dom,attrName:Oe,attrValue:Yo})}})},ke=(Ee,Oe)=>Ee.cloneNode(Oe),Ke=()=>n.root_element||e.body,Ot=Ee=>{const Oe=ah(Ee);return{x:Oe.x,y:Oe.y,w:Oe.width,h:Oe.height}},yt=(Ee,Oe)=>xn(e.body,j(Ee),Oe),Me=(Ee,Oe,Ct)=>{ln(Ee,ut=>{const Tn=re.fromDom(ut);p2(Tn,Oe,Ct),n.update_styles&&xh(R,Tn)})},Ne=(Ee,Oe)=>{ln(Ee,Ct=>{const ut=re.fromDom(Ct);ht(Oe,(Tn,Yo)=>{p2(ut,Yo,Tn)}),n.update_styles&&xh(R,ut)})},Ut=(Ee,Oe,Ct)=>{const ut=j(Ee);if(!(Bt(ut)||!ze(ut)))return Ct?Ci(re.fromDom(ut),rE(Oe)):(Oe=Oe.replace(/-(\D)/g,(Tn,Yo)=>Yo.toUpperCase()),Oe==="float"&&(Oe="cssFloat"),ut.style?ut.style[Oe]:void 0)},bn=Ee=>{const Oe=j(Ee);if(!Oe)return{w:0,h:0};let Ct=Ut(Oe,"width"),ut=Ut(Oe,"height");return(!Ct||Ct.indexOf("px")===-1)&&(Ct="0"),(!ut||ut.indexOf("px")===-1)&&(ut="0"),{w:parseInt(Ct,10)||Oe.offsetWidth||Oe.clientWidth,h:parseInt(ut,10)||Oe.offsetHeight||Oe.clientHeight}},Rn=Ee=>{const Oe=j(Ee),Ct=yt(Oe),ut=bn(Oe);return{x:Ct.x,y:Ct.y,w:ut.w,h:ut.h}},co=(Ee,Oe)=>{if(!Ee)return!1;const Ct=at(Ee)?Ee:[Ee];return $t(Ct,ut=>Nc(re.fromDom(ut),Oe))},Do=(Ee,Oe,Ct,ut)=>{const Tn=[];let Yo=j(Ee);ut=ut===void 0;const lr=Ct||(Ke().nodeName!=="BODY"?Ke().parentNode:null);if(G(Oe))if(Oe==="*")Oe=ze;else{const ir=Oe;Oe=vd=>co(vd,ir)}for(;Yo&&!(Yo===lr||Bt(Yo.nodeType)||Ui(Yo)||ch(Yo));){if(!Oe||Oe(Yo))if(ut)Tn.push(Yo);else return[Yo];Yo=Yo.parentNode}return ut?Tn:null},vs=(Ee,Oe,Ct)=>{const ut=Do(Ee,Oe,Ct,!1);return ut&&ut.length>0?ut[0]:null},Us=(Ee,Oe,Ct)=>{let ut=Oe;if(Ee){G(Oe)&&(ut=Tn=>co(Tn,Oe));for(let Tn=Ee[Ct];Tn;Tn=Tn[Ct])if(fe(ut)&&ut(Tn))return Tn}return null},oa=(Ee,Oe)=>Us(Ee,Oe,"nextSibling"),yl=(Ee,Oe)=>Us(Ee,Oe,"previousSibling"),fc=Ee=>fe(Ee.querySelectorAll),wt=(Ee,Oe)=>{var Ct,ut;const Tn=(ut=(Ct=j(Oe))!==null&&Ct!==void 0?Ct:n.root_element)!==null&&ut!==void 0?ut:e;return fc(Tn)?Ns(Tn.querySelectorAll(Ee)):[]},ln=function(Ee,Oe,Ct){const ut=Ct??this;if(at(Ee)){const Tn=[];return jp(Ee,(Yo,lr)=>{const ir=j(Yo);ir&&Tn.push(Oe.call(ut,ir,lr))}),Tn}else{const Tn=j(Ee);return Tn?Oe.call(ut,Tn):!1}},Ko=(Ee,Oe)=>{ln(Ee,Ct=>{ht(Oe,(ut,Tn)=>{we(Ct,Tn,ut)})})},Ft=(Ee,Oe)=>{ln(Ee,Ct=>{const ut=re.fromDom(Ct);Bd(ut,Oe)})},An=(Ee,Oe,Ct,ut,Tn)=>ln(Ee,Yo=>{const lr=G(Oe)?e.createElement(Oe):Oe;return Pe(Ct)&&Ko(lr,Ct),ut&&(!G(ut)&&ut.nodeType?lr.appendChild(ut):G(ut)&&Ft(lr,ut)),Tn?lr:Yo.appendChild(lr)}),Nn=(Ee,Oe,Ct)=>An(e.createElement(Ee),Ee,Oe,Ct,!0),Lt=Dl.decode,yo=Dl.encodeAllRaw,io=(Ee,Oe,Ct="")=>{let ut="<"+Ee;for(const Tn in Oe)Zr(Oe,Tn)&&(ut+=" "+Tn+'="'+yo(Oe[Tn])+'"');return ba(Ct)&&_n(N.getVoidElements(),Ee)?ut+" />":ut+">"+Ct+"</"+Ee+">"},zc=Ee=>{const Oe=e.createElement("div"),Ct=e.createDocumentFragment();Ct.appendChild(Oe),Ee&&(Oe.innerHTML=Ee);let ut;for(;ut=Oe.firstChild;)Ct.appendChild(ut);return Ct.removeChild(Oe),Ct},br=(Ee,Oe)=>ln(Ee,Ct=>{const ut=re.fromDom(Ct);return Oe&&De(Da(ut),Tn=>{wc(Tn)&&Tn.dom.length===0?Ls(Tn):is(ut,Tn)}),Ls(ut),ut.dom}),Jn=Ee=>ln(Ee,Oe=>{const Ct=Oe.attributes;for(let ut=Ct.length-1;ut>=0;ut--)Oe.removeAttributeNode(Ct.item(ut))}),ns=Ee=>R.parse(Ee),Ta=(Ee,Oe)=>R.serialize(Ee,Oe),or=Ee=>{if(Xm!==Vs.DOM&&e===document){if(o[Ee])return;o[Ee]=!0}let Oe=e.getElementById("mceDefaultStyles");if(!Oe){Oe=e.createElement("style"),Oe.id="mceDefaultStyles",Oe.type="text/css";const Ct=e.head;Ct.firstChild?Ct.insertBefore(Oe,Ct.firstChild):Ct.appendChild(Oe)}Oe.styleSheet?Oe.styleSheet.cssText+=Ee:Oe.appendChild(e.createTextNode(Ee))},Xr=Ee=>{Ee||(Ee=""),De(Ee.split(","),Oe=>{c[Oe]=!0,w.load(Oe).catch(jt)})},Es=(Ee,Oe,Ct)=>{ln(Ee,ut=>{if(ze(ut)){const Tn=re.fromDom(ut),Yo=Oe.split(" ");De(Yo,lr=>{Pe(Ct)?(Ct?Pu:Td)(Tn,lr):kd(Tn,lr)})}})},vr=(Ee,Oe)=>{Es(Ee,Oe,!0)},Ia=(Ee,Oe)=>{Es(Ee,Oe,!1)},gd=(Ee,Oe)=>{const Ct=ee(Ee),ut=Oe.split(" ");return Pe(Ct)&&Jo(ut,Tn=>Ed(Ct,Tn))},wl=Ee=>{ln(Ee,Oe=>Ha(re.fromDom(Oe),"display"))},Km=Ee=>{ln(Ee,Oe=>hm(re.fromDom(Oe),"display","none"))},Nu=Ee=>{const Oe=ee(Ee);return Pe(Oe)&&Br($c(Oe,"display"),"none")},wb=Ee=>(Ee||"mce_")+u++,Cb=Ee=>{const Oe=ee(Ee);return Pe(Oe)?ze(Oe.dom)?Oe.dom.outerHTML:Co(Oe):""},rm=(Ee,Oe)=>{ln(Ee,Ct=>{ze(Ct)&&(Ct.outerHTML=Oe)})},am=(Ee,Oe)=>{const Ct=j(Oe);return ln(Ee,ut=>{const Tn=Ct==null?void 0:Ct.parentNode,Yo=Ct==null?void 0:Ct.nextSibling;return Tn&&(Yo?Tn.insertBefore(ut,Yo):Tn.appendChild(ut)),ut})},qa=(Ee,Oe,Ct)=>ln(Oe,ut=>{var Tn;const Yo=at(Oe)?Ee.cloneNode(!0):Ee;return Ct&&jp(g2(ut.childNodes),lr=>{Yo.appendChild(lr)}),(Tn=ut.parentNode)===null||Tn===void 0||Tn.replaceChild(Yo,ut),ut}),hd=(Ee,Oe)=>{if(Ee.nodeName!==Oe.toUpperCase()){const Ct=Nn(Oe);return jp(ge(Ee),ut=>{we(Ct,ut.nodeName,ve(Ee,ut.nodeName))}),qa(Ct,Ee,!0),Ct}else return Ee},Ym=(Ee,Oe)=>{let Ct=Ee;for(;Ct;){let ut=Oe;for(;ut&&Ct!==ut;)ut=ut.parentNode;if(Ct===ut)break;Ct=Ct.parentNode}return!Ct&&Ee.ownerDocument?Ee.ownerDocument.documentElement:Ct},pd=Ee=>{if(ze(Ee)){const Oe=Ee.nodeName.toLowerCase()==="a"&&!ve(Ee,"href")&&ve(Ee,"id");if(ve(Ee,"name")||ve(Ee,"data-mce-bookmark")||Oe)return!0}return!1},bd=(Ee,Oe)=>{let Ct=0;if(pd(Ee))return!1;const ut=Ee.firstChild;if(ut){const Tn=new ia(ut,Ee),Yo=N?N.getWhitespaceElements():{},lr=Oe||(N?N.getNonEmptyElements():null);let ir=ut;do{if(ze(ir)){const vd=ir.getAttribute("data-mce-bogus");if(vd){ir=Tn.next(vd==="all");continue}const Sb=ir.nodeName.toLowerCase();if(lr&&lr[Sb]){if(Sb==="br"){Ct++,ir=Tn.next();continue}return!1}if(pd(ir))return!1}if(Uu(ir)||mt(ir)&&!mf(ir.data)||mt(ir)&&ir.parentNode&&Yo[ir.parentNode.nodeName]&&mf(ir.data))return!1;ir=Tn.next()}while(ir)}return Ct<=1},Uf=()=>e.createRange(),gc=(Ee,Oe,Ct)=>{let ut=Uf(),Tn,Yo;if(Ee&&Oe&&Ee.parentNode&&Oe.parentNode){const lr=Ee.parentNode;return ut.setStart(lr,zd(Ee)),ut.setEnd(Oe.parentNode,zd(Oe)),Tn=ut.extractContents(),ut=Uf(),ut.setStart(Oe.parentNode,zd(Oe)+1),ut.setEnd(lr,zd(Ee)+1),Yo=ut.extractContents(),lr.insertBefore(zp(Xm,Tn),Ee),Ct?lr.insertBefore(Ct,Ee):lr.insertBefore(Oe,Ee),lr.insertBefore(zp(Xm,Yo),Ee),br(Ee),Ct||Oe}else return},Yg=(Ee,Oe,Ct,ut)=>{if(at(Ee)){let Tn=Ee.length;const Yo=[];for(;Tn--;)Yo[Tn]=Yg(Ee[Tn],Oe,Ct,ut);return Yo}else return n.collect&&(Ee===e||Ee===r)&&k.push([Ee,Oe,Ct,ut]),L.bind(Ee,Oe,Ct,ut||Xm)},Wf=(Ee,Oe,Ct)=>{if(at(Ee)){let ut=Ee.length;const Tn=[];for(;ut--;)Tn[ut]=Wf(Ee[ut],Oe,Ct);return Tn}else{if(k.length>0&&(Ee===e||Ee===r)){let ut=k.length;for(;ut--;){const[Tn,Yo,lr]=k[ut];Ee===Tn&&(!Oe||Oe===Yo)&&(!Ct||Ct===lr)&&L.unbind(Tn,Yo,lr)}}return L.unbind(Ee,Oe,Ct)}},cm=(Ee,Oe,Ct)=>L.dispatch(Ee,Oe,Ct),xp=(Ee,Oe,Ct)=>L.dispatch(Ee,Oe,Ct),U0=Ee=>{if(Ee&&ze(Ee)){const Oe=Ee.getAttribute("data-mce-contenteditable");return Oe&&Oe!=="inherit"?Oe:Ee.contentEditable!=="inherit"?Ee.contentEditable:null}else return null},Xm={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:w,boundEvents:k,styles:R,schema:N,events:L,isBlock:te,root:null,clone:ke,getRoot:Ke,getViewPort:Ot,getRect:Rn,getSize:bn,getParent:vs,getParents:Do,get:j,getNext:oa,getPrev:yl,select:wt,is:co,add:An,create:Nn,createHTML:io,createFragment:zc,remove:br,setStyle:Me,getStyle:Ut,setStyles:Ne,removeAllAttribs:Jn,setAttrib:we,setAttribs:Ko,getAttrib:ve,getPos:yt,parseStyle:ns,serializeStyle:Ta,addStyle:or,loadCSS:Xr,addClass:vr,removeClass:Ia,hasClass:gd,toggleClass:Es,show:wl,hide:Km,isHidden:Nu,uniqueId:wb,setHTML:Ft,getOuterHTML:Cb,setOuterHTML:rm,decode:Lt,encode:yo,insertAfter:am,replace:qa,rename:hd,findCommonAncestor:Ym,run:ln,getAttribs:ge,isEmpty:bd,createRng:Uf,nodeIndex:zd,split:gc,bind:Yg,unbind:Wf,fire:xp,dispatch:cm,getContentEditable:U0,getContentEditableParent:Ee=>{const Oe=Ke();let Ct=null;for(let ut=Ee;ut&&ut!==Oe&&(Ct=U0(ut),Ct===null);ut=ut.parentNode);return Ct},isEditable:Ee=>{if(Pe(Ee)){const Oe=ze(Ee)?Ee:Ee.parentElement,Ct=U0(Ke())==="true";return Pe(Oe)&&fo(re.fromDom(Oe),Ct)}else return!1},destroy:()=>{if(k.length>0){let Ee=k.length;for(;Ee--;){const[Oe,Ct,ut]=k[Ee];L.unbind(Oe,Ct,ut)}}ht(c,(Ee,Oe)=>{w.unload(Oe),delete c[Oe]})},isChildOf:(Ee,Oe)=>Ee===Oe||Oe.contains(Ee),dumpRng:Ee=>"startContainer: "+Ee.startContainer.nodeName+", startOffset: "+Ee.startOffset+", endContainer: "+Ee.endContainer.nodeName+", endOffset: "+Ee.endOffset},Tp=aE(R,n,nt(Xm));return Xm};Vs.DOM=Vs(document),Vs.nodeIndex=zd;const cE=Vs.DOM,lE=0,b2=1,Zb=2,v2=3;class ji{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=cE;let u;const f=()=>{c.remove(k),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},w=()=>{f(),r("Failed to load script: "+n)},k=c.uniqueId();u=document.createElement("script"),u.id=k,u.type="text/javascript",u.src=Qe._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=w,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Zb}markDone(n){this.states[n]=Zb}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=lE),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(w,k)=>{Wo(o.scriptLoadedCallbacks,k).each(N=>{De(N,R=>R[w](k))}),delete o.scriptLoadedCallbacks[k]},c=w=>{const k=rn(w,N=>N.status==="rejected");return k.length>0?Promise.reject(ur(k,({reason:N})=>at(N)?N:[N])):Promise.resolve()},u=w=>Promise.allSettled(Vt(w,k=>o.states[k]===Zb?(r("resolve",k),Promise.resolve()):o.states[k]===v2?(r("reject",k),Promise.reject(k)):(o.states[k]=b2,o.loadScript(k).then(()=>{o.states[k]=Zb,r("resolve",k);const N=o.queue;return N.length>0?(o.queue=[],u(N).then(c)):Promise.resolve()},()=>(o.states[k]=v2,r("reject",k),Promise.reject(k)))))),f=w=>(o.loading=!0,u(w).then(k=>{o.loading=!1;const N=o.queueLoadedCallbacks.shift();return H.from(N).each(Ps),c(k)})),b=Xa(n);return o.loading?new Promise((w,k)=>{o.queueLoadedCallbacks.push(()=>f(b).then(w,k))}):f(b)}}ji.ScriptLoader=new ji;const xc=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},jb=e=>Xe(e)&&_n(e,"raw"),_m=e=>at(e)&&e.length>1,ug={},ac=xc("en"),y2=()=>Wo(ug,ac.get()),Ku={getData:()=>so(ug,e=>({...e})),setCode:e=>{e&&ac.set(e)},getCode:()=>ac.get(),add:(e,n)=>{let o=ug[e];o||(ug[e]=o={}),ht(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=y2().getOr({}),o=f=>fe(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return Wo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(jb(e))return o(e.raw);if(_m(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(w,k)=>_n(f,k)?o(f[k]):w);return u(b)}return u(c(e))},isRtl:()=>y2().bind(e=>Wo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>_n(ug,e)},Rl=()=>{const e=[],n={},o={},r=[],c=(j,ee)=>{const ve=rn(r,ge=>ge.name===j&&ge.state===ee);De(ve,ge=>ge.resolve())},u=j=>_n(n,j),f=j=>_n(o,j),b=j=>{if(o[j])return o[j].instance},w=(j,ee)=>{const ve=Ku.getCode(),ge=","+(ee||"")+",";!ve||ee&&ge.indexOf(","+ve+",")===-1||ji.ScriptLoader.add(n[j]+"/langs/"+ve+".js")},k=(j,ee)=>{Rl.languageLoad!==!1&&(u(j)?w(j,ee):te(j,"loaded").then(()=>w(j,ee)))},N=(j,ee)=>(e.push(ee),o[j]={instance:ee},c(j,"added"),ee),R=j=>{delete n[j],delete o[j]},L=(j,ee)=>G(ee)?G(j)?{prefix:"",resource:ee,suffix:""}:{prefix:j.prefix,resource:ee,suffix:j.suffix}:ee,Q=(j,ee)=>{if(n[j])return Promise.resolve();let ve=G(ee)?ee:ee.prefix+ee.resource+ee.suffix;ve.indexOf("/")!==0&&ve.indexOf("://")===-1&&(ve=Rl.baseURL+"/"+ve),n[j]=ve.substring(0,ve.lastIndexOf("/"));const ge=()=>(c(j,"loaded"),Promise.resolve());return o[j]?ge():ji.ScriptLoader.add(ve).then(ge)},te=(j,ee="added")=>ee==="added"&&f(j)||ee==="loaded"&&u(j)?Promise.resolve():new Promise(ve=>{r.push({name:j,state:ee,resolve:ve})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:k,add:N,remove:R,createUrl:L,load:Q,waitFor:te}};Rl.languageLoad=!0,Rl.baseURL="",Rl.PluginManager=Rl(),Rl.ThemeManager=Rl(),Rl.ModelManager=Rl();const Ma=e=>{const n=xc(H.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(H.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(H.some(b))}}},x2=e=>{const n=xc(H.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(H.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(H.some(setInterval(b,e)))}}},Qs=()=>{const e=Ma(jt);return{...e,on:o=>e.get().each(o)}},Xc=(e,n)=>{let o=null;return{cancel:()=>{q(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},hu=(e,n)=>{let o=null;const r=()=>{q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Jc=nt("mce-annotation"),Om=nt("data-mce-annotation"),Gp=nt("data-mce-annotation-uid"),vf=nt("data-mce-annotation-active"),Ei=nt("data-mce-annotation-classes"),Gi=nt("data-mce-annotation-attrs"),my=e=>n=>ss(n,e),qp=(e,n)=>{const o=e.selection.getRng(),r=re.fromDom(o.startContainer),c=re.fromDom(e.getBody()),u=n.fold(()=>"."+Jc(),w=>`[${Om()}="${w}"]`),f=Ad(r,o.startOffset).getOr(r);return On(f,u,my(c)).bind(w=>al(w,`${Gp()}`).bind(k=>al(w,`${Om()}`).map(N=>{const R=k2(e,k);return{uid:k,name:N,elements:R}})))},T2=e=>Os(e)&&Ed(e,Jc()),fy=(e,n)=>La(e,"data-mce-bogus")||Np(e,'[data-mce-bogus="all"]',my(n)),k2=(e,n)=>{const o=re.fromDom(e.getBody()),r=nc(o,`[${Gp()}="${n}"]`);return rn(r,c=>!fy(c,o))},Th=(e,n)=>{const o=re.fromDom(e.getBody()),r=nc(o,`[${Om()}="${n}"]`),c={};return De(r,u=>{if(!fy(u,o)){const f=Mc(u,Gp()),b=Wo(c,f).getOr([]);c[f]=b.concat([u])}}),c},E2=(e,n)=>{const o=xc({}),r=()=>({listeners:[],previous:Qs()}),c=(R,L)=>{u(R,Q=>(L(Q),Q))},u=(R,L)=>{const Q=o.get(),te=Wo(Q,R).getOrThunk(r),j=L(te);Q[R]=j,o.set(Q)},f=(R,L,Q)=>{c(R,te=>{De(te.listeners,j=>j(!0,R,{uid:L,nodes:Vt(Q,ee=>ee.dom)}))})},b=R=>{c(R,L=>{De(L.listeners,Q=>Q(!1,R))})},w=(R,L)=>{De(k2(e,R),Q=>{L?Vr(Q,vf(),"true"):kr(Q,vf())})},k=hu(()=>{const R=qt(n.getNames());De(R,L=>{u(L,Q=>{const te=Q.previous.get();return qp(e,H.some(L)).fold(()=>{te.each(j=>{b(L),Q.previous.clear(),w(j,!1)})},({uid:j,name:ee,elements:ve})=>{Br(te,j)||(te.each(ge=>w(ge,!1)),f(ee,j,ve),Q.previous.set(j),w(j,!0))}),{previous:Q.previous,listeners:Q.listeners}})})},30);return e.on("remove",()=>{k.cancel()}),e.on("NodeChange",()=>{k.throttle()}),{addListener:(R,L)=>{u(R,Q=>({previous:Q.previous,listeners:Q.listeners.concat([L])}))}}},iE=(e,n)=>{const o=Om(),r=u=>H.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Gp(),null),u.attr(Om(),null),u.attr(vf(),null);const w=H.from(u.attr(Gi())).map(L=>L.split(",")).getOr([]),k=H.from(u.attr(Ei())).map(L=>L.split(",")).getOr([]);De(w,L=>u.attr(L,null));const N=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=tt(N,[Jc()].concat(k));u.attr("class",R.length>0?R.join(" "):null),u.attr(Ei(),null),u.attr(Gi(),null)};e.serializer.addTempAttr(vf()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},uE=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Wo(e,c).map(u=>u.settings),getNames:()=>xs(e)}};let gy=0;const _2=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return gy++,e+"_"+r+gy+String(o)},O2=(e,n)=>{De(n,o=>{Pu(e,o)})},A2=(e,n)=>{De(n,o=>{Td(e,o)})},D2=(e,n)=>re.fromDom(e.dom.cloneNode(n)),yf=e=>D2(e,!1),R2=e=>D2(e,!0),M2=(e,n)=>{const o=re.fromTag(n),r=um(e);return tc(o,r),o},dE=(e,n)=>{const o=M2(e,n);Lu(e,o);const r=Da(e);return Hu(o,r),Ls(e),o},N2=(e,n,o=_e)=>{const r=new ia(e,n),c=u=>{let f;do f=r[u]();while(f&&!mt(f)&&!o(f));return H.from(f).filter(mt)};return{current:()=>H.from(r.current()).filter(mt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},dg=(e,n)=>{const o=n||(f=>e.isBlock(f)||gr(f)||oo(f)),r=(f,b,w,k)=>{if(mt(f)){const N=k(f,b,f.data);if(N!==-1)return H.some({container:f,offset:N})}return w().bind(N=>r(N.container,N.offset,w,k))};return{backwards:(f,b,w,k)=>{const N=N2(f,k??e.getRoot(),o);return r(f,b,()=>N.prev().map(R=>({container:R,offset:R.length})),w).getOrNull()},forwards:(f,b,w,k)=>{const N=N2(f,k??e.getRoot(),o);return r(f,b,()=>N.next().map(R=>({container:R,offset:0})),w).getOrNull()}}},Er=Math.round,Am=e=>e?{left:Er(e.left),top:Er(e.top),bottom:Er(e.bottom),right:Er(e.right),width:Er(e.width),height:Er(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},B2=(e,n)=>(e=Am(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),mE=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Kp=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,cc=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Kp(n.top-e.bottom,e,n)},zl=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Kp(n.bottom-e.top,e,n),hy=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,qb=e=>zo(e,(n,o)=>n.fold(()=>H.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return H.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),H.none()),Kb=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},fE=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),$2=(e,n,o)=>Math.min(Math.max(e,n),o),Yp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Ul=(e,n)=>{if(ze(e)&&e.hasChildNodes()){const o=e.childNodes,r=$2(n,0,o.length-1);return o[r]}else return e},P2=(e,n)=>{if(!(n<0&&ze(e)&&e.hasChildNodes()))return Ul(e,n)},_r=new RegExp("[Ì-Í¯Ò-ÒÒ-ÒÖ-Ö½Ö¿×-××-××Ø-ØÙ-ÙÙ°Û-ÛÛ-Û¤Û§-Û¨Ûª-Û­ÜÜ°-ÝÞ¦-Þ°ß«-ß³à -à à -à £à ¥-à §à ©-à ­à¡-à¡à££-à¤à¤ºà¤¼à¥-à¥à¥à¥-à¥à¥¢-à¥£à¦à¦¼à¦¾à§-à§à§à§à§¢-à§£à¨-à¨à¨¼à©-à©à©-à©à©-à©à©à©°-à©±à©µàª-àªàª¼à«-à«à«-à«à«à«¢-à«£à¬à¬¼à¬¾à¬¿à­-à­à­à­à­à­¢-à­£à®à®¾à¯à¯à¯à°à°¾-à±à±-à±à±-à±à±-à±à±¢-à±£à²à²¼à²¿à³à³à³-à³à³-à³à³¢-à³£à´à´¾àµ-àµàµàµàµ¢-àµ£à·à·à·-à·à·à·à¸±à¸´-à¸ºà¹-à¹àº±àº´-àº¹àº»-àº¼à»-à»à¼-à¼à¼µà¼·à¼¹à½±-à½¾à¾-à¾à¾-à¾à¾-à¾à¾-à¾¼à¿á­-á°á²-á·á¹-áºá½-á¾á-áá-á á±-á´áá-áááá-áá-áá²-á´á-áá²-á³á´-áµá·-á½áá-ááá -á á¢©á¤ -á¤¢á¤§-á¤¨á¤²á¤¹-á¤»á¨-á¨á¨á©á©-á©á© á©¢á©¥-á©¬á©³-á©¼á©¿áª°-áª½áª¾á¬-á¬á¬´á¬¶-á¬ºá¬¼á­á­«-á­³á®-á®á®¢-á®¥á®¨-á®©á®«-á®­á¯¦á¯¨-á¯©á¯­á¯¯-á¯±á°¬-á°³á°¶-á°·á³-á³á³-á³ á³¢-á³¨á³­á³´á³¸-á³¹á·-á·µá·¼-á·¿â-ââ-ââ-â â¡â¢-â¤â¥-â°â³¯-â³±âµ¿â· -â·¿ãª-ã­ã®-ã¯ã-ãê¯ê°-ê²ê´-ê½ê-êê°-ê±ê ê ê ê ¥-ê ¦ê£ê£ -ê£±ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³ê¦¶-ê¦¹ê¦¼ê§¥ê¨©-ê¨®ê¨±-ê¨²ê¨µ-ê¨¶ê©ê©ê©¼êª°êª²-êª´êª·-êª¸êª¾-êª¿ê«ê«¬-ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬ï¸-ï¸ï¸ -ï¸¯ï¾-ï¾]"),Yu=e=>G(e)&&e.charCodeAt(0)>=768&&_r.test(e),Ud=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},gE=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},py=ze,I2=As,wf=Vu("display","block table"),F2=Vu("float","left right"),Wd=gE(py,I2,po(F2)),by=po(Vu("white-space","pre pre-line pre-wrap")),Xp=mt,vy=gr,Yb=Vs.nodeIndex,Jp=P2,yy=e=>e?e.createRange():Vs.DOM.createRng(),Qp=e=>G(e)&&/[\r\n\t ]/.test(e),L2=e=>!!e.setStart&&!!e.setEnd,Dm=e=>{const n=e.startContainer,o=e.startOffset;if(Qp(e.toString())&&by(n.parentNode)&&mt(n)){const r=n.data;if(Qp(r[o-1])||Qp(r[o+1]))return!0}return!1},Xb=e=>{const n=e.ownerDocument,o=yy(n),r=n.createTextNode(ps),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Am(o.getBoundingClientRect());return c.removeChild(r),u},H2=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&mt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Cf(u)}else return null},wy=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Cf=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Am(r[0]):o=Am(e.getBoundingClientRect()),!L2(e)&&vy(e)&&wy(o)?Xb(e):wy(o)&&L2(e)&&(n=H2(e))!==null&&n!==void 0?n:o},Zd=(e,n)=>{const o=B2(e,n);return o.width=1,o.right=o.left+1,o},mg=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&mE(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const w=yy(f.ownerDocument);if(b<f.data.length){if(Yu(f.data[b]))return;if(Yu(f.data[b-1])&&(w.setStart(f,b),w.setEnd(f,b+1),!Dm(w))){o(Zd(Cf(w),!1));return}}b>0&&(w.setStart(f,b-1),w.setEnd(f,b),Dm(w)||o(Zd(Cf(w),!1))),b<f.data.length&&(w.setStart(f,b),w.setEnd(f,b+1),Dm(w)||o(Zd(Cf(w),!0)))},c=e.container(),u=e.offset();if(Xp(c))return r(c,u),n;if(py(c))if(e.isAtEnd()){const f=Jp(c,u);Xp(f)&&r(f,f.data.length),Wd(f)&&!vy(f)&&o(Zd(Cf(f),!1))}else{const f=Jp(c,u);if(Xp(f)&&r(f,0),Wd(f)&&e.isAtEnd())return o(Zd(Cf(f),!1)),n;const b=Jp(e.container(),e.offset()-1);Wd(b)&&!vy(b)&&(wf(b)||wf(f)||!Wd(f))&&o(Zd(Cf(b),!1)),Wd(f)&&o(Zd(Cf(f),!0))}return n},He=(e,n,o)=>{const r=()=>(Xp(e),n===0),c=()=>Xp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const N=yy(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},f=()=>(o||(o=mg(He(e,n))),o),b=()=>f().length>0,w=N=>N&&e===N.container()&&n===N.offset(),k=N=>Jp(e,N?n-1:n);return{container:nt(e),offset:nt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:w,getNode:k}};He.fromRangeStart=e=>He(e.startContainer,e.startOffset),He.fromRangeEnd=e=>He(e.endContainer,e.endOffset),He.after=e=>He(e.parentNode,Yb(e)+1),He.before=e=>He(e.parentNode,Yb(e)),He.isAbove=(e,n)=>qr(Bn(n.getClientRects()),Yt(e.getClientRects()),cc).getOr(!1),He.isBelow=(e,n)=>qr(Yt(n.getClientRects()),Bn(e.getClientRects()),zl).getOr(!1),He.isAtStart=e=>e?e.isAtStart():!1,He.isAtEnd=e=>e?e.isAtEnd():!1,He.isTextPosition=e=>e?mt(e.container()):!1,He.isElementPosition=e=>!He.isTextPosition(e);const Ao=(e,n)=>{mt(n)&&n.data.length===0&&e.remove(n)},Ur=(e,n,o)=>{n.insertNode(o),Ao(e,o.previousSibling),Ao(e,o.nextSibling)},fg=(e,n,o)=>{const r=H.from(o.firstChild),c=H.from(o.lastChild);n.insertNode(o),r.each(u=>Ao(e,u.previousSibling)),c.each(u=>Ao(e,u.nextSibling))},e1=(e,n,o)=>{ch(o)?fg(e,n,o):Ur(e,n,o)},us=mt,Cy=oc,t1=Vs.nodeIndex,Ua=e=>{const n=e.parentNode;return Cy(n)?Ua(n):n},jd=e=>e?Be(e.childNodes,(n,o)=>(Cy(o)&&o.nodeName!=="BR"?n=n.concat(jd(o)):n.push(o),n),[]):[],hE=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&us(o);)n+=o.data.length;return n},V2=e=>n=>e===n,z2=e=>{let n,o;n=jd(Ua(e)),o=Re(n,V2(e),e),n=n.slice(0,o+1);const r=Be(n,(c,u,f)=>(us(u)&&us(n[f-1])&&c++,c),0);return n=ue(n,ei([e.nodeName])),o=Re(n,V2(e),e),o-r},kh=e=>(us(e)?"text()":e.nodeName.toLowerCase())+"["+z2(e)+"]",Eh=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},Jb=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(us(r))u=hE(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(kh(r));let f=Eh(e,r);return f=ue(f,po(oc)),o=o.concat(yr(f,b=>kh(b))),o.reverse().join("/")+","+u},Sy=(e,n,o)=>{let r=jd(e);return r=ue(r,(c,u)=>!us(c)||!us(r[u-1])),r=ue(r,ei([n])),r[o]},Ml=(e,n)=>{let o=e,r=0;for(;us(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!us(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return us(e)&&n>e.data.length&&(n=e.data.length),He(e,n)},_h=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Be(r,(f,b)=>{const w=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return w?(w[1]==="text()"&&(w[1]="#text"),Sy(f,w[1],parseInt(w[2],10))):null},e);if(!u)return null;if(!us(u)&&u.parentNode){let f;return c==="after"?f=t1(u)+1:f=t1(u),He(u.parentNode,f)}return Ml(u,parseInt(c,10))},n1=oo,U2=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&mt(c);c=c.previousSibling)r+=e(c.data).length;return r},gg=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],w=e.getRoot();if(mt(u))b.push(o?U2(n,u,f):f);else{let k=0;const N=u.childNodes;f>=N.length&&N.length&&(k=1,f=Math.max(0,N.length-1)),b.push(e.nodeIndex(N[f],o)+k)}for(let k=u;k&&k!==w;k=k.parentNode)b.push(e.nodeIndex(k,o));return b},_i=(e,n,o,r)=>{const c=n.dom,u=gg(c,e,o,r,!0),f=n.isForward(),b=wm(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const w=gg(c,e,o,r,!1);return{start:u,end:w,forward:f,...b}}},xy=(e,n,o)=>{let r=0;return Qe.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},Tc=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(ze(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},W2=e=>(Tc(e,!0),Tc(e,!1),e),Rm=(e,n)=>{if(ze(e)&&(e=Ul(e,n),n1(e)))return e;if(ts(e)){mt(e)&&qn(e)&&(e=e.parentNode);let o=e.previousSibling;if(n1(o)||(o=e.nextSibling,n1(o)))return o}},Qb=e=>Rm(e.startContainer,e.startOffset)||Rm(e.endContainer,e.endOffset),Ty=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||n1(r)){const f=r.nodeName;return{name:f,index:xy(o.dom,f,r)}}const u=Qb(c);if(u){const f=u.tagName;return{name:f,index:xy(o.dom,f,u)}}return _i(e,o,n,c)},Z2=e=>{const n=e.getRng();return{start:Jb(e.dom.getRoot(),He.fromRangeStart(n)),end:Jb(e.dom.getRoot(),He.fromRangeEnd(n)),forward:e.isForward()}},ky=e=>({rng:e.getRng(),forward:e.isForward()}),ev=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Ey=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,w=e.isForward();if(b==="IMG")return{name:b,index:xy(o,b,f)};const k=W2(r.cloneRange());if(!u){k.collapse(!1);const R=ev(o,c+"_end",n);e1(o,k,R)}r=W2(r),r.collapse(!0);const N=ev(o,c+"_start",n);return e1(o,r,N),e.moveToBookmark({id:c,keep:!0,forward:w}),{id:c,forward:w}},pE=(e,n,o=!1)=>n===2?Ty(Ie,o,e):n===3?Z2(e):n?ky(e):Ey(e,!1),_y=je(Ty,No,!0),kc=e=>{const n=u=>u(e),o=nt(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:gt,isError:_e,map:u=>Or.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>H.some(e)};return c},Na=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:_e,isError:gt,map:n,mapError:r=>Or.error(r(e)),bind:n,exists:_e,forall:gt,getOr:No,or:No,getOrThunk:Bo,orThunk:Bo,getOrDie:Xo(String(e)),each:jt,toOptional:H.none};return o},Or={value:kc,error:Na,fromOption:(e,n)=>e.fold(()=>Na(n),kc)},Ar={generate:e=>{if(!at(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return De(e,(r,c)=>{const u=xs(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!at(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...w)=>{const k=w.length;if(k!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+k);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,w)},match:R=>{const L=xs(R);if(n.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+L.join(","));if(!Jo(n,te=>Tt(L,te)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,w)},log:R=>{console.log(R,{constructors:n,constructor:f,params:w})}}}}),o}};Ar.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Oy=e=>{const n=[],o=[];return De(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Ay=e=>e.type==="inline-command"||e.type==="inline-format",j2=e=>e.type==="block-command"||e.type==="block-format",tv=e=>{const n=r=>Or.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(at(e.format)){if(!Jo(e.format,G))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(G(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return Or.value(c(f))}else return e.cmd!==void 0?G(e.cmd)?Or.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Xe(e))return n("Raw pattern is not an object");if(!G(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!G(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?G(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Or.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},o1=e=>rn(e,j2),nv=e=>rn(e,Ay),ov=(e,n)=>({inlinePatterns:nv(e),blockPatterns:o1(e),dynamicPatternsLookup:n}),s1=e=>{const n=Oy(Vt(e,tv));return De(n.errors,o=>console.error(o.message,o.pattern)),n.values},G2=e=>n=>{const o=e(n);return s1(o)},q2=wo().deviceType,K2=q2.isTouch(),Dy=Vs.DOM,sv=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return zo(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[hc(u)]=hc(f),o},{})},rv=e=>qe(e,RegExp),cn=e=>n=>n.options.get(e),Ry=e=>G(e)||Xe(e),Y2=(e,n="")=>o=>{const r=G(o);if(r)if(o.indexOf("=")!==-1){const c=sv(o);return{value:Wo(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},bE=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Y2(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Y2(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=G(o)&&Lo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Tt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>ft(o)?{valid:!0,value:o}:G(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||G(o)||Zn(o,G);return r?G(o)?{value:Vt(o.split(","),hc),valid:r}:at(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:pg(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=G(o)||Zn(o,G);return r?{value:at(o)?o:Vt(o.split(","),hc),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=ft(o)||G(o);return r?o===!1||q2.isiPhone()||q2.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!K2}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||G(o)||fe(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||G(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Ry}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Ry}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Ry}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>G(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Zn(o,Xe)||o===!1?{value:s1(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>fe(o)?{value:G2(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Zn(o,rv)?{value:o,valid:!0}:rv(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ku.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Dy.getAttrib(e.getElement(),"placeholder")})})},X2=cn("iframe_attrs"),vt=cn("doctype"),J2=cn("document_base_url"),Ec=cn("body_id"),vE=cn("body_class"),My=cn("content_security_policy"),yE=cn("br_in_pre"),ua=cn("forced_root_block"),av=cn("forced_root_block_attrs"),wE=cn("newline_behavior"),pu=cn("br_newline_selector"),Ny=cn("no_newline_selector"),r1=cn("keep_styles"),Gd=cn("end_container_on_empty_block"),bu=cn("automatic_uploads"),cv=cn("images_reuse_filename"),vu=cn("images_replace_blob_uris"),Q2=cn("icons"),By=cn("icons_url"),lv=cn("images_upload_url"),Sf=cn("images_upload_base_path"),eS=cn("images_upload_credentials"),$y=cn("images_upload_handler"),CE=cn("content_css_cors"),iv=cn("referrer_policy"),a1=cn("language"),_c=cn("language_url"),tS=cn("indent_use_margin"),Oh=cn("indentation"),nS=cn("content_css"),uv=cn("content_style"),oS=cn("font_css"),sS=cn("directionality"),SE=cn("inline_boundaries_selector"),Ah=cn("object_resizing"),xE=cn("resize_img_proportional"),rS=cn("placeholder"),dv=cn("event_root"),aS=cn("service_message"),hg=cn("theme"),c1=cn("theme_url"),Dh=cn("model"),Xu=cn("model_url"),Cs=cn("inline_boundaries"),cS=cn("formats"),bl=cn("preview_styles"),Py=cn("format_empty_lines"),lS=cn("format_noneditable_selector"),iS=cn("custom_ui_selector"),pg=cn("inline"),TE=cn("hidden_input"),uS=cn("submit_patch"),dS=cn("add_form_submit_trigger"),kE=cn("add_unload_trigger"),EE=cn("custom_undo_redo_levels"),_E=cn("disable_nodechange"),mS=cn("readonly"),Rh=cn("content_css_cors"),l1=cn("plugins"),i3=cn("external_plugins"),bg=cn("block_unsupported_drop"),OE=cn("visual"),AE=cn("visual_table_class"),fS=cn("visual_anchor_class"),gS=cn("iframe_aria_text"),hS=cn("setup"),vg=cn("init_instance_callback"),pS=cn("urlconverter_callback"),DE=cn("auto_focus"),RE=cn("browser_spellcheck"),ME=cn("protect"),Mh=cn("paste_block_drop"),yg=cn("paste_data_images"),mv=cn("paste_preprocess"),fv=cn("paste_postprocess"),bS=cn("paste_webkit_styles"),qd=cn("paste_remove_styles_if_webkit"),gv=cn("paste_merge_formats"),vS=cn("smart_paste"),Ju=cn("paste_as_text"),xf=cn("paste_tab_spaces"),Iy=cn("allow_html_data_urls"),yS=cn("text_patterns"),NE=cn("text_patterns_lookup"),wS=cn("noneditable_class"),CS=cn("editable_class"),BE=cn("noneditable_regexp"),$E=cn("preserve_cdata"),SS=cn("highlight_on_focus"),hv=cn("xss_sanitization"),xS=e=>e.options.isSet("text_patterns_lookup"),PE=e=>Qe.explode(e.options.get("font_size_style_values")),IE=e=>Qe.explode(e.options.get("font_size_classes")),FE=e=>e.options.get("encoding")==="xml",Fy=e=>Qe.explode(e.options.get("images_file_types")),TS=cn("table_tab_navigation"),kS=ze,ES=mt,_S=e=>{const n=e.parentNode;n&&n.removeChild(e)},i1=e=>{const n=Ie(e);return{count:e.length-n.length,text:n}},Ly=e=>{let n;for(;(n=e.data.lastIndexOf(W))!==-1;)e.deleteData(n,1)},Hy=(e,n)=>(Tf(e),n),u1=(e,n)=>{const o=i1(e.data.substr(0,n.offset())),r=i1(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Ly(e),He(e,n.offset()-o.count)):n},pv=(e,n)=>{const o=n.container(),r=js(Ns(o.childNodes),e).map(c=>c<n.offset()?He(o,n.offset()-1):n).getOr(n);return Tf(e),r},Vy=(e,n)=>ES(e)&&n.container()===e?u1(e,n):Hy(e,n),OS=(e,n)=>n.container()===e.parentNode?pv(e,n):Hy(e,n),AS=(e,n)=>He.isTextPosition(n)?Vy(e,n):OS(e,n),Tf=e=>{kS(e)&&ts(e)&&(ks(e)?e.removeAttribute("data-mce-caret"):_S(e)),ES(e)&&(Ly(e),e.data.length===0&&_S(e))},LE=oo,DS=_l,d1=Vl,HE="*[contentEditable=false],video,audio,embed,object",bv=(e,n,o)=>{const r=B2(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},VE=e=>{var n,o;const r=nc(re.fromDom(e),HE);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(ym(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,oi(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},zE=(e,n,o,r)=>{const c=Qs();let u,f;const b=ua(e),w=e.dom,k=(j,ee)=>{let ve;if(N(),d1(ee))return null;if(o(ee)){const ge=Zu(b,ee,j),we=bv(n,ee,j);w.setStyle(ge,"top",we.top),f=ge;const ke=w.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});w.setStyles(ke,{...we}),w.add(n,ke),c.set({caret:ke,element:ee,before:j}),j&&w.addClass(ke,"mce-visual-caret-before"),R(),ve=ee.ownerDocument.createRange(),ve.setStart(ge,0),ve.setEnd(ge,0)}else return f=cr(ee,j),ve=ee.ownerDocument.createRange(),wg(f.nextSibling)?(ve.setStart(f,0),ve.setEnd(f,0)):(ve.setStart(f,1),ve.setEnd(f,1)),ve;return ve},N=()=>{VE(n),f&&(Tf(f),f=null),c.on(j=>{w.remove(j.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=setInterval(()=>{c.on(j=>{r()?w.toggleClass(j.caret,"mce-visual-caret-hidden"):w.addClass(j.caret,"mce-visual-caret-hidden")})},500)};return{show:k,hide:N,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(j=>{const ee=bv(n,j.element,j.before);w.setStyles(j.caret,{...ee})})},destroy:()=>clearInterval(u)}},RS=()=>Io.browser.isFirefox(),wg=e=>LE(e)||DS(e),m1=e=>(wg(e)||xi(e)&&RS())&&mm(re.fromDom(e)).exists(fo),f1=Wi,zy=oo,UE=_l,Uy=Vu("display","block table table-cell table-caption list-item"),Qc=ts,MS=qn,Nh=ze,WE=mt,g1=As,Cg=e=>e>0,Sg=e=>e<0,vv=(e,n)=>{let o;for(;o=e(n);)if(!MS(o))return o;return null},Bh=(e,n,o,r,c)=>{const u=new ia(e,r),f=zy(e)||MS(e);let b;if(Sg(n)){if(f&&(b=vv(u.prev.bind(u),!0),o(b)))return b;for(;b=vv(u.prev.bind(u),c);)if(o(b))return b}if(Cg(n)){if(f&&(b=vv(u.next.bind(u),!0),o(b)))return b;for(;b=vv(u.next.bind(u),c);)if(o(b))return b}return null},yv=(e,n)=>{const o=c=>f1(c.dom),r=c=>c.dom===n;return Zs(re.fromDom(e),o,r).map(c=>c.dom).getOr(n)},kf=(e,n)=>{for(;e&&e!==n;){if(Uy(e))return e;e=e.parentNode}return null},da=(e,n,o)=>kf(e.container(),o)===kf(n.container(),o),xg=(e,n)=>{if(!n)return H.none();const o=n.container(),r=n.offset();return Nh(o)?H.from(o.childNodes[r+e]):H.none()},Wy=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},ZE=(e,n,o)=>kf(n,e)===kf(o,e),Zy=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&Qc(u)&&(u=u[r]),zy(u)||UE(u)){if(ZE(n,u,c))return u;break}if(g1(u))break;c=c.parentNode}return null},$h=je(Wy,!0),Tg=je(Wy,!1),jy=(e,n,o)=>{let r;const c=je(Zy,!0,n),u=je(Zy,!1,n),f=o.startContainer,b=o.startOffset;if(qn(f)){const w=WE(f)?f.parentNode:f,k=w.getAttribute("data-mce-caret");if(k==="before"&&(r=w.nextSibling,m1(r)))return $h(r);if(k==="after"&&(r=w.previousSibling,m1(r)))return Tg(r)}if(!o.collapsed)return o;if(mt(f)){if(Qc(f)){if(e===1){if(r=u(f),r)return $h(r);if(r=c(f),r)return Tg(r)}if(e===-1){if(r=c(f),r)return Tg(r);if(r=u(f),r)return $h(r)}return o}if(ym(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?$h(r):o;if(oi(f)&&b<=1)return e===-1&&(r=c(f),r)?Tg(r):o;if(b===f.data.length)return r=u(f),r?$h(r):o;if(b===0)return r=c(f),r?Tg(r):o}return o},Ph=(e,n)=>xg(e?0:-1,n).filter(zy),Gy=(e,n,o)=>{const r=jy(e,n,o);return e===-1?He.fromRangeStart(r):He.fromRangeEnd(r)},h1=e=>H.from(e.getNode()).map(re.fromDom),NS=e=>H.from(e.getNode(!0)).map(re.fromDom),Mm=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},wv=(e,n)=>{const o=da(e,n);return!o&&gr(e.getNode())?!0:o};var Wa;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Wa||(Wa={}));const BS=oo,yu=mt,qy=ze,Qu=gr,ed=As,Ky=df,Ih=Nb,jE=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},$S=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Cv=(e,n)=>{if(Cg(e)){if(ed(n.previousSibling)&&!yu(n.previousSibling))return He.before(n);if(yu(n))return He(n,0)}if(Sg(e)){if(ed(n.nextSibling)&&!yu(n.nextSibling))return He.after(n);if(yu(n))return He(n,n.data.length)}return Sg(e)?Qu(n)?He.before(n):He.after(n):He.before(n)},Sv=(e,n)=>{const o=n.nextSibling;return o&&ed(o)?yu(o)?He(o,0):He.before(o):xv(Wa.Forwards,He.after(n),e)},xv=(e,n,o)=>{let r,c,u,f;if(!qy(o)||!n)return null;if(n.isEqual(He.after(o))&&o.lastChild){if(f=He.after(o.lastChild),Sg(e)&&ed(o.lastChild)&&qy(o.lastChild))return Qu(o.lastChild)?He.before(o.lastChild):f}else f=n;const b=f.container();let w=f.offset();if(yu(b)){if(Sg(e)&&w>0)return He(b,--w);if(Cg(e)&&w<b.length)return He(b,++w);r=b}else{if(Sg(e)&&w>0&&(c=$S(b,w-1),ed(c)))return!Ky(c)&&(u=Bh(c,e,Ih,c),u)?yu(u)?He(u,u.data.length):He.after(u):yu(c)?He(c,c.data.length):He.before(c);if(Cg(e)&&w<b.childNodes.length&&(c=$S(b,w),ed(c)))return Qu(c)?Sv(o,c):!Ky(c)&&(u=Bh(c,e,Ih,c),u)?yu(u)?He(u,0):He.before(u):yu(c)?He(c,0):He.after(c);r=c||f.getNode()}if(r&&(Cg(e)&&f.isAtEnd()||Sg(e)&&f.isAtStart())&&(r=Bh(r,e,gt,o,!0),Ih(r,o)))return Cv(e,r);c=r&&Bh(r,e,Ih,o);const k=Xt(rn(jE(b,o),BS));return k&&(!c||!k.contains(c))?(Cg(e)?f=He.after(k):f=He.before(k),f):c?Cv(e,c):null},td=e=>({next:n=>xv(Wa.Forwards,n,e),prev:n=>xv(Wa.Backwards,n,e)}),Yy=(e,n,o)=>{const r=e?He.before(o):He.after(o);return Oi(e,n,r)},GE=e=>gr(e)?He.before(e):He.after(e),PS=e=>He.isTextPosition(e)?e.offset()===0:As(e.getNode()),Xy=e=>{if(He.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return As(e.getNode(!0))},Jy=(e,n)=>!He.isTextPosition(e)&&!He.isTextPosition(n)&&e.getNode()===n.getNode(!0),Tv=e=>!He.isTextPosition(e)&&gr(e.getNode()),IS=(e,n,o)=>e?!Jy(n,o)&&!Tv(n)&&Xy(n)&&PS(o):!Jy(o,n)&&PS(n)&&Xy(o),Oi=(e,n,o)=>{const r=td(n);return H.from(e?r.next(o):r.prev(o))},kv=(e,n,o)=>Oi(e,n,o).bind(r=>da(o,r,n)&&IS(e,o,r)?Oi(e,n,r):H.some(r)),FS=(e,n,o,r)=>kv(e,n,o).bind(c=>r(c)?FS(e,n,c,r):H.some(c)),Fh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return mt(o)?H.some(He(o,e?0:o.data.length)):o?As(o)?H.some(e?He.before(o):GE(o)):Yy(e,n,o):H.none()},el=je(Oi,!0),wu=je(Oi,!1),ii=je(Fh,!0),Nm=je(Fh,!1),qE="_mce_caret",Nl=e=>ze(e)&&e.id===qE,Ba=(e,n)=>{let o=n;for(;o&&o!==e;){if(Nl(o))return o;o=o.parentNode}return null},Qy=e=>G(e.start),p1=e=>_n(e,"rng"),kg=e=>_n(e,"id"),b1=e=>_n(e,"name"),Ev=e=>Qe.isArray(e.start),v1=e=>!b1(e)&&ft(e.forward)?e.forward:!0,LS=(e,n)=>(ze(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),KE=(e,n)=>{const o=H.from(_h(e.getRoot(),n.start)),r=H.from(_h(e.getRoot(),n.end));return qr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:v1(n)}})},YE=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(W);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},Kd=e=>!e.hasChildNodes(),y1=(e,n)=>Nm(e).fold(_e,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),_v=(e,n,o)=>Kd(n)&&Ba(e,n)?(YE(n,o),!0):!1,Yd=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let w=c.length-1;f&&w>=1;w--){const k=f.childNodes;if(_v(u,f,r))return!0;if(c[w]>k.length-1)return _v(u,f,r)?!0:y1(f,r);f=k[c[w]]}mt(f)&&(b=Math.min(c[0],f.data.length)),ze(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},Ov=e=>mt(e)&&e.data.length>0,Av=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Ov(r.nextSibling)?(f=r.nextSibling,b=0):Ov(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Ov(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const w=r.previousSibling,k=r.nextSibling;Qe.each(Qe.grep(r.childNodes),R=>{mt(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let N;for(;N=e.get(o.id+"_"+n);)e.remove(N,!0);if(mt(k)&&mt(w)&&!Io.browser.isOpera()){const R=w.data.length;w.appendData(k.data),e.remove(k),f=w,b=R}}return H.some(He(f,b))}else return H.none()},Eg=(e,n)=>{const o=e.createRng();return Yd(e,!0,n,o)&&Yd(e,!1,n,o)?H.some({range:o,forward:v1(n)}):H.none()},ew=(e,n)=>{const o=Av(e,"start",n),r=Av(e,"end",n);return qr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(LS(e,c.container()),c.offset()),f.setEnd(LS(e,u.container()),u.offset()),{range:f,forward:v1(n)}})},HS=(e,n)=>H.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),tw=(e,n)=>{const o=e.dom;if(n){if(Ev(n))return Eg(o,n);if(Qy(n))return KE(o,n);if(kg(n))return ew(o,n);if(b1(n))return HS(o,n);if(p1(n))return H.some({range:n.rng,forward:v1(n)})}return H.none()},Ef=(e,n,o)=>pE(e,n,o),XE=(e,n)=>{tw(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},lc=e=>ze(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Lh=(e=>n=>e===n)(ps),Hh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,VS=e=>!Hh(e)&&!Lh(e)&&!Pc(e),QE=e=>({value:e_(e)}),e_=e=>qs(e,"#").toUpperCase(),Dv=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},t_=e=>{const n=Dv(e.red)+Dv(e.green)+Dv(e.blue);return QE(n)},Rv=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,n_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,zS=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Mv=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return zS(c,u,f,b)},o_=e=>{if(e==="transparent")return H.some(zS(0,0,0,0));const n=Rv.exec(e);if(n!==null)return H.some(Mv(n[1],n[2],n[3],"1"));const o=n_.exec(e);return o!==null?H.some(Mv(o[1],o[2],o[3],o[4])):H.none()},nw=e=>o_(e).map(t_).map(n=>"#"+n.value).getOr(e),w1=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},Po=e=>ur(e,n=>{const o=Yp(n);return o?[re.fromDom(o)]:[]}),Bm=e=>w1(e).length>1,Vh=e=>rn(Po(e),Sc),ow=e=>nc(e,"td[data-mce-selected],th[data-mce-selected]"),US=(e,n)=>{const o=ow(n);return o.length>0?o:Vh(e)},$m=e=>US(w1(e.selection.getSel()),re.fromDom(e.getBody())),zh=(e,n)=>de(e,"table",n),sw=e=>{const n=e.startContainer,o=e.startOffset;return mt(n)?o===0?H.some(re.fromDom(n)):H.none():H.from(n.childNodes[o]).map(re.fromDom)},rw=e=>{const n=e.endContainer,o=e.endOffset;return mt(n)?o===n.data.length?H.some(re.fromDom(n)):H.none():H.from(n.childNodes[o-1]).map(re.fromDom)},Nv=e=>Dd(e).fold(nt([e]),n=>[e].concat(Nv(n))),Bv=e=>Ll(e).fold(nt([e]),n=>hs(n)==="br"?Kc(n).map(o=>[e].concat(Bv(o))).getOr([]):[e].concat(Bv(n))),WS=(e,n)=>qr(sw(n),rw(n),(o,r)=>{const c=ls(Nv(e),je(ss,o)),u=ls(Bv(e),je(ss,r));return c.isSome()&&u.isSome()}).getOr(!1),C1=(e,n,o,r)=>{const c=o,u=new ia(o,c),f=Qo(e.schema.getMoveCaretBeforeOnEnterElements(),(w,k)=>!Tt(["td","th","table"],k.toLowerCase()));let b=o;do{if(mt(b)&&Qe.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},S1=e=>{const n=e.selection.getSel();return Pe(n)&&n.rangeCount>0},ZS=(e,n)=>{const o=$m(e);o.length>0?De(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},jS=(e,n,o)=>{const r=Ey(e,n);o(r),e.moveToBookmark(r)},Uh=e=>Vo(e==null?void 0:e.nodeType),$v=e=>ze(e)&&!lc(e)&&!Nl(e)&&!oc(e),_g=(e,n)=>{if($v(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},_f=e=>e.isContentEditable===!0,x1=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=oo(u);jS(r,!0,()=>{n()}),f&&oo(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Og(c,r)},Og=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!_g(e,b)&&ze(u)){const w=u.childNodes,k=e.getRoot();let N;if(f<w.length){const R=w[f];N=new ia(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:k)}else{const R=w[w.length-1];N=new ia(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:k),N.next(!0)}for(let R=N.current();R;R=N.next()){if(e.getContentEditable(R)==="false")return;if(mt(R)&&!cw(R)){c.setStart(R,0),n.setRng(c);return}}}},GS=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(ze(e)||!cw(e))return e}},aw=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ff(e,n),Wh=(e,n,o)=>e.schema.isValidChild(n,o),cw=(e,n=!1)=>{if(Pe(e)&&mt(e)){const o=n?e.data.replace(/ /g,"Â "):e.data;return mf(o)}else return!1},Pv=e=>Pe(e)&&mt(e)&&e.length===0,s_=(e,n)=>{const o="[data-mce-cef-wrappable]",r=lS(e),c=ba(r)?o:`${o},${r}`;return Nc(re.fromDom(n),c)},qS=(e,n)=>{const o=e.dom;return $v(n)&&o.getContentEditable(n)==="false"&&s_(e,n)&&o.select('[contenteditable="true"]',n).length===0},Of=(e,n)=>fe(e)?e(n):(Pe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),lw=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),iw=(e,n)=>{if(Bt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=nw(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Iv=(e,n,o)=>{const r=e.getStyle(n,o);return iw(r,o)},KS=(e,n)=>{let o;return e.getParent(n,r=>ze(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Pm=(e,n,o)=>e.getParents(n,o,e.getRoot()),uw=(e,n,o)=>{const r=e.formatter.get(n);return Pe(r)&&$t(r,o)},zt=(e,n)=>uw(e,n,r=>{const c=u=>fe(u)||u.length>1&&u.charAt(0)==="%";return $t(["styles","attributes"],u=>Wo(r,u).exists(f=>{const b=at(f)?f:pa(f);return $t(b,c)}))}),ic=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Qo(u,(f,b)=>$t(r,w=>w===b));return uw(e,n,u=>{const f=c(u);return uw(e,o,b=>{const w=c(b);return Oa(f,w)})})},Ki=e=>Zr(e,"block"),$a=e=>Ki(e)&&e.wrapper===!0,Cu=e=>Ki(e)&&e.wrapper!==!0,Ai=e=>Zr(e,"selector"),Sa=e=>Zr(e,"inline"),dw=e=>Ai(e)&&Sa(e)&&Br(Wo(e,"mixed"),!0),Zh=e=>Ai(e)&&e.expand!==!1&&!Sa(e),Ag=lc,T1=Pm,YS=cw,XS=aw,JS=e=>gr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Fv=(e,n)=>{let o=n;for(;o;){if(ze(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},mw=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},QS=(e,n,o)=>mw(e,n,o,r=>Lh(r)||Hh(r)),k1=(e,n,o)=>mw(e,n,o,VS),E1=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,w=(N,R,L)=>{const Q=dg(e),te=c?Q.backwards:Q.forwards;return H.from(te(N,R,(j,ee)=>Ag(j.parentNode)?-1:(f=j,L(c,j,ee)),b))};return w(o,r,QS).bind(N=>u?w(N.container,N.offset+(c?-1:0),k1):H.some(N)).orThunk(()=>f?H.some({container:f,offset:c?0:f.length}):H.none())},_1=(e,n,o,r,c)=>{const u=r[c];mt(r)&&ba(r.data)&&u&&(r=u);const f=T1(e,r);for(let b=0;b<f.length;b++)for(let w=0;w<n.length;w++){const k=n[w];if(!(Pe(k.collapsed)&&k.collapsed!==o.collapsed)&&Ai(k)&&e.is(f[b],k.selector))return f[b]}return r},O1=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(Ki(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const w=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(mt(o)?o.parentNode:o,k=>k!==f&&XS(e.schema,k),w)}if(u&&Ki(b)&&b.wrapper&&(u=T1(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!lw(u,"br")););return u||o},Lv=(e,n,o,r)=>{const c=o.parentNode;return Pe(o[r])?!1:c===n||Bt(c)||e.isBlock(c)?!0:Lv(e,n,c,r)},Hv=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(mt(o)&&!YS(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let w=u[f];w;w=w[f]){const k=mt(w)&&!Lv(e,b,w,f);if(!Ag(w)&&!JS(w)&&!YS(w,k))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Dg=e=>Ag(e.parentNode)||Ag(e),ui=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const w=o[0];return ze(c)&&c.hasChildNodes()&&(c=Ul(c,u),mt(c)&&(u=0)),ze(f)&&f.hasChildNodes()&&(f=Ul(f,n.collapsed?b:b-1),mt(f)&&(b=f.data.length)),c=Fv(e,c),f=Fv(e,f),Dg(c)&&(c=Ag(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,mt(c)&&(u=n.collapsed?c.length:0)),Dg(f)&&(f=Ag(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,mt(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(E1(e,e.getRoot(),c,u,!0,r).each(({container:R,offset:L})=>{c=R,u=L}),E1(e,e.getRoot(),f,b,!1,r).each(({container:R,offset:L})=>{f=R,b=L})),(Sa(w)||w.block_expand)&&((!Sa(w)||!mt(c)||u===0)&&(c=Hv(e,o,c,u,!0)),(!Sa(w)||!mt(f)||b===f.data.length)&&(f=Hv(e,o,f,b,!1))),Zh(w)&&(c=_1(e,o,n,c,"previousSibling"),f=_1(e,o,n,f,"nextSibling")),(Ki(w)||Ai(w))&&(c=O1(e,o,c,"previousSibling"),f=O1(e,o,f,"nextSibling"),Ki(w)&&(e.isBlock(c)||(c=Hv(e,o,c,u,!0)),e.isBlock(f)||(f=Hv(e,o,f,b,!1)))),ze(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),ze(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},A1=(e,n,o)=>{var r;const c=n.startOffset,u=Ul(n.startContainer,c),f=n.endOffset,b=Ul(n.endContainer,f-1),w=ee=>{const ve=ee[0];mt(ve)&&ve===u&&c>=ve.data.length&&ee.splice(0,1);const ge=ee[ee.length-1];return f===0&&ee.length>0&&ge===b&&mt(ge)&&ee.splice(ee.length-1,1),ee},k=(ee,ve,ge)=>{const we=[];for(;ee&&ee!==ge;ee=ee[ve])we.push(ee);return we},N=(ee,ve)=>e.getParent(ee,ge=>ge.parentNode===ve,ve),R=(ee,ve,ge)=>{const we=ge?"nextSibling":"previousSibling";for(let ke=ee,Ke=ke.parentNode;ke&&ke!==ve;ke=Ke){Ke=ke.parentNode;const Ot=k(ke===ee?ke:ke[we],we);Ot.length&&(ge||Ot.reverse(),o(w(Ot)))}};if(u===b)return o(w([u]));const L=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,L,!0);if(e.isChildOf(b,u))return R(b,L);const Q=N(u,L)||u,te=N(b,L)||b;R(u,Q,!0);const j=k(Q===u?Q:Q.nextSibling,"nextSibling",te===b?te.nextSibling:te);j.length&&o(w(j)),R(b,te)},ex=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],fw=e=>wc(e)&&eg(e)===W,r_=(e,n,o,r)=>Tl(n).fold(()=>"skipping",c=>r==="br"||fw(n)?"valid":T2(n)?"existing":Nl(n.dom)?"caret":$t(ex,u=>Nc(n,u))?"valid-block":!Wh(e,o,r)||!Wh(e,hs(c),o)?"invalid-child":"valid"),tx=(e,n)=>{const o=ui(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},D1=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;Pu(e,Jc()),Vr(e,`${Gp()}`,f),Vr(e,`${Om()}`,r);const{attributes:w={},classes:k=[]}=c(f,b);if(tc(e,w),O2(e,k),u){k.length>0&&Vr(e,`${Ei()}`,k.join(","));const N=xs(w);N.length>0&&Vr(e,`${Gi()}`,N.join(","))}},a_=e=>{Td(e,Jc()),kr(e,`${Gp()}`),kr(e,`${Om()}`),kr(e,`${vf()}`);const n=al(e,`${Gi()}`).map(r=>r.split(",")).getOr([]),o=al(e,`${Ei()}`).map(r=>r.split(",")).getOr([]);De(n,r=>kr(e,r)),A2(e,o),kr(e,`${Ei()}`),kr(e,`${Gi()}`)},R1=(e,n,o,r,c)=>{const u=re.fromTag("span",e);return D1(u,n,o,r,c,!1),u},uc=(e,n,o,r,c,u)=>{const f=[],b=R1(e.getDoc(),o,u,r,c),w=Qs(),k=()=>{w.clear()},N=()=>w.get().getOrThunk(()=>{const te=yf(b);return f.push(te),w.set(te),te}),R=te=>{De(te,L)},L=te=>{switch(r_(e,te,"span",hs(te))){case"invalid-child":{k();const ee=Da(te);R(ee),k();break}case"valid-block":{k(),D1(te,o,u,r,c,!0);break}case"valid":{const ee=N();_b(te,ee);break}}},Q=te=>{const j=Vt(te,re.fromDom);R(j)};return A1(e.dom,n,te=>{k(),Q(te)}),f},Su=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=$m(e).length>0,b=_2("mce-annotation");if(u.collapsed&&!f&&tx(e,u),c.getRng().collapsed&&!f){const w=R1(e.getDoc(),b,r,n,o.decorate);Bd(w,ps),c.getRng().insertNode(w.dom),c.select(w.dom)}else jS(c,!1,()=>{ZS(e,w=>{uc(e,w,b,n,o.decorate,r)})})})},Di=e=>{const n=uE();iE(e,n);const o=E2(e,n),r=wi("span"),c=u=>{De(u,f=>{r(f)?la(f):a_(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Su(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{qp(e,H.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();ht(Th(e,u),(b,w)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Th(e,u);return so(f,b=>Vt(b,w=>w.dom))}}},Af=e=>({getBookmark:je(Ef,e),moveToBookmark:je(XE,e)});Af.isBookmarkNode=lc;const xu=(e,n,o)=>o.collapsed?!1:$t(o.getClientRects(),r=>hy(r,e,n)),c_=(e,n)=>e.dispatch("PreProcess",n),gw=(e,n)=>e.dispatch("PostProcess",n),hw=e=>{e.dispatch("remove")},pw=e=>{e.dispatch("detach")},l_=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},bw=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},i_=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},u_=e=>{e.dispatch("PreInit")},vw=e=>{e.dispatch("PostRender")},yw=e=>{e.dispatch("Init")},zs=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},nd=(e,n,o)=>{e.dispatch(n,o)},ww=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Cw=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},nx=(e,n)=>e.dispatch("BeforeSetContent",n),Vv=(e,n)=>e.dispatch("SetContent",n),ox=(e,n)=>e.dispatch("BeforeGetContent",n),zv=(e,n)=>e.dispatch("GetContent",n),sx=(e,n)=>{e.dispatch("AutocompleterStart",n)},d_=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},rx=e=>{e.dispatch("AutocompleterEnd")},m_=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Sw=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),ax=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),on={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||on.metaKeyPressed(e),metaKeyPressed:e=>Io.os.isMacOS()||Io.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},od="data-mce-selected",xw="table,img,figure.image,hr,video,span.mce-preview-object",cx=Math.abs,Kr=Math.round,ma={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},jh=e=>e.type==="longpress"||e.type.indexOf("touch")===0,M1=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,w,k,N,R,L,Q,te,j,ee,ve,ge,we,ke,Ke,Ot;const yt=Lt=>Pe(Lt)&&(cf(Lt)||o.is(Lt,"figure.image")),Me=Lt=>_l(Lt)||o.hasClass(Lt,"mce-preview-object"),Ne=(Lt,yo)=>{if(jh(Lt)){const io=Lt.touches[0];return yt(Lt.target)&&!xu(io.clientX,io.clientY,yo)}else return yt(Lt.target)&&!xu(Lt.clientX,Lt.clientY,yo)},Ut=Lt=>{const yo=Lt.target;Ne(Lt,n.selection.getRng())&&!Lt.isDefaultPrevented()&&n.selection.select(yo)},bn=Lt=>o.hasClass(Lt,"mce-preview-object")&&Pe(Lt.firstElementChild)?[Lt,Lt.firstElementChild]:o.is(Lt,"figure.image")?[Lt.querySelector("img")]:[Lt],Rn=Lt=>{const yo=Ah(n);return!yo||Lt.getAttribute("data-mce-resize")==="false"||Lt===n.getBody()?!1:o.hasClass(Lt,"mce-preview-object")&&Pe(Lt.firstElementChild)?Nc(re.fromDom(Lt.firstElementChild),yo):Nc(re.fromDom(Lt),yo)},co=Lt=>Me(Lt)?o.create("img",{src:Io.transparentSrc}):Lt.cloneNode(!0),Do=(Lt,yo,io)=>{if(Pe(io)){const zc=bn(Lt);De(zc,br=>{br.style[yo]||!n.schema.isValid(br.nodeName.toLowerCase(),yo)?o.setStyle(br,yo,io):o.setAttrib(br,yo,""+io)})}},vs=(Lt,yo,io)=>{Do(Lt,"width",yo),Do(Lt,"height",io)},Us=Lt=>{let yo,io,zc,br,Jn;yo=Lt.screenX-R,io=Lt.screenY-L,we=yo*k[2]+j,ke=io*k[3]+ee,we=we<5?5:we,ke=ke<5?5:ke,(yt(f)||Me(f))&&xE(n)!==!1?zc=!on.modifierPressed(Lt):zc=on.modifierPressed(Lt),zc&&(cx(yo)>cx(io)?(ke=Kr(we*ve),we=Kr(ke/ve)):(we=Kr(ke/ve),ke=Kr(we*ve))),vs(b,we,ke),br=k.startPos.x+yo,Jn=k.startPos.y+io,br=br>0?br:0,Jn=Jn>0?Jn:0,o.setStyles(w,{left:br,top:Jn,display:"block"}),w.innerHTML=we+" &times; "+ke,k[2]<0&&b.clientWidth<=we&&o.setStyle(b,"left",Q+(j-we)),k[3]<0&&b.clientHeight<=ke&&o.setStyle(b,"top",te+(ee-ke)),yo=u.scrollWidth-Ke,io=u.scrollHeight-Ot,yo+io!==0&&o.setStyles(w,{left:br-yo,top:Jn-io}),ge||(bw(n,f,j,ee,"corner-"+k.name),ge=!0)},oa=()=>{const Lt=ge;ge=!1,Lt&&(Do(f,"width",we),Do(f,"height",ke)),o.unbind(r,"mousemove",Us),o.unbind(r,"mouseup",oa),c!==r&&(o.unbind(c,"mousemove",Us),o.unbind(c,"mouseup",oa)),o.remove(b),o.remove(w),o.remove(N),yl(f),Lt&&(i_(n,f,we,ke,"corner-"+k.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},yl=Lt=>{Ft();const yo=o.getPos(Lt,u),io=yo.x,zc=yo.y,br=Lt.getBoundingClientRect(),Jn=br.width||br.right-br.left,ns=br.height||br.bottom-br.top;f!==Lt&&(wt(),f=Lt,we=ke=0);const Ta=n.dispatch("ObjectSelected",{target:Lt});Rn(Lt)&&!Ta.isDefaultPrevented()?ht(ma,(or,Xr)=>{const Es=Ia=>{const gd=bn(f)[0];R=Ia.screenX,L=Ia.screenY,j=gd.clientWidth,ee=gd.clientHeight,ve=ee/j,k=or,k.name=Xr,k.startPos={x:Jn*or[0]+io,y:ns*or[1]+zc},Ke=u.scrollWidth,Ot=u.scrollHeight,N=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(N,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=co(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:io,top:zc,margin:0}),vs(b,Jn,ns),b.removeAttribute(od),u.appendChild(b),o.bind(r,"mousemove",Us),o.bind(r,"mouseup",oa),c!==r&&(o.bind(c,"mousemove",Us),o.bind(c,"mouseup",oa)),w=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},j+" &times; "+ee)};let vr=o.get("mceResizeHandle"+Xr);vr&&o.remove(vr),vr=o.add(u,"div",{id:"mceResizeHandle"+Xr,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Xr+"-resize; margin:0; padding:0"}),o.bind(vr,"mousedown",Ia=>{Ia.stopImmediatePropagation(),Ia.preventDefault(),Es(Ia)}),or.elm=vr,o.setStyles(vr,{left:Jn*or[0]+io-vr.offsetWidth/2,top:ns*or[1]+zc-vr.offsetHeight/2})}):wt(!1)},fc=Xc(yl,0),wt=(Lt=!0)=>{fc.cancel(),Ft(),f&&Lt&&f.removeAttribute(od),ht(ma,(yo,io)=>{const zc=o.get("mceResizeHandle"+io);zc&&(o.unbind(zc),o.remove(zc))})},ln=(Lt,yo)=>o.isChildOf(Lt,yo),Ko=Lt=>{if(ge||n.removed||n.composing)return;const yo=Lt.type==="mousedown"?Lt.target:e.getNode(),io=On(re.fromDom(yo),xw).map(br=>br.dom).filter(br=>o.isEditable(br.parentElement)).getOrUndefined(),zc=Pe(io)?o.getAttrib(io,od,"1"):"1";if(De(o.select(`img[${od}],hr[${od}]`),br=>{br.removeAttribute(od)}),Pe(io)&&ln(io,u)){An();const br=e.getStart(!0);if(ln(br,io)&&ln(e.getEnd(!0),io)){o.setAttrib(io,od,zc),fc.throttle(io);return}}wt()},Ft=()=>{ht(ma,Lt=>{Lt.elm&&(o.unbind(Lt.elm),delete Lt.elm)})},An=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{An(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ko),n.on("keyup compositionend",Lt=>{f&&f.nodeName==="TABLE"&&Ko(Lt)}),n.on("hide blur",wt),n.on("contextmenu longpress",Ut,!0)}),n.on("remove",Ft),{isResizable:Rn,showResizeRect:yl,hideResizeRect:wt,updateResizeRect:Ko,destroy:()=>{fc.cancel(),f=b=N=null}}},f_=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},g_=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},So=(e,n,o)=>{const r=e.document.createRange();return f_(r,n),g_(r,o),r},Tw=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},Gh=Ar.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Uv=(e,n,o)=>n(re.fromDom(o.startContainer),o.startOffset,re.fromDom(o.endContainer),o.endOffset),h_=(e,n)=>n.match({domRange:o=>({ltr:nt(o),rtl:H.none}),relative:(o,r)=>({ltr:yn(()=>So(e,o,r)),rtl:yn(()=>H.some(So(e,r,o)))}),exact:(o,r,c,u)=>({ltr:yn(()=>Tw(e,o,r,c,u)),rtl:yn(()=>H.some(Tw(e,c,u,o,r)))})}),p_=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>Gh.rtl(re.fromDom(c.endContainer),c.endOffset,re.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>Uv(e,Gh.ltr,o)):Uv(e,Gh.ltr,o)},kw=(e,n)=>{const o=h_(e,n);return p_(e,o)};Gh.ltr,Gh.rtl;const lx={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},b_=(e,n,o)=>{var r,c;return H.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return H.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),H.some(f)})},Ew=(e,n,o)=>{var r,c;return H.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},_w=(()=>document.caretPositionFromPoint?b_:document.caretRangeFromPoint?Ew:H.none)(),ix=(e,n,o)=>{const r=re.fromDom(e.document);return _w(r,n,o).map(c=>lx.create(re.fromDom(c.startContainer),c.startOffset,re.fromDom(c.endContainer),c.endOffset))},ux=Ar.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),dx=(e,n,o,r)=>e.fold(n,o,r),M5=e=>e.fold(No,No,No),v_=ux.before,y_=ux.on,d3=ux.after,Dn={before:v_,on:y_,after:d3,cata:dx,getStart:M5},Wv=Ar.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),m3=e=>Wv.exact(e.start,e.soffset,e.finish,e.foffset),w_=e=>e.match({domRange:n=>re.fromDom(n.startContainer),relative:(n,o)=>Dn.getStart(n),exact:(n,o,r,c)=>n}),N1=Wv.domRange,f3=Wv.relative,Zv=Wv.exact,C_=e=>{const n=w_(e);return Fi(n)},S_=lx.create,Df={domRange:N1,relative:f3,exact:Zv,exactFromRange:m3,getWin:C_,range:S_},jv=(e,n)=>{const o=hs(e);return o==="input"?Dn.after(e):Tt(["br","img"],o)?n===0?Dn.before(e):Dn.after(e):Dn.on(e,n)},Ow=(e,n)=>{const o=e.fold(Dn.before,jv,Dn.after),r=n.fold(Dn.before,jv,Dn.after);return Df.relative(o,r)},Gv=(e,n,o,r)=>{const c=jv(e,n),u=jv(o,r);return Df.relative(c,u)},Aw=e=>e.match({domRange:n=>{const o=re.fromDom(n.startContainer),r=re.fromDom(n.endContainer);return Gv(o,n.startOffset,r,n.endOffset)},relative:Ow,exact:Gv}),B1=(e,n)=>{const r=(n||document).createDocumentFragment();return De(e,c=>{r.appendChild(c.dom)}),re.fromDom(r)},x_=e=>{const n=Df.getWin(e).dom,o=(c,u,f,b)=>Tw(n,c,u,f,b),r=Aw(e);return kw(n,r).match({ltr:o,rtl:o})},T_=(e,n,o)=>ix(e,n,o),$1=(e,n,o)=>{const r=Fi(re.fromDom(o));return T_(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},qv=(e,n)=>Pe(e)&&Pe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,k_=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},qo=(e,n,o)=>k_(e,n,o)!==null,E_=(e,n,o)=>qo(e,n,r=>r.nodeName===o),Xd=(e,n)=>ts(e)&&!qo(e,n,Nl),Tu=(e,n,o)=>{const r=n.parentNode;if(r){const c=new ia(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(gr(u))return!0}return!1},Kv=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},di=(e,n)=>{let o=n;for(;o&&o!==e;){if(oo(o))return!0;o=o.parentNode}return!1},qh=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let w,k;if(!b)return H.none();const N=e.getParent(b,e.isBlock)||u;if(r&&gr(c)&&n&&e.isEmpty(N))return H.some(He(b,e.nodeIndex(c)));const R=new ia(c,N);for(;k=R[r?"prev":"next"]();){if(e.getContentEditableParent(k)==="false"||Xd(k,u))return H.none();if(mt(k)&&k.data.length>0)return E_(k,u,"A")?H.none():H.some(He(k,r?k.data.length:0));if(e.isBlock(k)||f[k.nodeName.toLowerCase()])return H.none();w=k}return Uu(w)?H.none():o&&w?H.some(He(w,0)):H.none()},Kh=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,w=o?r.startOffset:r.endOffset;const k=ze(b)&&w===b.childNodes.length,N=e.schema.getNonEmptyElements();let R=o;if(ts(b))return H.none();if(ze(b)&&w>b.childNodes.length-1&&(R=!1),Ui(b)&&(b=c,w=0),b===c){if(R&&(u=b.childNodes[w>0?w-1:0],u&&(ts(u)||N[u.nodeName]||xi(u))))return H.none();if(b.hasChildNodes()){if(w=Math.min(!R&&w>0?w-1:w,b.childNodes.length-1),b=b.childNodes[w],w=mt(b)&&k?b.data.length:0,!n&&b===c.lastChild&&xi(b)||di(c,b)||ts(b))return H.none();if(b.hasChildNodes()&&!xi(b)){u=b;const L=new ia(b,c);do{if(oo(u)||ts(u)){f=!1;break}if(mt(u)&&u.data.length>0){w=R?0:u.data.length,b=u,f=!0;break}if(N[u.nodeName.toLowerCase()]&&!ul(u)){w=e.nodeIndex(u),b=u.parentNode,R||w++,f=!0;break}}while(u=R?L.next():L.prev())}}}return n&&(mt(b)&&w===0&&qh(e,k,n,!0,b).each(L=>{b=L.container(),w=L.offset(),f=!0}),ze(b)&&(u=b.childNodes[w],u||(u=b.childNodes[w-1]),u&&gr(u)&&!Kv(u,"A")&&!Tu(e,u,!1)&&!Tu(e,u,!0)&&qh(e,k,n,!0,u).each(L=>{b=L.container(),w=L.offset(),f=!0}))),R&&!n&&mt(b)&&w===b.data.length&&qh(e,k,n,!1,b).each(L=>{b=L.container(),w=L.offset(),f=!0}),f&&b?H.some(He(b,w)):H.none()},Rg=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=He.fromRangeStart(n);return Kh(e,o,!0,r).each(u=>{(!o||!He.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Kh(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),qv(n,r)?H.none():H.some(r)},Im=(e,n)=>e.splitText(n),Dw=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&mt(n)){if(o>0&&o<n.data.length)if(r=Im(n,o),n=r.previousSibling,c>o){c=c-o;const u=Im(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(mt(n)&&o>0&&o<n.data.length&&(n=Im(n,o),o=0),mt(r)&&c>0&&c<r.data.length){const u=Im(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Mg=e=>({walk:(u,f)=>A1(e,u,f),split:Dw,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=ui(e,u,[{inline:"span"}]),w=e.createRng();return w.setStart(b.startContainer,b.startOffset),w.setEnd(b.endContainer,b.endOffset),w}return u},normalize:u=>Rg(e,u).fold(_e,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Mg.compareRanges=qv,Mg.getCaretRangeFromPoint=$1,Mg.getSelectedNode=Yp,Mg.getNode=Ul;const g3=((e,n)=>{const o=(b,w)=>{if(!Vo(w)&&!w.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+w);const k=b.dom;gs(k)&&(k.style[e]=w+"px")},r=b=>{const w=n(b);if(w<=0||w===null){const k=Ci(b,e);return parseFloat(k)||0}return w},c=r,u=(b,w)=>zo(w,(k,N)=>{const R=Ci(b,N),L=R===void 0?0:parseInt(R,10);return isNaN(L)?k:k+L},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,w,k)=>{const N=u(b,k);return w>N?w-N:0}}})("height",e=>{const n=e.dom;return Li(e)?n.getBoundingClientRect().height:n.offsetHeight}),Ho=e=>g3.get(e),Yi=()=>re.fromDom(document),Ng=(e,n)=>e.view(n).fold(nt([]),r=>{const c=e.owner(r),u=Ng(e,c);return[r].concat(u)}),__=(e,n)=>{const o=n.owner(e);return Ng(n,o)};var Rw=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?H.none():H.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(re.fromDom)},owner:e=>cl(e)});const mx=e=>{const n=Yi(),o=Dp(n),r=__(e,Rw),c=Hi(e),u=Ea(r,(f,b)=>{const w=Hi(b);return{left:f.left+w.left,top:f.top+w.top}},{left:0,top:0});return Si(u.left+c.left+o.left,u.top+c.top+o.top)},P1=e=>hs(e)==="textarea",O_=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Yh=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Bg=(e,n)=>{const o=Da(e);if(o.length===0||P1(e))return{element:e,offset:n};if(n<o.length&&!P1(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return P1(r)?{element:e,offset:n}:hs(r)==="img"?{element:r,offset:1}:wc(r)?{element:r,offset:eg(r).length}:{element:r,offset:Da(r).length}}},Mw=(e,n)=>{const o=Db(e),r=Ho(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},i=(e,n)=>{const o=Bg(e,n),r=re.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+W+"</span>");return is(o.element,r),Mw(r,()=>Ls(r))},m=e=>Mw(re.fromDom(e),jt),h=(e,n,o,r)=>{P(e,(c,u)=>T(e,n,o,r),o)},v=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(O_(e,u))return;const f=Dp(n).top;o(n,f,r,c),Yh(e,u)},T=(e,n,o,r)=>{const c=re.fromDom(e.getBody()),u=re.fromDom(e.getDoc());Eb(c);const f=i(re.fromDom(o.startContainer),o.startOffset);v(e,u,n,f,r),f.cleanup()},A=(e,n,o,r)=>{const c=re.fromDom(e.getDoc());v(e,c,o,m(n),r)},P=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(re.fromDom(r),re.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},U=(e,n)=>e.element.dom.scrollIntoView({block:n?"start":"end"}),J=(e,n,o,r)=>{const c=n+e,u=o.pos.top,f=o.bottom,b=f-u>=n;u<e?U(o,r!==!1):u>c?U(o,b?r!==!1:r===!0):f>c&&!b&&U(o,r===!0)},ae=(e,n,o,r)=>{const c=Fi(e).dom.innerHeight;J(n,c,o,r)},Ce=(e,n,o,r)=>{const c=Fi(e).dom.innerHeight;J(n,c,o,r);const u=mx(o.element),f=ah(window);u.top<f.y?Vi(o.element,r!==!1):u.top>f.bottom&&Vi(o.element,r===!0)},lt=(e,n,o)=>h(e,ae,n,o),It=(e,n,o)=>A(e,n,ae,o),Et=(e,n,o)=>h(e,Ce,n,o),Ge=(e,n,o)=>A(e,n,Ce,o),At=(e,n,o)=>{(e.inline?It:Ge)(e,n,o)},We=(e,n,o)=>{(e.inline?lt:Et)(e,n,o)},an=e=>e.dom.focus(),Ln=e=>{const n=Ql(e).dom;return e.dom===n.activeElement},to=(e=Yi())=>H.from(e.dom.activeElement).map(re.fromDom),er=e=>to(Ql(e)).filter(n=>e.dom.contains(n.dom)),dc=(e,n)=>{const o=wc(n)?eg(n).length:Da(n).length+1;return e>o?o:e<0?0:e},ta=e=>Df.range(e.start,dc(e.soffset,e.start),e.finish,dc(e.foffset,e.finish)),Wl=(e,n)=>!il(n.dom)&&(Fl(e,n)||ss(e,n)),Rf=e=>n=>Wl(e,n.start)&&Wl(e,n.finish),Xv=e=>e.inline||Io.browser.isFirefox(),Nw=e=>Df.range(re.fromDom(e.startContainer),e.startOffset,re.fromDom(e.endContainer),e.endOffset),Jv=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?H.none():H.from(n.getRangeAt(0))).map(Nw)},Ds=e=>{const n=Fi(e);return Jv(n.dom).filter(Rf(e))},Bl=(e,n)=>H.from(n).filter(Rf(e)).map(ta),$l=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),H.some(n)}catch{return H.none()}},Ri=e=>{const n=Xv(e)?Ds(re.fromDom(e.getBody())):H.none();e.bookmark=n.isSome()?n:e.bookmark},mi=e=>(e.bookmark?e.bookmark:H.none()).bind(o=>Bl(re.fromDom(e.getBody()),o)).bind($l),Xh=e=>{mi(e).each(n=>e.selection.setRng(n))},Qv={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},I1=(e,n)=>(Vo(n)||(n=0),setTimeout(e,n)),Xi=(e,n)=>(Vo(n)||(n=0),setInterval(e,n)),hr={setEditorTimeout:(e,n,o)=>I1(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=Xi(()=>{e.removed?clearInterval(r):n()},o);return r}},A_=e=>e.type==="nodechange"&&e.selectionChange,fx=(e,n)=>{const o=()=>{n.throttle()};Vs.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Vs.DOM.unbind(document,"mouseup",o)})},gx=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},D_=(e,n)=>{gx(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{A_(o)||Ri(e)})},R_=e=>{const n=Xc(()=>{Ri(e)},0);e.on("init",()=>{e.inline&&fx(e,n),D_(e,n)}),e.on("remove",()=>{n.cancel()})};let Mf;const Bw=Vs.DOM,F1=e=>ze(e)&&Qv.isEditorUIElement(e),hx=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},$w=(e,n)=>{const o=iS(e);return Bw.getParent(n,c=>F1(c)||(o?e.dom.is(c,o):!1))!==null},e0=e=>{try{const n=Ql(re.fromDom(e.getElement()));return to(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},B5=(e,n)=>{const o=n.editor;R_(o);const r=(c,u)=>{if(SS(c)&&c.inline!==!0){const f=re.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;hx(e0(o))&&r(o,Pu),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{hr.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!hx(e0(o))||c!==o)&&r(o,Td),!$w(o,e0(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Mf||(Mf=c=>{const u=e.activeEditor;u&&gm(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!$w(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Bw.bind(document,"focusin",Mf))},$5=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Mf&&(Bw.unbind(document,"focusin",Mf),Mf=null)},M_=e=>{e.on("AddEditor",je(B5,e)),e.on("RemoveEditor",je($5,e))},P5=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),h3=e=>e.collapsed?H.from(Ul(e.startContainer,e.startOffset)).map(re.fromDom):H.none(),p3=(e,n)=>h3(n).bind(o=>lf(o)?H.some(o):Fl(e,o)?H.none():H.some(e)),N_=(e,n)=>{p3(re.fromDom(e.getBody()),n).bind(o=>ii(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},B_=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},I5=e=>Ln(e)||er(e).isSome(),F5=e=>Pe(e.iframeElement)&&Ln(re.fromDom(e.iframeElement)),L5=e=>{const n=e.getBody();return n&&I5(re.fromDom(n))},px=e=>{const n=Ql(re.fromDom(e.getElement()));return to(n).filter(o=>!hx(o.dom)&&$w(e,o.dom)).isSome()},Jh=e=>e.inline?L5(e):F5(e),b3=e=>Jh(e)||px(e),v3=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Pe(e.bookmark)&&!Jh(e)&&mi(e).each(u=>{e.selection.setRng(u),r=u});const c=P5(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){B_(c),N_(e,r),bx(e);return}e.inline||(Io.browser.isOpera()||B_(o),e.getWin().focus()),(Io.browser.isFirefox()||e.inline)&&(B_(o),N_(e,r)),bx(e)},bx=e=>e.editorManager.setActive(e),H5=(e,n)=>{e.removed||(n?bx(e):v3(e))},y3=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return H.from(u).map(re.fromDom).map(b=>!r||!n.collapsed?Ad(b,c(b,f)).getOr(b):b).bind(b=>Os(b)?H.some(b):Tl(b).filter(Os)).map(b=>b.dom).getOr(e)},w3=(e,n,o=!1)=>y3(e,n,!0,o,(r,c)=>Math.min(Bc(r),c)),C3=(e,n,o=!1)=>y3(e,n,!1,o,(r,c)=>c>0?c-1:c),S3=(e,n)=>{const o=e;for(;e&&mt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},V5=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),mt(o)&&mt(r)&&(o.length===c?o=S3(o.nextSibling,!0):o=o.parentNode,u===0?r=S3(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=mt(f)?f.parentNode:f;return ze(b)?b:e},z5=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||w3(u,n,n.collapsed),e.isBlock),b=e.getParent(r||C3(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let w;const k=new ia(f,u);for(;(w=k.next())&&w!==b;)e.isBlock(w)&&c.push(w)}return b&&f!==b&&b!==u&&c.push(b),c},U5=(e,n,o)=>H.from(n).bind(r=>H.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(C1(e,f,r,!0),C1(e,f,r,!1)),f})),$_=(e,n)=>Vt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),W5=e=>hs(e)==="img"?1:Qr(e).fold(()=>Da(e).length,n=>n.length),Z5=e=>Qr(e).filter(n=>n.trim().length!==0||n.indexOf(ps)>-1).isSome(),j5=e=>Ii(e)&&Mc(e,"contenteditable")==="false",vx=["img","br"],P_=e=>Z5(e)||Tt(vx,hs(e))||j5(e),x3=e=>ie(e,P_),G5=e=>q5(e,P_),q5=(e,n)=>{const o=r=>{const c=Da(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return H.some(f);const b=o(f);if(b.isSome())return b}return H.none()};return o(e)},T3="[data-mce-autocompleter]",K5=(e,n)=>{if(k3(re.fromDom(e.getBody())).isNone()){const o=re.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Pr(o,re.fromDom(n.extractContents())),n.insertNode(o.dom),Tl(o).each(r=>r.dom.normalize()),G5(o).map(r=>{e.selection.setCursorLocation(r.dom,W5(r))})}},Y5=e=>On(e,T3),k3=e=>xt(e,T3),E3=(e,n)=>k3(n).each(o=>{const r=e.selection.getBookmark();la(o),e.selection.moveToBookmark(r)}),X5={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Pw=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},_3=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!mf(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},O3=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Mi{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new Mi(n,X5[n]||1);return o&&ht(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!G(n))return Pe(n)&&ht(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Mi(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=Pw(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=Pw(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(O3(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||O3(f))return!1}if(f.type===8||f.type===3&&!_3(f)||f.type===3&&f.parent&&o[f.parent.name]&&mf((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=Pw(f,u));return!0}walk(n){return Pw(this,null,n)}}const J5=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),A3=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&J5(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},Q5=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const w=r.exec(n);if(w===null)return b;if(w[1]==="!"){fs(w[2],"--")?b=A3(n,!1,w.index+3):b=A3(n,!0,w.index+1);break}else{c.lastIndex=r.lastIndex;const k=c.exec(n);if(q(k)||k.index!==r.lastIndex)continue;w[1]==="/"?f-=1:_n(u,w[2])||(f+=1),b=r.lastIndex+k[0].length;break}}return b},eF=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},D3=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=eF(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,w=f[0].length;let k;u[f[1]]?k=b:k=Q5(r,c,b),c=c.substring(0,b-w)+c.substring(k),o.lastIndex=b-w}return Ie(c)},tF=D3,R3=e=>{const n=nc(e,"[data-mce-bogus]");De(n,o=>{Mc(o,"data-mce-bogus")==="all"?Ls(o):za(o)?(is(o,re.fromText(ti)),Ls(o)):la(o)})},M3=e=>{const n=nc(e,"input");De(n,o=>{kr(o,"name")})},nF=(e,n)=>{const o=ua(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s|Â |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},oF=(e,n)=>{const o=e.getDoc(),r=Ql(re.fromDom(e.getBody())),c=re.fromTag("div",o);Vr(c,"data-mce-bogus","all"),Xf(c,{position:"fixed",left:"-9999999px",top:"0"}),Bd(c,n.innerHTML),R3(c),M3(c);const u=nh(r);Pr(u,c);const f=Ie(c.dom.innerText);return Ls(c),f},sF=(e,n,o)=>{let r;return n.format==="raw"?r=Qe.trim(tF(e.serializer,o.innerHTML)):n.format==="text"?r=oF(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=nF(e,e.serializer.serialize(o,n)),n.format!=="text"&&!ni(re.fromDom(o))&&G(r)?Qe.trim(r):r},rF=(e,n)=>H.from(e.getBody()).fold(nt(n.format==="tree"?new Mi("body",11):""),o=>sF(e,n,o)),N3=Qe.makeMap,B3=e=>{const n=[];e=e||{};const o=e.indent,r=N3(e.indent_before||""),c=N3(e.indent_after||""),u=Dl.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,w,k)=>{if(o&&r[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}if(n.push("<",b),w)for(let N=0,R=w.length;N<R;N++){const L=w[N];n.push(" ",L.name,'="',u(L.value,!0),'"')}if(!k||f?n[n.length]=">":n[n.length]=" />",k&&o&&c[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}},end:b=>{let w;n.push("</",b,">"),o&&c[b]&&n.length>0&&(w=n[n.length-1],w.length>0&&w!==`
`&&n.push(`
`))},text:(b,w)=>{b.length>0&&(n[n.length]=w?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,w)=>{w?n.push("<?",b," ",u(w),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Qh=(e={},n=ai())=>{const o=B3(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:w=>{var k;o.text((k=w.value)!==null&&k!==void 0?k:"",w.raw)},8:w=>{var k;o.comment((k=w.value)!==null&&k!==void 0?k:"")},7:w=>{o.pi(w.name,w.value)},10:w=>{var k;o.doctype((k=w.value)!==null&&k!==void 0?k:"")},4:w=>{var k;o.cdata((k=w.value)!==null&&k!==void 0?k:"")},11:w=>{let k=w;if(k=k.firstChild)do b(k);while(k=k.next)}};o.reset();const b=w=>{var k;const N=f[w.type];if(N)N(w);else{const R=w.name,L=R in n.getVoidElements();let Q=w.attributes;if(u&&Q&&Q.length>1){const te=[];te.map={};const j=n.getElementRule(w.name);if(j){for(let ee=0,ve=j.attributesOrder.length;ee<ve;ee++){const ge=j.attributesOrder[ee];if(ge in Q.map){const we=Q.map[ge];te.map[ge]=we,te.push({name:ge,value:we})}}for(let ee=0,ve=Q.length;ee<ve;ee++){const ge=Q[ee].name;if(!(ge in te.map)){const we=Q.map[ge];te.map[ge]=we,te.push({name:ge,value:we})}}Q=te}}if(o.start(R,Q,L),!L){let te=w.firstChild;if(te){(R==="pre"||R==="textarea")&&te.type===3&&((k=te.value)===null||k===void 0?void 0:k[0])===`
`&&o.text(`
`,!0);do b(te);while(te=te.next)}o.end(R)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},$3=new Set;De(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{$3.add(n)});const P3=["font","text-decoration","text-emphasis"],Cn=(e,n)=>xs(e.parseStyle(e.getAttrib(n,"style"))),I3=e=>$3.has(e),F3=(e,n)=>Jo(Cn(e,n),o=>!I3(o)),aF=e=>rn(e,n=>$t(P3,o=>fs(n,o))),I_=(e,n,o)=>{const r=Cn(e,n),c=Cn(e,o),u=f=>{var b,w;const k=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",N=(w=e.getStyle(o,f))!==null&&w!==void 0?w:"";return Lo(k)&&Lo(N)&&k!==N};return $t(r,f=>{const b=w=>$t(w,k=>k===f);if(!b(c)&&b(P3)){const w=aF(c);return $t(w,u)}else return u(f)})},L3=(e,n,o)=>H.from(o.container()).filter(mt).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),F_=je(L3,!0,Hh),L_=je(L3,!1,Hh),cF=e=>{const n=e.container();return mt(n)&&(n.data.length===0||me(n.data)&&Af.isBookmarkNode(n.parentNode))},ep=(e,n)=>o=>xg(e?0:-1,o).filter(n).isSome(),Iw=e=>cf(e)&&Ci(re.fromDom(e),"display")==="block",H_=e=>oo(e)&&!zu(e),SW=ep(!0,Iw),lF=ep(!1,Iw),zn=ep(!0,_l),Fw=ep(!1,_l),ro=ep(!0,xi),V_=ep(!1,xi),L1=ep(!0,H_),H1=ep(!1,H_),iF=e=>e.slice(0,-1),xW=(e,n,o)=>Fl(n,e)?iF(qf(e,r=>o(r)||ss(r,n))):[],uF=(e,n)=>xW(e,n,_e),$g=(e,n)=>[e].concat(uF(e,n)),z_=(e,n,o)=>FS(e,n,o,cF),$n=(e,n)=>ls($g(re.fromDom(n.container()),e),fl),H3=(e,n,o)=>z_(e,n.dom,o).forall(r=>$n(n,o).fold(()=>!da(r,o,n.dom),c=>!da(r,o,n.dom)&&Fl(c,re.fromDom(r.container())))),V3=(e,n,o)=>$n(n,o).fold(()=>z_(e,n.dom,o).forall(r=>!da(r,o,n.dom)),r=>z_(e,r.dom,o).isNone()),U_=je(V3,!1),t0=je(V3,!0),z3=je(H3,!1),dF=je(H3,!0),mF=e=>h1(e).exists(za),yx=(e,n,o)=>{const r=rn($g(re.fromDom(o.container()),n),fl),c=Bn(r).getOr(n);return Oi(e,c.dom,o).filter(mF)},wx=(e,n)=>h1(n).exists(za)||yx(!0,e,n).isSome(),W_=(e,n)=>NS(n).exists(za)||yx(!1,e,n).isSome(),TW=je(yx,!1),kW=je(yx,!0),U3=e=>He.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),W3=(e,n)=>{const o=rn($g(re.fromDom(n.container()),e),fl);return Bn(o).getOr(e)},Z3=(e,n)=>U3(n)?L_(n):L_(n)||wu(W3(e,n).dom,n).exists(L_),j3=(e,n)=>U3(n)?F_(n):F_(n)||el(W3(e,n).dom,n).exists(F_),G3=e=>Tt(["pre","pre-wrap"],e),Z_=e=>h1(e).bind(n=>E(n,Os)).exists(n=>G3(Ci(n,"white-space"))),go=(e,n)=>wu(e.dom,n).isNone(),q3=(e,n)=>el(e.dom,n).isNone(),Cx=(e,n)=>go(e,n)||q3(e,n)||U_(e,n)||t0(e,n)||W_(e,n)||wx(e,n),K3=e=>Pe(e)&&oo(e)&&Uy(e),j_=(e,n)=>o=>K3(new ia(o,e)[n]()),Y3=(e,n)=>{const o=el(e.dom,n).getOr(n),r=j_(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},X3=(e,n)=>{const o=wu(e.dom,n).getOr(n),r=j_(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},J3=(e,n)=>Z_(n)?!1:Cx(e,n)||Z3(e,n)||j3(e,n),Lw=(e,n)=>Z_(n)?!1:U_(e,n)||z3(e,n)||W_(e,n)||Z3(e,n)||X3(e,n),Q3=e=>{const n=e.container(),o=e.offset();return mt(n)&&o<n.data.length?He(n,o+1):e},Hw=(e,n)=>Z_(n)?!1:t0(e,n)||dF(e,n)||wx(e,n)||j3(e,n)||Y3(e,n),G_=(e,n)=>Lw(e,n)||Hw(e,Q3(n)),eR=(e,n)=>Lh(e.charAt(n)),tR=(e,n)=>Hh(e.charAt(n)),fF=e=>{const n=e.container();return mt(n)&&Ts(n.data,ps)},gF=e=>{const n=e.split("");return Vt(n,(o,r)=>Lh(o)&&r>0&&r<n.length-1&&VS(n[r-1])&&VS(n[r+1])?" ":o).join("")},nR=(e,n,o)=>{const r=n.data,c=He(n,0);return!o&&eR(r,0)&&!G_(e,c)?(n.data=" "+r.slice(1),!0):o&&tR(r,0)&&Lw(e,c)?(n.data=ps+r.slice(1),!0):!1},hF=e=>{const n=e.data,o=gF(n);return o!==n?(e.data=o,!0):!1},Sx=(e,n,o)=>{const r=n.data,c=He(n,r.length-1);return!o&&eR(r,r.length-1)&&!G_(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&tR(r,r.length-1)&&Hw(e,c)?(n.data=r.slice(0,-1)+ps,!0):!1},q_=(e,n)=>{const o=n.container();if(!mt(o))return H.none();if(fF(n)){const r=nR(e,o,!1)||hF(o)||Sx(e,o,!1);return mo(r,n)}else if(G_(e,n)){const r=nR(e,o,!0)||Sx(e,o,!0);return mo(r,n)}else return H.none()},pF=e=>{const n=re.fromDom(e.getBody());e.selection.isCollapsed()&&q_(n,He.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},oR=(e,n,o)=>{if(o===0)return;const r=re.fromDom(e),c=Zs(r,fl).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Hw(c,He(e,e.data.length)),b=n===0&&Lw(c,He(e,0));e.replaceData(n,o,Fp(u,4,b,f))},xx=(e,n)=>{const o=e.data.slice(n),r=o.length-ol(o).length;oR(e,n,r)},K_=(e,n)=>{const o=e.data.slice(0,n),r=o.length-sl(o).length;oR(e,n-r,r)},Y_=(e,n,o,r=!0)=>{const c=sl(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Ls(re.fromDom(f)),o&&xx(u,c),u},bF=(e,n)=>{const o=e.container(),r=e.offset();return!He.isTextPosition(e)&&o===n.parentNode&&r>He.before(n).offset()},vF=(e,n)=>bF(n,e)?He(n.container(),n.offset()-1):n,yF=e=>mt(e)?He(e,0):He.before(e),sR=e=>mt(e)?He(e,e.data.length):He.after(e),rR=e=>As(e.previousSibling)?H.some(sR(e.previousSibling)):e.previousSibling?Nm(e.previousSibling):H.none(),aR=e=>As(e.nextSibling)?H.some(yF(e.nextSibling)):e.nextSibling?ii(e.nextSibling):H.none(),V1=(e,n)=>H.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>wu(e,He.before(o))).orThunk(()=>el(e,He.after(n))),wF=(e,n)=>el(e,He.after(n)).orThunk(()=>wu(e,He.before(n))),cR=(e,n)=>rR(n).orThunk(()=>aR(n)).orThunk(()=>V1(e,n)),CF=(e,n)=>aR(n).orThunk(()=>rR(n)).orThunk(()=>wF(e,n)),SF=(e,n,o)=>e?CF(n,o):cR(n,o),lR=(e,n,o)=>SF(e,n,o).map(je(vF,o)),X_=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},iR=e=>n=>n.dom===e,uR=(e,n)=>n&&_n(e.schema.getBlockElements(),hs(n)),fi=e=>{if(Ir(e)){const n=re.fromHtml('<br data-mce-bogus="1">');return $s(e),Pr(e,n),H.some(He.before(n.dom))}else return H.none()},xF=(e,n,o)=>{const r=Kc(e).filter(wc),c=Od(e).filter(wc);return Ls(e),Cd(r,c,n,(u,f,b)=>{const w=u.dom,k=f.dom,N=w.data.length;return Y_(w,k,o),b.container()===k?He(w,N):b}).orThunk(()=>(o&&(r.each(u=>K_(u.dom,u.dom.length)),c.each(u=>xx(u.dom,0))),n))},TF=(e,n)=>_n(e.schema.getTextInlineElements(),hs(n)),z1=(e,n,o,r=!0)=>{const c=lR(n,e.getBody(),o.dom),u=Zs(o,je(uR,e),iR(e.getBody())),f=xF(o,c,TF(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(fi).fold(()=>{r&&X_(e,n,f)},b=>{r&&X_(e,n,H.some(b))})},kF=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,EF=e=>kF.test(e),sd=(e,n)=>Nc(re.fromDom(n),SE(e))&&!ff(e.schema,n)&&e.dom.isEditable(n),_F=e=>{var n;return Vs.DOM.getStyle(e,"direction",!0)==="rtl"||EF((n=e.textContent)!==null&&n!==void 0?n:"")},OF=(e,n,o)=>rn(Vs.DOM.getParents(o.container(),"*",n),e),pr=(e,n,o)=>{const r=OF(e,n,o);return H.from(r[r.length-1])},Tx=(e,n,o)=>{const r=kf(n,e),c=kf(o,e);return Pe(r)&&r===c},EW=e=>gl(e)||sc(e),Dr=(e,n)=>{const o=n.container(),r=n.offset();return e?Kn(o)?mt(o.nextSibling)?He(o.nextSibling,0):He.after(o):gl(n)?He(o,r+1):n:Kn(o)?mt(o.previousSibling)?He(o.previousSibling,o.previousSibling.data.length):He.before(o):sc(n)?He(o,r-1):n},bs=je(Dr,!0),ku=je(Dr,!1),dR=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},mR=e=>{e.execCommand("delete")},Vw=e=>dR(e,"Delete"),J_=e=>dR(e,"ForwardDelete"),fR=e=>n=>Br(Tl(n),e,ss),gR=e=>ih(e)||Ic(e),kx=(e,n)=>Fl(e,n)?E(n,gR,fR(e)):H.none(),Q_=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},eO=(e,n,o)=>qr(ii(o),Nm(o),(r,c)=>{const u=Dr(!0,r),f=Dr(!1,c),b=Dr(!1,n);return e?el(o,b).exists(w=>w.isEqual(f)&&n.isEqual(u)):wu(o,b).exists(w=>w.isEqual(u)&&n.isEqual(f))}).getOr(!0),tO=e=>(Pl(e)?Kc(e):Ll(e)).bind(tO).orThunk(()=>H.some(e)),rd=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=tO(o).getOr(o),f=re.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Q_(e,r):Ir(f)&&(S(f),r&&e.selection.setCursorLocation(f.dom,0)),!ss(o,f)){const b=Br(Tl(f),o)?[]:eh(f);De(b.concat(Da(o)),w=>{!ss(w,f)&&!Fl(w,f)&&Ir(w)&&Ls(w)})}},AF=e=>n=>ss(e,n),nO=e=>nc(e,"td,th"),_W=(e,n)=>{const o=k=>zh(re.fromDom(k),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=qr(r,c,ss).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},zw=(e,n)=>({start:e,end:n}),DF=(e,n,o)=>({rng:e,table:n,cells:o}),Pg=Ar.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Ex=(e,n)=>On(re.fromDom(e),"td,th",n),U1=e=>!ss(e.start,e.end),Eu=(e,n)=>zh(e.start,n).bind(o=>zh(e.end,n).bind(r=>mo(ss(o,r),o))),Uw=(e,n)=>!U1(e)&&Eu(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),tr=(e,n)=>{const o=Ex(e.startContainer,n),r=Ex(e.endContainer,n);return qr(o,r,zw)},Ww=e=>n=>zh(n,e).bind(o=>Yt(nO(o)).map(r=>zw(n,r))),hR=e=>n=>zh(n,e).bind(o=>Bn(nO(o)).map(r=>zw(r,n))),_x=e=>n=>Eu(n,e).map(o=>DF(n,o,nO(o))),Ox=(e,n,o,r)=>{if(o.collapsed||!e.forall(U1))return H.none();if(n.isSameTable){const c=e.bind(_x(r));return H.some({start:c,end:c})}else{const c=Ex(o.startContainer,r),u=Ex(o.endContainer,r),f=c.bind(Ww(r)).bind(_x(r)),b=u.bind(hR(r)).bind(_x(r));return H.some({start:f,end:b})}},Ax=(e,n)=>Ms(e,o=>ss(o,n)),Zw=e=>qr(Ax(e.cells,e.rng.start),Ax(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),oO=(e,n,o)=>e.exists(r=>Uw(r,o)&&WS(r.start,n)),jw=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},sO=(e,n,o,r)=>Ox(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=Zw(c).getOr([]);if(u&&c.cells.length===f.length)return H.some(Pg.fullTable(c.table));if(f.length>0){if(u)return H.some(Pg.partialTable(f,H.none()));{const b=jw(o,n);return H.some(Pg.partialTable(f,H.some({...n,rng:b})))}}else return H.none()}),pR=(e,n,o,r)=>Ox(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(Zw).getOr([]),b=u.bind(Zw).getOr([]);if(f.length>0&&b.length>0){const w=jw(o,n);return H.some(Pg.multiTable(f,b,w))}else return H.none()}),bR=(e,n)=>{const o=AF(e),r=tr(n,o),c=_W(n,o);return oO(r,n,o)?r.map(u=>Pg.singleCellTable(n,u.start)):c.isMultiTable?pR(r,c,n,o):sO(r,c,n,o)},rO=e=>De(e,n=>{kr(n,"contenteditable"),S(n)}),vR=(e,n)=>H.from(e.dom.getParent(n,e.dom.isBlock)).map(re.fromDom),yR=(e,n,o)=>{o.each(r=>{n?Ls(r):(S(r),e.selection.setCursorLocation(r.dom,0))})},tp=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),cO(e,c,n,!1).each(u=>u())},aO=e=>{const n=$m(e),o=re.fromDom(e.selection.getNode());Vl(o.dom)&&Ir(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&$t(n,r=>ss(r,o))&&Vr(o,"data-mce-selected","1")},Dx=(e,n,o)=>H.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=vR(e,f?u.endContainer:u.startContainer);u.deleteContents(),yR(e,f,b.filter(Ir));const w=f?n[0]:n[n.length-1];return tp(e,w,r,f),Ir(w)?H.none():H.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);rO(c),aO(e)}),RF=(e,n,o,r)=>H.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];tp(e,u,c,!0),tp(e,f,c,!1);const b=Ir(u)?n:n.slice(1),w=Ir(f)?o:o.slice(0,-1);rO(b.concat(w)),r.deleteContents(),aO(e)}),cO=(e,n,o,r=!0)=>H.some(()=>{rd(e,n,o,r)}),wR=(e,n)=>H.some(()=>z1(e,!1,n)),CR=(e,n,o)=>bR(n,o).bind(r=>r.fold(je(cO,e),je(wR,e),je(Dx,e),je(RF,e))),SR=(e,n)=>Gw(e,n),Rx=(e,n,o,r)=>Mx(n,r).fold(()=>CR(e,n,o),c=>SR(e,c)),xR=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?Dx(e,o,H.none()):Rx(e,r,c,n)},lO=(e,n)=>ls($g(n,e),Sc),Mx=(e,n)=>ls($g(n,e),wi("caption")),TR=(e,n,o,r,c)=>kv(o,e.getBody(),c).bind(u=>lO(n,re.fromDom(u.getNode())).bind(f=>ss(f,r)?H.none():H.some(jt))),Gw=(e,n)=>H.some(()=>{S(n),e.selection.setCursorLocation(n.dom,0)}),kR=(e,n,o,r)=>ii(e.dom).bind(c=>Nm(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),ER=(e,n)=>Gw(e,n),_R=(e,n,o)=>Mx(e,re.fromDom(o.getNode())).fold(()=>H.some(jt),r=>mo(!ss(r,n),jt)),OR=(e,n,o,r,c)=>kv(o,e.getBody(),c).fold(()=>H.some(jt),u=>kR(r,o,c,u)?ER(e,r):_R(n,r,u)),AR=(e,n,o,r)=>{const c=He.fromRangeStart(e.selection.getRng());return lO(o,r).bind(u=>Ir(u)?Gw(e,u):TR(e,o,n,u,c))},DR=(e,n,o,r)=>{const c=He.fromRangeStart(e.selection.getRng());return Ir(r)?Gw(e,r):OR(e,o,n,r,c)},iO=(e,n)=>e?ro(n):V_(n),RR=(e,n)=>{const o=He.fromRangeStart(e.selection.getRng());return iO(n,o)||Oi(n,e.getBody(),o).exists(r=>iO(n,r))},MR=(e,n,o)=>{const r=re.fromDom(e.getBody());return Mx(r,o).fold(()=>AR(e,n,r,o).orThunk(()=>mo(RR(e,n),jt)),c=>DR(e,n,r,c))},Nx=(e,n)=>{const o=re.fromDom(e.selection.getStart(!0)),r=$m(e);return e.selection.isCollapsed()&&r.length===0?MR(e,n,o):xR(e,o,r)},Ig=(e,n)=>{let o=n;for(;o&&o!==e;){if(Wi(o)||oo(o))return o;o=o.parentNode}return null},Bx=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],NR=Qe.each,$x=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=k=>{const N={};return NR(n.getAttribs(k),R=>{const L=R.nodeName.toLowerCase();L!=="style"&&!c(L)&&(N[L]=n.getAttrib(k,L))}),N},w=(k,N)=>{for(const R in k)if(_n(k,R)){const L=N[R];if(Mn(L)||k[R]!==L)return!1;delete N[R]}for(const R in N)if(_n(N,R))return!1;return!0};return ze(u)&&ze(f)&&(!w(b(u),b(f))||!w(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!lc(u)&&!lc(f)},c=u=>$t(Bx,f=>fs(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Px=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},Ix=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const w=r.nodes[c];w?w.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],w=b.name;if(w in o.attributes.map){const k=r.attributes[w];k?k.nodes.push(o):r.attributes[w]={filter:b,nodes:[o]}}}},qw=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Px(o,c=>{Ix(e,n,c,r)}),r},Fx=(e,n)=>{const o=(r,c)=>{ht(r,u=>{const f=Ns(u.nodes);De(u.filter.callbacks,b=>{for(let w=f.length-1;w>=0;w--){const k=f[w];(!(c?k.attr(u.filter.name)!==void 0:k.name===u.filter.name)||Bt(k.parent))&&f.splice(w,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},uO=(e,n,o,r={})=>{const c=qw(e,n,o);Fx(c,r)},np=(e,n,o)=>{if(e.insert&&n(o)){const r=new Mi("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Mi("#text",3)).value=ps},dO=e=>{var n;return Lx(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ps},Lx=(e,n)=>{const o=e==null?void 0:e.firstChild;return Pe(o)&&o===e.lastChild&&o.name===n},Kw=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Jd=(e,n,o,r)=>r.isEmpty(n,o,c=>Kw(e,c)),BR=(e,n)=>Pe(e)&&(n(e)||e.name==="br"),MF=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return H.from(n)},Hx=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Hx(c,n,o);e.unwrap()}},Vx=(e,n,o,r=jt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Qe.makeMap("tr,td,th,tbody,thead,tfoot,table"),w=new Set,k=N=>N!==o&&!b[N.name];for(let N=0;N<e.length;N++){const R=e[N];let L,Q,te;if(!R.parent||w.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let ee=R.next;for(;ee&&c[ee.name];){ee.name="li",w.add(ee),R.parent.insert(ee,R.parent);ee=ee.next}R.unwrap();continue}const j=[R];for(L=R.parent;L&&!n.isValidChild(L.name,R.name)&&k(L);L=L.parent)j.push(L);if(L&&j.length>1)if(n.isValidChild(L.name,R.name)){j.reverse(),Q=j[0].clone(),r(Q);let ee=Q;for(let ve=0;ve<j.length-1;ve++){n.isValidChild(ee.name,j[ve].name)&&ve>0?(te=j[ve].clone(),r(te),ee.append(te)):te=ee;for(let ge=j[ve].firstChild;ge&&ge!==j[ve+1];){const we=ge.next;te.append(ge),ge=we}ee=te}Jd(n,u,f,Q)?L.insert(R,j[0],!0):(L.insert(Q,j[0],!0),L.insert(R,Q)),L=j[0],(Jd(n,u,f,L)||Lx(L,"br"))&&L.empty().remove()}else Hx(R,n);else if(R.parent){if(R.name==="li"){let ee=R.prev;if(ee&&(ee.name==="ul"||ee.name==="ol")){ee.append(R);continue}if(ee=R.next,ee&&(ee.name==="ul"||ee.name==="ol")&&ee.firstChild){ee.insert(R,ee.firstChild,!0);continue}const ve=new Mi("ul",1);r(ve),R.wrap(ve);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const ee=new Mi("div",1);r(ee),R.wrap(ee)}else Hx(R,n)}}},NF=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},BF=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&NF(o,"a")),$F=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},mO=e=>{const n=He.fromRangeStart(e),o=He.fromRangeEnd(e),r=e.commonAncestorContainer;return Oi(!1,r,o).map(c=>!da(n,o,r)&&da(n,c,r)?$F(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},ad=e=>e.collapsed?e:mO(e),fO=e=>Pe(e.firstChild)&&e.firstChild===e.lastChild,zx=e=>e.name==="br"||e.value===ps,gO=(e,n)=>e.getBlockElements()[n.name]&&fO(n)&&zx(n.firstChild),PF=(e,n)=>{const o=e.getNonEmptyElements();return Pe(n)&&(n.isEmpty(o)||gO(e,n))},$R=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),PF(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},IF=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},PR=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return IF(c)},hO=e=>{var n;return rn((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},FF=e=>e.data===ps||gr(e),IR=e=>Pe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&FF(e.firstChild),LF=e=>!e.firstChild||IR(e),Yw=e=>e.length>0&&LF(e[e.length-1])?e.slice(0,-1):e,Ux=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},HF=(e,n)=>!!Ux(e,n),FR=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},VF=(e,n)=>{const o=He.before(e),c=td(n).next(o);return c?c.toRange():null},LR=(e,n)=>{const o=He.after(e),c=td(n).prev(o);return c?c.toRange():null},zF=(e,n,o,r)=>{const c=FR(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Qe.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),LR(n[n.length-1],o)},UF=(e,n,o)=>{const r=e.parentNode;return r&&Qe.each(n,c=>{r.insertBefore(c,e)}),VF(e,o)},WF=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),LR(n[0],o)),HR=(e,n,o,r)=>{const c=PR(n,e,r),u=Ux(n,o.startContainer),f=Yw(hO(c.firstChild)),b=1,w=2,k=n.getRoot(),N=R=>{const L=He.fromRangeStart(o),Q=td(n.getRoot()),te=R===b?Q.prev(L):Q.next(L),j=te==null?void 0:te.getNode();return j?Ux(n,j)!==u:!0};return u?N(b)?UF(u,f,k):N(w)?WF(u,f,k,n):zF(u,f,k,o):null},ZF=["pre"],pO=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,w=u===b,k=Tt(ZF,u.name);if(w&&k){const N=u.attr("contenteditable")!=="false",R=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,L=H.from(Ig(r,o)).forall(Wi);return N&&R&&L}else return!1},Fg=Vl,jF=(e,n,o)=>{if(Pe(o)){const r=e.getParent(n.endContainer,Fg);return o===r&&WS(re.fromDom(o),n)}else return!1},GF=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},Wx=(e,n)=>{H.from(e.getParent(n,"td,th")).map(re.fromDom).each(F)},VR=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=$x(e);Qe.each(r.select("*[data-mce-fragment]"),f=>{if(Pe(o[f.nodeName.toLowerCase()])&&F3(r,f)){for(let w=f.parentElement;Pe(w)&&w!==c&&!I_(r,f,w);w=w.parentElement)if(u.compare(w,f)){r.remove(f,!0);break}}})}},zR=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},qF=e=>{Qe.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},UR=e=>!!e.getAttribute("data-mce-fragment"),KF=(e,n)=>Pe(n)&&!e.schema.getVoidElements()[n.nodeName],W1=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const w=Ig(e.getBody(),n);if(w&&f.getContentEditable(w)==="false"){f.remove(n),b.select(w);return}let k=f.createRng();const N=n.previousSibling;if(mt(N)){k.setStart(N,(r=(o=N.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Q=n.nextSibling;mt(Q)&&(N.appendData(Q.data),(c=Q.parentNode)===null||c===void 0||c.removeChild(Q))}else k.setStartBefore(n),k.setEndBefore(n);const R=Q=>{let te=He.fromRangeStart(Q);return te=td(e.getBody()).next(te),te==null?void 0:te.toRange()},L=f.getParent(n,f.isBlock);f.remove(n),L&&f.isEmpty(L)&&($s(re.fromDom(L)),k.setStart(L,0),k.setEnd(L,0),!Fg(L)&&!UR(L)&&(u=R(k))?(k=u,f.remove(L)):f.add(L,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(k)},WR=e=>{const n=e.dom,o=ad(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Fg);jF(n,o,r)?cO(e,o,re.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&mt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},ZR=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return H.some(n);return H.none()},jR=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,w=o.merge,k=Qh({validate:!0},e.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,N);let R=u.getRng();const L=R.startContainer,Q=e.getBody();L===Q&&u.isCollapsed()&&f.isBlock(Q.firstChild)&&KF(e,Q.firstChild)&&f.isEmpty(Q.firstChild)&&(R=f.createRng(),R.setStart(Q.firstChild,0),R.setEnd(Q.firstChild,0),u.setRng(R)),u.isCollapsed()||WR(e);const te=u.getNode(),j={context:te.nodeName.toLowerCase(),data:o.data,insert:!0},ee=b.parse(n,j);if(o.paste===!0&&$R(e.schema,ee)&&HF(f,te))return R=HR(k,f,u.getRng(),ee),R&&u.setRng(R),n;o.paste===!0&&pO(f,ee,te,e.getBody())&&((r=ee.firstChild)===null||r===void 0||r.unwrap()),zR(ee);let ve=ee.lastChild;if(ve&&ve.attr("id")==="mce_marker"){const ge=ve;for(ve=ve.prev;ve;ve=ve.walk(!0))if(ve.type===3||!f.isBlock(ve.name)){ve.parent&&e.schema.isValidChild(ve.parent.name,"span")&&ve.parent.insert(ge,ve,ve.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(te),!j.invalid)n=k.serialize(ee),GF(e,n,te);else{e.selection.setContent(N);let ge=u.getNode(),we;const ke=e.getBody();for(Ui(ge)?ge=we=ke:we=ge;we&&we!==ke;)ge=we,we=we.parentNode;n=ge===ke?ke.innerHTML:f.getOuterHTML(ge);const Ke=b.parse(n),Ot=ZR(Ke),yt=Ot.bind(MF).getOr(Ke);Ot.each(bn=>bn.replace(ee));const Me=ee.children(),Ne=(c=ee.parent)!==null&&c!==void 0?c:Ke;ee.unwrap();const Ut=rn(Me,bn=>BF(e.schema,bn,Ne));Vx(Ut,e.schema,yt),uO(b.getNodeFilters(),b.getAttributeFilters(),Ke),n=k.serialize(Ke),ge===ke?f.setHTML(ke,n):f.setOuterHTML(ge,n)}return VR(e,w),W1(e,f.get("mce_marker")),qF(e.getBody()),Wx(f,u.getStart()),Fd(e.schema,e.getBody(),u.getStart()),n},Z1=e=>e instanceof Mi,GR=e=>{Jh(e)&&ii(e.getBody()).each(n=>{const o=n.getNode(),r=xi(o)?ii(o).getOr(n):n;e.selection.setRng(r.toRange())})},bO=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&GR(e)},qR=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=ua(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,av(e),o)):o||(o=c),bO(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Qh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=ni(re.fromDom(n))?o:Qe.trim(o);return bO(e,c,r.no_selection),{content:c,html:c}}},YF=(e,n,o,r)=>{uO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Qh({validate:!1},e.schema).serialize(o),u=ni(re.fromDom(n))?c:Qe.trim(c);return bO(e,u,r.no_selection),{content:o,html:u}},XF=(e,n,o)=>H.from(e.getBody()).map(r=>Z1(n)?YF(e,r,n,o):qR(e,r,n,o)).getOr({content:n,html:Z1(o.content)?"":o.content}),Zx=(e,n,o)=>Zs(e,n,o).isSome(),KR=(e,n)=>M(e,n).isSome(),jx=e=>fe(e)?e:_e,JF=(e,n,o)=>{let r=e.dom;const c=jx(o);for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return H.none()},vO=(e,n,o)=>{const r=n(e),c=jx(o);return r.orThunk(()=>c(e)?H.none():JF(e,n,c))},Gx=lw,qx=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Ai(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Kx=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>qx(e,b,o)?!0:b.parentNode===u||!!Nf(e,b,o,r,!0));return!!Nf(e,f,o,r,c)},Yx=(e,n,o)=>Sa(o)&&Gx(n,o.inline)||Ki(o)&&Gx(n,o.block)?!0:Ai(o)?ze(n)&&e.is(n,o.selector):!1,YR=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(fe(o.onmatch))return o.onmatch(n,o,r);if(f){if(Ja(f)){for(let w=0;w<f.length;w++)if(b?e.getAttrib(n,f[w]):Iv(e,n,f[w]))return!0}else for(const w in f)if(_n(f,w)){const k=b?e.getAttrib(n,w):Iv(e,n,w),N=Of(f[w],u),R=Bt(k)||ba(k);if(R&&Bt(N))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!Gx(k,iw(N,w)))return!1}}return!0},Nf=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&ze(n))for(let b=0;b<u.length;b++){const w=u[b];if(Yx(e.dom,n,w)&&YR(f,n,w,"attributes",c,r)&&YR(f,n,w,"styles",c,r)){const k=w.classes;if(k){for(let N=0;N<k.length;N++)if(!e.dom.hasClass(n,Of(k[N],r)))return}return w}}},n0=(e,n,o,r,c)=>{if(r)return Kx(e,r,n,o,c);if(r=e.selection.getNode(),Kx(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Kx(e,u,n,o,c))},Lg=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const w=n[b];!c[w]&&Nf(e,f,w,o)&&(c[w]=!0,r.push(w))}},e.dom.getRoot()),r},QF=(e,n)=>{const o=c=>ss(c,re.fromDom(e.getBody())),r=(c,u)=>Nf(e,c.dom,u)?H.some(u):H.none();return H.from(e.selection.getStart(!0)).bind(c=>vO(re.fromDom(c),u=>ga(n,f=>r(u,f)),o)).getOrNull()},yO=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=Pm(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Ai(b))return!0;for(let w=u.length-1;w>=0;w--)if(r.is(u[w],b.selector))return!0}}return!1},xa=(e,n,o)=>zo(o,(r,c)=>{const u=zt(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),op=W,wO=(e,n)=>e.importNode(n,!0),Hg=e=>{const n=[];let o=e;for(;o;){if(mt(o)&&o.data!==op||o.childNodes.length>1)return[];ze(o)&&n.push(o),o=o.firstChild}return n},CO=e=>Hg(e).length>0,Xx=e=>{if(e){const n=new ia(e,e);for(let o=n.current();o;o=n.next())if(mt(o))return o}return null},j1=e=>{const n=re.fromTag("span");return tc(n,{id:qE,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Pr(n,re.fromText(op)),n},eL=e=>{const n=Xx(e);return n&&n.data.charAt(0)===op&&n.deleteData(0,1),n},SO=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(CO(n))z1(e,!1,re.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,w=u.startOffset,k=u.endContainer,N=u.endOffset,R=eL(n);r.remove(n,!0),b===R&&w>0&&u.setStart(R,w-1),k===R&&N>0&&u.setEnd(R,N-1),f&&r.isEmpty(f)&&S(re.fromDom(f)),c.setRng(u)}},sp=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)SO(e,n,o);else if(n=Ba(e.getBody(),c.getStart()),!n)for(;n=r.get(qE);)SO(e,n,!1)},tL=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,je(aw,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(uh(re.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},rp=(e,n)=>(e.appendChild(n),n),XR=(e,n)=>{var o;const r=Ea(e,(u,f)=>rp(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return rp(r,c.createTextNode(op))},ap=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,w=rn(xs(f.get()),R=>R!==r&&!Ts(R,"removeformat")),k=xa(e,o,w);if(rn(k,R=>!ic(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,c,R,u),b.remove(R),H.some(R)}else return H.none()},Qd=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const k=f.startContainer.nodeValue;r=Ba(e.getBody(),c.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&b>0&&b<k.length&&N.test(k.charAt(b))&&N.test(k.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let L=ui(e.dom,f,u);L=Dw(L),e.formatter.apply(n,o,L),c.moveToBookmark(R)}else{let R=r?Xx(r):null;(!r||(R==null?void 0:R.data)!==op)&&(r=wO(e.getDoc(),j1(!0).dom),R=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(R,b)}},Jx=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const w=u.getRng(),k=w.startContainer,N=w.startOffset;let R=k;mt(k)&&(N!==k.data.length&&(f=!0),R=R.parentNode);const L=[];let Q;for(;R;){if(Nf(e,R,n,o,r)){Q=R;break}R.nextSibling&&(f=!0),L.push(R),R=R.parentNode}if(Q)if(f){const te=u.getBookmark();w.collapse(!0);let j=ui(c,w,b,!0);j=Dw(j),e.formatter.remove(n,o,j,r),u.moveToBookmark(te)}else{const te=Ba(e.getBody(),Q),j=j1(!1).dom;tL(e,j,te??Q);const ee=ap(e,j,Q,n,o,r),ve=XR(L.concat(ee.toArray()),j);te&&SO(e,te,!1),u.setCursorLocation(ve,1),c.isEmpty(Q)&&c.remove(Q)}},xO=(e,n)=>{const o=e.selection,r=e.getBody();sp(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===op&&sp(e,Ba(r,o.getStart())),(n===37||n===39)&&sp(e,Ba(r,o.getStart()))},nL=e=>{e.on("mouseup keydown",n=>{xO(e,n.keyCode)})},JR=e=>{const n=j1(!1),o=XR(e,n.dom);return{caretContainer:n,caretPosition:He(o,0)}},Xw=(e,n)=>{const{caretContainer:o,caretPosition:r}=JR(n);return is(re.fromDom(e),o),Ls(re.fromDom(e)),r},oL=(e,n)=>{const{caretContainer:o,caretPosition:r}=JR(n);return e.selection.getRng().insertNode(o.dom),r},cd=(e,n)=>{const o=e.schema.getTextInlineElements();return _n(o,hs(n))&&!Nl(n.dom)&&!oc(n.dom)},Jw=e=>Nl(e.dom)&&CO(e.dom),o0={},Qx=ei(["pre"]),TO=(e,n)=>{o0[e]||(o0[e]=[]),o0[e].push(n)},G1=(e,n)=>{_n(o0,e)&&De(o0[e],o=>{o(n)})};TO("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return Qx(f)&&Tt(c,f)},r=(c,u)=>{const f=re.fromDom(u),b=cl(f).dom;Ls(f),Hu(re.fromDom(c),[re.fromTag("br",b),re.fromTag("br",b),...Da(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=rn(rn(c,Qx),o(c));De(u,f=>{r(f.previousSibling,f)})}});const eT=["fontWeight","fontStyle","color","fontSize","fontFamily"],sL=e=>Xe(e.styles)&&$t(xs(e.styles),n=>Tt(eT,n)),QR=e=>ls(e,n=>Sa(n)&&n.inline==="span"&&sL(n)),eM=(e,n)=>{const o=e.get(n);return at(o)?QR(o):H.none()},tM=(e,n)=>wu(n,He.fromRangeStart(e)).isNone(),nM=(e,n)=>el(n,He.fromRangeEnd(e)).exists(o=>!gr(o.getNode())||el(n,o).isSome())===!1,oM=e=>n=>dl(n)&&e.isEditable(n),Qw=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return tM(o,n[0])&&nM(o,n[0])?n:[];{const r=Bn(n).filter(f=>tM(o,f)).toArray(),c=Yt(n).filter(f=>nM(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},rL=e=>rn(Qw(e),oM(e.dom)),kO=e=>rn(e.getSelectedBlocks(),oM(e.dom)),eC=Qe.each,EO=e=>ze(e)&&!lc(e)&&!Nl(e)&&!oc(e),_O=(e,n)=>{for(let o=e;o;o=o[n]){if(mt(o)&&Lo(o.data))return e;if(ze(o)&&!lc(o))return o}return e},OO=(e,n,o)=>{const r=$x(e),c=ze(n)&&_f(n),u=ze(o)&&_f(o);if(c&&u){const f=_O(n,"previousSibling"),b=_O(o,"nextSibling");if(r.compare(f,b)){for(let w=f.nextSibling;w&&w!==b;){const k=w;w=w.nextSibling,f.appendChild(k)}return e.dom.remove(b),Qe.each(Qe.grep(b.childNodes),w=>{f.appendChild(w)}),f}}return o},sM=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=OO(e,GS(r),r))!==null&&c!==void 0?c:r;OO(e,u,GS(u,!0))}},aL=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";eC(e.select(r,o),c=>{EO(c)&&_f(c)&&eC(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},AO=(e,n,o)=>{eC(e.childNodes,r=>{EO(r)&&(n(r)&&o(r),r.hasChildNodes()&&AO(r,n,o))})},cL=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},rM=(e,n)=>o=>!!(o&&Iv(e,o,n)),aM=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),cL(e,r)},q1=Ar.generate([{keep:[]},{rename:["name"]},{removed:[]}]),lL=/^(src|href|style)$/,DO=Qe.each,tT=lw,iL=e=>/^(TR|TH|TD)$/.test(e.nodeName),cM=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),lM=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(ze(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return mt(r)&&o&&c>=r.data.length&&(r=new ia(r,e.getBody()).next()||r),mt(r)&&!o&&c===0&&(r=new ia(r,e.getBody()).prev()||r),r},RO=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return iL(e)&&r?e.nodeName==="TR"&&r[o]||r:e},MO=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},K1=(e,n,o,r,c)=>{const u=re.fromDom(n),f=re.fromDom(e.create(r,c)),b=o?ll(u):th(u);return Hu(f,b),o?(is(u,f),Rd(f,u)):(Lu(u,f),Pr(f,u)),f.dom},uL=(e,n)=>n.links&&e.nodeName==="A",iM=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=ua(e);Ki(o)&&r===u.getRoot()&&(!o.list_block||!tT(n,o.list_block))&&De(Ns(n.childNodes),b=>{Wh(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=MO(u,b,f),u.setAttribs(c,av(e))):c=null}),!(dw(o)&&!tT(o.inline,n))&&u.remove(n,!0)},uM=(e,n,o)=>Vo(e)?{name:n,value:null}:{name:e,value:Of(n,o)},dM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},NO=(e,n,o,r,c)=>{let u=!1;DO(o.styles,(f,b)=>{const{name:w,value:k}=uM(b,f,r),N=iw(k,w);(o.remove_similar||q(k)||!ze(c)||tT(Iv(e,c,w),N))&&e.setStyle(n,w,""),u=!0}),u&&dM(e,n)},dL=(e,n,o)=>{n==="removeformat"?De(kO(e.selection),r=>{De(eT,c=>e.dom.setStyle(r,c,"")),dM(e.dom,r)}):eM(e.formatter,n).each(r=>{De(kO(e.selection),c=>NO(e.dom,c,r,o,null))})},mM=(e,n,o,r,c)=>{const u=e.dom,f=$x(e),b=e.schema;if(Sa(n)&&xm(b,n.inline)&&ff(b,r)&&r.parentElement===e.getBody())return iM(e,r,n),q1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Yx(u,r,n)&&!uL(r,n))return q1.keep();const w=r,k=n.preserve_attributes;if(Sa(n)&&n.remove==="all"&&at(k)){const N=rn(u.getAttribs(w),R=>Tt(k,R.name.toLowerCase()));if(u.removeAllAttribs(w),De(N,R=>u.setAttrib(w,R.name,R.value)),N.length>0)return q1.rename("span")}if(n.remove!=="all"){NO(u,w,n,o,c),DO(n.attributes,(R,L)=>{const{name:Q,value:te}=uM(L,R,o);if(n.remove_similar||q(te)||!ze(c)||tT(u.getAttrib(c,Q),te)){if(Q==="class"){const j=u.getAttrib(w,Q);if(j){let ee="";if(De(j.split(/\s+/),ve=>{/mce\-\w+/.test(ve)&&(ee+=(ee?" ":"")+ve)}),ee){u.setAttrib(w,Q,ee);return}}}if(lL.test(Q)&&w.removeAttribute("data-mce-"+Q),Q==="style"&&ei(["li"])(w)&&u.getStyle(w,"list-style-type")==="none"){w.removeAttribute(Q),u.setStyle(w,"list-style-type","none");return}Q==="class"&&w.removeAttribute("className"),w.removeAttribute(Q)}}),DO(n.classes,R=>{R=Of(R,o),(!ze(c)||u.hasClass(c,R))&&u.removeClass(w,R)});const N=u.getAttribs(w);for(let R=0;R<N.length;R++){const L=N[R].nodeName;if(!f.isAttributeInternal(L))return q1.keep()}}return n.remove!=="none"?(iM(e,w,n),q1.removed()):q1.keep()},tC=(e,n,o,r,c)=>mM(e,n,o,r,c).fold(_e,u=>(e.dom.rename(r,u),!0),gt),mL=(e,n,o,r,c)=>{let u;return n.parentNode&&De(Pm(e.dom,n.parentNode).reverse(),f=>{if(!u&&ze(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Nf(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},fL=(e,n,o,r)=>mM(e,n,o,r,r).fold(nt(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),nt(null)),gL=(e,n,o,r,c,u,f,b)=>{var w,k;let N,R;const L=e.dom;if(o){const Q=o.parentNode;for(let te=r.parentNode;te&&te!==Q;te=te.parentNode){let j=L.clone(te,!1);for(let ee=0;ee<n.length&&(j=fL(e,n[ee],b,j),j!==null);ee++);j&&(N&&j.appendChild(N),R||(R=j),N=j)}u&&(!f.mixed||!L.isBlock(o))&&(r=(w=L.split(o,r))!==null&&w!==void 0?w:r),N&&R&&((k=c.parentNode)===null||k===void 0||k.insertBefore(N,c),R.appendChild(c),Sa(f)&&sM(e,f,b,N))}return r},fM=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,w=e.selection,k=j=>{const ee=mL(e,j,n,o,c);return gL(e,u,ee,j,j,!0,f,o)},N=j=>lc(j)&&ze(j)&&(j.id==="_start"||j.id==="_end"),R=j=>$t(u,ee=>tC(e,ee,o,j,j)),L=j=>{const ee=Ns(j.childNodes),ge=R(j)||$t(u,Ke=>Yx(b,j,Ke)),we=j.parentNode;if(!ge&&Pe(we)&&Zh(f)&&R(we),f.deep&&ee.length)for(let Ke=0;Ke<ee.length;Ke++)L(ee[Ke]);De(["underline","line-through","overline"],Ke=>{ze(j)&&e.dom.getStyle(j,"text-decoration")===Ke&&j.parentNode&&KS(b,j.parentNode)===Ke&&tC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ke}},void 0,j)})},Q=j=>{const ee=b.get(j?"_start":"_end");if(ee){let ve=ee[j?"firstChild":"lastChild"];return N(ve)&&(ve=ve[j?"firstChild":"lastChild"]),mt(ve)&&ve.data.length===0&&(ve=j?ee.previousSibling||ee.nextSibling:ee.nextSibling||ee.previousSibling),b.remove(ee,!0),ve}else return null},te=j=>{let ee,ve,ge=ui(b,j,u,j.collapsed);if(f.split){if(ge=Dw(ge),ee=lM(e,ge,!0),ve=lM(e,ge),ee!==ve){if(ee=RO(ee,!0),ve=RO(ve,!1),cM(b,ee,ve)){const ke=H.from(ee.firstChild).getOr(ee);k(K1(b,ke,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Q(!0);return}if(cM(b,ve,ee)){const ke=H.from(ve.lastChild).getOr(ve);k(K1(b,ke,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Q(!1);return}ee=MO(b,ee,"span",{id:"_start","data-mce-type":"bookmark"}),ve=MO(b,ve,"span",{id:"_end","data-mce-type":"bookmark"});const we=b.createRng();we.setStartAfter(ee),we.setEndBefore(ve),A1(b,we,ke=>{De(ke,Ke=>{!lc(Ke)&&!lc(Ke.parentNode)&&k(Ke)})}),k(ee),k(ve),ee=Q(!0),ve=Q()}else ee=ve=k(ee);ge.startContainer=ee.parentNode?ee.parentNode:ee,ge.startOffset=b.nodeIndex(ee),ge.endContainer=ve.parentNode?ve.parentNode:ve,ge.endOffset=b.nodeIndex(ve)+1}A1(b,ge,we=>{De(we,L)})};if(r){if(Uh(r)){const j=b.createRng();j.setStartBefore(r),j.setEndAfter(r),te(j)}else te(r);Cw(e,n,r,o);return}!w.isCollapsed()||!Sa(f)||$m(e).length?(x1(e,()=>ZS(e,te),j=>Sa(f)&&n0(e,n,o,j)),e.nodeChanged()):Jx(e,n,o,c),dL(e,n,o),Cw(e,n,r,o)},gM=Qe.each,hL=(e,n,o,r)=>{const c=u=>{if(ze(u)&&ze(u.parentNode)&&_f(u)){const f=KS(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Qe.walk(r,c,"childNodes"),c(r))},pL=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=rM(e,"fontSize");AO(r,u=>c(u)&&_f(u),aM(e,"backgroundColor",Of(n.styles.backgroundColor,o)))}},BO=(e,n,o,r)=>{if(Sa(n)&&(n.inline==="sub"||n.inline==="sup")){const c=rM(e,"fontSize");AO(r,f=>c(f)&&_f(f),aM(e,"fontSize",""));const u=rn(e.select(n.inline==="sup"?"sub":"sup",r),_f);e.remove(u,!0)}},hM=(e,n,o,r)=>{gM(n,c=>{Sa(c)&&gM(e.dom.select(c.inline,r),u=>{EO(u)&&tC(e,c,o,u,c.exact?u:null)}),aL(e.dom,c,r)})},OW=(e,n,o,r,c)=>{const u=c.parentNode;Nf(e,u,o,r)&&tC(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>Nf(e,f,o,r)?(tC(e,n,r,c),!0):!1)},cp=Qe.each,pM=(e,n,o,r)=>{if(Py(e)&&Sa(n)&&o.parentNode){const c=uy(e.schema),u=KR(re.fromDom(o),f=>Nl(f.dom));return Zr(c,r)&&Ir(re.fromDom(o.parentNode),!1)&&!u}else return!1},s0=(e,n,o,r)=>{if(cp(o.styles,(c,u)=>{e.setStyle(n,u,Of(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},r0=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,w=e.selection,k=(te,j=u)=>{fe(j.onformat)&&j.onformat(te,j,o,r),s0(b,te,j,o),cp(j.attributes,(ee,ve)=>{b.setAttrib(te,ve,Of(ee,o))}),cp(j.classes,ee=>{const ve=Of(ee,o);b.hasClass(te,ve)||b.addClass(te,ve)})},N=(te,j)=>{let ee=!1;return cp(te,ve=>Ai(ve)?b.getContentEditable(j)==="false"&&!ve.ceFalseOverride||Pe(ve.collapsed)&&ve.collapsed!==f?!0:b.is(j,ve.selector)&&!Nl(j)?(k(j,ve),ee=!0,!1):!0:!1),ee},R=te=>{if(G(te)){const j=b.create(te);return k(j),j}else return null},L=(te,j,ee)=>{const ve=[];let ge=!0;const we=u.inline||u.block,ke=R(we),Ke=Me=>$a(u)&&Nf(e,Me,n,o),Ot=(Me,Ne,Ut)=>{const bn=Cu(u)&&aw(e.schema,Me)&&Wh(e,Ne,we);return Ut&&bn},yt=(Me,Ne,Ut,bn)=>{const Rn=Me.nodeName.toLowerCase(),co=Wh(e,we,Rn)&&Wh(e,Ne,we),Do=!ee&&mt(Me)&&me(Me.data),vs=Nl(Me),Us=!Sa(u)||!te.isBlock(Me);return(Ut||bn)&&co&&!Do&&!vs&&Us};A1(te,j,Me=>{let Ne;const Ut=bn=>{let Rn=!1,co=ge,Do=!1;const vs=bn.parentNode,Us=vs.nodeName.toLowerCase(),oa=te.getContentEditable(bn);Pe(oa)&&(co=ge,ge=oa==="true",Rn=!0,Do=qS(e,bn));const yl=ge&&!Rn;if(gr(bn)&&!pM(e,u,bn,Us)){Ne=null,Ki(u)&&te.remove(bn);return}if(Ke(bn)){Ne=null;return}if(Ot(bn,Us,yl)){const fc=te.rename(bn,we);k(fc),ve.push(fc),Ne=null;return}if(Ai(u)){let fc=N(c,bn);if(!fc&&Pe(vs)&&Zh(u)&&(fc=N(c,vs)),!Sa(u)||fc){Ne=null;return}}Pe(ke)&&yt(bn,Us,yl,Do)?(Ne||(Ne=te.clone(ke,!1),vs.insertBefore(Ne,bn),ve.push(Ne)),Do&&Rn&&(ge=co),Ne.appendChild(bn)):(Ne=null,De(Ns(bn.childNodes),Ut),Rn&&(ge=co),Ne=null)};De(Me,Ut)}),u.links===!0&&De(ve,Me=>{const Ne=Ut=>{Ut.nodeName==="A"&&k(Ut,u),De(Ns(Ut.childNodes),Ne)};Ne(Me)}),De(ve,Me=>{const Ne=Rn=>{let co=0;return De(Rn.childNodes,Do=>{!Pv(Do)&&!lc(Do)&&co++}),co},Ut=Rn=>ls(Rn.childNodes,$v).filter(Do=>te.getContentEditable(Do)!=="false"&&Yx(te,Do,u)).map(Do=>{const vs=te.clone(Do,!1);return k(vs),te.replace(vs,Rn,!0),te.remove(Do,!0),vs}).getOr(Rn),bn=Ne(Me);if((ve.length>1||!te.isBlock(Me))&&bn===0){te.remove(Me,!0);return}(Sa(u)||Ki(u)&&u.wrapper)&&(!u.exact&&bn===1&&(Me=Ut(Me)),hM(e,c,o,Me),OW(e,u,n,o,Me),pL(te,u,o,Me),hL(te,u,o,Me),BO(te,u,o,Me),sM(e,u,o,Me))})},Q=Uh(r)?r:w.getNode();if(b.getContentEditable(Q)==="false"&&!qS(e,Q)){r=Q,N(c,r),ww(e,n,r,o);return}if(u){if(r)if(Uh(r)){if(!N(c,r)){const te=b.createRng();te.setStartBefore(r),te.setEndAfter(r),L(b,ui(b,te,c),!0)}}else L(b,r,!0);else!f||!Sa(u)||$m(e).length?(w.setRng(ad(w.getRng())),x1(e,()=>{ZS(e,(te,j)=>{const ee=j?te:ui(b,te,c);L(b,ee,!1)})},gt),e.nodeChanged()):Qd(e,n,o),eM(e.formatter,n).each(te=>{De(rL(e.selection),j=>s0(b,j,te,o))});G1(n,e)}ww(e,n,r,o)},$O=e=>_n(e,"vars"),AW=(e,n)=>{e.set({}),n.on("NodeChange",o=>{yM(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=H.from(o.node).map(c=>Uh(c)?c:c.startContainer).bind(c=>ze(c)?H.some(c):H.from(c.parentElement)).getOrThunk(()=>bM(n));yM(n,r,e.get())})},bM=e=>e.selection.getStart(),bL=(e,n,o,r,c)=>_a(n,b=>{const w=e.formatter.matchNode(b,o,c??{},r);return!Mn(w)},b=>qx(e,b,o)?!0:r?!1:Pe(e.formatter.matchNode(b,o,c,!0))),vM=(e,n)=>{const o=n??bM(e);return rn(Pm(e.dom,o),r=>ze(r)&&!oc(r))},yM=(e,n,o)=>{const r=vM(e,n);ht(o,(c,u)=>{const f=b=>{const w=bL(e,r,u,b.similar,$O(b)?b.vars:void 0),k=w.isSome();if(b.state.get()!==k){b.state.set(k);const N=w.getOr(n);$O(b)?b.callback(k,{node:N,format:u,parents:r}):De(b.callbacks,R=>R(k,{node:N,format:u,parents:r}))}};De([c.withSimilar,c.withoutSimilar],f),De(c.withVars,f)})},DW=(e,n,o,r,c,u)=>{const f=n.get();De(o.split(","),b=>{const w=Wo(f,b).getOrThunk(()=>{const N={withSimilar:{state:xc(!1),similar:!0,callbacks:[]},withoutSimilar:{state:xc(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=N,N}),k=()=>{const N=vM(e);return bL(e,N,b,c,u).isSome()};if(Mn(u)){const N=c?w.withSimilar:w.withoutSimilar;N.callbacks.push(r),N.callbacks.length===1&&N.state.set(k())}else w.withVars.push({state:xc(k()),similar:c,vars:u,callback:r})}),n.set(f)},vL=(e,n,o)=>{const r=e.get();De(n.split(","),c=>Wo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:rn(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:rn(u.withoutSimilar.callbacks,f=>f!==o)},withVars:rn(u.withVars,f=>f.callback!==o)}})),e.set(r)},wM=(e,n,o,r,c,u)=>(DW(e,n,o,r,c,u),{unbind:()=>vL(n,o,r)}),yL=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(n0(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?fM(e,n,o,r):r0(e,n,o,r))},PO=Qe.explode,CM=()=>{const e={};return{addFilter:(c,u)=>{De(PO(c),f=>{_n(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>pa(e),removeFilter:(c,u)=>{De(PO(c),f=>{if(_n(e,f))if(Pe(u)){const b=e[f],w=rn(b.callbacks,k=>k!==u);w.length>0?b.callbacks=w:delete e[f]}else delete e[f]})}}},nT=(e,n)=>{De(n,o=>{e.attr(o,null)})},SM=(e,n,o)=>{e.addNodeFilter("font",r=>{De(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),w=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),w&&pc(w).each(k=>{u["font-size"]=o[k-1]}),c.name="span",c.attr("style",n.serialize(u)),nT(c,["color","face","size"])})})},mc=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";De(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},RW=(e,n,o)=>{var r;const c=Em();n.convert_fonts_to_spans&&SM(e,c,Qe.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),mc(e,o,c)},MW=(e,n,o)=>{n.inline_styles&&RW(e,n,o)},NW=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),BW=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},_u=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?BW(r):decodeURIComponent(r);return H.some({type:c[1],data:f,base64Encoded:u})}else return H.none()},nC=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return H.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return H.some(new Blob([c],{type:e}))},Y1=e=>new Promise((n,o)=>{_u(e).bind(({type:r,data:c,base64Encoded:u})=>nC(r,c,u)).fold(()=>o("Invalid data URI"),n)}),X1=e=>fs(e,"blob:")?NW(e):fs(e,"data:")?Y1(e):Promise.reject("Unknown URI format"),xM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let wL=0;const a0=e=>(e||"blobid")+wL++,J1=(e,n,o)=>_u(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return H.none();{const f=u?r:btoa(r);return o(f,c)}}),Q1=(e,n,o)=>{const r=e.create(a0(),n,o);return e.add(r),r},TM=(e,n,o=!1)=>J1(n,o,(r,c)=>H.from(e.getByData(r,c)).orThunk(()=>nC(c,r).map(u=>Q1(e,u,r)))),IO=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(fs(n,"blob:")){const r=e.getByUri(n);return Pe(r)?Promise.resolve(r):X1(n).then(c=>xM(c).then(u=>J1(u,!1,f=>H.some(Q1(e,c,f))).getOrThunk(o)))}else return fs(n,"data:")?TM(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},kM=e=>Pe(e.attr("data-mce-bogus")),EM=e=>e.attr("src")===Io.transparentSrc||Pe(e.attr("data-mce-placeholder")),CL=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");EM(c)||kM(c)||Bt(u)||TM(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>De(c,r))}},SL=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=Qe.extend({},o.getBlockElements()),w=o.getNonEmptyElements(),k=o.getWhitespaceElements();b.body=1;const N=R=>R.name in b&&cy(o,R);for(let R=0,L=c.length;R<L;R++){let Q=c[R],te=Q.parent;if(te&&b[te.name]&&Q===te.lastChild){let j=Q.prev;for(;j;){const ee=j.name;if(ee!=="span"||j.attr("data-mce-type")!=="bookmark"){ee==="br"&&(Q=null);break}j=j.prev}if(Q&&(Q.remove(),Jd(o,w,k,te))){const ee=o.getElementRule(te.name);ee&&(ee.removeEmpty?te.remove():ee.paddEmpty&&np(f,N,te))}}else{let j=Q;for(;te&&te.firstChild===j&&te.lastChild===j&&(j=te,!b[te.name]);)te=te.parent;if(j===te){const ee=new Mi("#text",3);ee.value=ps,Q.replace(ee)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=w=>w.split(" ").filter(N=>N.length>0).concat(["noopener"]).sort().join(" "),b=w=>{const k=w?Qe.trim(w):"";return/\b(noopener)\b/g.test(k)?k:f(k)};if(!n.allow_unsafe_link_target)for(;u--;){const w=c[u];w.name==="a"&&w.attr("target")==="_blank"&&w.attr("rel",b(w.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,w,k;for(;u--;)if(k=c[u],k.name==="a"&&k.firstChild&&!k.attr("href"))for(w=k.parent,f=k.lastChild;f&&w;)b=f.prev,w.insert(f,k),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const w=new Mi("li",1);w.attr("style","list-style-type: none"),f.wrap(w)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],w=(u=b.attr("class"))!==null&&u!==void 0?u:"",k=Qe.explode(w," ");let N="";for(let R=0;R<k.length;R++){const L=k[R];let Q=!1,te=r["*"];te&&te[L]&&(Q=!0),te=r[b.name],!Q&&te&&te[L]&&(Q=!0),Q&&(N&&(N+=" "),N+=L)}N.length||(N=null),b.attr("class",N)}}),CL(e,n)};function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lp(e)}function FO(e,n){return FO=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},FO(e,n)}function xL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oT(e,n,o){return xL()?oT=Reflect.construct:oT=function(c,u,f){var b=[null];b.push.apply(b,u);var w=Function.bind.apply(c,b),k=new w;return f&&FO(k,f.prototype),k},oT.apply(null,arguments)}function Fm(e){return TL(e)||_M(e)||kL(e)||OM()}function TL(e){if(Array.isArray(e))return eb(e)}function _M(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kL(e,n){if(e){if(typeof e=="string")return eb(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return eb(e,n)}}function eb(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function OM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var EL=Object.hasOwnProperty,LO=Object.setPrototypeOf,_L=Object.isFrozen,AM=Object.getPrototypeOf,OL=Object.getOwnPropertyDescriptor,Ji=Object.freeze,Lm=Object.seal,DM=Object.create,HO=typeof Reflect<"u"&&Reflect,oC=HO.apply,sT=HO.construct;oC||(oC=function(n,o,r){return n.apply(o,r)}),Ji||(Ji=function(n){return n}),Lm||(Lm=function(n){return n}),sT||(sT=function(n,o){return oT(n,Fm(o))});var RM=Hm(Array.prototype.forEach),AL=Hm(Array.prototype.pop),sC=Hm(Array.prototype.push),rT=Hm(String.prototype.toLowerCase),VO=Hm(String.prototype.match),em=Hm(String.prototype.replace),MM=Hm(String.prototype.indexOf),NM=Hm(String.prototype.trim),jl=Hm(RegExp.prototype.test),zO=ip(TypeError);function Hm(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return oC(e,n,r)}}function ip(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return sT(e,o)}}function Rs(e,n){LO&&LO(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=rT(r);c!==r&&(_L(n)||(n[o]=c),r=c)}e[r]=!0}return e}function up(e){var n=DM(null),o;for(o in e)oC(EL,e,[o])&&(n[o]=e[o]);return n}function dp(e,n){for(;e!==null;){var o=OL(e,n);if(o){if(o.get)return Hm(o.get);if(typeof o.value=="function")return Hm(o.value)}e=AM(e)}function r(c){return console.warn("fallback value for",c),null}return r}var UO=Ji(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rC=Ji(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),aT=Ji(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),BM=Ji(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),WO=Ji(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),DL=Ji(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$M=Ji(["#text"]),cT=Ji(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ZO=Ji(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),jO=Ji(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lT=Ji(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),RL=Lm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ML=Lm(/<%[\w\W]*|[\w\W]*%>/gm),tb=Lm(/^data-[\-\w.\u00B7-\uFFFF]/),PM=Lm(/^aria-[\-\w]+$/),NL=Lm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IM=Lm(/^(?:\w+script|data):/i),BL=Lm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),FM=Lm(/^html$/i),aC=function(){return typeof window>"u"?null:window},GO=function(n,o){if(lp(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function LM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:aC(),n=function(Fe){return LM(Fe)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,w=e.NodeFilter,k=e.NamedNodeMap,N=k===void 0?e.NamedNodeMap||e.MozNamedAttrMap:k,R=e.HTMLFormElement,L=e.DOMParser,Q=e.trustedTypes,te=b.prototype,j=dp(te,"cloneNode"),ee=dp(te,"nextSibling"),ve=dp(te,"childNodes"),ge=dp(te,"parentNode");if(typeof u=="function"){var we=r.createElement("template");we.content&&we.content.ownerDocument&&(r=we.content.ownerDocument)}var ke=GO(Q,o),Ke=ke?ke.createHTML(""):"",Ot=r,yt=Ot.implementation,Me=Ot.createNodeIterator,Ne=Ot.createDocumentFragment,Ut=Ot.getElementsByTagName,bn=o.importNode,Rn={};try{Rn=up(r).documentMode?r.documentMode:{}}catch{}var co={};n.isSupported=typeof ge=="function"&&yt&&typeof yt.createHTMLDocument<"u"&&Rn!==9;var Do=RL,vs=ML,Us=tb,oa=PM,yl=IM,fc=BL,wt=NL,ln=null,Ko=Rs({},[].concat(Fm(UO),Fm(rC),Fm(aT),Fm(WO),Fm($M))),Ft=null,An=Rs({},[].concat(Fm(cT),Fm(ZO),Fm(jO),Fm(lT))),Nn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Lt=null,yo=null,io=!0,zc=!0,br=!1,Jn=!1,ns=!1,Ta=!1,or=!1,Xr=!1,Es=!1,vr=!1,Ia=!0,gd=!0,wl=!1,Km={},Nu=null,wb=Rs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Cb=null,rm=Rs({},["audio","video","img","source","image","track"]),am=null,qa=Rs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hd="http://www.w3.org/1998/Math/MathML",Ym="http://www.w3.org/2000/svg",pd="http://www.w3.org/1999/xhtml",bd=pd,Uf=!1,gc,Yg=["application/xhtml+xml","text/html"],Wf="text/html",cm,xp=null,U0=r.createElement("form"),W0=function(Fe){return Fe instanceof RegExp||Fe instanceof Function},Z0=function(Fe){xp&&xp===Fe||((!Fe||lp(Fe)!=="object")&&(Fe={}),Fe=up(Fe),ln="ALLOWED_TAGS"in Fe?Rs({},Fe.ALLOWED_TAGS):Ko,Ft="ALLOWED_ATTR"in Fe?Rs({},Fe.ALLOWED_ATTR):An,am="ADD_URI_SAFE_ATTR"in Fe?Rs(up(qa),Fe.ADD_URI_SAFE_ATTR):qa,Cb="ADD_DATA_URI_TAGS"in Fe?Rs(up(rm),Fe.ADD_DATA_URI_TAGS):rm,Nu="FORBID_CONTENTS"in Fe?Rs({},Fe.FORBID_CONTENTS):wb,Lt="FORBID_TAGS"in Fe?Rs({},Fe.FORBID_TAGS):{},yo="FORBID_ATTR"in Fe?Rs({},Fe.FORBID_ATTR):{},Km="USE_PROFILES"in Fe?Fe.USE_PROFILES:!1,io=Fe.ALLOW_ARIA_ATTR!==!1,zc=Fe.ALLOW_DATA_ATTR!==!1,br=Fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Jn=Fe.SAFE_FOR_TEMPLATES||!1,ns=Fe.WHOLE_DOCUMENT||!1,Xr=Fe.RETURN_DOM||!1,Es=Fe.RETURN_DOM_FRAGMENT||!1,vr=Fe.RETURN_TRUSTED_TYPE||!1,or=Fe.FORCE_BODY||!1,Ia=Fe.SANITIZE_DOM!==!1,gd=Fe.KEEP_CONTENT!==!1,wl=Fe.IN_PLACE||!1,wt=Fe.ALLOWED_URI_REGEXP||wt,bd=Fe.NAMESPACE||pd,Fe.CUSTOM_ELEMENT_HANDLING&&W0(Fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Nn.tagNameCheck=Fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Fe.CUSTOM_ELEMENT_HANDLING&&W0(Fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Nn.attributeNameCheck=Fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Fe.CUSTOM_ELEMENT_HANDLING&&typeof Fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Nn.allowCustomizedBuiltInElements=Fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),gc=Yg.indexOf(Fe.PARSER_MEDIA_TYPE)===-1?gc=Wf:gc=Fe.PARSER_MEDIA_TYPE,cm=gc==="application/xhtml+xml"?function(mn){return mn}:rT,Jn&&(zc=!1),Es&&(Xr=!0),Km&&(ln=Rs({},Fm($M)),Ft=[],Km.html===!0&&(Rs(ln,UO),Rs(Ft,cT)),Km.svg===!0&&(Rs(ln,rC),Rs(Ft,ZO),Rs(Ft,lT)),Km.svgFilters===!0&&(Rs(ln,aT),Rs(Ft,ZO),Rs(Ft,lT)),Km.mathMl===!0&&(Rs(ln,WO),Rs(Ft,jO),Rs(Ft,lT))),Fe.ADD_TAGS&&(ln===Ko&&(ln=up(ln)),Rs(ln,Fe.ADD_TAGS)),Fe.ADD_ATTR&&(Ft===An&&(Ft=up(Ft)),Rs(Ft,Fe.ADD_ATTR)),Fe.ADD_URI_SAFE_ATTR&&Rs(am,Fe.ADD_URI_SAFE_ATTR),Fe.FORBID_CONTENTS&&(Nu===wb&&(Nu=up(Nu)),Rs(Nu,Fe.FORBID_CONTENTS)),gd&&(ln["#text"]=!0),ns&&Rs(ln,["html","head","body"]),ln.table&&(Rs(ln,["tbody"]),delete Lt.tbody),Ji&&Ji(Fe),xp=Fe)},JD=Rs({},["mi","mo","mn","ms","mtext"]),Vk=Rs({},["foreignobject","desc","title","annotation-xml"]),QD=Rs({},["title","style","font","a","script"]),Xm=Rs({},rC);Rs(Xm,aT),Rs(Xm,BM);var Tp=Rs({},WO);Rs(Tp,DL);var Ee=function(Fe){var mn=ge(Fe);(!mn||!mn.tagName)&&(mn={namespaceURI:pd,tagName:"template"});var Gn=rT(Fe.tagName),fa=rT(mn.tagName);return Fe.namespaceURI===Ym?mn.namespaceURI===pd?Gn==="svg":mn.namespaceURI===hd?Gn==="svg"&&(fa==="annotation-xml"||JD[fa]):!!Xm[Gn]:Fe.namespaceURI===hd?mn.namespaceURI===pd?Gn==="math":mn.namespaceURI===Ym?Gn==="math"&&Vk[fa]:!!Tp[Gn]:Fe.namespaceURI===pd?mn.namespaceURI===Ym&&!Vk[fa]||mn.namespaceURI===hd&&!JD[fa]?!1:!Tp[Gn]&&(QD[Gn]||!Xm[Gn]):!1},Oe=function(Fe){sC(n.removed,{element:Fe});try{Fe.parentNode.removeChild(Fe)}catch{try{Fe.outerHTML=Ke}catch{Fe.remove()}}},Ct=function(Fe,mn){try{sC(n.removed,{attribute:mn.getAttributeNode(Fe),from:mn})}catch{sC(n.removed,{attribute:null,from:mn})}if(mn.removeAttribute(Fe),Fe==="is"&&!Ft[Fe])if(Xr||Es)try{Oe(mn)}catch{}else try{mn.setAttribute(Fe,"")}catch{}},ut=function(Fe){var mn,Gn;if(or)Fe="<remove></remove>"+Fe;else{var fa=VO(Fe,/^[\r\n\t ]+/);Gn=fa&&fa[0]}gc==="application/xhtml+xml"&&(Fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Fe+"</body></html>");var Bu=ke?ke.createHTML(Fe):Fe;if(bd===pd)try{mn=new L().parseFromString(Bu,gc)}catch{}if(!mn||!mn.documentElement){mn=yt.createDocument(bd,"template",null);try{mn.documentElement.innerHTML=Uf?"":Bu}catch{}}var gi=mn.body||mn.documentElement;return Fe&&Gn&&gi.insertBefore(r.createTextNode(Gn),gi.childNodes[0]||null),bd===pd?Ut.call(mn,ns?"html":"body")[0]:ns?mn.documentElement:gi},Tn=function(Fe){return Me.call(Fe.ownerDocument||Fe,Fe,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT,null,!1)},Yo=function(Fe){return Fe instanceof R&&(typeof Fe.nodeName!="string"||typeof Fe.textContent!="string"||typeof Fe.removeChild!="function"||!(Fe.attributes instanceof N)||typeof Fe.removeAttribute!="function"||typeof Fe.setAttribute!="function"||typeof Fe.namespaceURI!="string"||typeof Fe.insertBefore!="function")},lr=function(Fe){return lp(f)==="object"?Fe instanceof f:Fe&&lp(Fe)==="object"&&typeof Fe.nodeType=="number"&&typeof Fe.nodeName=="string"},ir=function(Fe,mn,Gn){co[Fe]&&RM(co[Fe],function(fa){fa.call(n,mn,Gn,xp)})},vd=function(Fe){var mn;if(ir("beforeSanitizeElements",Fe,null),Yo(Fe)||jl(/[\u0080-\uFFFF]/,Fe.nodeName))return Oe(Fe),!0;var Gn=cm(Fe.nodeName);if(ir("uponSanitizeElement",Fe,{tagName:Gn,allowedTags:ln}),Fe.hasChildNodes()&&!lr(Fe.firstElementChild)&&(!lr(Fe.content)||!lr(Fe.content.firstElementChild))&&jl(/<[/\w]/g,Fe.innerHTML)&&jl(/<[/\w]/g,Fe.textContent)||Gn==="select"&&jl(/<template/i,Fe.innerHTML))return Oe(Fe),!0;if(!ln[Gn]||Lt[Gn]){if(!Lt[Gn]&&v5(Gn)&&(Nn.tagNameCheck instanceof RegExp&&jl(Nn.tagNameCheck,Gn)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Gn)))return!1;if(gd&&!Nu[Gn]){var fa=ge(Fe)||Fe.parentNode,Bu=ve(Fe)||Fe.childNodes;if(Bu&&fa)for(var gi=Bu.length,hi=gi-1;hi>=0;--hi)fa.insertBefore(j(Bu[hi],!0),ee(Fe))}return Oe(Fe),!0}return Fe instanceof b&&!Ee(Fe)||(Gn==="noscript"||Gn==="noembed")&&jl(/<\/no(script|embed)/i,Fe.innerHTML)?(Oe(Fe),!0):(Jn&&Fe.nodeType===3&&(mn=Fe.textContent,mn=em(mn,Do," "),mn=em(mn,vs," "),Fe.textContent!==mn&&(sC(n.removed,{element:Fe.cloneNode()}),Fe.textContent=mn)),ir("afterSanitizeElements",Fe,null),!1)},Sb=function(Fe,mn,Gn){if(Ia&&(mn==="id"||mn==="name")&&(Gn in r||Gn in U0))return!1;if(!(zc&&!yo[mn]&&jl(Us,mn))){if(!(io&&jl(oa,mn))){if(!Ft[mn]||yo[mn]){if(!(v5(Fe)&&(Nn.tagNameCheck instanceof RegExp&&jl(Nn.tagNameCheck,Fe)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Fe))&&(Nn.attributeNameCheck instanceof RegExp&&jl(Nn.attributeNameCheck,mn)||Nn.attributeNameCheck instanceof Function&&Nn.attributeNameCheck(mn))||mn==="is"&&Nn.allowCustomizedBuiltInElements&&(Nn.tagNameCheck instanceof RegExp&&jl(Nn.tagNameCheck,Gn)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Gn))))return!1}else if(!am[mn]){if(!jl(wt,em(Gn,fc,""))){if(!((mn==="src"||mn==="xlink:href"||mn==="href")&&Fe!=="script"&&MM(Gn,"data:")===0&&Cb[Fe])){if(!(br&&!jl(yl,em(Gn,fc,"")))){if(Gn)return!1}}}}}}return!0},v5=function(Fe){return Fe.indexOf("-")>0},YC=function(Fe){var mn,Gn,fa,Bu;ir("beforeSanitizeAttributes",Fe,null);var gi=Fe.attributes;if(gi){var hi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ft};for(Bu=gi.length;Bu--;){mn=gi[Bu];var zk=mn,pi=zk.name,$i=zk.namespaceURI;Gn=pi==="value"?mn.value:NM(mn.value),fa=cm(pi);var Zf=Gn;if(hi.attrName=fa,hi.attrValue=Gn,hi.keepAttr=!0,hi.forceKeepAttr=void 0,ir("uponSanitizeAttribute",Fe,hi),Gn=hi.attrValue,!hi.forceKeepAttr){if(!hi.keepAttr){Ct(pi,Fe);continue}if(jl(/\/>/i,Gn)){Ct(pi,Fe);continue}Jn&&(Gn=em(Gn,Do," "),Gn=em(Gn,vs," "));var tW=cm(Fe.nodeName);if(!Sb(tW,fa,Gn)){Ct(pi,Fe);continue}if(Gn!==Zf)try{$i?Fe.setAttributeNS($i,pi,Gn):Fe.setAttribute(pi,Gn)}catch{Ct(pi,Fe)}}}ir("afterSanitizeAttributes",Fe,null)}},Jm=function ho(Fe){var mn,Gn=Tn(Fe);for(ir("beforeSanitizeShadowDOM",Fe,null);mn=Gn.nextNode();)ir("uponSanitizeShadowNode",mn,null),!vd(mn)&&(mn.content instanceof c&&ho(mn.content),YC(mn));ir("afterSanitizeShadowDOM",Fe,null)};return n.sanitize=function(ho,Fe){var mn,Gn,fa,Bu,gi;if(Uf=!ho,Uf&&(ho="<!-->"),typeof ho!="string"&&!lr(ho)){if(typeof ho.toString!="function")throw zO("toString is not a function");if(ho=ho.toString(),typeof ho!="string")throw zO("dirty is not a string, aborting")}if(!n.isSupported){if(lp(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof ho=="string")return e.toStaticHTML(ho);if(lr(ho))return e.toStaticHTML(ho.outerHTML)}return ho}if(Ta||Z0(Fe),n.removed=[],typeof ho=="string"&&(wl=!1),wl){if(ho.nodeName){var hi=cm(ho.nodeName);if(!ln[hi]||Lt[hi])throw zO("root node is forbidden and cannot be sanitized in-place")}}else if(ho instanceof f)mn=ut("<!---->"),Gn=mn.ownerDocument.importNode(ho,!0),Gn.nodeType===1&&Gn.nodeName==="BODY"||Gn.nodeName==="HTML"?mn=Gn:mn.appendChild(Gn);else{if(!Xr&&!Jn&&!ns&&ho.indexOf("<")===-1)return ke&&vr?ke.createHTML(ho):ho;if(mn=ut(ho),!mn)return Xr?null:vr?Ke:""}mn&&or&&Oe(mn.firstChild);for(var zk=Tn(wl?ho:mn);fa=zk.nextNode();)fa.nodeType===3&&fa===Bu||vd(fa)||(fa.content instanceof c&&Jm(fa.content),YC(fa),Bu=fa);if(Bu=null,wl)return ho;if(Xr){if(Es)for(gi=Ne.call(mn.ownerDocument);mn.firstChild;)gi.appendChild(mn.firstChild);else gi=mn;return Ft.shadowroot&&(gi=bn.call(o,gi,!0)),gi}var pi=ns?mn.outerHTML:mn.innerHTML;return ns&&ln["!doctype"]&&mn.ownerDocument&&mn.ownerDocument.doctype&&mn.ownerDocument.doctype.name&&jl(FM,mn.ownerDocument.doctype.name)&&(pi="<!DOCTYPE "+mn.ownerDocument.doctype.name+`>
`+pi),Jn&&(pi=em(pi,Do," "),pi=em(pi,vs," ")),ke&&vr?ke.createHTML(pi):pi},n.setConfig=function(ho){Z0(ho),Ta=!0},n.clearConfig=function(){xp=null,Ta=!1},n.isValidAttribute=function(ho,Fe,mn){xp||Z0({});var Gn=cm(ho),fa=cm(Fe);return Sb(Gn,fa,mn)},n.addHook=function(ho,Fe){typeof Fe=="function"&&(co[ho]=co[ho]||[],sC(co[ho],Fe))},n.removeHook=function(ho){if(co[ho])return AL(co[ho])},n.removeHooks=function(ho){co[ho]&&(co[ho]=[])},n.removeAllHooks=function(){co={}},n}var HM=LM();const VM=Qe.each,qO=Qe.trim,KO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],YO={ftp:21,http:80,https:443,mailto:25},zM=["img","video"],UM=(e,n)=>Pe(e)?!e:Pe(n)?!Tt(zM,n):!0,$L=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Vm=(e,n,o)=>{const r=$L(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?UM(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class ld{constructor(n,o={}){this.path="",this.directory="",n=qO(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new ld(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const w=/([^#?]*)([#?]?.*)/.exec(n);w&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,w[1])+w[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&VM(KO,(b,w)=>{let k=f[w];k&&(k=k.replace(/\(mce_at\)/g,"@@")),c[b]=k}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Dl.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!Vm(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new ld(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new ld(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?YO[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),w=o.split("/");if(b.length>=w.length){for(u=0,f=b.length;u<f;u++)if(u>=w.length||b[u]!==w[u]){r=u+1;break}}if(b.length<w.length){for(u=0,f=w.length;u<f;u++)if(u>=b.length||b[u]!==w[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=w.length;u<f;u++)u!==r-1?c+="/"+w[u]:c+=w[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];VM(u,R=>{R&&b.push(R)});const w=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}w.push(f[R])}const k=b.length-r;let N;return k<=0?N=Uo(w).join("/"):N=b.slice(0,k).join("/")+"/"+Uo(w).join("/"),N.indexOf("/")!==0&&(N="/"+N),c&&N.lastIndexOf("/")!==N.length-1&&(N+=c),N}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const PL=Qe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),XO="data-mce-type";let JO=0;const QO=(e,n,o,r)=>{var c,u,f,b;const w=n.validate,k=o.getSpecialElements();e.nodeType===Bs&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const N=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==yc||N==="body")return;const R=re.fromDom(e),L=La(R,XO),Q=Mc(R,"data-mce-bogus");if(!L&&G(Q)){Q==="all"?Ls(R):la(R);return}const te=o.getElementRule(N);if(w&&!te){_n(k,N)?Ls(R):la(R);return}else Pe(r)&&(r.allowedTags[N]=!0);if(w&&te&&!L){if(De((f=te.attributesForced)!==null&&f!==void 0?f:[],j=>{Vr(R,j.name,j.value==="{$uid}"?`mce_${JO++}`:j.value)}),De((b=te.attributesDefault)!==null&&b!==void 0?b:[],j=>{La(R,j.name)||Vr(R,j.name,j.value==="{$uid}"?`mce_${JO++}`:j.value)}),te.attributesRequired&&!$t(te.attributesRequired,j=>La(R,j))){la(R);return}if(te.removeEmptyAttrs&&qc(R)){la(R);return}te.outputName&&te.outputName!==N&&dE(R,te.outputName)}},c0=(e,n,o,r,c)=>!(r in PL&&Vm(e,c,o))&&(!e.validate||n.isValid(o,r)||fs(r,"data-")||fs(r,"aria-")),WM=(e,n)=>e.hasAttribute(XO)&&(n==="id"||n==="class"||n==="style"),ZM=(e,n)=>e in n.getBoolAttrs(),IL=(e,n,o)=>{const{attributes:r}=e;for(let c=r.length-1;c>=0;c--){const u=r[c],f=u.name,b=u.value;!c0(n,o,e.tagName.toLowerCase(),f,b)&&!WM(e,f)?e.removeAttribute(f):ZM(f,o)&&e.setAttribute(f,f)}},FL=(e,n)=>{const o=HM();return o.addHook("uponSanitizeElement",(r,c)=>{QO(r,e,n,c)}),o.addHook("uponSanitizeAttribute",(r,c)=>{const u=r.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=c0(e,n,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,ZM(f,n)&&(c.attrValue=f),e.allow_svg_data_urls&&fs(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):WM(r,f)&&(c.forceKeepAttr=!0)}),o},LL=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},jM=(e,n)=>{if(e.sanitize){const o=FL(e,n);return(r,c)=>{o.sanitize(r,LL(e,c)),o.removed=[]}}else return(o,r)=>{const c=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=c.nextNode();)QO(u,e,n),ze(u)&&IL(u,e,n)}},GM=Qe.makeMap,qM=Qe.extend,KM=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const w=u[f],k=new Mi(w.nodeName.toLowerCase(),w.nodeType);if(ze(w)){const N=w.attributes;for(let R=0,L=N.length;R<L;R++){const Q=N[R];k.attr(Q.name,Q.value)}}else mt(w)?(k.value=w.data,c&&(k.raw=!0)):(Uu(w)||Pp(w)||ey(w))&&(k.value=w.data);KM(k,w,o),e.append(k)}},YM=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;De(n,b=>b(f)),Bt(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];De(o,f=>f(u))}},eA=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=qM(GM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),w=uy(n),k=/[ \t\r\n]+/g,N=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,L=ge=>{let we=ge.parent;for(;Pe(we);){if(we.name in f)return!0;we=we.parent}return!1},Q=ge=>{let we=ge;for(;Pe(we);){if(we.name in w)return Jd(n,u,f,we);we=we.parent}return!1},te=ge=>ge.name in b&&!cy(n,ge),j=(ge,we)=>{const ke=we?ge.prev:ge.next;return Pe(ke)||Bt(ge.parent)?!1:te(ge.parent)&&(ge.parent!==e||r.isRootContent===!0)};return[ge=>{var we;if(ge.type===3&&!L(ge)){let ke=(we=ge.value)!==null&&we!==void 0?we:"";ke=ke.replace(k," "),(BR(ge.prev,te)||j(ge,!0))&&(ke=ke.replace(N,"")),ke.length===0?ge.remove():ge.value=ke}},ge=>{var we;if(ge.type===1){const ke=n.getElementRule(ge.name);if(c&&ke){const Ke=Jd(n,u,f,ge);ke.paddInEmptyBlock&&Ke&&Q(ge)?np(r,te,ge):ke.removeEmpty&&Ke?te(ge)?ge.remove():ge.unwrap():ke.paddEmpty&&(Ke||dO(ge))&&np(r,te,ge)}}else if(ge.type===3&&!L(ge)){let ke=(we=ge.value)!==null&&we!==void 0?we:"";(ge.next&&te(ge.next)||j(ge,!1))&&(ke=ke.replace(R,"")),ke.length===0?ge.remove():ge.value=ke}}]},XM=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},nb=(e={},n=ai())=>{const o=CM(),r=CM(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=jM(c,n),b=(we,ke,Ke="html")=>{const Ot=Ke==="xhtml"?"application/xhtml+xml":"text/html",yt=_n(n.getSpecialElements(),ke.toLowerCase()),Me=yt?`<${ke}>${we}</${ke}>`:we,Ne=Ke==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Me}</body></html>`:`<body>${Me}</body>`,Ut=u.parseFromString(Ne,Ot).body;return f(Ut,Ot),yt?Ut.firstChild:Ut},w=o.addFilter,k=o.getFilters,N=o.removeFilter,R=r.addFilter,L=r.getFilters,Q=r.removeFilter,te=(we,ke)=>{BF(n,we)&&ke.push(we)},j=(we,ke)=>{const Ke=G(ke.attr(XO)),Ot=ke.type===1&&!_n(we,ke.name)&&!r2(n,ke);return ke.type===3||Ot&&!Ke},ee=(we,ke)=>{const Ke=qM(GM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ot=/^[ \t\r\n]+/,yt=/[ \t\r\n]+$/;let Me=we.firstChild,Ne=null;const Ut=bn=>{var Rn,co;bn&&(Me=bn.firstChild,Me&&Me.type===3&&(Me.value=(Rn=Me.value)===null||Rn===void 0?void 0:Rn.replace(Ot,"")),Me=bn.lastChild,Me&&Me.type===3&&(Me.value=(co=Me.value)===null||co===void 0?void 0:co.replace(yt,"")))};if(n.isValidChild(we.name,ke.toLowerCase())){for(;Me;){const bn=Me.next;j(Ke,Me)?(Ne||(Ne=new Mi(ke,1),Ne.attr(c.forced_root_block_attrs),we.insert(Ne,Me)),Ne.append(Me)):(Ut(Ne),Ne=null),Me=bn}Ut(Ne)}},ge={schema:n,addAttributeFilter:R,getAttributeFilters:L,removeAttributeFilter:Q,addNodeFilter:w,getNodeFilters:k,removeNodeFilter:N,parse:(we,ke={})=>{var Ke;const Ot=c.validate,yt=(Ke=ke.context)!==null&&Ke!==void 0?Ke:c.root_name,Me=b(we,yt,ke.format);Hp(n,Me);const Ne=new Mi(yt,11);KM(Ne,Me,n.getSpecialElements()),Me.innerHTML="";const[Ut,bn]=eA(Ne,n,c,ke),Rn=[],co=Ot?oa=>te(oa,Rn):jt,Do={nodes:{},attributes:{}},vs=oa=>Ix(k(),L(),oa,Do);if(YM(Ne,[Ut,vs],[bn,co]),Rn.reverse(),Ot&&Rn.length>0)if(ke.context){const{pass:oa,fail:yl}=cs(Rn,fc=>fc.parent===Ne);Vx(yl,n,Ne,vs),ke.invalid=oa.length>0}else Vx(Rn,n,Ne,vs);const Us=XM(c,ke);return Us&&(Ne.name==="body"||ke.isRootContent)&&ee(Ne,Us),ke.invalid||Fx(Do,ke),Ne}};return SL(ge,c),MW(ge,c,n),ge},tA=e=>Z1(e)?Qh({validate:!1}).serialize(e):e,nA=(e,n,o)=>{const r=tA(e),c=n(r);if(c.isDefaultPrevented())return c;if(Z1(e))if(c.content!==r){const u=nb({validate:!1,forced_root_block:!1,sanitize:o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},oA=(e,n)=>{if(n.no_events)return Or.value(n);{const o=ox(e,n);return o.isDefaultPrevented()?Or.error(zv(e,{content:"",...o}).content):Or.value(o)}},sA=(e,n,o)=>o.no_events?n:nA(n,c=>zv(e,{...o,content:c}),hv(e)).content,iT=(e,n)=>{if(n.no_events)return Or.value(n);{const o=nA(n.content,r=>nx(e,{...n,content:r}),hv(e));return o.isDefaultPrevented()?(Vv(e,o),Or.error(void 0)):Or.value(o)}},rA=(e,n,o)=>{o.no_events||Vv(e,{...o,content:n})},cC=(e,n,o)=>({element:e,width:n,rows:o}),JM=(e,n)=>({element:e,cells:n}),uT=(e,n)=>({x:e,y:n}),QM=(e,n)=>al(e,n).bind(pc).getOr(1),HL=(e,n,o,r,c)=>{const u=QM(c,"rowspan"),f=QM(c,"colspan"),b=e.rows;for(let w=o;w<o+u;w++){b[w]||(b[w]=JM(R2(r),[]));for(let k=n;k<n+f;k++){const N=b[w].cells;N[k]=w===o&&k===n?c:yf(c)}}},VL=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},eN=(e,n,o)=>{for(;VL(e,n,o);)n++;return n},aA=e=>zo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),tN=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(ss(c[u],n))return H.some(uT(u,r))}return H.none()},nN=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const w=f[b].cells,k=n<r?w.slice(n,r+1):w.slice(r,n+1);u.push(JM(f[b].element,k))}return u},zL=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?nN(e,r,c,u,f):nN(e,r,f,u,c);return cC(e.element,aA(b),b)},UL=(e,n)=>{const o=yf(e.element),r=re.fromTag("tbody");return Hu(r,n),Pr(o,r),o},oN=e=>Vt(e.rows,n=>{const o=Vt(n.cells,c=>{const u=R2(c);return kr(u,"colspan"),kr(u,"rowspan"),u}),r=yf(n.element);return Hu(r,o),r}),$W=e=>{const n=cC(yf(e),0,[]);return De(nc(e,"tr"),(o,r)=>{De(nc(o,"td,th"),(c,u)=>{HL(n,eN(n,u,r),r,o,c)})}),cC(n.element,aA(n.rows),n.rows)},WL=e=>UL(e,oN(e)),ZL=(e,n,o)=>tN(e,n).bind(r=>tN(e,o).map(c=>zL(e,r,c))),jL=e=>ls(e,n=>hs(n)==="ul"||hs(n)==="ol"),GL=(e,n)=>ls(e,o=>hs(o)==="li"&&WS(o,n)).fold(nt([]),o=>jL(e).map(r=>{const c=re.fromTag(hs(r)),u=Qo(Hl(r),(f,b)=>fs(b,"list-style"));return Xf(c,u),[re.fromTag("li"),c]}).getOr([])),qL=(e,n)=>{const o=zo(n,(r,c)=>(Pr(c,r),c),e);return n.length>0?B1([o]):o},KL=e=>Ic(e)?Tl(e).filter(xe).fold(nt([]),n=>[e,n]):xe(e)?[e]:[],YL=(e,n)=>{const o=re.fromDom(n.commonAncestorContainer),r=$g(o,e),c=rn(r,Ca),u=GL(r,n),f=c.concat(u.length?u:KL(o));return Vt(f,yf)},cA=()=>B1([]),XL=(e,n)=>qL(re.fromDom(n.cloneContents()),YL(e,n)),JL=(e,n)=>de(n,"table",je(ss,e)),QL=(e,n)=>JL(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=$W(o);return ZL(u,r,c).map(f=>B1([WL(f)]))}).getOrThunk(cA),e6=(e,n)=>n.length>0&&n[0].collapsed?cA():XL(e,n[0]),t6=(e,n)=>{const o=US(n,e);return o.length>0?QL(e,o):e6(e,n)},lA=(e,n)=>n>=0&&n<e.length&&Hh(e.charAt(n)),n6=e=>Ie(e.innerText),o6=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),s6=e=>H.from(e.selection.getRng()).map(n=>{var o;const r=H.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=o6(r),f=re.fromDom(n.cloneContents());R3(f),M3(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),w=n6(b),k=Ie((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),lA(k,0)||lA(k,k.length-1)){const N=r.getOr(c),R=n6(N),L=R.indexOf(w);if(L===-1)return w;{const Q=lA(R,L-1),te=lA(R,L+w.length);return(Q?" ":"")+w+(te?" ":"")}}else return w}).getOr(""),PW=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=$_(e,w1(c)),f=n.contextual?t6(re.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},r6=(e,n)=>{if(n.format==="text")return s6(e);{const o=PW(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},na=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),iA=(e,n,o={})=>{const r=na(o,n);return oA(e,r).fold(No,c=>{const u=r6(e,c);return sA(e,u,c)})},sN=0,rN=1,aN=2,l0=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(N,R,L)=>({start:N,end:R,diag:L}),f=(N,R,L,Q,te)=>{const j=w(N,R,L,Q);if(j===null||j.start===R&&j.diag===R-Q||j.end===N&&j.diag===N-L){let ee=N,ve=L;for(;ee<R||ve<Q;)ee<R&&ve<Q&&e[ee]===n[ve]?(te.push([sN,e[ee]]),++ee,++ve):R-N>Q-L?(te.push([aN,e[ee]]),++ee):(te.push([rN,n[ve]]),++ve)}else{f(N,j.start,L,j.start-j.diag,te);for(let ee=j.start;ee<j.end;++ee)te.push([sN,e[ee]]);f(j.end,R,j.end-j.diag,Q,te)}},b=(N,R,L,Q)=>{let te=N;for(;te-R<Q&&te<L&&e[te]===n[te-R];)++te;return u(N,te,R)},w=(N,R,L,Q)=>{const te=R-N,j=Q-L;if(te===0||j===0)return null;const ee=te-j,ve=j+te,ge=(ve%2===0?ve:ve+1)/2;r[1+ge]=N,c[1+ge]=R+1;let we,ke,Ke,Ot,yt;for(we=0;we<=ge;++we){for(ke=-we;ke<=we;ke+=2){for(Ke=ke+ge,ke===-we||ke!==we&&r[Ke-1]<r[Ke+1]?r[Ke]=r[Ke+1]:r[Ke]=r[Ke-1]+1,Ot=r[Ke],yt=Ot-N+L-ke;Ot<R&&yt<Q&&e[Ot]===n[yt];)r[Ke]=++Ot,++yt;if(ee%2!==0&&ee-we<=ke&&ke<=ee+we&&c[Ke-ee]<=r[Ke])return b(c[Ke-ee],ke+N-L,R,Q)}for(ke=ee-we;ke<=ee+we;ke+=2){for(Ke=ke+ge-ee,ke===ee-we||ke!==ee+we&&c[Ke+1]<=c[Ke-1]?c[Ke]=c[Ke+1]-1:c[Ke]=c[Ke-1],Ot=c[Ke]-1,yt=Ot-N+L-ke;Ot>=N&&yt>=L&&e[Ot]===n[yt];)c[Ke]=Ot--,yt--;if(ee%2===0&&-we<=ke&&ke<=we&&c[Ke]<=r[Ke+ee])return b(c[Ke],ke+N-L,R,Q)}}return null},k=[];return f(0,e.length,0,n.length,k),k},a6=e=>ze(e)?e.outerHTML:mt(e)?Dl.encodeRaw(e.data,!1):Uu(e)?"<!--"+e.data+"-->":"",IW=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},vl=(e,n,o)=>{const r=IW(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},cN=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},lN=(e,n)=>{let o=0;De(e,r=>{r[0]===sN?o++:r[0]===rN?(vl(n,r[1],o),o++):r[0]===aN&&cN(n,o)})},iN=e=>rn(Vt(Ns(e.childNodes),a6),n=>n.length>0),c6=(e,n)=>{const o=Vt(Ns(n.childNodes),a6);return lN(l0(o,e),n),n},l6=yn(()=>document.implementation.createHTMLDocument("undo")),dT=e=>e.indexOf("</iframe>")!==-1,i6=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),uA=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),mT=e=>{const n=iN(e.getBody()),o=ur(n,c=>{const u=D3(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return dT(r)?i6(o):uA(r)},fT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?c6(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Pe(r)&&Ev(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},gT=e=>e.type==="fragmented"?e.fragments.join(""):e.content,hT=e=>{const n=re.fromTag("body",l6());return Bd(n,gT(e)),De(nc(n,"*[data-mce-bogus]"),la),pm(n)},uN=(e,n)=>gT(e)===gT(n),dA=(e,n)=>hT(e)===hT(n),mA=(e,n)=>!e||!n?!1:uN(e,n)?!0:dA(e,n),fA=e=>e.get()===0,pT=(e,n,o)=>{fA(o)&&(e.typing=n)},Ou=(e,n)=>{e.typing&&(pT(e,!1,n),e.add())},u6=e=>{e.typing&&(e.typing=!1,e.add())},d6=(e,n,o)=>{fA(n)&&o.set(_y(e.selection))},m6=(e,n,o,r,c,u,f)=>{const b=mT(e),w=Qe.extend(u||{},b);if(!fA(r)||e.removed)return null;const k=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:w,lastLevel:k,originalEvent:f}).isDefaultPrevented()||k&&mA(k,w))return null;n.data[o.get()]&&c.get().each(L=>{n.data[o.get()].beforeBookmark=L});const N=EE(e);if(N&&n.data.length>N){for(let L=0;L<n.data.length-1;L++)n.data[L]=n.data[L+1];n.data.length--,o.set(n.data.length)}w.bookmark=_y(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(w),o.set(n.data.length-1);const R={level:w,lastLevel:k,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),w},f6=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},g6=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];fT(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},dN=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],fT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},h6=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,pT(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],fT(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},p6=e=>{e.clear(),e.add()},b6=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!mA(mT(e),n.data[0]),bT=(e,n)=>n.get()<e.data.length-1&&!e.typing,v6=(e,n,o)=>(Ou(e,n),e.beforeChange(),e.ignore(o),e.add()),y6=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},mN=(e,n)=>{const o=e.dom,r=Pe(n)?n:e.getBody();De(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=AE(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,w=fS(e);b&&e.hasVisual?o.addClass(c,w):o.removeClass(c,w)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},vT=e=>({init:{bindEvents:jt},undoManager:{beforeChange:(n,o)=>d6(e,n,o),add:(n,o,r,c,u,f)=>m6(e,n,o,r,c,u,f),undo:(n,o,r)=>h6(e,n,o,r),redo:(n,o)=>dN(e,n,o),clear:(n,o)=>f6(e,n,o),reset:n=>p6(n),hasUndo:(n,o)=>b6(e,n,o),hasRedo:(n,o)=>bT(n,o),transact:(n,o,r)=>v6(n,o,r),ignore:(n,o)=>y6(n,o),extra:(n,o,r,c)=>g6(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>n0(e,n,o,r,c),matchAll:(n,o)=>Lg(e,n,o),matchNode:(n,o,r,c)=>Nf(e,n,o,r,c),canApply:n=>yO(e,n),closest:n=>QF(e,n),apply:(n,o,r)=>r0(e,n,o,r),remove:(n,o,r,c)=>fM(e,n,o,r,c),toggle:(n,o,r)=>yL(e,n,o,r),formatChanged:(n,o,r,c,u)=>wM(e,n,o,r,c,u)},editor:{getContent:n=>rF(e,n),setContent:(n,o)=>XF(e,n,o),insertContent:(n,o)=>jR(e,n,o),addVisual:n=>mN(e,n)},selection:{getContent:(n,o)=>iA(e,n,o)},autocompleter:{addDecoration:n=>K5(e,n),removeDecoration:()=>E3(e,re.fromDom(e.getBody()))},raw:{getModel:()=>H.none()}}),w6=e=>{const n=k=>Xe(k)?k:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:w}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(k,N,R)=>r.transact(R),ignore:(k,N)=>r.ignore(N),extra:(k,N,R,L)=>r.extra(R,L)},formatter:{match:(k,N,R,L)=>c.match(k,n(N),L),matchAll:c.matchAll,matchNode:c.matchNode,canApply:k=>c.canApply(k),closest:k=>c.closest(k),apply:(k,N,R)=>c.apply(k,n(N)),remove:(k,N,R,L)=>c.remove(k,n(N)),toggle:(k,N,R)=>c.toggle(k,n(N)),formatChanged:(k,N,R,L,Q)=>c.formatChanged(N,R,L,Q)},editor:{getContent:k=>u.getContent(k),setContent:(k,N)=>({content:u.setContent(k,N),html:""}),insertContent:(k,N)=>(u.insertContent(k),""),addVisual:u.addVisual},selection:{getContent:(k,N)=>f.getContent(N)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>H.some(w.getRawModel())}}},C6=()=>{const e=nt(null),n=nt("");return{init:{bindEvents:jt},undoManager:{beforeChange:jt,add:e,undo:e,redo:e,clear:jt,reset:jt,hasUndo:_e,hasRedo:_e,transact:e,ignore:jt,extra:jt},formatter:{match:_e,matchAll:nt([]),matchNode:nt(void 0),canApply:_e,closest:n,apply:jt,remove:jt,toggle:jt,formatChanged:nt({unbind:jt})},editor:{getContent:n,setContent:nt({content:"",html:""}),insertContent:nt(""),addVisual:jt},selection:{getContent:n},autocompleter:{addDecoration:jt,removeDecoration:jt},raw:{getModel:nt(H.none())}}},Vg=e=>_n(e.plugins,"rtc"),S6=e=>Wo(e.plugins,"rtc").bind(n=>H.from(n.setup)),x6=e=>{const n=e;return S6(e).fold(()=>(n.rtcInstance=vT(e),H.none()),o=>(n.rtcInstance=C6(),H.some(()=>o().then(r=>(n.rtcInstance=w6(r),r.rtc.isRemote)))))},gA=e=>e.rtcInstance?e.rtcInstance:vT(e),Za=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},lC=(e,n,o)=>{Za(e).undoManager.beforeChange(n,o)},yT=(e,n,o,r,c,u,f)=>Za(e).undoManager.add(n,o,r,c,u,f),iC=(e,n,o,r)=>Za(e).undoManager.undo(n,o,r),fN=(e,n,o)=>Za(e).undoManager.redo(n,o),gN=(e,n,o)=>{Za(e).undoManager.clear(n,o)},T6=(e,n)=>{Za(e).undoManager.reset(n)},hN=(e,n,o)=>Za(e).undoManager.hasUndo(n,o),k6=(e,n,o)=>Za(e).undoManager.hasRedo(n,o),E6=(e,n,o,r)=>Za(e).undoManager.transact(n,o,r),_6=(e,n,o)=>{Za(e).undoManager.ignore(n,o)},O6=(e,n,o,r,c)=>{Za(e).undoManager.extra(n,o,r,c)},pN=(e,n,o,r,c)=>Za(e).formatter.match(n,o,r,c),A6=(e,n,o)=>Za(e).formatter.matchAll(n,o),D6=(e,n,o,r,c)=>Za(e).formatter.matchNode(n,o,r,c),uC=(e,n)=>Za(e).formatter.canApply(n),bN=(e,n)=>Za(e).formatter.closest(n),vN=(e,n,o,r)=>{Za(e).formatter.apply(n,o,r)},R6=(e,n,o,r,c)=>{Za(e).formatter.remove(n,o,r,c)},M6=(e,n,o,r)=>{Za(e).formatter.toggle(n,o,r)},N6=(e,n,o,r,c,u)=>Za(e).formatter.formatChanged(n,o,r,c,u),yN=(e,n)=>gA(e).editor.getContent(n),B6=(e,n,o)=>gA(e).editor.setContent(n,o),$6=(e,n,o)=>gA(e).editor.insertContent(n,o),P6=(e,n,o)=>Za(e).selection.getContent(n,o),I6=(e,n)=>Za(e).editor.addVisual(n),F6=e=>Za(e).init.bindEvents(),zm=(e,n)=>Za(e).autocompleter.addDecoration(n),hA=e=>Za(e).autocompleter.removeDecoration(),L6=(e,n={})=>{const o=n.format?n.format:"html";return P6(e,o,n)},wN=e=>e.dom.length===0?(Ls(e),H.none()):H.some(e),H6=(e,n)=>e.filter(o=>Af.isBookmarkNode(o.dom)).bind(n?Od:Kc),V6=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(Y_(c,u,!1,!r),o.setStart(u,f)):(Y_(u,c,!1,!r),o.setEnd(u,f))},ds=(e,n)=>{Tl(e).each(o=>{const r=e.dom;n&&Lw(o,He(r,0))?xx(r,0):!n&&Hw(o,He(r,r.length))&&K_(r,r.length)})},z6=(e,n,o,r)=>{e.bind(c=>((r?K_:xx)(c.dom,r?c.dom.length:0),n.filter(wc).map(f=>V6(c,f,o,r)))).orThunk(()=>H6(n,r).or(n).filter(wc).map(u=>ds(u,r)))},U6=(e,n)=>{const o=H.from(n.firstChild).map(re.fromDom),r=H.from(n.lastChild).map(re.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Kc).filter(wc).bind(wN),u=r.bind(Od).filter(wc).bind(wN);z6(c,o,e,!0),z6(u,r,e,!1),e.collapse(!1)},W6=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),Yr=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Qh({validate:!1},e.schema).serialize(u)}else return n.content},Z6=(e,n,o={})=>{const r=W6(o,n);iT(e,r).each(c=>{const u=Yr(e,c),f=e.selection.getRng();U6(f,f.createContextualFragment(u)),e.selection.setRng(f),We(e,f),rA(e,u,c)})},i0=(e,n,o)=>{if(_n(e,n)){const r=rn(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var j6=(e,n)=>{let o,r;const c=(b,w)=>ls(w,k=>e.is(k,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const w=b.element,k=u(w),N={};ht(o,(R,L)=>{c(L,k).each(Q=>{r[L]||(De(R,te=>{te(!0,{node:Q,selector:L,parents:k})}),r[L]=R),N[L]=R})}),ht(r,(R,L)=>{N[L]||(delete r[L],De(R,Q=>{Q(!1,{node:w,selector:L,parents:k})}))})})};return{selectorChangedWithUnbind:(b,w)=>(o||f(),o[b]||(o[b]=[]),o[b].push(w),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{i0(o,b,w),i0(r,b,w)}})}};const CN=e=>!!(e&&e.ownerDocument)&&Fl(re.fromDom(e.ownerDocument),re.fromDom(e)),G6=e=>e?CN(e.startContainer)&&CN(e.endContainer):!1,pA=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=j6(e,r),b=(wt,ln)=>{const Ko=e.createRng();Pe(wt)&&Pe(ln)?(Ko.setStart(wt,ln),Ko.setEnd(wt,ln),ke(Ko),ve(!1)):(C1(e,Ko,r.getBody(),!0),ke(Ko))},w=wt=>L6(r,wt),k=(wt,ln)=>Z6(r,wt,ln),N=wt=>w3(r.getBody(),we(),wt),R=wt=>C3(r.getBody(),we(),wt),L=(wt,ln)=>yl.getBookmark(wt,ln),Q=wt=>yl.moveToBookmark(wt),te=(wt,ln)=>(U5(e,wt,ln).each(ke),wt),j=()=>{const wt=we(),ln=ge();return!wt||wt.item?!1:wt.compareEndPoints?wt.compareEndPoints("StartToEnd",wt)===0:!ln||wt.collapsed},ee=()=>{const wt=we(),ln=r.getBody().querySelectorAll('[data-mce-selected="1"]');return ln.length>0?Jo(ln,Ko=>e.isEditable(Ko.parentElement)):wt.startContainer===wt.endContainer?e.isEditable(wt.startContainer):e.isEditable(wt.startContainer)&&e.isEditable(wt.endContainer)},ve=wt=>{const ln=we();ln.collapse(!!wt),ke(ln)},ge=()=>n.getSelection?n.getSelection():n.document.selection,we=()=>{let wt;const ln=(Ft,An,Nn)=>{try{return An.compareBoundaryPoints(Ft,Nn)}catch{return-1}},Ko=n.document;if(Pe(r.bookmark)&&!Jh(r)){const Ft=mi(r);if(Ft.isSome())return Ft.map(An=>$_(r,[An])[0]).getOr(Ko.createRange())}try{const Ft=ge();Ft&&!il(Ft.anchorNode)&&(Ft.rangeCount>0?wt=Ft.getRangeAt(0):wt=Ko.createRange(),wt=$_(r,[wt])[0])}catch{}if(wt||(wt=Ko.createRange()),Ui(wt.startContainer)&&wt.collapsed){const Ft=e.getRoot();wt.setStart(Ft,0),wt.setEnd(Ft,0)}return c&&u&&(ln(wt.START_TO_START,wt,c)===0&&ln(wt.END_TO_END,wt,c)===0?wt=u:(c=null,u=null)),wt},ke=(wt,ln)=>{if(!G6(wt))return;const Ko=ge();if(wt=r.dispatch("SetSelectionRange",{range:wt,forward:ln}).range,Ko){u=wt;try{Ko.removeAllRanges(),Ko.addRange(wt)}catch{}ln===!1&&Ko.extend&&(Ko.collapse(wt.endContainer,wt.endOffset),Ko.extend(wt.startContainer,wt.startOffset)),c=Ko.rangeCount>0?Ko.getRangeAt(0):null}if(!wt.collapsed&&wt.startContainer===wt.endContainer&&(Ko!=null&&Ko.setBaseAndExtent)&&wt.endOffset-wt.startOffset<2&&wt.startContainer.hasChildNodes()){const An=wt.startContainer.childNodes[wt.startOffset];An&&An.nodeName==="IMG"&&(Ko.setBaseAndExtent(wt.startContainer,wt.startOffset,wt.endContainer,wt.endOffset),(Ko.anchorNode!==wt.startContainer||Ko.focusNode!==wt.endContainer)&&Ko.setBaseAndExtent(An,0,An,1))}r.dispatch("AfterSetSelectionRange",{range:wt,forward:ln})},Ke=wt=>(k(e.getOuterHTML(wt)),wt),Ot=()=>V5(r.getBody(),we()),yt=(wt,ln)=>z5(e,we(),wt,ln),Me=()=>{const wt=ge(),ln=wt==null?void 0:wt.anchorNode,Ko=wt==null?void 0:wt.focusNode;if(!wt||!ln||!Ko||il(ln)||il(Ko))return!0;const Ft=e.createRng(),An=e.createRng();try{Ft.setStart(ln,wt.anchorOffset),Ft.collapse(!0),An.setStart(Ko,wt.focusOffset),An.collapse(!0)}catch{return!0}return Ft.compareBoundaryPoints(Ft.START_TO_START,An)<=0},oa={dom:e,win:n,serializer:o,editor:r,expand:(wt={type:"word"})=>ke(Mg(e).expand(we(),wt)),collapse:ve,setCursorLocation:b,getContent:w,setContent:k,getBookmark:L,moveToBookmark:Q,select:te,isCollapsed:j,isEditable:ee,isForward:Me,setNode:Ke,getNode:Ot,getSel:ge,setRng:ke,getRng:we,getStart:N,getEnd:R,getSelectedBlocks:yt,normalize:()=>{const wt=we(),ln=ge();if(!Bm(ln)&&S1(r)){const Ko=Rg(e,wt);return Ko.each(Ft=>{ke(Ft,Me())}),Ko.getOr(wt)}return wt},selectorChanged:(wt,ln)=>(f(wt,ln),oa),selectorChangedWithUnbind:f,getScrollContainer:()=>{let wt,ln=e.getRoot();for(;ln&&ln.nodeName!=="BODY";){if(ln.scrollHeight>ln.clientHeight){wt=ln;break}ln=ln.parentNode}return wt},scrollIntoView:(wt,ln)=>{Pe(wt)?At(r,wt,ln):We(r,we(),ln)},placeCaretAt:(wt,ln)=>ke($1(wt,ln,r.getDoc())),getBoundingClientRect:()=>{const wt=we();return wt.collapsed?He.fromRangeStart(wt).getClientRects()[0]:wt.getBoundingClientRect()},destroy:()=>{n=c=u=null,fc.destroy()}},yl=Af(oa),fc=M1(oa,r);return oa.bookmarkManager=yl,oa.controlSelection=fc,oa},mp=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let w=r.length;for(;w--;){const k=r[w];let N=k.attr(u);N!==void 0?(k.attr(c,N.length>0?N:null),k.attr(u,null)):(N=k.attr(c),c==="style"?N=o.serializeStyle(o.parseStyle(N),k.name):f&&(N=f.call(b,N,c,k.name)),k.attr(c,N.length>0?N:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(H.from(b.firstChild).exists(k=>{var N;return!me((N=k.value)!==null&&N!==void 0?N:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Dl.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=w=>w.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const w=r[b],k=w.firstChild,N=(u=k==null?void 0:k.value)!==null&&u!==void 0?u:"";if(c==="script"){const R=w.attr("type");R&&w.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&k&&N.length>0&&(k.value=`// <![CDATA[
`+f(N)+`
// ]]>`)}else n.element_format==="xhtml"&&k&&N.length>0&&(k.value=`<!--
`+f(N)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{De(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},Qi=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},dC=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Qe.each(u.nodeName==="BODY"?u.childNodes:[u],w=>{b.body.appendChild(b.importNode(w,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return c_(e,{...o,node:u}),r&&(c.doc=r),u},ob=(e,n)=>Pe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Bf=(e,n,o)=>ob(e,o)?dC(e,n,o):n,mC=(e,n,o)=>{Qe.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},bA=(e,n,o)=>!n.no_events&&e?gw(e,{...n,content:o}).content:o,vA=(e,n,o)=>{const r=Ie(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||ni(re.fromDom(n))?r:Qe.trim(r)},SN=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return Qi(c),c},xN=(e,n,o)=>Qh(e,n).serialize(o),q6=(e,n,o,r,c)=>{const u=xN(n,o,r);return bA(e,c,u)},K6=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:Vs.DOM,c=n&&n.schema?n.schema:ai(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=nb(e,c);mp(u,e,r);const f=(b,w={})=>{const k={format:"html",...w},N=Bf(n,b,k),R=vA(r,N,k),L=SN(u,R,k);return k.format==="tree"?L:q6(n,e,c,L,k)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:je(mC,u,o),getTempAttrs:nt(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},yA=(e,n)=>{const o=K6(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},TN="html",kN=(e,n)=>({...e,format:n,get:!0,getInner:!0}),EN=(e,n={})=>{const o=n.format?n.format:TN,r=kN(n,o);return oA(e,r).fold(No,c=>{const u=yN(e,c);return sA(e,u,c)})},wA="html",FW=(e,n)=>({format:wA,...e,set:!0,content:n}),CA=(e,n,o={})=>{const r=FW(o,n);return iT(e,r).map(c=>{const u=B6(e,c.content,c);return rA(e,u.html,c),u.content}).getOr(n)},LW="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Y6="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),X6="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Um=[{name:"template",replacedWith:"Advanced Template"}],J6=(e,n)=>{const o=rn(n,r=>_n(e,r));return qt(o)},HW=e=>{const n=J6(e,LW),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),qt(n)},Q6=e=>J6(e,Y6),u0=(e,n)=>{const o=Qe.makeMap(e.plugins," "),c=rn(n,u=>_n(o,u));return qt(c)},e8=e=>u0(e,X6),_N=e=>u0(e,Um.map(n=>n.name)),ON=(e,n)=>{const o=HW(e),r=e8(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,w=f?`

Themes:${b}mobile`:"",k=c?`

Plugins:${b}${r.join(b)}`:"",N=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+w+k+N)}},AN=e=>ls(Um,n=>n.name===e).fold(()=>e,n=>`${e}, replaced by ${n.replacedWith}`),t8=(e,n)=>{const o=Q6(e),r=_N(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(AN).join(f)}`:"",w=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+w)}},n8=(e,n)=>{ON(e,n),t8(e,n)},Wm=Vs.DOM,o8=e=>{Wm.setStyle(e.id,"display",e.orgDisplay)},wT=e=>H.from(e).each(n=>n.destroy()),s8=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},r8=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Wm.unbind(n,"submit reset",e.formEventDelegate))},a8=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Pe(c==null?void 0:c.nextSibling)&&Wm.remove(c.nextSibling),hw(e),e.editorManager.remove(e),!e.inline&&r&&o8(e),pw(e),Wm.remove(e.getContainer()),wT(n),wT(o),e.destroy()}},c8=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),wT(o),wT(r)),r8(e),s8(e),e.destroyed=!0}},CT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>_n(e,c)}})(),d0=Rl.ModelManager,DN=(e,n)=>n.dom[e],RN=(e,n)=>parseInt(Ci(n,e),10),zW=je(DN,"clientWidth"),fC=je(DN,"clientHeight"),l8=je(RN,"margin-top"),SA=je(RN,"margin-left"),i8=e=>e.dom.getBoundingClientRect(),u8=(e,n,o)=>{const r=zW(e),c=fC(e);return n>=0&&o>=0&&n<=r&&o<=c},d8=(e,n,o,r)=>{const c=i8(n),u=e?c.left+n.dom.clientLeft+SA(n):0,f=e?c.top+n.dom.clientTop+l8(n):0,b=o-u,w=r-f;return{x:b,y:w}},m8=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.inline?r:Qg(r),u=d8(e.inline,c,n,o);return u8(c,u.x,u.y)},sb=e=>H.from(e).map(re.fromDom),rb=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return sb(n).map(Li).getOr(!1)};var ST=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const gC=e=>{const n=[],o=()=>{const L=e.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():ST()},r=()=>H.from(n[0]),c=(L,Q)=>L.type===Q.type&&L.text===Q.text&&!L.progressBar&&!L.timeout&&!Q.progressBar&&!Q.timeout,u=()=>{De(n,L=>{L.reposition()})},f=L=>{n.push(L)},b=L=>{Ms(n,Q=>Q===L).each(Q=>{n.splice(Q,1)})},w=(L,Q=!0)=>e.removed||!rb(e)?{}:(Q&&e.dispatch("BeforeOpenNotification",{notification:L}),ls(n,te=>c(o().getArgs(te),L)).getOrThunk(()=>{e.editorManager.setActive(e);const te=o().open(L,()=>{b(te),u(),r().fold(()=>e.focus(),j=>an(re.fromDom(j.getEl())))});return f(te),u(),e.dispatch("OpenNotification",{notification:{...te}}),te})),k=()=>{r().each(L=>{o().close(L),b(L),u()})},N=nt(n);return(L=>{L.on("SkinLoaded",()=>{const Q=aS(L);Q&&w({text:Q,type:"warning",timeout:0},!1),u()}),L.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),L.on("remove",()=>{De(n.slice(),Q=>{o().close(Q)})})})(e),{open:w,close:k,getNotifications:N}},tm=Rl.PluginManager,id=Rl.ThemeManager;var xT=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const hC=e=>{let n=[];const o=()=>{const j=e.theme;return j&&j.getWindowManagerImpl?j.getWindowManagerImpl():xT()},r=(j,ee)=>(...ve)=>ee?ee.apply(j,ve):void 0,c=j=>{e.dispatch("OpenWindow",{dialog:j})},u=j=>{e.dispatch("CloseWindow",{dialog:j})},f=j=>{n.push(j),c(j)},b=j=>{u(j),n=rn(n,ee=>ee!==j),n.length===0&&e.focus()},w=()=>H.from(n[n.length-1]),k=j=>{e.editorManager.setActive(e),Ri(e),e.ui.show();const ee=j();return f(ee),ee},N=(j,ee)=>k(()=>o().open(j,ee,b)),R=j=>k(()=>o().openUrl(j,b)),L=(j,ee,ve)=>{const ge=o();ge.alert(j,r(ve||ge,ee))},Q=(j,ee,ve)=>{const ge=o();ge.confirm(j,r(ve||ge,ee))},te=()=>{w().each(j=>{o().close(j),b(j)})};return e.on("remove",()=>{De(n,j=>{o().close(j)})}),{open:N,openUrl:R,alert:L,confirm:Q,close:te}},xA=(e,n)=>{e.notificationManager.open({type:"error",text:n})},m0=(e,n)=>{e._skinLoaded?xA(e,n):e.on("SkinLoaded",()=>{xA(e,n)})},TA=(e,n)=>{m0(e,Ku.translate(["Failed to upload image: {0}",n]))},f0=(e,n,o)=>{nd(e,n,{message:o}),console.error(o)},g0=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,h0=(e,n,o)=>{f0(e,"PluginLoadError",g0("plugin",n,o))},MN=(e,n,o)=>{f0(e,"IconsLoadError",g0("icons",n,o))},NN=(e,n,o)=>{f0(e,"LanguageLoadError",g0("language",n,o))},BN=(e,n,o)=>{f0(e,"ThemeLoadError",g0("theme",n,o))},TT=(e,n,o)=>{f0(e,"ModelLoadError",g0("model",n,o))},$N=(e,n,o)=>{const r=Ku.translate(["Failed to initialize plugin: {0}",n]);nd(e,"PluginLoadError",{message:r}),pC(r,o),m0(e,r)},pC=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},PN=e=>/^[a-z0-9\-]+$/i.test(e),IN=e=>Ug(e,nS(e)),zg=e=>Ug(e,oS(e)),Ug=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Vt(n,u=>PN(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},nm=e=>{e.contentCSS=e.contentCSS.concat(IN(e),zg(e))},f8=e=>e?Ns(e.getElementsByTagName("img")):[],g8=(e,n)=>{const o={};return{findAll:(c,u=gt)=>{const f=rn(f8(c),w=>{const k=w.src;return w.hasAttribute("data-mce-bogus")||w.hasAttribute("data-mce-placeholder")||!k||k===Io.transparentSrc?!1:fs(k,"blob:")?!e.isUploaded(k)&&u(w):fs(k,"data:")?u(w):!1}),b=Vt(f,w=>{const k=w.src;if(_n(o,k))return o[k].then(N=>G(N)?N:{image:w,blobInfo:N.blobInfo});{const N=IO(n,k).then(R=>(delete o[k],{image:w,blobInfo:R})).catch(R=>(delete o[k],R));return o[k]=N,N}});return Promise.all(b)}}},FN=()=>{let o={};const r=(L,Q)=>({status:L,resultUri:Q}),c=L=>L in o;return{hasBlobUri:c,getResultUri:L=>{const Q=o[L];return Q?Q.resultUri:null},isPending:L=>c(L)?o[L].status===1:!1,isUploaded:L=>c(L)?o[L].status===2:!1,markPending:L=>{o[L]=r(1,null)},markUploaded:(L,Q)=>{o[L]=r(2,Q)},removeFailed:L=>{delete o[L]},destroy:()=>{o={}}}};let h8=0;const p8=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},b8=e=>e+h8+++p8(),v8=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,L,Q,te,j)=>{if(G(R))return r({id:R,name:te,filename:j,blob:L,base64:Q});if(Xe(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const L=R.id||b8("blobid"),Q=R.name||L,te=R.blob;return{id:nt(L),name:nt(Q),filename:nt(R.filename||Q+"."+n(te.type)),blob:nt(te),base64:nt(R.base64),blobUri:nt(R.blobUri||URL.createObjectURL(te)),uri:nt(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>ls(e,R).getOrUndefined(),f=R=>u(L=>L.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(L=>L.blobUri()===R),getByData:(R,L)=>u(Q=>Q.base64()===R&&Q.blob().type===L),findFirst:u,removeByUri:R=>{e=rn(e,L=>L.blobUri()===R?(URL.revokeObjectURL(L.blobUri()),!1):!0)},destroy:()=>{De(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},y8=(e,n)=>{const o={},r=(j,ee)=>j?j.replace(/\/$/,"")+"/"+ee.replace(/^\//,""):ee,c=(j,ee)=>new Promise((ve,ge)=>{const we=new XMLHttpRequest;we.open("POST",n.url),we.withCredentials=n.credentials,we.upload.onprogress=Ke=>{ee(Ke.loaded/Ke.total*100)},we.onerror=()=>{ge("Image upload failed due to a XHR Transport error. Code: "+we.status)},we.onload=()=>{if(we.status<200||we.status>=300){ge("HTTP Error: "+we.status);return}const Ke=JSON.parse(we.responseText);if(!Ke||!G(Ke.location)){ge("Invalid JSON: "+we.responseText);return}ve(r(n.basePath,Ke.location))};const ke=new FormData;ke.append("file",j.blob(),j.filename()),we.send(ke)}),u=fe(n.handler)?n.handler:c,f=()=>new Promise(j=>{j([])}),b=(j,ee)=>({url:ee,blobInfo:j,status:!0}),w=(j,ee)=>({url:"",blobInfo:j,status:!1,error:ee}),k=(j,ee)=>{Qe.each(o[j],ve=>{ve(ee)}),delete o[j]},N=(j,ee,ve)=>(e.markPending(j.blobUri()),new Promise(ge=>{let we,ke;try{const Ke=()=>{we&&(we.close(),ke=jt)},Ot=Me=>{Ke(),e.markUploaded(j.blobUri(),Me),k(j.blobUri(),b(j,Me)),ge(b(j,Me))},yt=Me=>{Ke(),e.removeFailed(j.blobUri()),k(j.blobUri(),w(j,Me)),ge(w(j,Me))};ke=Me=>{Me<0||Me>100||H.from(we).orThunk(()=>H.from(ve).map(Bo)).each(Ne=>{we=Ne,Ne.progressBar.value(Me)})},ee(j,ke).then(Ot,Me=>{yt(G(Me)?{message:Me}:Me)})}catch(Ke){ge(w(j,Ke))}})),R=j=>j===c,L=j=>{const ee=j.blobUri();return new Promise(ve=>{o[ee]=o[ee]||[],o[ee].push(ve)})},Q=(j,ee)=>(j=Qe.grep(j,ve=>!e.isUploaded(ve.blobUri())),Promise.all(Qe.map(j,ve=>e.isPending(ve.blobUri())?L(ve):N(ve,u,ee))));return{upload:(j,ee)=>!n.url&&R(u)?f():Q(j,ee)}},LN=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),HN=(e,n)=>y8(n,{url:lv(e),basePath:Sf(e),credentials:eS(e),handler:$y(e)}),w8=e=>{const n=FN(),o=HN(e,n);return{upload:(r,c=!0)=>o.upload(r,c?LN(e):void 0)}},C8=e=>{const n=v8();let o,r;const c=FN(),u=[],f=we=>ke=>e.selection?we(ke):[],b=we=>we+(we.indexOf("?")===-1?"?":"&")+new Date().getTime(),w=(we,ke,Ke)=>{let Ot=0;do Ot=we.indexOf(ke,Ot),Ot!==-1&&(we=we.substring(0,Ot)+Ke+we.substr(Ot+ke.length),Ot+=Ke.length-ke.length+1);while(Ot!==-1);return we},k=(we,ke,Ke)=>{const Ot=`src="${Ke}"${Ke===Io.transparentSrc?' data-mce-placeholder="1"':""}`;return we=w(we,`src="${ke}"`,Ot),we=w(we,'data-mce-src="'+ke+'"','data-mce-src="'+Ke+'"'),we},N=(we,ke)=>{De(e.undoManager.data,Ke=>{Ke.type==="fragmented"?Ke.fragments=Vt(Ke.fragments,Ot=>k(Ot,we,ke)):Ke.content=k(Ke.content,we,ke)})},R=(we,ke)=>{const Ke=e.convertURL(ke,"src");N(we.src,ke),tc(re.fromDom(we),{src:cv(e)?b(ke):ke,"data-mce-src":Ke})},L=()=>(o||(o=HN(e,c)),ee().then(f(we=>{const ke=Vt(we,Ke=>Ke.blobInfo);return o.upload(ke,LN(e)).then(f(Ke=>{const Ot=[];let yt=!1;const Me=Vt(Ke,(Ne,Ut)=>{const{blobInfo:bn,image:Rn}=we[Ut];let co=!1;return Ne.status&&vu(e)?(Ne.url&&!Ts(Rn.src,Ne.url)&&(yt=!0),n.removeByUri(Rn.src),Vg(e)||R(Rn,Ne.url)):Ne.error&&(Ne.error.remove&&(N(Rn.src,Io.transparentSrc),Ot.push(Rn),co=!0),TA(e,Ne.error.message)),{element:Rn,status:Ne.status,uploadUri:Ne.url,blobInfo:bn,removed:co}});return Ot.length>0&&!Vg(e)?e.undoManager.transact(()=>{De(Ot,Ne=>{e.dom.remove(Ne),n.removeByUri(Ne.src)})}):yt&&e.undoManager.dispatchChange(),Me}))}))),Q=()=>bu(e)?L():Promise.resolve([]),te=we=>Jo(u,ke=>ke(we)),j=we=>{u.push(we)},ee=()=>(r||(r=g8(c,n)),r.findAll(e.getBody(),te).then(f(we=>{const ke=rn(we,Ke=>G(Ke)?(m0(e,Ke),!1):Ke.uriType!=="blob");return Vg(e)||De(ke,Ke=>{N(Ke.image.src,Ke.blobInfo.blobUri()),Ke.image.src=Ke.blobInfo.blobUri(),Ke.image.removeAttribute("data-mce-src")}),ke}))),ve=()=>{n.destroy(),c.destroy(),r=o=null},ge=we=>we.replace(/src="(blob:[^"]+)"/g,(ke,Ke)=>{const Ot=c.getResultUri(Ke);if(Ot)return'src="'+Ot+'"';let yt=n.getByUri(Ke);return yt||(yt=zo(e.editorManager.get(),(Me,Ne)=>Me||Ne.editorUpload&&Ne.editorUpload.blobCache.getByUri(Ke),void 0)),yt?'src="data:'+yt.blob().type+";base64,"+yt.base64()+'"':ke});return e.on("SetContent",()=>{bu(e)?Q():ee()}),e.on("RawSaveContent",we=>{we.content=ge(we.content)}),e.on("GetContent",we=>{we.source_view||we.format==="raw"||we.format==="tree"||(we.content=ge(we.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",we=>{De(we,ke=>{const Ke=ke.attr("src");if(!Ke||n.getByUri(Ke))return;const Ot=c.getResultUri(Ke);Ot&&ke.attr("src",Ot)})})}),{blobCache:n,addFilter:j,uploadImages:L,uploadImagesAuto:Q,scanForImages:ee,destroy:ve}},kA=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>ze(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Qe.each(f,(b,w)=>{n.setAttrib(c,w,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Qe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},kT={remove_similar:!0,inherit:!1},ab={selector:"td,th",...kT},S8={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ab},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ab},tablecellbordercolor:{styles:{borderColor:"%value"},...ab},tablecellclass:{classes:["%value"],...ab},tableclass:{selector:"table",classes:["%value"],...kT},tablecellborderstyle:{styles:{borderStyle:"%value"},...ab},tablecellborderwidth:{styles:{borderWidth:"%value"},...ab}},x8=nt(S8),VN=e=>{const n={},o=f=>Pe(f)?n[f]:n,r=f=>_n(n,f),c=(f,b)=>{f&&(G(f)?(at(b)||(b=[b]),De(b,w=>{Mn(w.deep)&&(w.deep=!Ai(w)),Mn(w.split)&&(w.split=!Ai(w)||Sa(w)),Mn(w.remove)&&Ai(w)&&!Sa(w)&&(w.remove="none"),Ai(w)&&Sa(w)&&(w.mixed=!0,w.block_expand=!0),G(w.classes)&&(w.classes=w.classes.split(/\s+/))}),n[f]=b):ht(f,(w,k)=>{c(k,w)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(kA(e)),c(x8()),c(cS(e)),{get:o,has:r,register:c,unregister:u}},bC=Qe.each,eu=Vs.DOM,ET=e=>Pe(e)&&Xe(e),EA=(e,n)=>{const o=n&&n.schema||ai({}),r=(w,k)=>{k.classes.length>0&&eu.addClass(w,k.classes.join(" ")),eu.setAttribs(w,k.attrs)},c=w=>{const k=G(w)?{name:w,classes:[],attrs:{}}:w,N=eu.create(k.name);return r(N,k),N},u=(w,k)=>{const N=o.getElementRule(w.nodeName.toLowerCase()),R=N==null?void 0:N.parentsRequired;return R&&R.length?k&&Tt(R,k)?k:R[0]:!1},f=(w,k,N)=>{let R;const L=k[0],Q=ET(L)?L.name:void 0,te=u(w,Q);if(te)Q===te?(R=L,k=k.slice(1)):R=te;else if(L)R=L,k=k.slice(1);else if(!N)return w;const j=R?c(R):eu.create("div");j.appendChild(w),N&&Qe.each(N,ve=>{const ge=c(ve);j.insertBefore(ge,w)});const ee=ET(R)?R.siblings:void 0;return f(j,k,ee)},b=eu.create("div");if(e.length>0){const w=e[0],k=c(w),N=ET(w)?w.siblings:void 0;b.appendChild(f(k,e.slice(1),N))}return b},_A=e=>{e=Qe.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Qe.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const w=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);w&&(o.attrs[w[1]]=w[2])}return""})),o.name=n||"div",o},T8=e=>G(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Qe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Qe.map(n.split(/(?:~\+|~|\+)/),_A),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],k8=(e,n)=>{let o="",r=bl(e);if(r==="")return"";const c=L=>G(L)?L.replace(/%(\w+)/g,""):"",u=(L,Q)=>eu.getStyle(Q??e.getBody(),L,!0);if(G(n)){const L=e.formatter.get(n);if(!L)return"";n=L[0]}if("preview"in n){const L=n.preview;if(L===!1)return"";r=L||r}let f=n.block||n.inline||"span",b;const w=T8(n.selector);w.length>0?(w[0].name||(w[0].name=f),f=n.selector,b=EA(w,e)):b=EA([f],e);const k=eu.select(f,b)[0]||b.firstChild;bC(n.styles,(L,Q)=>{const te=c(L);te&&eu.setStyle(k,Q,te)}),bC(n.attributes,(L,Q)=>{const te=c(L);te&&eu.setAttrib(k,Q,te)}),bC(n.classes,L=>{const Q=c(L);eu.hasClass(k,Q)||eu.addClass(k,Q)}),e.dispatch("PreviewFormats"),eu.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const N=u("fontSize"),R=/px$/.test(N)?parseInt(N,10):0;return bC(r.split(" "),L=>{let Q=u(L,k);if(!(L==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Q)&&(Q=u(L),nw(Q).toLowerCase()==="#ffffff"))&&!(L==="color"&&nw(Q).toLowerCase()==="#000000")){if(L==="font-size"&&/em|%$/.test(Q)){if(R===0)return;Q=parseFloat(Q)/(/%$/.test(Q)?100:1)*R+"px"}L==="border"&&Q&&(o+="padding:0 2px;"),o+=L+":"+Q+";"}}),e.dispatch("AfterPreviewFormats"),eu.remove(b),o},$f=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},ud=e=>{const n=VN(e),o=xc({});return $f(e),nL(e),Vg(e)||AW(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{vN(e,r,c,u)},remove:(r,c,u,f)=>{R6(e,r,c,u,f)},toggle:(r,c,u)=>{M6(e,r,c,u)},match:(r,c,u,f)=>pN(e,r,c,u,f),closest:r=>bN(e,r),matchAll:(r,c)=>A6(e,r,c),matchNode:(r,c,u,f)=>D6(e,r,c,u,f),canApply:r=>uC(e,r),formatChanged:(r,c,u,f)=>N6(e,o,r,c,u,f),getCssText:je(k8,e)}},vC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},zN=(e,n,o)=>{const r=xc(!1),c=w=>{pT(n,!1,o),n.add({},w)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",w=>{const k=w.command;vC(k)||(Ou(n,o),n.beforeChange())}),e.on("ExecCommand",w=>{const k=w.command;vC(k)||c(w)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",w=>{const k=w.keyCode;w.isDefaultPrevented()||((k>=33&&k<=36||k>=37&&k<=40||k===45||w.ctrlKey)&&(c(),e.nodeChanged()),(k===46||k===8)&&e.nodeChanged(),r.get()&&n.typing&&!mA(mT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",w=>{const k=w.keyCode;if(w.isDefaultPrevented())return;if(k>=33&&k<=36||k>=37&&k<=40||k===45){n.typing&&c(w);return}const N=w.ctrlKey&&!w.altKey||w.metaKey;(k<16||k>20)&&k!==224&&k!==91&&!n.typing&&!N&&(n.beforeChange(),pT(n,!0,o),n.add({},w),r.set(!0))}),e.on("mousedown",w=>{n.typing&&c(w)});const u=w=>w.inputType==="insertReplacementText",f=w=>w.inputType==="insertText"&&w.data===null,b=w=>w.inputType==="insertFromPaste"||w.inputType==="insertFromDrop";e.on("input",w=>{w.inputType&&(u(w)||f(w)||b(w))&&c(w)}),e.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||e.nodeChanged()})},_T=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},OA=e=>{const n=Qs(),o=xc(0),r=xc(0),c={data:[],typing:!1,beforeChange:()=>{lC(e,o,n)},add:(u,f)=>yT(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=mT(e);u.bookmark=_y(e.selection),e.dispatch("change",{level:u,lastLevel:en(c.data,r.get()).getOrUndefined()})},undo:()=>iC(e,c,o,r),redo:()=>fN(e,r,c.data),clear:()=>{gN(e,c,r)},reset:()=>{T6(e,c)},hasUndo:()=>hN(e,c,r),hasRedo:()=>k6(e,c,r),transact:u=>E6(e,c,o,u),ignore:u=>{_6(e,o,u)},extra:(u,f)=>{O6(e,c,r,u,f)}};return Vg(e)||zN(e,c,o),_T(e),c},UN=[9,27,on.HOME,on.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,on.DOWN,on.UP,on.LEFT,on.RIGHT].concat(Io.browser.isFirefox()?[224]:[]),AA="data-mce-placeholder",DA=e=>e.type==="keydown"||e.type==="keyup",RA=e=>{const n=e.keyCode;return n===on.BACKSPACE||n===on.DELETE},WN=e=>{if(DA(e)){const n=e.keyCode;return!RA(e)&&(on.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Tt(UN,n))}else return!1},OT=e=>DA(e)&&!(RA(e)||e.type==="keyup"&&e.keyCode===229),MA=(e,n,o)=>{if(Ir(re.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},E8=e=>{var n;const o=e.dom,r=ua(e),c=(n=rS(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(WN(f))return;const w=e.getBody(),k=OT(f)?!1:MA(o,w,r);(o.getAttrib(w,AA)!==""!==k||b)&&(o.setAttrib(w,AA,k?c:null),o.setAttrib(w,"aria-placeholder",k?c:null),zs(e,k),e.on(k?"keydown":"keyup",u),e.off(k?"keyup":"keydown",u))};Lo(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>hr.setEditorTimeout(e,()=>u(b)))})},_8=(e,n)=>({block:e,position:n}),O8=(e,n)=>({from:e,to:n}),NA=(e,n)=>{const o=re.fromDom(e),r=re.fromDom(n.container());return kx(o,r).map(c=>_8(c,n))},ZN=e=>!ss(e.from.block,e.to.block),jN=(e,n)=>E(n,c=>Sc(c)||Wi(c.dom),c=>ss(c,e)).filter(Os).getOr(e),A8=(e,n)=>{const o=re.fromDom(e);return ss(jN(o,n.from.block),jN(o,n.to.block))},BA=e=>oo(e.from.block.dom)===!1&&oo(e.to.block.dom)===!1,D8=e=>{const n=o=>ih(o)||ju(o.dom);return n(e.from.block)&&n(e.to.block)},R8=(e,n,o)=>gr(o.position.getNode())&&!Ir(o.block)?Fh(!1,o.block.dom).bind(r=>r.isEqual(o.position)?Oi(n,e,r).bind(c=>NA(e,c)):H.some(o)).getOr(o):o,M8=(e,n,o)=>{const r=NA(e,He.fromRangeStart(o)),c=r.bind(u=>Oi(n,e,u.position).bind(f=>NA(e,f).map(b=>R8(e,n,b))));return qr(r,c,O8).filter(u=>ZN(u)&&A8(e,u)&&BA(u)&&D8(u))},N8=(e,n,o)=>o.collapsed?M8(e,n,o):H.none(),B8=e=>{const n=Da(e);return Ms(n,fl).fold(nt(n),o=>n.slice(0,o))},GN=e=>{const n=B8(e);return De(n,Ls),n},qN=(e,n)=>{const o=$g(n,e);return ls(o.reverse(),r=>Ir(r)).each(Ls)},AT=e=>rn(th(e),n=>!Ir(n)).length===0,$A=(e,n,o,r)=>{if(Ir(o))return S(o),ii(o.dom);AT(r)&&Ir(n)&&is(r,re.fromTag("br"));const c=wu(o.dom,He.before(r.dom));return De(GN(n),u=>{is(r,u)}),qN(e,n),c},$8=(e,n,o)=>{if(Ir(o)){if(Ir(n)){const u=Ea((f=>{const b=(w,k)=>Dd(w).fold(()=>k,N=>ng(N)?b(N,k.concat(yf(N))):k);return b(f,[])})(o),(f,b)=>(_b(f,b),b),C());$s(n),Pr(n,u)}return Ls(o),ii(n.dom)}const r=Nm(o.dom);return De(GN(n),c=>{Pr(o,c)}),qN(e,n),r},P8=(e,n)=>{const o=$g(n,e);return H.from(o[o.length-1])},I8=(e,n)=>Fl(n,e)?P8(n,e):H.none(),KN=(e,n)=>{Fh(e,n.dom).bind(o=>H.from(o.getNode())).map(re.fromDom).filter(za).each(Ls)},PA=(e,n,o)=>(KN(!0,n),KN(!1,o),I8(n,o).fold(je($8,e,n,o),je($A,e,n,o))),YN=(e,n,o,r)=>n?PA(e,r,o):PA(e,o,r),IA=(e,n)=>{const o=re.fromDom(e.getBody());return N8(o.dom,n,e.selection.getRng()).map(c=>()=>{YN(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},FA=(e,n)=>{const o=n.getRng();return qr(kx(e,re.fromDom(o.startContainer)),kx(e,re.fromDom(o.endContainer)),(r,c)=>ss(r,c)?H.none():H.some(()=>{o.deleteContents(),YN(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(H.none())},XN=(e,n)=>{const o=re.fromDom(n),r=je(ss,e);return Zs(o,Sc,r).isSome()},F8=(e,n)=>XN(e,n.startContainer)||XN(e,n.endContainer),L8=(e,n)=>{const o=wu(e.dom,He.fromRangeStart(n)).isNone(),r=el(e.dom,He.fromRangeEnd(n)).isNone();return!F8(e,n)&&o&&r},H8=e=>H.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),V8=e=>{const n=re.fromDom(e.getBody()),o=e.selection.getRng();return L8(n,o)?H8(e):FA(n,e.selection)},LA=(e,n)=>e.selection.isCollapsed()?H.none():V8(e),Wg=(e,n,o,r,c)=>H.from(n._selectionOverrides.showCaret(e,o,r,c)),DT=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},fp=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?H.none():H.some(DT(n)),z8=(e,n,o)=>{const r=jy(1,e.getBody(),n),c=He.fromRangeStart(r),u=c.getNode();if(wg(u))return Wg(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(wg(f))return Wg(1,e,f,!1,!1);const b=Ig(e.dom.getRoot(),c.getNode());return wg(b)?Wg(1,e,b,!1,o):H.none()},HA=(e,n,o)=>n.collapsed?z8(e,n,o).getOr(n):n,RT=e=>L1(e)||zn(e),U8=e=>H1(e)||Fw(e),W8=(e,n)=>{mt(n)&&n.data.length===0&&e.remove(n)},JN=(e,n,o,r,c,u)=>{Wg(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),W8(e.dom,o)},Z8=(e,n)=>{const o=e.selection.getRng();if(!mt(o.commonAncestorContainer))return H.none();const r=n?Wa.Forwards:Wa.Backwards,c=td(e.getBody()),u=je(Mm,n?c.next:c.prev),f=n?RT:U8,b=Gy(r,e.getBody(),o),w=u(b),k=w&&Dr(n,w);if(!k||!wv(b,k))return H.none();if(f(k))return H.some(()=>JN(e,o,b.getNode(),r,n,k));const N=u(k);return N&&f(N)&&wv(k,N)?H.some(()=>JN(e,o,b.getNode(),r,n,N)):H.none()},VA=(e,n)=>Z8(e,n),zA=(e,n)=>{const o=e.getBody();return n?ii(o).filter(L1):Nm(o).filter(H1)},UA=e=>{const n=e.selection.getRng();return!n.collapsed&&(zA(e,!0).exists(o=>o.isEqual(He.fromRangeStart(n)))||zA(e,!1).exists(o=>o.isEqual(He.fromRangeEnd(n))))},j8=e=>Pe(e)&&(Sc(re.fromDom(e))||Ic(re.fromDom(e))),Au=Ar.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),G8=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return ze(o)&&o.getAttribute("data-mce-caret")===r},q8=(e,n,o,r)=>{const c=u=>ng(re.fromDom(u))&&!da(o,r,e);return Ph(!n,o).fold(()=>Ph(n,r).fold(_e,c),c)},K8=(e,n,o,r)=>{const c=r.getNode(!n);return kx(re.fromDom(e),re.fromDom(o.getNode())).map(u=>Ir(u)?Au.remove(u.dom):Au.moveToElement(c)).orThunk(()=>H.some(Au.moveToElement(c)))},dd=(e,n,o)=>Oi(n,e,o).bind(r=>j8(r.getNode())||q8(e,n,o,r)?H.none():n&&oo(r.getNode())||!n&&oo(r.getNode(!0))?K8(e,n,o,r):n&&H1(o)||!n&&L1(o)?H.some(Au.moveToPosition(r)):H.none()),WA=(e,n)=>Bt(n)?H.none():e&&oo(n.nextSibling)?H.some(Au.moveToElement(n.nextSibling)):!e&&oo(n.previousSibling)?H.some(Au.moveToElement(n.previousSibling)):H.none(),QN=(e,n,o)=>o.fold(r=>H.some(Au.remove(r)),r=>H.some(Au.moveToElement(r)),r=>da(n,r,e)?H.none():H.some(Au.moveToPosition(r))),eB=(e,n,o)=>G8(n,o)?WA(n,o.getNode(!n)).orThunk(()=>dd(e,n,o)):dd(e,n,o).bind(r=>QN(e,o,r)),Y8=(e,n,o)=>{const r=jy(n?1:-1,e,o),c=He.fromRangeStart(r),u=re.fromDom(e);return!n&&H1(c)?H.some(Au.remove(c.getNode(!0))):n&&L1(c)?H.some(Au.remove(c.getNode())):!n&&L1(c)&&W_(u,c)?TW(u,c).map(f=>Au.remove(f.getNode())):n&&H1(c)&&wx(u,c)?kW(u,c).map(f=>Au.remove(f.getNode())):eB(e,n,c)},tB=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),z1(e,n,re.fromDom(o)),!0),X8=(e,n)=>o=>{const r=n?He.before(o):He.after(o);return e.selection.setRng(r.toRange()),!0},nB=e=>n=>(e.selection.setRng(n.toRange()),!0),oB=(e,n)=>H.from(Ig(e.getBody(),n)),J8=(e,n)=>{const o=e.selection.getNode();return oB(e,o).filter(oo).fold(()=>Y8(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(tB(e,n),X8(e,n),nB(e))),()=>H.some(jt))},Q8=e=>{De(nc(e,".mce-offscreen-selection"),Ls)},p0=(e,n)=>{const o=e.selection.getNode();return oo(o)&&!Vl(o)?oB(e,o.parentNode).filter(oo).fold(()=>H.some(()=>{Q8(re.fromDom(e.getBody())),z1(e,n,re.fromDom(e.selection.getNode())),Q_(e)}),()=>H.some(jt)):UA(e)?H.some(()=>{rd(e,e.selection.getRng(),re.fromDom(e.getBody()))}):H.none()},ZA=e=>{const n=e.dom,o=e.selection,r=Ig(e.getBody(),o.getNode());if(Wi(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(He.before(c).toRange())}return!0},MT=(e,n)=>e.selection.isCollapsed()?J8(e,n):p0(e,n),sB=(e,n)=>{const o=He.fromRangeStart(e.selection.getRng());return Oi(n,e.getBody(),o).filter(r=>n?SW(r):lF(r)).bind(r=>xg(n?0:-1,r)).map(r=>()=>e.selection.select(r))},yC=(e,n)=>e.selection.isCollapsed()?sB(e,n):H.none(),b0=mt,rB=e=>b0(e)&&e.data[0]===W,aB=e=>b0(e)&&e.data[e.data.length-1]===W,e7=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(W)},UW=e=>{var n;if(b0(e.previousSibling))return aB(e.previousSibling)||e.previousSibling.appendData(W),e.previousSibling;if(b0(e))return rB(e)||e.insertData(0,W),e;{const o=e7(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},WW=e=>{var n,o;if(b0(e.nextSibling))return rB(e.nextSibling)||e.nextSibling.insertData(0,W),e.nextSibling;if(b0(e))return aB(e)||e.appendData(W),e;{const r=e7(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},tu=(e,n)=>e?UW(n):WW(n),t7=je(tu,!0),n7=je(tu,!1),jA=(e,n)=>mt(e.container())?tu(n,e.container()):tu(n,e.getNode()),NT=(e,n)=>{const o=n.get();return o&&e.container()===o&&Kn(o)},cB=(e,n)=>n.fold(o=>{Tf(e.get());const r=t7(o);return e.set(r),H.some(He(r,r.length-1))},o=>ii(o).map(r=>{if(NT(r,e)){const c=e.get();return He(c,1)}else{Tf(e.get());const c=jA(r,!0);return e.set(c),He(c,1)}}),o=>Nm(o).map(r=>{if(NT(r,e)){const c=e.get();return He(c,c.length-1)}else{Tf(e.get());const c=jA(r,!1);return e.set(c),He(c,c.length-1)}}),o=>{Tf(e.get());const r=n7(o);return e.set(r),H.some(He(r,1))}),o7=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return H.none()},Ni=Ar.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Du=(e,n)=>{const o=kf(n,e);return o||e},s7=(e,n,o)=>{const r=bs(o),c=Du(n,r.container());return pr(e,c,r).fold(()=>el(c,r).bind(je(pr,e,c)).map(u=>Ni.before(u)),H.none)},r7=(e,n)=>Ba(e,n)===null,lB=(e,n,o)=>pr(e,n,o).filter(je(r7,n)),a7=(e,n,o)=>{const r=ku(o);return lB(e,n,r).bind(c=>wu(c,r).isNone()?H.some(Ni.start(c)):H.none())},c7=(e,n,o)=>{const r=bs(o);return lB(e,n,r).bind(c=>el(c,r).isNone()?H.some(Ni.end(c)):H.none())},l7=(e,n,o)=>{const r=ku(o),c=Du(n,r.container());return pr(e,c,r).fold(()=>wu(c,r).bind(je(pr,e,c)).map(u=>Ni.after(u)),H.none)},gp=e=>!_F(GA(e)),Pf=(e,n,o)=>o7([s7,a7,c7,l7],[e,n,o]).filter(gp),GA=e=>e.fold(No,No,No,No),iB=e=>e.fold(nt("before"),nt("start"),nt("end"),nt("after")),v0=e=>e.fold(Ni.before,Ni.before,Ni.after,Ni.after),wC=e=>e.fold(Ni.start,Ni.start,Ni.end,Ni.end),uB=(e,n)=>iB(e)===iB(n)&&GA(e)===GA(n),dB=(e,n,o,r,c,u)=>qr(pr(n,o,r),pr(n,o,c),(f,b)=>f!==b&&Tx(o,f,b)?Ni.after(e?f:b):u).getOr(u),mB=(e,n)=>e.fold(gt,o=>!uB(o,n)),i7=(e,n,o,r,c)=>{const u=Dr(e,c);return Oi(e,o,u).map(je(Dr,e)).fold(()=>r.map(v0),w=>Pf(n,o,w).map(je(dB,e,n,o,u,w)).filter(je(mB,r))).filter(gp)},CC=(e,n)=>e?n.fold(O(H.some,Ni.start),H.none,O(H.some,Ni.after),H.none):n.fold(H.none,O(H.some,Ni.before),H.none,O(H.some,Ni.end)),u7=(e,n,o,r)=>{const c=Dr(e,r),u=Pf(n,o,c);return Pf(n,o,c).bind(je(CC,e)).orThunk(()=>i7(e,n,o,u,r))},d7=e=>fe(e.selection.getSel().modify),fB=(e,n,o)=>{const r=e?1:-1;return n.setRng(He(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},m7=(e,n)=>{const o=n.selection.getRng(),r=e?He.fromRangeEnd(o):He.fromRangeStart(o);return d7(n)?e&&gl(r)?fB(!0,n.selection,r):!e&&sc(r)?fB(!1,n.selection,r):!1:!1};var If;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(If||(If={}));const BT=(e,n)=>e===Wa.Backwards?Uo(n):n,f7=(e,n,o)=>e===Wa.Forwards?n.next(o):n.prev(o),gB=(e,n,o,r)=>gr(r.getNode(n===Wa.Forwards))?If.Br:da(o,r)===!1?If.Block:If.Wrap,hB=(e,n,o,r)=>{const c=td(o);let u=r;const f=[];for(;u;){const b=f7(n,c,u);if(!b)break;if(gr(b.getNode(!1)))return n===Wa.Forwards?{positions:BT(n,f).concat([b]),breakType:If.Br,breakAt:H.some(b)}:{positions:BT(n,f),breakType:If.Br,breakAt:H.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const w=gB(o,n,u,b);return{positions:BT(n,f),breakType:w,breakAt:H.some(b)}}f.push(b),u=b}return{positions:BT(n,f),breakType:If.Eol,breakAt:H.none()}},hp=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===Wa.Backwards?u.concat(c):[c].concat(u)}).getOr([]),$T=(e,n)=>zo(e,(o,r)=>o.fold(()=>H.some(r),c=>qr(Bn(c.getClientRects()),Bn(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),H.none()),y0=(e,n)=>Bn(n.getClientRects()).bind(o=>$T(e,o.left)),w0=je(hB,He.isAbove,-1),cb=je(hB,He.isBelow,1),Zg=je(hp,-1,w0),qA=je(hp,1,cb),md=(e,n)=>w0(e,n).breakAt.isNone(),lb=(e,n)=>cb(e,n).breakAt.isNone(),KA=e=>ii(e).map(n=>[n].concat(cb(e,n).positions)).getOr([]),g7=e=>Nm(e).map(n=>w0(e,n).positions.concat(n)).getOr([]),pB=(e,n)=>y0(Zg(e,n),n),h7=(e,n)=>y0(qA(e,n),n),p7=oo,bB=(e,n)=>Math.abs(e.left-n),vB=(e,n)=>Math.abs(e.right-n),b7=e=>Zr(e,"node"),YA=(e,n)=>Be(e,(o,r)=>{const c=Math.min(bB(o,n),vB(o,n)),u=Math.min(bB(r,n),vB(r,n));return u===c&&b7(r)&&p7(r.node)||u<c?r:o}),v7=e=>{const n=o=>Vt(o,r=>{const c=Am(r);return c.node=e,c});if(ze(e))return n(e.getClientRects());if(mt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},yB=e=>ur(e,v7);var Ff;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ff||(Ff={}));const XA=(e,n,o,r)=>{let c=r;for(;c=Bh(c,e,Nb,n);)if(o(c))return},JA=(e,n,o,r,c,u)=>{let f=0;const b=[],w=R=>{let L=yB([R]);e===-1&&(L=L.reverse());for(let Q=0;Q<L.length;Q++){const te=L[Q];if(!o(te,k)){if(b.length>0&&n(te,Xt(b))&&f++,te.line=f,c(te))return!0;b.push(te)}}return!1},k=Xt(u.getClientRects());if(!k)return b;const N=u.getNode();return N&&(w(N),XA(e,r,w,N)),b},wB=(e,n)=>n.line>e,QA=(e,n)=>n.line===e,y7=je(JA,Ff.Up,cc,zl),w7=je(JA,Ff.Down,zl,cc),CB=e=>Xt(e.getClientRects()),C7=(e,n,o,r)=>{const c=td(n);let u,f,b,w;const k=[];let N=0;e===1?(u=c.next,f=zl,b=cc,w=He.after(r)):(u=c.prev,f=cc,b=zl,w=He.before(r));const R=CB(w);do{if(!w.isVisible())continue;const L=CB(w);if(b(L,R))continue;k.length>0&&f(L,Xt(k))&&N++;const Q=Am(L);if(Q.position=w,Q.line=N,o(Q))return k;k.push(Q)}while(w=u(w));return k},SB=e=>n=>wB(e,n),e4=e=>n=>QA(e,n),jg=(e,n)=>{e.selection.setRng(n),We(e,e.selection.getRng())},PT=(e,n,o)=>H.some(HA(e,n,o)),xB=(e,n,o,r,c,u)=>{const f=n===Wa.Forwards,b=td(e.getBody()),w=je(Mm,f?b.next:b.prev),k=f?r:c;if(!o.collapsed){const te=Yp(o);if(u(te))return Wg(n,e,te,n===Wa.Backwards,!1);if(UA(e)){const j=o.cloneRange();return j.collapse(n===Wa.Backwards),H.from(j)}}const N=Gy(n,e.getBody(),o);if(k(N))return fp(e,N.getNode(!f));let R=w(N);const L=wm(o);if(R)R=Dr(f,R);else return L?H.some(o):H.none();if(k(R))return Wg(n,e,R.getNode(!f),f,!1);const Q=w(R);return Q&&k(Q)&&wv(R,Q)?Wg(n,e,Q.getNode(!f),f,!1):L?PT(e,R.toRange(),!1):H.none()},TB=(e,n,o,r,c,u)=>{const f=Gy(n,e.getBody(),o),b=Xt(f.getClientRects()),w=n===Ff.Down,k=e.getBody();if(!b)return H.none();if(UA(e)){const ee=w?He.fromRangeEnd(o):He.fromRangeStart(o);return(w?h7:pB)(k,ee).orThunk(()=>H.from(ee)).map(ge=>ge.toRange())}const R=(w?w7:y7)(k,SB(1),f),L=rn(R,e4(1)),Q=b.left,te=YA(L,Q);if(te&&u(te.node)){const ee=Math.abs(Q-te.left),ve=Math.abs(Q-te.right);return Wg(n,e,te.node,ee<ve,!1)}let j;if(r(f)?j=f.getNode():c(f)?j=f.getNode(!0):j=Yp(o),j){const ee=C7(n,k,SB(1),j);let ve=YA(rn(ee,e4(1)),Q);if(ve||(ve=Xt(rn(ee,e4(0))),ve))return PT(e,ve.position.toRange(),!1)}return L.length===0?Bi(e,w).filter(w?c:r).map(ee=>HA(e,ee.toRange(),!1)):H.none()},Bi=(e,n)=>{const o=e.selection.getRng(),r=n?He.fromRangeEnd(o):He.fromRangeStart(o),c=yv(r.container(),e.getBody());if(n){const u=cb(c,r);return Yt(u.positions)}else{const u=w0(c,r);return Bn(u.positions)}},kB=(e,n,o)=>Bi(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),C0=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},t4=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},IT=(e,n,o)=>cB(n,o).map(r=>(C0(e,r),o)),S7=(e,n,o)=>{const r=He.fromRangeStart(e);if(e.collapsed)return r;{const c=He.fromRangeEnd(e);return o?wu(n,c).getOr(c):el(n,r).getOr(r)}},x7=(e,n,o)=>{const r=e.getBody(),c=S7(e.selection.getRng(),r,o),u=je(sd,e);return u7(o,u,r,c).bind(b=>IT(e,n,b))},T7=(e,n,o)=>{const r=Vt(nc(re.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=rn(r,e),u=rn(o,e);De(tt(c,u),je(t4,!1)),De(tt(u,c),je(t4,!0))},k7=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=He.fromRangeStart(e.selection.getRng());He.isTextPosition(r)&&!EW(r)&&(C0(e,AS(o,r)),n.set(null))}},E7=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=rn(r,e);De(c,u=>{const f=He.fromRangeStart(n.selection.getRng());Pf(e,n.getBody(),f).bind(b=>IT(n,o,b))})}},n4=(e,n,o)=>Cs(e)?x7(e,n,o).isSome():!1,EB=(e,n,o)=>Cs(n)?m7(e,n):!1,_7=e=>{const n=xc(null),o=je(sd,e);return e.on("NodeChange",r=>{Cs(e)&&(T7(o,e.dom,r.parents),k7(e,n),E7(o,e,n,r.parents))}),n},SC=je(EB,!0),Gg=je(EB,!1),Lf=(e,n,o)=>{if(Cs(e)){const r=Bi(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?He.fromRangeEnd(c):He.fromRangeStart(c)});return Pf(je(sd,e),e.getBody(),r).exists(c=>{const u=v0(c);return cB(o,u).exists(f=>(C0(e,f),!0))})}else return!1},FT=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},o4=e=>qr(ii(e),Nm(e),(n,o)=>{const r=Dr(!0,n),c=Dr(!1,o);return el(e,r).forall(u=>u.isEqual(c))}).getOr(!0),LT=(e,n)=>o=>cB(n,o).map(r=>()=>C0(e,r)),s4=(e,n,o,r)=>{const c=e.getBody(),u=je(sd,e);e.undoManager.ignore(()=>{e.selection.setRng(FT(o,r)),Vw(e),Pf(u,c,He.fromRangeStart(e.selection.getRng())).map(wC).bind(LT(e,n)).each(Ps)}),e.nodeChanged()},O7=(e,n)=>{const o=kf(n,e);return o||e},_B=(e,n,o,r)=>{const c=O7(e.getBody(),r.container()),u=je(sd,e),f=Pf(u,c,r);return f.bind(w=>o?w.fold(nt(H.some(wC(w))),H.none,nt(H.some(v0(w))),H.none):w.fold(H.none,nt(H.some(v0(w))),H.none,nt(H.some(wC(w))))).map(LT(e,n)).getOrThunk(()=>{const w=kv(o,c,r),k=w.bind(N=>Pf(u,c,N));return qr(f,k,()=>pr(u,c,r).bind(N=>o4(N)?H.some(()=>{z1(e,o,re.fromDom(N))}):H.none())).getOrThunk(()=>k.bind(()=>w.map(N=>()=>{o?s4(e,n,r,N):s4(e,n,N,r)})))})},HT=(e,n,o)=>{if(e.selection.isCollapsed()&&Cs(e)){const r=He.fromRangeStart(e.selection.getRng());return _B(e,n,o,r)}return H.none()},A7=e=>Bc(e)>1,OB=(e,n)=>{const o=re.fromDom(e.getBody()),r=re.fromDom(e.selection.getStart()),c=$g(r,o);return Ms(c,n).fold(nt(c),u=>c.slice(0,u))},D7=e=>OB(e,n=>fl(n)||A7(n)),R7=e=>OB(e,fl),AB=(e,n)=>{const o=je(cd,e);return ur(n,r=>o(r)?[r.dom]:[])},DB=e=>{const n=R7(e);return AB(e,n)},RB=(e,n,o,r)=>{const c=AB(n,r);if(c.length===0)z1(n,e,o);else{const u=Xw(o.dom,c);n.selection.setRng(u.toRange())}},MB=(e,n)=>{const o=D7(e);return Yt(o).bind(r=>{const c=He.fromRangeStart(e.selection.getRng());return eO(n,c,r.dom)&&!Jw(r)?H.some(()=>RB(n,e,r,o)):H.none()})},ZW=(e,n)=>{const o=n.parentElement;return gr(n)&&!q(o)&&e.dom.isEmpty(o)},jW=e=>Jw(re.fromDom(e)),M7=(e,n)=>{const o=e.selection.getStart(),r=ZW(e,o)||jW(o)?Xw(o,n):oL(e,n);e.selection.setRng(r.toRange())},N7=(e,n)=>{const o=tt(n,DB(e));o.length>0&&M7(e,o)},B7=e=>mt(e.startContainer),GW=e=>e.startOffset===0&&B7(e),$7=(e,n)=>{const o=n.startContainer.parentElement;return!q(o)&&cd(e,re.fromDom(o))},P7=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!q(n)&&!q(o)&&n.isEqualNode(o)},qW=e=>{const n=e.endContainer;return e.endOffset===(mt(n)?n.length:n.childNodes.length)},I7=e=>P7(e)&&qW(e),nu=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),NB=e=>I7(e)||nu(e),xC=e=>{const n=e.selection.getRng();return GW(n)&&$7(e,n)&&NB(n)},F7=e=>{if(xC(e)){const n=DB(e);return H.some(()=>{Vw(e),N7(e,n)})}else return H.none()},VT=(e,n)=>e.selection.isCollapsed()?MB(e,n):F7(e),BB=e=>Zx(e,n=>Nl(n.dom),fl),r4=e=>BB(re.fromDom(e.selection.getStart())),L7=e=>{const n=e.selection.getRng();return n.collapsed&&(B7(n)||e.dom.isEmpty(n.startContainer))&&!r4(e)},TC=e=>(L7(e)&&M7(e,[]),!0),zT=(e,n,o)=>Pe(o)?H.some(()=>{e._selectionOverrides.hideFakeCaret(),z1(e,n,re.fromDom(o))}):H.none(),H7=(e,n)=>{const o=n?zn:Fw,r=n?Wa.Forwards:Wa.Backwards,c=Gy(r,e.getBody(),e.selection.getRng());return o(c)?zT(e,n,c.getNode(!n)):H.from(Dr(n,c)).filter(u=>o(u)&&wv(c,u)).bind(u=>zT(e,n,u.getNode(!n)))},V7=(e,n)=>{const o=e.selection.getNode();return _l(o)?zT(e,n,o):H.none()},kC=(e,n)=>e.selection.isCollapsed()?H7(e,n):V7(e,n),z7=e=>E(e,n=>Wi(n.dom)||oo(n.dom)).exists(n=>Wi(n.dom)),$B=e=>pc(e??"").getOr(0),PB=(e,n)=>{const o=e||vm(n)?"margin":"padding",r=Ci(n,"direction")==="rtl"?"-right":"-left";return o+r},U7=(e,n,o,r,c,u)=>{const f=PB(o,re.fromDom(u)),b=$B(e.getStyle(u,f));if(n==="outdent"){const w=Math.max(0,b-r);e.setStyle(u,f,w?w+c:"")}else{const w=b+r+c;e.setStyle(u,f,w)}},a4=(e,n)=>Jo(n,o=>{const r=PB(tS(e),o),c=$c(o,r).map($B).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),c4=e=>{const n=IB(e);return!e.mode.isReadOnly()&&(n.length>1||a4(e,n))},W7=e=>xe(e)||Ic(e),Z7=e=>Tl(e).exists(W7),IB=e=>rn(Nd(e.selection.getSelectedBlocks()),n=>!W7(n)&&!Z7(n)&&z7(n)),FB=(e,n)=>{var o,r;const{dom:c}=e,u=Oh(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=$B(u),w=tS(e);De(IB(e),k=>{U7(c,n,w,b,f,k.dom)})},l4=e=>FB(e,"indent"),EC=e=>FB(e,"outdent"),i4=e=>{if(e.selection.isCollapsed()&&c4(e)){const n=e.dom,o=e.selection.getRng(),r=He.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&U_(re.fromDom(c),r))return H.some(()=>EC(e))}return H.none()},u4=(e,n,o)=>ga([i4,MT,VA,(r,c)=>HT(r,n,c),IA,Nx,yC,kC,LA,VT],r=>r(e,o)).filter(r=>e.selection.isEditable()),j7=(e,n)=>{u4(e,n,!1).fold(()=>{Vw(e),Q_(e)},Ps)},G7=(e,n)=>{u4(e,n,!0).fold(()=>J_(e),Ps)},d4=(e,n)=>{e.addCommand("delete",()=>{j7(e,n)}),e.addCommand("forwardDelete",()=>{G7(e,n)})},LB=5,q7=400,HB=e=>e.touches===void 0||e.touches.length!==1?H.none():H.some(e.touches[0]),K7=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>LB||r>LB},om=e=>{const n=Qs(),o=xc(!1),r=hu(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},q7);e.on("touchstart",c=>{HB(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),HB(c).each(u=>{n.on(f=>{K7(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},UT=(e,n)=>_n(e,n.nodeName),VB=(e,n)=>mt(n)?!0:ze(n)?!UT(e.getBlockElements(),n)&&!lc(n)&&!ff(e,n):!1,KW=(e,n,o)=>$t(uF(re.fromDom(o),re.fromDom(n)),r=>UT(e,r.dom)),YW=(e,n)=>{if(mt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||UT(e,n.nextSibling)))return!0}return!1},Y7=e=>e.dom.create(ua(e),av(e)),XW=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,w,k=!1;const N=ua(e);if(!u||!ze(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,N.toLowerCase())||KW(c,f,u))return;const L=o.getRng(),{startContainer:Q,startOffset:te,endContainer:j,endOffset:ee}=L,ve=Jh(e);let ge=f.firstChild;for(;ge;)if(ze(ge)&&rg(r,ge),VB(r,ge)){if(YW(c,ge)){w=ge,ge=ge.nextSibling,n.remove(w);continue}b||(b=Y7(e),f.insertBefore(b,ge),k=!0),w=ge,ge=ge.nextSibling,b.appendChild(w)}else b=null,ge=ge.nextSibling;k&&ve&&(L.setStart(Q,te),L.setEnd(j,ee),o.setRng(L),e.nodeChanged())},zB=(e,n,o)=>{const r=re.fromDom(Y7(e)),c=C();Pr(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},WT=e=>{e.on("NodeChange",je(XW,e))},UB=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,m4=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},WB=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],m4(e,c,wS(e)));o.content=c}},ZB=e=>{const n="contenteditable",o=" "+Qe.trim(CS(e))+" ",r=" "+Qe.trim(wS(e))+" ",c=UB(o),u=UB(r),f=BE(e);f.length>0&&e.on("BeforeSetContent",b=>{WB(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let w=b.length;for(;w--;){const k=b[w];c(k)?k.attr(n,"true"):u(k)&&k.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let w=b.length;for(;w--;){const k=b[w];!c(k)&&!u(k)||(f.length>0&&k.attr("data-mce-content")?(k.name="#text",k.type=3,k.raw=!0,k.value=k.attr("data-mce-content")):k.attr(n,null))}})},jB=e=>xt(re.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),GB=(e,n)=>{n.hasAttribute("data-mce-caret")&&(si(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},X7=(e,n)=>{const o=jB(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),GB(e,o);return}ks(o)&&(GB(e,o),e.undoManager.add())}},J7=e=>{e.on("keyup compositionstart",je(X7,e))},qB=oo,ZT=(e,n,o)=>xB(n,e,o,L1,H1,qB),Q7=(e,n,o)=>TB(n,e,o,u=>L1(u)||ro(u),u=>H1(u)||V_(u),qB),eH=e=>{const n=e.dom.create(ua(e));return n.innerHTML='<br data-mce-bogus="1">',n},KB=(e,n,o)=>{const r=td(e.getBody()),c=je(Mm,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(He.fromRangeStart(o))){const b=re.fromDom(eH(e));n===1?Lu(re.fromDom(u),b):is(re.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},f4=(e,n)=>{const o=n?Wa.Forwards:Wa.Backwards,r=e.selection.getRng();return ZT(o,e,r).orThunk(()=>(KB(e,o,r),H.none()))},tH=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Q7(o,e,r).orThunk(()=>(KB(e,o,r),H.none()))},YB=(e,n)=>f4(e,n).exists(o=>(jg(e,o),!0)),g4=(e,n)=>tH(e,n).exists(o=>(jg(e,o),!0)),XB=(e,n)=>kB(e,n,n?H1:L1),jT=(e,n)=>zA(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(jg(e,o),!0)),nH=e=>Tt(["figcaption"],hs(e)),oH=(e,n)=>{const o=je(ss,n);return E(re.fromDom(e.container()),fl,o).filter(nH)},sH=(e,n,o)=>n?lb(e.dom,o):md(e.dom,o),rH=(e,n)=>{const o=re.fromDom(e.getBody()),r=He.fromRangeStart(e.selection.getRng());return oH(r,o).exists(()=>{if(sH(o,n,r)){const u=zB(e,o,n?Pr:Rd);return e.selection.setRng(u),!0}else return!1})},GT=(e,n)=>e.selection.isCollapsed()?rH(e,n):!1,JB={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},QB=e=>Vt(e,n=>({...JB,...n})),aH=e=>Vt(e,n=>({...JB,...n})),e$=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,cH=(e,n)=>ur(QB(e),o=>e$(o,n)?[o]:[]),lH=(e,n)=>ur(aH(e),o=>e$(o,n)?[o]:[]),lo=(e,...n)=>()=>e.apply(null,n),_C=(e,n)=>ls(cH(e,n),o=>o.action()),ja=(e,n)=>ga(lH(e,n),o=>o.action()),t$=(e,n)=>{const o=n?Wa.Forwards:Wa.Backwards,r=e.selection.getRng();return xB(e,o,r,zn,Fw,_l).exists(c=>(jg(e,c),!0))},n$=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return TB(e,o,r,zn,Fw,_l).exists(c=>(jg(e,c),!0))},o$=(e,n)=>kB(e,n,n?Fw:zn),h4=Ar.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),S0={...h4,none:e=>h4.none(e)},pp=(e,n)=>qT(e,n,gt),qT=(e,n,o)=>ur(Da(e),r=>Nc(r,n)?o(r)?[r]:[]:qT(r,n,o)),r$=(e,n,o=_e)=>{if(o(n))return H.none();if(Tt(e,hs(n)))return H.some(n);const r=c=>Nc(c,"table")||o(c);return de(n,e.join(","),r)},p4=(e,n)=>r$(["td","th"],e,n),b4=e=>pp(e,"th,td"),KT=(e,n)=>On(e,"table",n),YT=(e,n,o,r,c=gt)=>{const u=r===1;if(!u&&o<=0)return S0.first(e[0]);if(u&&o>=e.length-1)return S0.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?S0.middle(n,b):YT(e,n,f,r,c)}},OC=(e,n)=>KT(e,n).bind(o=>{const r=b4(o);return Ms(r,u=>ss(e,u)).map(u=>({index:u,all:r}))}),XT=(e,n,o)=>OC(e,o).fold(()=>S0.none(e),c=>YT(c.all,e,c.index,1,n)),AC=(e,n,o)=>OC(e,o).fold(()=>S0.none(),c=>YT(c.all,e,c.index,-1,n)),DC=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Hf=(e,n)=>ur(n,o=>{const r=DC(Am(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),RC=(e,n,o)=>zo(e,(r,c)=>r.fold(()=>H.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return H.some(b<f?c:u)}),H.none()),v4=(e,n,o,r,c)=>{const u=nc(re.fromDom(o),"td,th,caption").map(b=>b.dom),f=rn(Hf(e,u),b=>n(b,c));return RC(f,r,c).map(b=>b.cell)},a$=e=>e.bottom,iH=e=>e.top,c$=(e,n)=>e.y<n,uH=(e,n)=>e.y>n,dH=je(v4,a$,c$),l$=je(v4,iH,uH),mH=(e,n)=>Bn(n.getClientRects()).bind(o=>dH(e,o.left,o.top)).bind(o=>y0(g7(o),n)),fH=(e,n)=>Yt(n.getClientRects()).bind(o=>l$(e,o.left,o.top)).bind(o=>y0(KA(o),n)),gH=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),hH=e=>e.breakType===If.Wrap&&e.positions.length===0,pH=e=>e.breakType===If.Br&&e.positions.length===1,i$=(e,n,o)=>{const r=e(n,o);return hH(r)||!gr(o.getNode())&&pH(r)?!gH(e,n,r):r.breakAt.isNone()},bH=je(i$,w0),vH=je(i$,cb),yH=(e,n,o)=>{const r=He.fromRangeStart(n);return Fh(!e,o).exists(c=>c.isEqual(r))},wH=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return RS()&&yH(n,c,o)?(Wg(u,e,o,!n,!1).each(f=>{jg(e,f)}),!0):!1},CH=(e,n,o)=>mH(n,o).orThunk(()=>Bn(o.getClientRects()).bind(r=>$T(Zg(e,He.before(n)),r.left))).getOr(He.before(n)),SH=(e,n,o)=>fH(n,o).orThunk(()=>Bn(o.getClientRects()).bind(r=>$T(qA(e,He.after(n)),r.left))).getOr(He.after(n)),u$=(e,n)=>{const o=n.getNode(e);return xi(o)?H.some(o):H.none()},d$=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Lu:is,c=zB(n,re.fromDom(o),r);jg(n,c)})},y4=(e,n,o)=>{const r=u$(!!n,o),c=n===!1;r.fold(()=>jg(e,o.toRange()),u=>Fh(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>jg(e,o.toRange()),f=>d$(n,e,u)))},m$=(e,n,o,r)=>{const c=e.selection.getRng(),u=He.fromRangeStart(c),f=e.getBody();if(!n&&bH(r,u)){const b=CH(f,o,u);return y4(e,n,b),!0}else if(n&&vH(r,u)){const b=SH(f,o,u);return y4(e,n,b),!0}else return!1},f$=(e,n,o)=>H.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>H.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),g$=(e,n)=>f$(e,n,wH),h$=(e,n)=>f$(e,n,m$),xH=e=>{const n=Df.exact(e,0,e,0);return x_(n)},w4=(e,n,o)=>o.fold(H.none,H.none,(r,c)=>x3(c).map(u=>xH(u)),r=>(e.execCommand("mceTableInsertRowAfter"),p$(e,n,r))),p$=(e,n,o)=>w4(e,n,XT(o,fo)),b$=(e,n,o)=>w4(e,n,AC(o,fo)),v$=(e,n)=>{const o=["table","li","dl"],r=re.fromDom(e.getBody()),c=b=>{const w=hs(b);return ss(b,r)||Tt(o,w)},u=e.selection.getRng(),f=re.fromDom(n?u.endContainer:u.startContainer);return p4(f,c).map(b=>(KT(b,c).each(N=>{e.model.table.clearSelectedCells(N.dom)}),e.selection.collapse(!n),(n?p$:b$)(e,c,b).each(N=>{e.selection.setRng(N)}),!0)).getOr(!1)},y$=(e,n,o)=>{const r=Io.os.isMacOS()||Io.os.isiOS();_C([{keyCode:on.RIGHT,action:lo(YB,e,!0)},{keyCode:on.LEFT,action:lo(YB,e,!1)},{keyCode:on.UP,action:lo(g4,e,!1)},{keyCode:on.DOWN,action:lo(g4,e,!0)},...r?[{keyCode:on.UP,action:lo(jT,e,!1),metaKey:!0,shiftKey:!0},{keyCode:on.DOWN,action:lo(jT,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:on.RIGHT,action:lo(g$,e,!0)},{keyCode:on.LEFT,action:lo(g$,e,!1)},{keyCode:on.UP,action:lo(h$,e,!1)},{keyCode:on.DOWN,action:lo(h$,e,!0)},{keyCode:on.RIGHT,action:lo(t$,e,!0)},{keyCode:on.LEFT,action:lo(t$,e,!1)},{keyCode:on.UP,action:lo(n$,e,!1)},{keyCode:on.DOWN,action:lo(n$,e,!0)},{keyCode:on.RIGHT,action:lo(n4,e,n,!0)},{keyCode:on.LEFT,action:lo(n4,e,n,!1)},{keyCode:on.RIGHT,ctrlKey:!r,altKey:r,action:lo(SC,e,n)},{keyCode:on.LEFT,ctrlKey:!r,altKey:r,action:lo(Gg,e,n)},{keyCode:on.UP,action:lo(GT,e,!1)},{keyCode:on.DOWN,action:lo(GT,e,!0)}],o).each(c=>{o.preventDefault()})},w$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||y$(e,n,o)})},Zm=(e,n)=>({container:e,offset:n}),JT=Vs.DOM,QT=e=>n=>e===n?-1:0,C$=e=>n=>e.isBlock(n)||Tt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",C4=(e,n,o)=>{if(mt(e)&&n>=0)return H.some(Zm(e,n));{const r=dg(JT);return H.from(r.backwards(e,n,QT(e),o)).map(c=>Zm(c.container,c.container.data.length))}},TH=(e,n,o)=>{if(mt(e)&&n>=e.length)return H.some(Zm(e,n));{const r=dg(JT);return H.from(r.forwards(e,n,QT(e),o)).map(c=>Zm(c.container,0))}},ek=(e,n,o)=>{if(!mt(e))return H.none();const r=e.data;if(n>=0&&n<=r.length)return H.some(Zm(e,n));{const c=dg(JT);return H.from(c.backwards(e,n,QT(e),o)).bind(u=>{const f=u.container.data;return ek(u.container,n+f.length,o)})}},S$=(e,n,o)=>{if(!mt(e))return H.none();const r=e.data;if(n<=r.length)return H.some(Zm(e,n));{const c=dg(JT);return H.from(c.forwards(e,n,QT(e),o)).bind(u=>S$(u.container,n-r.length,o))}},S4=(e,n,o,r,c)=>{const u=dg(e,C$(e));return H.from(u.backwards(n,o,r,c))},x$=e=>e.collapsed&&mt(e.startContainer),T$=e=>Ie(e.toString().replace(/\u00A0/g," ")),k$=e=>e!==""&&` Â \f
\r	\v`.indexOf(e)!==-1,x4=(e,n)=>e.substring(n.length),E$=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(k$(u))return H.none();if(c===u&&Ts(e,o,r,n))break}return H.some(r)},_$=(e,n,o,r=0)=>{if(!x$(n))return H.none();const c={text:"",offset:0},u=(b,w,k)=>(c.text=k+c.text,c.offset+=w,E$(c.text,c.offset,o).getOr(w)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return S4(e,n.startContainer,n.startOffset,u,f).bind(b=>{const w=n.cloneRange();if(w.setStart(b.container,b.offset),w.setEnd(n.endContainer,n.endOffset),w.collapsed)return H.none();const k=T$(w);return k.lastIndexOf(o)!==0||x4(k,o).length<r?H.none():H.some({text:x4(k,o),range:w,trigger:o})})},O$=(e,n,o,r=0)=>Y5(re.fromDom(n.startContainer)).fold(()=>_$(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=T$(u);return H.some({range:u,text:x4(f,o),trigger:o})}),kH=e=>e.nodeType===Gc,EH=e=>e.nodeType===yc,A$=e=>{if(kH(e))return Zm(e,e.data.length);{const n=e.childNodes;return n.length>0?A$(n[n.length-1]):Zm(e,n.length)}},D$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?D$(o[n],0):o.length>0&&EH(e)&&o.length===n?A$(o[o.length-1]):Zm(e,n)},_H=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return S4(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!k$(u)}).isSome()},OH=e=>n=>{const o=D$(n.startContainer,n.startOffset);return!_H(e,o)},AH=(e,n,o)=>ga(o.triggers,r=>O$(e,n,r)),JW=(e,n)=>{const o=n(),r=e.selection.getRng();return AH(e.dom,r,o).bind(c=>R$(e,n,c))},R$=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",w=rn(u.lookupByTrigger(o.trigger),N=>o.text.length>=N.minChars&&N.matches.getOrThunk(()=>OH(e.dom))(o.range,b,o.text));if(w.length===0)return H.none();const k=Promise.all(Vt(w,N=>N.fetch(o.text,N.maxResults,r).then(L=>({matchText:o.text,items:L,columns:N.columns,onAction:N.onAction,highlightOn:N.highlightOn}))));return H.some({lookupData:k,context:o})};var Ru;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Ru||(Ru={}));const tk=(e,n,o)=>e.stype===Ru.Error?n(e.serror):o(e.svalue),M$=e=>{const n=[],o=[];return De(e,r=>{tk(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},DH=(e,n)=>e.stype===Ru.Error?{stype:Ru.Error,serror:n(e.serror)}:e,N$=(e,n)=>e.stype===Ru.Value?{stype:Ru.Value,svalue:n(e.svalue)}:e,B$=(e,n)=>e.stype===Ru.Value?n(e.svalue):e,RH=(e,n)=>e.stype===Ru.Error?n(e.serror):e,$$=e=>({stype:Ru.Value,svalue:e}),P$=e=>({stype:Ru.Error,serror:e}),Hc={fromResult:e=>e.fold(P$,$$),toResult:e=>tk(e,Or.error,Or.value),svalue:$$,partition:M$,serror:P$,bind:B$,bindError:RH,map:N$,mapError:DH,fold:tk},T4=e=>Xe(e)&&xs(e).length>100?" removed due to size":JSON.stringify(e,null,2),NH=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:nt("... (only showing first ten failures)")}]):e;return Vt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},nk=(e,n)=>Hc.serror([{path:e,getErrorInfo:n}]),I$=(e,n,o)=>nk(e,()=>'Could not find valid *required* value for "'+n+'" in '+T4(o)),BH=(e,n)=>nk(e,()=>'Choice schema did not contain choice key: "'+n+'"'),$H=(e,n,o)=>nk(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+T4(n)),PH=(e,n)=>nk(e,nt(n)),IH=(e,n,o,r)=>Wo(o,r).fold(()=>$H(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),FH=(e,n)=>({extract:(c,u)=>Wo(u,e).fold(()=>BH(c,e),b=>IH(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+xs(n)}),Oc=(e,n)=>n,Vf=(e,n)=>Nt(e)&&Nt(n)?k4(e,n):n,F$=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)_n(c,u)&&(o[u]=e(o[u],c[u]))}return o},k4=F$(Vf),LH=F$(Oc),L$=()=>({tag:"required",process:{}}),HH=e=>({tag:"defaultedThunk",process:e}),H$=e=>HH(nt(e)),V$=()=>({tag:"option",process:{}}),x0=(e,n)=>e.length>0?Hc.svalue(k4(n,LH.apply(void 0,e))):Hc.svalue(n),VH=e=>O(Hc.serror,Wr)(e),jm={consolidateObj:(e,n)=>{const o=Hc.partition(e);return o.errors.length>0?VH(o.errors):x0(o.values,n)},consolidateArr:e=>{const n=Hc.partition(e);return n.errors.length>0?VH(n.errors):Hc.svalue(n.values)}},zH=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),UH=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),E4=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},_4=e=>{const n=(r,c)=>Hc.bindError(e(c),u=>PH(r,u)),o=nt("val");return{extract:n,toString:o}},O4=_4(Hc.svalue),z$=(e,n,o,r)=>Wo(n,o).fold(()=>I$(e,o,n),r),U$=(e,n,o,r)=>{const c=Wo(e,n).getOrThunk(()=>o(e));return r(c)},WH=(e,n,o)=>o(Wo(e,n)),ZH=(e,n,o,r)=>{const c=Wo(e,n).map(u=>u===!0?o(e):u);return r(c)},W$=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>Hc.svalue(H.none()),w=>{const k=c.extract(n.concat([r]),w);return Hc.map(k,H.some)});switch(e.tag){case"required":return z$(n,o,r,u);case"defaultedThunk":return U$(o,r,e.process,u);case"option":return WH(o,r,f);case"defaultedOptionThunk":return ZH(o,r,e.process,f);case"mergeWithThunk":return U$(o,r,nt({}),b=>{const w=k4(e.process(o),b);return u(w)})}},Z$=(e,n,o)=>{const r={},c=[];for(const u of o)E4(u,(f,b,w,k)=>{const N=W$(w,e,n,f,k);Hc.fold(N,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(n)});return c.length>0?Hc.serror(c):Hc.svalue(r)},MC=e=>({extract:(r,c)=>Z$(r,c,e),toString:()=>`obj{
`+Vt(e,c=>E4(c,(u,f,b,w)=>u+" -> "+w.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),ok=e=>({extract:(r,c)=>{const u=Vt(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return jm.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),A4=e=>_4(n=>e(n).fold(Hc.serror,Hc.svalue)),jH=(e,n,o)=>{const r=n.extract([e],o);return Hc.mapError(r,c=>({input:o,errors:c}))},GH=(e,n,o)=>Hc.toResult(jH(e,n,o)),qH=e=>`Errors: 
`+NH(e.errors).join(`
`)+`

Input object: `+T4(e.input),j$=(e,n)=>FH(e,so(n,MC)),D4=nt(O4),NC=(e,n)=>_4(o=>{const r=typeof o;return e(o)?Hc.svalue(o):Hc.serror(`Expected type: ${n} but got: ${r}`)}),KH=NC(Vo,"number"),BC=NC(G,"string"),YH=NC(ft,"boolean"),$C=NC(fe,"function"),PC=zH,G$=UH,XH=e=>A4(n=>Tt(e,n)?Or.value(n):Or.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),q$=(e,n)=>PC(e,e,L$(),n),K$=e=>q$(e,BC),R4=e=>q$(e,$C),M4=(e,n)=>PC(e,e,L$(),ok(n)),sk=(e,n)=>PC(e,e,V$(),n),IC=e=>sk(e,BC),JH=e=>sk(e,$C),QH=(e,n)=>PC(e,e,H$(n),D4()),T0=(e,n,o)=>PC(e,e,H$(n),o),FC=(e,n)=>T0(e,n,KH),Y$=(e,n)=>T0(e,n,BC),N4=(e,n,o)=>T0(e,n,XH(o)),B4=(e,n)=>T0(e,n,YH),$4=(e,n)=>T0(e,n,$C),nZ=(e,n,o)=>T0(e,n,ok(o)),oZ=K$("type"),sZ=R4("fetch"),P4=R4("onAction"),rZ=$4("onSetup",()=>jt),eV=IC("text"),tV=IC("icon"),aZ=IC("tooltip"),nV=IC("label"),Ga=B4("active",!1),I4=B4("enabled",!0),Gm=B4("primary",!1),X$=e=>QH("columns",e),k0=e=>Y$("type",e),oV=MC([oZ,K$("trigger"),FC("minChars",1),X$(1),FC("maxResults",10),JH("matches"),sZ,P4,nZ("highlightOn",[],BC)]),F4=e=>GH("Autocompleter",oV,{trigger:e.ch,...e}),LC=[I4,aZ,tV,eV,rZ],L4=[Ga].concat(LC),J$=[$4("predicate",_e),N4("scope","node",["node","editor"]),N4("position","selection",["node","selection","line"])],sV=LC.concat([k0("contextformbutton"),Gm,P4,G$("original",No)]),rV=L4.concat([k0("contextformbutton"),Gm,P4,G$("original",No)]),aV=LC.concat([k0("contextformbutton")]),cV=L4.concat([k0("contextformtogglebutton")]),lV=j$("type",{contextformbutton:sV,contextformtogglebutton:rV});MC([k0("contextform"),$4("initValue",nt("")),nV,M4("commands",lV),sk("launch",j$("type",{contextformbutton:aV,contextformtogglebutton:cV}))].concat(J$));const Q$=e=>{const n=e.ui.registry.getAll().popups,o=so(n,f=>F4(f).fold(b=>{throw new Error(qH(b))},No)),r=Xa(Ya(o,f=>f.trigger)),c=pa(o);return{dataset:o,triggers:r,lookupByTrigger:f=>rn(c,b=>b.trigger===f)}},iV=(e,n)=>{const o=hu(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},uV=e=>{const n=Qs(),o=xc(!1),r=n.isSet,c=()=>{r()&&(hA(e),rx(e),o.set(!1),n.clear())},u=k=>{r()||(zm(e,k.range),n.set({trigger:k.trigger,matchLength:k.text.length}))},f=yn(()=>Q$(e)),b=k=>n.get().map(N=>O$(e.dom,e.selection.getRng(),N.trigger).bind(R=>R$(e,f,R,k))).getOrThunk(()=>JW(e,f)),w=k=>{b(k).fold(c,N=>{u(N.context),N.lookupData.then(R=>{n.get().map(L=>{const Q=N.context;L.trigger===Q.trigger&&(Q.text.length-L.matchLength>=10?c():(n.set({...L,matchLength:Q.text.length}),o.get()?d_(e,{lookupData:R}):(o.set(!0),sx(e,{lookupData:R}))))})})})};e.addCommand("mceAutocompleterReload",(k,N)=>{const R=Xe(N)?N.fetchOptions:{};w(R)}),e.addCommand("mceAutocompleterClose",c),iV(e,{cancelIfNecessary:c,load:w})},eP=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:jt,inputType:o},f=Sh(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},H4=eP("input"),V4=eP("beforeinput"),tP=(e,n,o)=>{const r=o.keyCode===on.BACKSPACE?"deleteContentBackward":"deleteContentForward";ja([{keyCode:on.BACKSPACE,action:lo(i4,e)},{keyCode:on.BACKSPACE,action:lo(MT,e,!1)},{keyCode:on.DELETE,action:lo(MT,e,!0)},{keyCode:on.BACKSPACE,action:lo(VA,e,!1)},{keyCode:on.DELETE,action:lo(VA,e,!0)},{keyCode:on.BACKSPACE,action:lo(HT,e,n,!1)},{keyCode:on.DELETE,action:lo(HT,e,n,!0)},{keyCode:on.BACKSPACE,action:lo(Nx,e,!1)},{keyCode:on.DELETE,action:lo(Nx,e,!0)},{keyCode:on.BACKSPACE,action:lo(yC,e,!1)},{keyCode:on.DELETE,action:lo(yC,e,!0)},{keyCode:on.BACKSPACE,action:lo(kC,e,!1)},{keyCode:on.DELETE,action:lo(kC,e,!0)},{keyCode:on.BACKSPACE,action:lo(LA,e,!1)},{keyCode:on.DELETE,action:lo(LA,e,!0)},{keyCode:on.BACKSPACE,action:lo(IA,e,!1)},{keyCode:on.DELETE,action:lo(IA,e,!0)},{keyCode:on.BACKSPACE,action:lo(VT,e,!1)},{keyCode:on.DELETE,action:lo(VT,e,!0)}],o).filter(c=>e.selection.isEditable()).each(c=>{o.preventDefault(),V4(e,r).isDefaultPrevented()||(c(),H4(e,r))})},nP=(e,n,o)=>{const r=wo(),c=r.os,u=r.browser,f=c.isMacOS()?[{keyCode:on.BACKSPACE,altKey:!0,action:lo(TC,e)},{keyCode:on.DELETE,altKey:!0,action:lo(TC,e)}]:[{keyCode:on.BACKSPACE,ctrlKey:!0,action:lo(TC,e)},{keyCode:on.DELETE,ctrlKey:!0,action:lo(TC,e)}];c.isMacOS()&&o&&f.push({keyCode:u.isFirefox()?224:91,action:lo(TC,e)}),_C([{keyCode:on.BACKSPACE,action:lo(ZA,e)},{keyCode:on.DELETE,action:lo(ZA,e)},...f],n)},dV=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===on.BACKSPACE,r.isDefaultPrevented()||tP(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||nP(e,r,o),o=!1})},mV=e=>{for(;e;){if(ze(e)||mt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},rk=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=mV(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(ps),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new ia(n,n);let f=n,b;for(;b=u.current();){if(mt(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else gr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),We(e,c)},E0=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},z4=e=>H.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),fV=e=>z4(e).fold(nt(""),n=>n.nodeName.toUpperCase()),gV=e=>z4(e).filter(n=>Ic(re.fromDom(n))).isSome(),oP=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,hV=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},U4=(e,n)=>{const o=e==null?void 0:e.parentNode;return Pe(o)&&o.nodeName===n},sP=e=>Pe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),pV=e=>Pe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),cZ=e=>sP(e)&&sP(e.parentNode),Vc=e=>{const n=e.parentNode;return pV(n)?n:e},ak=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!ze(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},bV=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;cZ(o)&&(c="LI");let w=n(c);if(ak(o,r,!0)&&ak(o,r,!1))if(U4(o,"LI")){const k=Vc(o);u.insertAfter(w,k),hV(o)?u.remove(k):u.remove(o)}else u.replace(w,o);else if(ak(o,r,!0))U4(o,"LI")?(u.insertAfter(w,Vc(o)),w.appendChild(u.doc.createTextNode(" ")),w.appendChild(o)):b.insertBefore(w,o),u.remove(r);else if(ak(o,r,!1))u.insertAfter(w,Vc(o)),u.remove(r);else{o=Vc(o);const k=f.cloneRange();k.setStartAfter(r),k.setEndAfter(o);const N=k.extractContents();c==="LI"&&oP(N,"LI")?(w=N.firstChild,u.insertAfter(N,o)):(u.insertAfter(N,o),u.insertAfter(w,o)),u.remove(r)}rk(e,w)},vV=e=>{De(Mp(re.fromDom(e),wc),n=>{const o=n.dom;o.nodeValue=Ie(o.data)})},yV=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},wV=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),W4=e=>{e.innerHTML='<br data-mce-bogus="1">'},Z4=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,_0=(e,n)=>Pe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",CV=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;ze(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||wV(e,u))&&e.remove(u)},j4=(e,n,o)=>mt(n)?e?o===1&&n.data.charAt(o-1)===W?0:o:o===n.data.length-1&&n.data.charAt(o)===W?n.data.length:o:o,G4=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,j4(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,j4(!1,e.endContainer,e.endOffset)),n},q4=e=>{let n=e;do mt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},SV=(e,n,o)=>{const r=e.dom;H.from(o.style).map(r.parseStyle).each(w=>{const N={...Hl(re.fromDom(n)),...w};r.setStyles(n,N)});const c=H.from(o.class).map(w=>w.split(/\s+/)),u=H.from(n.className).map(w=>rn(w.split(/\s+/),k=>k!==""));qr(c,u,(w,k)=>{const N=rn(k,L=>!Tt(w,L)),R=[...w,...N];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],b=Qo(o,(w,k)=>!Tt(f,k));r.setAttribs(n,b)},ck=(e,n)=>{if(ua(e).toLowerCase()===n.tagName.toLowerCase()){const r=av(e);SV(e,n,r)}},lZ=(e,n,o,r,c)=>{var u,f;const b=e.dom,w=(u=E0(b,r))!==null&&u!==void 0?u:b.getRoot();let k=b.getParent(r,b.isBlock);if(!k||!_0(b,k)){if(k=k||w,!k.hasChildNodes()){const Q=b.create(n);return ck(e,Q),k.appendChild(Q),o.setStart(Q,0),o.setEnd(Q,0),Q}let N=r;for(;N&&N.parentNode!==k;)N=N.parentNode;let R;for(;N&&!b.isBlock(N);)R=N,N=N.previousSibling;const L=(f=R==null?void 0:R.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&L&&e.schema.isValidChild(L,n.toLowerCase())){const Q=R.parentNode,te=b.create(n);for(ck(e,te),Q.insertBefore(te,R),N=R;N&&!b.isBlock(N);){const j=N.nextSibling;te.appendChild(N),N=j}o.setStart(r,c),o.setEnd(r,c)}}return r},xV=(e,n)=>{n.normalize();const o=n.lastChild;(!o||ze(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},TV=(e,n)=>{const o=Gd(e);return Bt(n)?!1:G(o)?Tt(Qe.explode(o),n.nodeName.toLowerCase()):o},zf={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,w=e.schema,k=w.getNonEmptyElements(),N=e.selection.getRng(),R=ua(e),L=Ot=>{let yt=o;const Me=w.getTextInlineElements();let Ne;Ot||c==="TABLE"||c==="HR"?Ne=b.create(Ot||R):Ne=ge.cloneNode(!1);let Ut=Ne;if(r1(e)===!1)b.setAttrib(Ne,"style",null),b.setAttrib(Ne,"class",null);else do if(Me[yt.nodeName]){if(Nl(yt)||lc(yt))continue;const bn=yt.cloneNode(!1);b.setAttrib(bn,"id",""),Ne.hasChildNodes()?(bn.appendChild(Ne.firstChild),Ne.appendChild(bn)):(Ut=bn,Ne.appendChild(bn))}while((yt=yt.parentNode)&&yt!==ve);return ck(e,Ne),W4(Ut),Ne},Q=Ot=>{const yt=j4(Ot,o,r);if(mt(o)&&(Ot?yt>0:yt<o.data.length))return!1;if(o.parentNode===ge&&f&&!Ot||Ot&&ze(o)&&o===ge.firstChild)return!0;if(Z4(o,"TABLE")||Z4(o,"HR"))return f&&!Ot||!f&&Ot;const Me=new ia(o,ge);mt(o)&&(Ot&&yt===0?Me.prev():!Ot&&yt===o.data.length&&Me.next());let Ne;for(;Ne=Me.current();){if(ze(Ne)){if(!Ne.getAttribute("data-mce-bogus")){const Ut=Ne.nodeName.toLowerCase();if(k[Ut]&&Ut!=="br")return!1}}else if(mt(Ne)&&!mf(Ne.data))return!1;Ot?Me.prev():Me.next()}return!0},te=()=>{let Ot;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&we!=="HGROUP"?Ot=L(R):Ot=L(),TV(e,u)&&_0(b,u)&&b.isEmpty(ge)?Ot=b.split(u,ge):b.insertAfter(Ot,ge),rk(e,Ot),Ot};Rg(b,N).each(Ot=>{N.setStart(Ot.startContainer,Ot.startOffset),N.setEnd(Ot.endContainer,Ot.endOffset)}),o=N.startContainer,r=N.startOffset;const j=!!(n&&n.shiftKey),ee=!!(n&&n.ctrlKey);ze(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&mt(o)?r=o.data.length:r=0);const ve=E0(b,o);if(!ve||yV(e,o))return;j||(o=lZ(e,R,N,o,r));let ge=b.getParent(o,b.isBlock)||b.getRoot();u=Pe(ge==null?void 0:ge.parentNode)?b.getParent(ge.parentNode,b.isBlock):null,c=ge?ge.nodeName.toUpperCase():"";const we=u?u.nodeName.toUpperCase():"";if(we==="LI"&&!ee){const Ot=u;ge=Ot,u=Ot.parentNode,c=we}if(/^(LI|DT|DD)$/.test(c)&&ze(u)&&b.isEmpty(ge)){bV(e,L,u,ge,R);return}if(ge===e.getBody()||!_0(b,ge))return;const ke=ge.parentNode;let Ke;if(qn(ge))Ke=si(ge),b.isEmpty(ge)&&W4(ge),ck(e,Ke),rk(e,Ke);else if(Q(!1))Ke=te();else if(Q(!0)&&ke)Ke=ke.insertBefore(L(),ge),rk(e,Z4(ge,"HR")?Ke:ge);else{const Ot=G4(N).cloneRange();Ot.setEndAfter(ge);const yt=Ot.extractContents();vV(yt),q4(yt),Ke=yt.firstChild,b.insertAfter(yt,ge),CV(b,k,Ke),xV(b,ge),b.isEmpty(ge)&&W4(ge),Ke.normalize(),b.isEmpty(Ke)?(b.remove(Ke),te()):(ck(e,Ke),rk(e,Ke))}b.setAttrib(Ke,"id",""),e.dispatch("NewBlock",{newBlock:Ke})},fakeEventName:"insertParagraph"},kV=(e,n,o)=>{const r=new ia(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||mt(c)&&c.length>0)return!0;return!1},rP=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),We(e,r)},bp=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Rg(r,c).each(Q=>{c.setStart(Q.startContainer,Q.startOffset),c.setEnd(Q.endContainer,Q.endOffset)});let b=c.startOffset,w=c.startContainer;if(ze(w)&&w.hasChildNodes()){const Q=b>w.childNodes.length-1;w=w.childNodes[Math.min(b,w.childNodes.length-1)]||w,Q&&mt(w)?b=w.data.length:b=0}let k=r.getParent(w,r.isBlock);const N=k&&k.parentNode?r.getParent(k.parentNode,r.isBlock):null,R=N?N.nodeName.toUpperCase():"",L=!!(n&&n.ctrlKey);R==="LI"&&!L&&(k=N),mt(w)&&b>=w.data.length&&(kV(e.schema,w,k||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),e1(r,c,u),rP(e,u,f),e.undoManager.add()},EV=(e,n)=>{const o=re.fromTag("br");is(re.fromDom(n),o),e.undoManager.add()},aP=(e,n)=>{OV(e.getBody(),n)||Lu(re.fromDom(n),re.fromTag("br"));const o=re.fromTag("br");Lu(re.fromDom(n),o),rP(e,o.dom,!1),e.undoManager.add()},_V=e=>gr(e.getNode()),OV=(e,n)=>_V(He.after(n))?!0:el(e,He.after(n)).map(o=>gr(o.getNode())).getOr(!1),cP=e=>e&&e.nodeName==="A"&&"href"in e,AV=e=>e.fold(_e,cP,cP,_e),DV=e=>{const n=je(sd,e),o=He.fromRangeStart(e.selection.getRng());return Pf(n,e.getBody(),o).filter(AV)},RV=(e,n)=>{n.fold(jt,je(EV,e),je(aP,e),jt)},K4={insert:(e,n)=>{const o=DV(e);o.isSome()?o.each(je(RV,e)):bp(e,n)},fakeEventName:"insertLineBreak"},HC=(e,n)=>z4(e).filter(o=>n.length>0&&Nc(re.fromDom(o),n)).isSome(),MV=e=>HC(e,pu(e)),NV=e=>HC(e,Ny(e)),fd=Ar.generate([{br:[]},{block:[]},{none:[]}]),BV=(e,n)=>NV(e),iP=e=>(n,o)=>gV(n)===e,Y4=(e,n)=>(o,r)=>fV(o)===e.toUpperCase()===n,$V=e=>{const n=E0(e.dom,e.selection.getStart());return Bt(n)},O0=e=>Y4("pre",e),uP=()=>Y4("summary",!0),lk=e=>(n,o)=>yE(n)===e,PV=(e,n)=>MV(e),A0=(e,n)=>n,IV=e=>{const n=ua(e),o=E0(e.dom,e.selection.getStart());return Pe(o)&&e.schema.isValidChild(o.nodeName,n)},sm=(e,n)=>(o,r)=>zo(e,(u,f)=>u&&f(o,r),!0)?H.some(n):H.none(),ik=(e,n)=>o7([sm([BV],fd.none()),sm([O0(!0),$V],fd.none()),sm([uP()],fd.br()),sm([O0(!0),lk(!1),A0],fd.br()),sm([O0(!0),lk(!1)],fd.block()),sm([O0(!0),lk(!0),A0],fd.block()),sm([O0(!0),lk(!0)],fd.br()),sm([iP(!0),A0],fd.br()),sm([iP(!0)],fd.block()),sm([PV],fd.br()),sm([A0],fd.br()),sm([IV],fd.block())],[e,!!(n&&n.shiftKey)]).getOr(fd.none()),uk=(e,n,o)=>{n.selection.isCollapsed()||mR(n),!(Pe(o)&&V4(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Pe(o)&&H4(n,e.fakeEventName))},dk=(e,n)=>{const o=()=>uk(K4,e,n),r=()=>uk(zf,e,n),c=ik(e,n);switch(wE(e)){case"linebreak":c.fold(o,o,jt);break;case"block":c.fold(r,r,jt);break;case"invert":c.fold(r,o,jt);break;default:c.fold(o,r,jt);break}},X4=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),u6(e.undoManager),e.undoManager.transact(()=>{dk(e,n)}))},dP=e=>{e.on("keydown",n=>{n.keyCode===on.ENTER&&X4(e,n)})},FV=(e,n,o)=>{const r=Io.os.isMacOS()||Io.os.isiOS();_C([{keyCode:on.END,action:lo(XB,e,!0)},{keyCode:on.HOME,action:lo(XB,e,!1)},...r?[]:[{keyCode:on.HOME,action:lo(jT,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:on.END,action:lo(jT,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:on.END,action:lo(o$,e,!0)},{keyCode:on.HOME,action:lo(o$,e,!1)},{keyCode:on.END,action:lo(Lf,e,!0,n)},{keyCode:on.HOME,action:lo(Lf,e,!1,n)}],o).each(c=>{o.preventDefault()})},dZ=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||FV(e,n,o)})},vp=e=>{e.on("input",n=>{n.isComposing||pF(e)})},LV=wo(),HV=(e,n,o)=>{_C([{keyCode:on.PAGE_UP,action:lo(Lf,e,!1,n)},{keyCode:on.PAGE_DOWN,action:lo(Lf,e,!0,n)}],o)},mP=e=>e.stopImmediatePropagation(),VC=e=>e.keyCode===on.PAGE_UP||e.keyCode===on.PAGE_DOWN,J4=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",mP,!0):!o&&e.get()&&n.off("NodeChange",mP),e.set(o)},fP=(e,n)=>{if(LV.os.isMacOS())return;const o=xc(!1);e.on("keydown",r=>{VC(r)&&J4(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||HV(e,n,r),VC(r)&&o.get()&&(J4(o,e,!1),e.nodeChanged())})},gP=(e,n)=>{const o=n.container(),r=n.offset();return mt(o)?(o.insertData(r,e),H.some(He(o,r+e.length))):h1(n).map(c=>{const u=re.fromText(e);return n.isAtEnd()?Lu(c,u):is(c,u),He(u.dom,e.length)})},hP=je(gP,ps),VV=je(gP," "),zV=e=>n=>n.fold(o=>wu(e.dom,He.before(o)),o=>ii(o),o=>Nm(o),o=>el(e.dom,He.after(o))),UV=(e,n)=>o=>J3(e,o)?hP(n):VV(n),pP=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),Q4=e=>{const n=He.fromRangeStart(e.selection.getRng()),o=re.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=je(sd,e),c=He.fromRangeStart(e.selection.getRng());return Pf(r,e.getBody(),c).bind(zV(o)).map(u=>()=>UV(o,n)(u).each(pP(e)))}else return H.none()},WV=(e,n)=>{ja([{keyCode:on.SPACEBAR,action:lo(Q4,e)}],n).each(o=>{n.preventDefault(),V4(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),H4(e,"insertText",{data:" "}))})},eD=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||WV(e,n)})},bP=e=>TS(e)?[{keyCode:on.TAB,action:lo(v$,e,!0)},{keyCode:on.TAB,shiftKey:!0,action:lo(v$,e,!1)}]:[],mk=(e,n)=>{_C([...bP(e)],n).each(o=>{n.preventDefault()})},vP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||mk(e,n)})},yP=e=>{if(e.addShortcut("Meta+P","","mcePrint"),uV(e),Vg(e))return xc(null);{const n=_7(e);return J7(e),w$(e,n),dV(e,n),dP(e),eD(e),vp(e),vP(e),dZ(e,n),fP(e,n),n}};class ZV{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!qv(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&S1(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&S1(n)&&(n.selection.getNode().nodeName==="IMG"?hr.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!_E(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=Uo(r.dom.getParents(n,gt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const wP="x-tinymce/html",ib=nt(wP),fk="<!-- "+wP+" -->",jV=e=>fk+e,GV=e=>e.replace(fk,""),tD=e=>e.indexOf(fk)!==-1,qV=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),KV=(e,n)=>{let o="<"+e;const r=Ya(n,(c,u)=>u+'="'+Dl.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},YV=(e,n,o)=>{const r=e.split(/\n\n/),c=KV(n,o),u="</"+n+">",f=Vt(r,w=>w.split(/\n/).join("<br />")),b=w=>c+w+u;return f.length===1?f[0]:Vt(f,b).join("")},CP="%MCEPASTEBIN%",XV=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},CP);Io.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},SP=(e,n)=>{const o=e.dom;if(nD(e)){let r;const c=n.get();for(;r=nD(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},nD=e=>e.dom.get("mcepastebin"),xP=e=>Pe(e)&&e.id==="mcepastebin",JV=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=rn(e.getBody().childNodes,xP);De(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},TP=e=>e===CP,QV=e=>{const n=xc(null);return{create:()=>XV(e,n),remove:()=>SP(e,n),getEl:()=>nD(e),getHtml:()=>JV(e),getLastRng:n.get}},kP=(e,n)=>(Qe.each(n,o=>{qe(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),ez=e=>{const n=ai(),o=nb({},n);let r="";const c=n.getVoidElements(),u=Qe.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=w=>{const k=w.name,N=w;if(k==="br"){r+=`
`;return}if(k!=="wbr"){if(c[k]&&(r+=" "),u[k]){r+=" ";return}if(w.type===3&&(r+=w.value),!(w.name in n.getVoidElements())){let R=w.firstChild;if(R)do b(R);while(R=R.next)}f[k]&&N.next&&(r+=`
`,k==="p"&&(r+=`
`))}};return e=kP(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},ub=e=>(e=kP(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ps],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),tz=e=>{let n=0;return()=>e+n++},nz=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Qe.hasOwn(o,n)?"image/"+o[n]:"image/"+n},EP=(e,n)=>{const o=nb({sanitize:hv(e)},e.schema);o.addNodeFilter("meta",c=>{Qe.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Qh({validate:!0},e.schema).serialize(r)},_P=(e,n)=>({content:e,cancelled:n}),oz=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=Sw(e,r,o);return _P(c.node.innerHTML,c.isDefaultPrevented())},sz=(e,n,o)=>{const r=m_(e,n,o),c=EP(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?oz(e,c,o):_P(c,r.isDefaultPrevented())},OP=(e,n,o)=>sz(e,n,o),oD=(e,n)=>(e.insertContent(n,{merge:gv(e),paste:!0}),!0),sD=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),mZ=(e,n)=>sD(n)&&$t(Fy(e),o=>Zc(n.toLowerCase(),`.${o.toLowerCase()}`)),gk=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),rz=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),az=(e,n,o)=>!e.selection.isCollapsed()&&sD(n)?rz(e,n,o):!1,cz=(e,n,o)=>mZ(e,n)?gk(e,n,o):!1,lz=(e,n)=>{Qe.each([az,cz,oD],o=>!o(e,n,oD))},iz=(e,n,o)=>{o||!vS(e)?oD(e,n):lz(e,n)},uz=tz("mceclip"),AP=(e,n,o,r)=>{const c=OP(e,n,o);c.cancelled||iz(e,c.content,r)},hk=(e,n,o)=>{const r=o||tD(n);AP(e,GV(n),r,!1)},rD=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=Fp(o,xf(e)),c=YV(r,ua(e),av(e));AP(e,c,!1,!0)},DP=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},yp=(e,n)=>n in e&&e[n].length>0,RP=e=>yp(e,"text/html")||yp(e,"text/plain"),dz=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Pe(o)?e.dom.encode(o[1]):void 0},nr=(e,n,o,r)=>{const c=uz(),u=cv(e)&&Pe(o.name),f=u?dz(e,o.name):c,b=u?o.name:void 0,w=n.create(c,o,r,f,b);return n.add(w),w},mz=(e,n)=>{_u(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,w=b.getByData(u,r),k=w??nr(e,b,f,u);hk(e,`<img src="${k.blobUri()}">`,!1)})},MP=e=>e.type==="paste",fz=e=>Promise.all(Vt(e,n=>xM(n).then(o=>({file:n,uri:o})))),aD=e=>{const n=Fy(e);return o=>fs(o.type,"image/")&&$t(n,r=>nz(r)===o.type)},NP=(e,n)=>{const o=n.items?ur(Ns(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Ns(n.files):[];return rn(o.length>0?o:r,aD(e))},cD=(e,n,o)=>{const r=MP(n)?n.clipboardData:n.dataTransfer;if(yg(e)&&r){const c=NP(e,r);if(c.length>0)return n.preventDefault(),fz(c).then(u=>{o&&e.selection.setRng(o),De(u,f=>{mz(e,f)})}),!0}return!1},gz=e=>{var n,o;return Io.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},BP=e=>on.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,lD=(e,n,o,r)=>{let c=ub(o);const u=yp(n,ib())||tD(o),f=!u&&qV(c),b=sD(c);(TP(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(yp(n,"text/plain")&&f?c=n["text/plain"]:c=ez(c)),!TP(c)&&(r?rD(e,c):hk(e,c,u))},hz=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{BP(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||gz(u))return;const f=o.get()==="text"||r;r=!1;const b=DP(u.clipboardData);!RP(b)&&cD(e,u,c())||(yp(b,"text/html")?(u.preventDefault(),lD(e,b,b["text/html"],f)):yp(b,"text/plain")&&yp(b,"text/uri-list")?(u.preventDefault(),lD(e,b,b["text/plain"],f)):(n.create(),hr.setEditorTimeout(e,()=>{const w=n.getHtml();n.remove(),lD(e,b,w,f)},0)))})},$P=e=>{const n=c=>fs(c,"webkit-fake-url"),o=c=>fs(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!yg(e)&&r(f))for(const b of c){const w=b.attr("src");G(w)&&!b.attr("data-mce-object")&&w!==Io.transparentSrc&&(n(w)||!Iy(e)&&o(w))&&b.remove()}})},pz=(e,n,o)=>{hz(e,n,o),$P(e)},bz=(e,n)=>{n.get()==="text"?(n.set("html"),ax(e,!1)):(n.set("text"),ax(e,!0)),e.focus()},pk=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{bz(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&hk(e,r.html,r.internal),r.text&&rD(e,r.text)})},zC=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(ib(),n),!0}catch{return!1}else return!1},iD=(e,n,o,r)=>{zC(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},Mu=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const w=r.createRng();w.selectNodeContents(f),c.setRng(w),hr.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},PP=e=>({html:jV(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),D0=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),R0=e=>!e.selection.isCollapsed()||D0(e),vz=e=>n=>{!n.isDefaultPrevented()&&R0(e)&&iD(n,PP(e),Mu(e),()=>{if(Io.browser.isChromium()||Io.browser.isFirefox()){const o=e.selection.getRng();hr.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},yz=e=>n=>{!n.isDefaultPrevented()&&R0(e)&&iD(n,PP(e),Mu(e),jt)},M0=e=>{e.on("cut",vz(e)),e.on("copy",yz(e))},IP=(e,n)=>{var o,r;return Mg.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},uD=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},bk=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},FP=e=>$t(e.files,n=>/^image\//.test(n.type)),wz=(e,n,o,r)=>{const c=e.getParent(o,u=>ff(n,u));if(c&&_n(r,"text/html")){const u=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!q(u.querySelector(c.nodeName.toLowerCase()))}else return!1},Cz=(e,n)=>{Mh(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),yg(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&FP(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=IP(e,o);if(Bt(r))return;const c=DP(o.dataTransfer),u=yp(c,ib());if((!RP(c)||uD(c))&&cD(e,o,r))return;const f=c[ib()],b=f||c["text/html"]||c["text/plain"],w=wz(e.dom,e.schema,r.startContainer,c);n.get()&&!w||b&&(o.preventDefault(),hr.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),bk(e,r);const k=ub(b);c["text/html"]?hk(e,k,u):rD(e,k)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{yg(e)&&!n.get()&&(o.preventDefault(),bk(e,IP(e,o))),o.type==="dragend"&&n.set(!1)})},LP=e=>{const n=c=>u=>{c(e,u)},o=mv(e);fe(o)&&e.on("PastePreProcess",n(o));const r=fv(e);fe(r)&&e.on("PastePostProcess",n(r))},HP=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},Sz=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,VP=e=>Qe.trim(e).replace(Sz,nw).toLowerCase(),xz=(e,n,o)=>{const r=bS(e);if(o||r==="all"||!qd(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,w,k,N)=>{const R=u.parseStyle(u.decode(k)),L={};for(let te=0;te<c.length;te++){const j=R[c[te]];let ee=j,ve=u.getStyle(f,c[te],!0);/color/.test(c[te])&&(ee=VP(ee),ve=VP(ve)),ve!==ee&&(L[c[te]]=j)}const Q=u.serializeStyle(L,"span");return Q?w+' style="'+Q+'"'+N:w+N})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,w)=>f+' style="'+b+'"'+w),n},zP=e=>{(Io.browser.isChromium()||Io.browser.isSafari())&&HP(e,xz)},Tz=e=>{const n=xc(!1),o=xc(Ju(e)?"text":"html"),r=QV(e);zP(e),pk(e,o),LP(e),e.on("PreInit",()=>{M0(e),Cz(e,n),pz(e,r,o)})},UP=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},kz=e=>{e.parser.addNodeFilter("details",n=>{De(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{De(n,o=>{const r=o.attr("data-mce-open");o.attr("open",G(r)?r:null),o.attr("data-mce-open",null)})})},Ez=e=>{UP(e),kz(e)},_z=gr,WP=mt,Oz=e=>oo(e.dom),vk=e=>Wi(e.dom),ZP=e=>n=>ss(re.fromDom(e),n),jP=(e,n)=>E(re.fromDom(e),o=>vk(o)||fl(o),ZP(n)).getOr(re.fromDom(n)).dom,GP=(e,n)=>E(re.fromDom(e),Oz,ZP(n)),qP=(e,n,o)=>{const r=new ia(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!_z(f);f=c())As(f)&&(u=f);return u},Az=(e,n)=>{const r=He.fromRangeStart(e).getNode(),c=jP(r,n),u=qP(r,c,!1),f=qP(r,c,!0),b=document.createRange();return GP(u,c).fold(()=>{WP(u)?b.setStart(u,0):b.setStartBefore(u)},w=>b.setStartBefore(w.dom)),GP(f,c).fold(()=>{WP(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},w=>b.setEndAfter(w.dom)),b},Dz=e=>{const n=Az(e.selection.getRng(),e.getBody());e.selection.setRng(ad(n))},Rz=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Dz(e))})};var N0;(function(e){e.Before="before",e.After="after"})(N0||(N0={}));const KP=(e,n)=>Math.abs(e.left-n),Mz=(e,n)=>Math.abs(e.right-n),Nz=(e,n)=>e>=n.top&&e<=n.bottom,Bz=(e,n)=>e.top<n.bottom&&e.bottom>n.top,$z=(e,n)=>{const o=fE(e,n)/Math.min(e.height,n.height);return Bz(e,n)&&o>.5},Pz=(e,n)=>{const o=rn(e,r=>Nz(n,r));return qb(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=cs(e,f=>$z(f,r));return[c,u]})},Iz=(e,n)=>({node:e.node,position:KP(e,n)<Mz(e,n)?N0.Before:N0.After}),Fz=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),yk=(e,n,o)=>{const r=N=>As(N.node)?H.some(N):ze(N.node)?yk(Ns(N.node.childNodes),n,o):H.none(),c=(N,R)=>{if(N.length>=2){const L=r(N[0]).getOr(N[0]),Q=r(N[1]).getOr(N[1]);if(Math.abs(R(L,n,o)-R(Q,n,o))<2){if(mt(L.node))return H.some(L);if(mt(Q.node))return H.some(Q)}}return H.none()},u=(N,R)=>{const L=qt(N,(Q,te)=>R(Q,n,o)-R(te,n,o));return c(L,R).orThunk(()=>ga(L,r))},[f,b]=Pz(yB(e),o),{pass:w,fail:k}=cs(b,N=>N.top<o);return u(f,Fz).orThunk(()=>u(k,Kb)).orThunk(()=>u(w,Kb))},Lz=(e,n,o,r)=>{const c=(u,f)=>{const b=k=>ze(k)&&k.classList.contains("mce-drag-container"),w=rn(u.dom.childNodes,po(b));return f.fold(()=>yk(w,o,r),k=>{const N=rn(w,R=>R!==k.dom);return yk(N,o,r)}).orThunk(()=>(ss(u,e)?H.none():mm(u)).bind(N=>c(N,H.some(u))))};return c(n,H.none())},Hz=(e,n,o)=>{const r=re.fromDom(e),c=cl(r),f=re.fromPoint(c,n,o).filter(b=>Fl(r,b)).getOr(r);return Lz(r,f,n,o)},YP=(e,n,o)=>Hz(e,n,o).filter(r=>m1(r.node)).map(r=>Iz(r,n)),XP=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},Vz=e=>e.inline?XP(e.getBody()):{left:0,top:0},zz=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Uz=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},wk=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=XP(e.getContentAreaContainer()),r=Uz(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},JP=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Wz=(e,n)=>JP(Vz(e),zz(e),wk(e,n)),QP=(e,n,o)=>({...n,dataTransfer:null,type:e,...o}),eI=(e,n)=>{const o=Xo("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:e,composedPath:o,initEvent:o,preventDefault:jt,stopImmediatePropagation:jt,stopPropagation:jt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:null,...n}},Ck=e=>({target:e,srcElement:e}),Zz=e=>n=>eI(e,Ck(n)),Sk=e=>(n,o)=>QP(e,n,Ck(o)),jz=Sk("dragstart"),tI=Sk("drop"),Gz=Zz("dragend"),dD=Sk("dragend"),xk=32,qz=100,Tk=8,wp=16,nI=oo,Kz=Ud(nI,Wi),oI=(e,n,o)=>nI(o)&&o!==n&&e.isEditable(o.parentElement),Yz=(e,n,o)=>Bt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Xz=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},Jz=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},Qz=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},kk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},UC=kk("left",-xk),mD=kk("left",xk),fD=kk("top",-xk),sI=kk("top",xk),e9=(e,n,o,r,c,u,f,b,w,k,N,R)=>{let L=0,Q=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(L=n.pageX+o-c),n.pageY+r>u&&(Q=n.pageY+r-u),e.style.width=o-L+"px",e.style.height=r-Q+"px";const te=w.clientHeight,j=w.clientWidth,ee=f+w.getBoundingClientRect().top,ve=b+w.getBoundingClientRect().left;N.on(ge=>{ge.intervalId.clear(),ge.dragging&&R&&(f+Tk>=te?ge.intervalId.set(sI(k)):f-Tk<=0?ge.intervalId.set(fD(k)):b+Tk>=j?ge.intervalId.set(mD(k)):b-Tk<=0?ge.intervalId.set(UC(k)):ee+wp>=window.innerHeight?ge.intervalId.set(sI(window)):ee-wp<=0?ge.intervalId.set(fD(window)):ve+wp>=window.innerWidth?ge.intervalId.set(mD(window)):ve-wp<=0&&ge.intervalId.set(UC(window)))})},rI=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},fZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);rI(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&S(re.fromDom(o))},t9=e=>e.button===0,gD=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),hD=(e,n)=>o=>{if(t9(o)){const r=ls(n.dom.getParents(o.target),Kz).getOr(null);if(Pe(r)&&oI(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:Jz(n,r,r.offsetWidth,r.offsetHeight),intervalId:x2(qz)})}}},Ek=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),YP(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===N0.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},n9=(e,n)=>{const o=Xc((c,u)=>Ek(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",jz(c,u.element)).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,w=gD(u,Wz(n,c));Qz(u.ghost,n.getBody()),e9(u.ghost,w,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},o9=e=>{const n=e.getSel();if(Pe(n)){const r=n.getRangeAt(0).startContainer;return mt(r)?r.parentNode:r}else return null},aI=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(Yz(n,o9(n.selection),r.element)){const u=Xz(r.element),f=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();n.dispatch("drop",tI(o,f)).isDefaultPrevented()||n.undoManager.transact(()=>{fZ(n.dom,r.element),n.insertContent(n.dom.getOuterHTML(u)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend",dD(o,n.getBody()))}}),bD(e)},cI=(e,n,o)=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){const c=o.fold(()=>Gz(r.element),u=>dD(u,r.element));n.dispatch("dragend",c)}}),bD(e)},pD=(e,n)=>o=>cI(e,n,H.some(o)),bD=e=>{e.on(n=>{n.intervalId.clear(),rI(n.ghost)}),e.clear()},s9=e=>{const n=Qs(),o=Vs.DOM,r=document,c=hD(n,e),u=n9(n,e),f=aI(n,e),b=pD(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",w=>{w.keyCode===on.ESC&&cI(n,e,H.none())})},r9=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Tt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&m0(e,"Dropped file type is not supported"))}},o=c=>{$w(e,c.target)&&n(c)},r=()=>{const c=Vs.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),w=["drop","dragover"];De(w,k=>{c.bind(f,k,o),u.bind(b,k,n)}),e.on("remove",()=>{De(w,k=>{c.unbind(f,k,o),u.unbind(b,k,n)})})};e.on("init",()=>{hr.setEditorTimeout(e,r,0)})},lI=e=>{s9(e),bg(e)&&r9(e)},a9=e=>{const n=Xc(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=HA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},gZ=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(_l(o)){const r=Ig(e.getBody(),o),c=oo(r)?r:o;e.selection.getNode()!==c&&fp(e,c).each(u=>e.selection.setRng(u))}})})},WC=oo,iI=(e,n)=>Ig(e.getBody(),n),c9=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=zE(e,r,o.isBlock,()=>Jh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const w=yt=>Pe(yt)&&o.hasClass(yt,"mce-offscreen-selection"),k=yt=>yt!==r&&(WC(yt)||_l(yt))&&o.isChildOf(yt,r)&&o.isEditable(yt.parentNode),N=yt=>{yt&&n.setRng(yt)},R=(yt,Me,Ne,Ut=!0)=>e.dispatch("ShowCaret",{target:Me,direction:yt,before:Ne}).isDefaultPrevented()?null:(Ut&&n.scrollIntoView(Me,yt===-1),c.show(Ne,Me)),L=yt=>{yt.hasAttribute("data-mce-caret")&&(si(yt),n.scrollIntoView(yt))},Q=()=>{e.on("click",Me=>{o.isEditable(Me.target)||(Me.preventDefault(),e.focus())}),e.on("blur NewBlock",ke),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Me=>{const Ne=Me.target,Ut=iI(e,Ne);WC(Ut)?(Me.preventDefault(),fp(e,Ut).each(we)):k(Ne)&&fp(e,Ne).each(we)},!0),e.on("mousedown",Me=>{const Ne=Me.target;if(Ne!==r&&Ne.nodeName!=="HTML"&&!o.isChildOf(Ne,r)||!m8(e,Me.clientX,Me.clientY))return;ke(),Ot();const Ut=iI(e,Ne);WC(Ut)?(Me.preventDefault(),fp(e,Ut).each(we)):YP(r,Me.clientX,Me.clientY).each(bn=>{Me.preventDefault();const Rn=R(1,bn.node,bn.position===N0.Before,!1);N(Rn),ze(Ut)?Ut.focus():e.getBody().focus()})}),e.on("keypress",Me=>{on.modifierPressed(Me)||WC(n.getNode())&&Me.preventDefault()}),e.on("GetSelectionRange",Me=>{let Ne=Me.range;if(b){if(!b.parentNode){b=null;return}Ne=Ne.cloneRange(),Ne.selectNode(b),Me.range=Ne}}),e.on("SetSelectionRange",Me=>{Me.range=ee(Me.range);const Ne=we(Me.range,Me.forward);Ne&&(Me.range=Ne)});const yt=Me=>ze(Me)&&Me.id==="mcepastebin";e.on("AfterSetSelectionRange",Me=>{const Ne=Me.range,Ut=Ne.startContainer.parentElement;!j(Ne)&&!yt(Ut)&&Ot(),w(Ut)||ke()}),lI(e),a9(e),gZ(e)},te=yt=>ts(yt)||oi(yt)||ym(yt),j=yt=>te(yt.startContainer)||te(yt.endContainer),ee=yt=>{const Me=e.schema.getVoidElements(),Ne=o.createRng(),Ut=yt.startContainer,bn=yt.startOffset,Rn=yt.endContainer,co=yt.endOffset;return _n(Me,Ut.nodeName.toLowerCase())?bn===0?Ne.setStartBefore(Ut):Ne.setStartAfter(Ut):Ne.setStart(Ut,bn),_n(Me,Rn.nodeName.toLowerCase())?co===0?Ne.setEndBefore(Rn):Ne.setEndAfter(Rn):Ne.setEnd(Rn,co),Ne},ve=(yt,Me)=>{const Ne=re.fromDom(e.getBody()),Ut=e.getDoc(),bn=xt(Ne,"#"+u).getOrThunk(()=>{const Do=re.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ut);return Vr(Do,"id",u),Pr(Ne,Do),Do}),Rn=o.createRng();$s(bn),Hu(bn,[re.fromText(ps,Ut),re.fromDom(Me),re.fromText(ps,Ut)]),Rn.setStart(bn.dom.firstChild,1),Rn.setEnd(bn.dom.lastChild,0),Xf(bn,{top:o.getPos(yt,e.getBody()).y+"px"}),an(bn);const co=n.getSel();return co&&(co.removeAllRanges(),co.addRange(Rn)),Rn},ge=yt=>{const Me=yt.cloneNode(!0),Ne=e.dispatch("ObjectSelected",{target:yt,targetClone:Me});if(Ne.isDefaultPrevented())return null;const Ut=ve(yt,Ne.targetClone),bn=re.fromDom(yt);return De(nc(re.fromDom(e.getBody()),`*[${f}]`),Rn=>{ss(bn,Rn)||kr(Rn,f)}),o.getAttrib(yt,f)||yt.setAttribute(f,"1"),b=yt,Ot(),Ut},we=(yt,Me)=>{if(!yt)return null;if(yt.collapsed){if(!j(yt)){const Rn=Me?1:-1,co=Gy(Rn,r,yt),Do=co.getNode(!Me);if(Pe(Do)){if(m1(Do))return R(Rn,Do,Me?!co.isAtEnd():!1,!1);if(Kn(Do)&&oo(Do.nextSibling)){const Us=o.createRng();return Us.setStart(Do,0),Us.setEnd(Do,0),Us}}const vs=co.getNode(Me);if(Pe(vs)){if(m1(vs))return R(Rn,vs,Me?!1:!co.isAtEnd(),!1);if(Kn(vs)&&oo(vs.previousSibling)){const Us=o.createRng();return Us.setStart(vs,1),Us.setEnd(vs,1),Us}}}return null}let Ne=yt.startContainer,Ut=yt.startOffset;const bn=yt.endOffset;if(mt(Ne)&&Ut===0&&WC(Ne.parentNode)&&(Ne=Ne.parentNode,Ut=o.nodeIndex(Ne),Ne=Ne.parentNode),!ze(Ne))return null;if(bn===Ut+1&&Ne===yt.endContainer){const Rn=Ne.childNodes[Ut];if(k(Rn))return ge(Rn)}return null},ke=()=>{b&&b.removeAttribute(f),xt(re.fromDom(e.getBody()),"#"+u).each(Ls),b=null},Ke=()=>{c.destroy(),b=null},Ot=()=>{c.hide()};return Vg(e)||Q(),{showCaret:R,showBlockCaretContainer:L,hideFakeCaret:Ot,destroy:Ke}},uI=(e,n)=>{let o=n;for(let r=e.previousSibling;mt(r);r=r.previousSibling)o+=r.data.length;return o},dI=(e,n,o,r,c)=>{if(mt(o)&&(r<0||r>o.data.length))return[];const u=c&&mt(o)?[uI(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},_k=(e,n,o,r,c,u,f=!1)=>{const b=dI(e,n,o,r,f),w=dI(e,n,c,u,f);return{start:b,end:w}},mI=(e,n)=>{const o=n.slice(),r=o.pop();return Vo(r)?zo(o,(u,f)=>u.bind(b=>H.from(b.childNodes[f])),H.some(e)).bind(u=>mt(u)&&(r<0||r>u.data.length)?H.none():H.some({node:u,offset:r})):H.none()},fI=(e,n)=>mI(e,n.start).bind(({node:o,offset:r})=>mI(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),l9=(e,n,o,r=!1)=>_k(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),B0=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),B0(e,r,o)}},Ok=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(mt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),mt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),B0(e,c,o),c!==u&&B0(e,u,o))},Ak=(e,n)=>H.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),i9=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:o1(r).concat(e.blockPatterns),inlinePatterns:nv(r).concat(e.inlinePatterns)}},gI=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},hI=e=>/^\s[^\s]/.test(e),pI=(e,n,o)=>{TH(n,0,n).each(c=>{const u=c.container;S$(u,o.start.length,n).each(w=>{const k=e.createRng();k.setStart(u,0),k.setEnd(w.container,w.offset),Ok(e,k,N=>N===n)});const f=re.fromDom(u),b=eg(f);hI(b)&&du(f,b.slice(1))})},vD=(e,n)=>{const o=e.dom,r=n.pattern,c=fI(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const w=b.get(f);return at(w)&&Bn(w).exists(k=>_n(k,"block"))};return Ak(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{pI(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{pI(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},u9=e=>qt(e,(n,o)=>o.start.length-n.start.length),d9=(e,n)=>{const o=u9(e),r=n.replace(ps," ");return ls(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},m9=(e,n,o,r)=>{var c;const u=e.dom,f=ua(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return d9(o.blockPatterns,b).map(w=>Qe.trim(b).length===w.start.length?[]:[{pattern:w,range:_k(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},bI=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();De(n,r=>vD(e,r)),e.selection.moveToBookmark(o)},ZC=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),jC=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},yD=(e,n,o)=>{const r=fI(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),w=b.parentNode,k=f.parentNode;return{prefix:n,end:k.insertBefore(ZC(e,n+"-end"),f),start:w.insertBefore(ZC(e,n+"-start"),b)}},vI=(e,n,o)=>{B0(e,e.get(n.prefix+"-end"),o),B0(e,e.get(n.prefix+"-start"),o)},wD=e=>e.start.length===0,yI=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},wI=(e,n,o,r)=>{const c=n.start;return S4(e,r.container,r.offset,yI(c),o).bind(f=>{var b,w;const k=(w=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&w!==void 0?w:-1;if(k!==-1&&f.offset>=k+c.length){const R=e.createRng();return R.setStart(f.container,f.offset-c.length),R.setEnd(f.container,f.offset),H.some(R)}else{const R=f.offset-c.length;return ek(f.container,R,o).map(L=>{const Q=e.createRng();return Q.setStart(L.container,L.offset),Q.setEnd(f.container,f.offset),Q}).filter(L=>L.toString()===c).orThunk(()=>wI(e,n,o,Zm(f.container,0)))}})},f9=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),H.some(f)}return C4(o,r,c).bind(f=>wI(e,n,c,f).bind(w=>{var k;if(u){if(w.endContainer===f.container&&w.endOffset===f.offset)return H.none();if(f.offset===0&&((k=w.endContainer.textContent)===null||k===void 0?void 0:k.length)===w.endOffset)return H.none()}return H.some(w)}))},g9=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,w=o.position.offset;return ek(b,w-o.pattern.end.length,n).bind(k=>{const N=_k(c,u,k.container,k.offset,b,w,r);if(wD(f))return H.some({matches:[{pattern:f,startRng:N,endRng:N}],position:k});{const R=$0(e,o.remainingPatterns,k.container,k.offset,n,r),L=R.getOr({matches:[],position:k}),Q=L.position;return f9(c,f,Q.container,Q.offset,n,R.isNone()).map(j=>{const ee=l9(c,u,j,r);return{matches:L.matches.concat([{pattern:f,startRng:ee,endRng:N}]),position:Zm(j.startContainer,j.startOffset)}})}})},$0=(e,n,o,r,c,u)=>{const f=e.dom;return C4(o,r,f.getRoot()).bind(b=>{const w=gI(f,c,o,r);for(let k=0;k<n.length;k++){const N=n[k];if(!Zc(w,N.end))continue;const R=n.slice();R.splice(k,1);const L=g9(e,c,{pattern:N,remainingPatterns:R,position:b},u);if(L.isNone()&&r>0)return $0(e,n,o,r-1,c,u);if(L.isSome())return L}return H.none()})},CI=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?De(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},h9=(e,n,o,r)=>{const c=jC(e.dom,o);Ok(e.dom,c,r),CI(e,n,c)},p9=(e,n,o,r,c)=>{const u=e.dom,f=jC(u,r),b=jC(u,o);Ok(u,b,c),Ok(u,f,c);const w={prefix:o.prefix,start:o.end,end:r.start},k=jC(u,w);CI(e,n,k)},b9=(e,n)=>{const o=_2("mce_textpattern"),r=Ea(n,(c,u)=>{const f=yD(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Ea(r,(c,u)=>{const f=r.length-c.length-1,b=wD(u.pattern)?u.endMarker:yD(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},v9=e=>qt(e,(n,o)=>o.end.length-n.end.length),y9=(e,n)=>{const o=Jo(e,r=>$t(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},CD=(e,n,o,r,c,u)=>{const f=$0(e,c.inlinePatterns,o,r,n,u).fold(()=>[],w=>w.matches),b=$0(e,v9(c.inlinePatterns),o,r,n,u).fold(()=>[],w=>w.matches);return y9(f,b)},SD=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=b9(o,n);De(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=w=>w===f;wD(u.pattern)?h9(e,u.pattern,u.endMarker,b):p9(e,u.pattern,u.startMarker,u.endMarker,b),vI(o,u.endMarker,b),vI(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},xD=(e,n)=>{const o=e.selection.getRng();return Ak(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=i9(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=CD(e,r,o.startContainer,u,f,!0),w=m9(e,r,f,!0);return w.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(ti),SD(e,b),bI(e,w);const k=e.selection.getRng(),N=C4(k.startContainer,k.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),N.each(R=>{const L=R.container;L.data.charAt(R.offset-1)===ti&&(L.deleteData(R.offset-1,1),B0(e.dom,L.parentNode,Q=>Q===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},TD=(e,n)=>{const o=e.selection.getRng();Ak(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=gI(e.dom,r,o.startContainer,c),f=i9(n,r,u),b=CD(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{SD(e,b)})})},SI=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},kD=(e,n)=>SI(e,n,(o,r)=>o===r.keyCode&&!on.modifierPressed(r)),w9=(e,n)=>SI(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),C9=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>ov(yS(e),NE(e)),c=()=>xS(e);e.on("keydown",f=>{if(f.keyCode===13&&!on.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&xD(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&TD(e,f)}};e.on("keyup",f=>{kD(o,f)&&u()}),e.on("keypress",f=>{w9(n,f)&&hr.setEditorTimeout(e,u)})},xI=e=>{C9(e)},S9=e=>{const n=Qe.each,o=on.BACKSPACE,r=on.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Io.browser,w=b.isFirefox(),k=b.isChromium()||b.isSafari(),N=Io.deviceType.isiPhone()||Io.deviceType.isiPad(),R=Io.os.isMacOS()||Io.os.isiOS(),L=(Ft,An)=>{try{e.getDoc().execCommand(Ft,!1,String(An))}catch{}},Q=Ft=>Ft.isDefaultPrevented(),te=()=>{const Ft=Nn=>{const Lt=c.create("body"),yo=Nn.cloneContents();return Lt.appendChild(yo),u.serializer.serialize(Lt,{format:"html"})},An=Nn=>{const Lt=Ft(Nn),yo=c.createRng();yo.selectNode(e.getBody());const io=Ft(yo);return Lt===io};e.on("keydown",Nn=>{const Lt=Nn.keyCode;if(!Q(Nn)&&(Lt===r||Lt===o)&&e.selection.isEditable()){const yo=e.selection.isCollapsed(),io=e.getBody();if(yo&&!c.isEmpty(io)||!yo&&!An(e.selection.getRng()))return;Nn.preventDefault(),e.setContent(""),io.firstChild&&c.isBlock(io.firstChild)?e.selection.setCursorLocation(io.firstChild,0):e.selection.setCursorLocation(io,0),e.nodeChanged()}})},j=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ee=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Ft=>{let An;if(Ft.target===e.getDoc().documentElement)if(An=u.getRng(),e.getBody().focus(),Ft.type==="mousedown"){if(ts(An.startContainer))return;u.placeCaretAt(Ft.clientX,Ft.clientY)}else u.setRng(An)})},ve=()=>{e.on("keydown",Ft=>{if(!Q(Ft)&&Ft.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const An=u.getNode(),Nn=An.previousSibling;if(An.nodeName==="HR"){c.remove(An),Ft.preventDefault();return}Nn&&Nn.nodeName&&Nn.nodeName.toLowerCase()==="hr"&&(c.remove(Nn),Ft.preventDefault())}}})},ge=()=>{Range.prototype.getClientRects||e.on("mousedown",Ft=>{if(!Q(Ft)&&Ft.target.nodeName==="HTML"){const An=e.getBody();An.blur(),hr.setEditorTimeout(e,()=>{An.focus()})}})},we=()=>{const Ft=fS(e);e.on("click",An=>{const Nn=An.target;/^(IMG|HR)$/.test(Nn.nodeName)&&c.isEditable(Nn.parentNode)&&(An.preventDefault(),e.selection.select(Nn),e.nodeChanged()),Nn.nodeName==="A"&&c.hasClass(Nn,Ft)&&Nn.childNodes.length===0&&c.isEditable(Nn.parentNode)&&(An.preventDefault(),u.select(Nn))})},ke=()=>{const Ft=()=>{const Nn=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Lt=u.getStart();Lt!==e.getBody()&&(c.setAttrib(Lt,"style",null),n(Nn,yo=>{Lt.setAttributeNode(yo.cloneNode(!0))}))}},An=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Nn=>{let Lt;return!Q(Nn)&&(Nn.keyCode===8||Nn.keyCode===46)&&An()?(Lt=Ft(),e.getDoc().execCommand("delete",!1),Lt(),Nn.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Nn=>{if(!Q(Nn)&&An()){const Lt=Ft();hr.setEditorTimeout(e,()=>{Lt()})}})},Ke=()=>{e.on("keydown",Ft=>{if(!Q(Ft)&&Ft.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const An=u.getNode().previousSibling;if(An&&An.nodeName&&An.nodeName.toLowerCase()==="table")return Ft.preventDefault(),!1}return!0})},Ot=()=>{e.on("keydown",Ft=>{if(Q(Ft)||Ft.keyCode!==on.BACKSPACE)return;let An=u.getRng();const Nn=An.startContainer,Lt=An.startOffset,yo=c.getRoot();let io=Nn;if(!(!An.collapsed||Lt!==0)){for(;io.parentNode&&io.parentNode.firstChild===io&&io.parentNode!==yo;)io=io.parentNode;io.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,io),An=c.createRng(),An.setStart(Nn,0),An.setEnd(Nn,0),u.setRng(An))}})},yt=()=>{const Ft=()=>{L("StyleWithCSS",!1),L("enableInlineTableEditing",!1),Ah(e)||L("enableObjectResizing",!1)};mS(e)||e.on("BeforeExecCommand mousedown",Ft)},Me=()=>{const Ft=()=>{n(c.select("a:not([data-mce-block])"),An=>{var Nn;let Lt=An.parentNode;const yo=c.getRoot();if((Lt==null?void 0:Lt.lastChild)===An){for(;Lt&&!c.isBlock(Lt);){if(((Nn=Lt.parentNode)===null||Nn===void 0?void 0:Nn.lastChild)!==Lt||Lt===yo)return;Lt=Lt.parentNode}c.add(Lt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",An=>{(An.type==="setcontent"||An.command==="mceInsertLink")&&Ft()})},Ne=()=>{e.on("init",()=>{L("DefaultParagraphSeparator",ua(e))})},Ut=Ft=>{const An=Ft.getBody(),Nn=Ft.selection.getRng();return Nn.startContainer===Nn.endContainer&&Nn.startContainer===An&&Nn.startOffset===0&&Nn.endOffset===An.childNodes.length},bn=()=>{e.on("keyup focusin mouseup",Ft=>{!on.modifierPressed(Ft)&&!Ut(e)&&u.normalize()},!0)},Rn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},co=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Do=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ft=>{let An;Ft.target.nodeName==="HTML"&&(An=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(An),e.selection.normalize(),e.nodeChanged())}))},vs=()=>{R&&e.on("keydown",Ft=>{on.metaKeyPressed(Ft)&&!Ft.shiftKey&&(Ft.keyCode===37||Ft.keyCode===39)&&(Ft.preventDefault(),e.selection.getSel().modify("move",Ft.keyCode===37?"backward":"forward","lineboundary"))})},Us=()=>{e.on("click",Ft=>{let An=Ft.target;do if(An.tagName==="A"){Ft.preventDefault();return}while(An=An.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},oa=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ft=>{Ft.preventDefault()})})},yl=()=>{f.addNodeFilter("br",Ft=>{let An=Ft.length;for(;An--;)Ft[An].attr("class")==="Apple-interchange-newline"&&Ft[An].remove()})},fc=jt,wt=()=>{if(!w||e.removed)return!1;const Ft=e.selection.getSel();return!Ft||!Ft.rangeCount||Ft.rangeCount===0},ln=()=>{k&&(ee(),we(),oa(),j(),N&&(co(),Do(),Us())),w&&(ge(),yt(),Rn(),vs())},Ko=()=>{Ot(),te(),Io.windowsPhone||bn(),k&&(ee(),we(),Ne(),oa(),Ke(),yl(),N?(co(),Do(),Us()):j()),w&&(ve(),ge(),ke(),yt(),Me(),Rn(),vs(),Ke())};return Vg(e)?ln():Ko(),{refreshContentEditable:fc,isHidden:wt}},ED=Vs.DOM,x9=(e,n)=>{const o=re.fromDom(e.getBody()),r=fm(Ql(o)),c=re.fromTag("style");Vr(c,"type","text/css"),Pr(c,re.fromText(n)),Pr(r,c),e.on("remove",()=>{Ls(c)})},T9=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,_D=e=>Qo(e,n=>Mn(n)===!1),TI=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return _D({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:T9(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},kI=e=>{const n=e.options.get;return _D({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},EI=e=>{const n=e.options.get;return{...TI(e),...kI(e),..._D({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},k9=e=>{const n=nb(TI(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let w=b.attr(r);if(w&&!b.attr(u)){if(w.indexOf("data:")===0||w.indexOf("blob:")===0)continue;r==="style"?(w=c.serializeStyle(c.parseStyle(w),b.name),w.length||(w=null),b.attr(u,w),b.attr(r,w)):r==="tabindex"?(b.attr(u,w),b.attr(r,null)):b.attr(u,e.convertURL(w,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),$E(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Mi("br",1))}}),n},OD=e=>{const n=DE(e);n&&hr.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},E9=e=>{const n=e.dom.getRoot();!e.inline&&(!S1(e)||e.selection.getStart(!0)===n)&&ii(n).each(o=>{const r=o.getNode(),c=xi(r)?ii(r).getOr(o):o;e.selection.setRng(c.toRange())})},_9=e=>{e.bindPendingEventDelegates(),e.initialized=!0,yw(e),e.focus(!0),E9(e),e.nodeChanged({initial:!0});const n=vg(e);fe(n)&&n.call(e,e),OD(e)},_I=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,O9=(e,n,o)=>{const r=[_I(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},OI=e=>{const n=_I(e),o=oS(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let w="";Qe.each(e.contentStyles,k=>{w+=k+`\r
`}),e.dom.addStyle(w)}const f=Promise.all(O9(e,r,o)).then(u).catch(u),b=uv(e);return b&&x9(e,b),f},A9=e=>{const n=e.getDoc(),o=e.getBody();u_(e),RE(e)||(n.body.spellcheck=!1,ED.setAttrib(o,"spellcheck","false")),e.quirks=S9(e),vw(e);const r=sS(e);r!==void 0&&(o.dir=r);const c=ME(e);c&&e.on("BeforeSetContent",u=>{Qe.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},Dk=e=>{Vg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},AD=e=>{e.removed!==!0&&(Dk(e),_9(e))},AI=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(ED.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=mS(e),e.readonly||(e.inline&&ED.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=C8(e),e.schema=ai(kI(e)),e.dom=Vs(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:CE(e),referrerPolicy:iv(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=k9(e),e.serializer=yA(EI(e),e),e.selection=pA(e.dom,e.getWin(),e.serializer,e),e.annotator=Di(e),e.formatter=ud(e),e.undoManager=OA(e),e._nodeChangeDispatcher=new ZV(e),e._selectionOverrides=c9(e),om(e),Ez(e),ZB(e),Vg(e)||(Rz(e),xI(e));const c=yP(e);d4(e,c),WT(e),E8(e),Tz(e);const u=x6(e);A9(e),u.fold(()=>{OI(e).then(()=>AD(e))},f=>{e.setProgressState(!0),OI(e).then(()=>{f().then(b=>{e.setProgressState(!1),AD(e),F6(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),AD(e),F6(e)})})})},D9=gt,R9=(e,n,o)=>Jf(e,n,D9,o),DD=Vs.DOM,M9=(e,n,o,r)=>{const c=re.fromTag("iframe");return r.each(u=>Vr(c,"tabindex",u)),tc(c,o),tc(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Pu(c,"tox-edit-area__iframe"),c},N9=e=>{let n=vt(e)+"<html><head>";J2(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Ec(e),r=vE(e),c=e.translate(gS(e));return My(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+My(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},B9=(e,n)=>{const o=e.translate("Rich Text Area"),r=al(re.fromDom(e.getElement()),"tabindex").bind(pc),c=M9(e.id,o,X2(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=N9(e),DD.add(n.iframeContainer,c)},$9=e=>{const n=e.iframeElement,o=R9(re.fromDom(n),"load",()=>{o.unbind(),e.contentDocument=n.contentDocument,AI(e)});if(Io.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close()}else n.srcdoc=e.iframeHTML},DI=(e,n)=>{B9(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=DD.isHidden(n.editorContainer)),e.getElement().style.display="none",DD.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,$9(e)},RI=Vs.DOM,MI=(e,n,o)=>{const r=tm.get(o),c=tm.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Qe.trim(o),r&&Qe.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,fe(u.init)&&(u.init(e,c),n.push(o))}catch(u){$N(e,o,u)}}},P9=e=>e.replace(/^\-/,""),I9=e=>{const n=[];De(l1(e),o=>{MI(e,n,P9(o))})},NI=e=>{const n=Qe.trim(Q2(e)),o=e.ui.registry.getAll().icons,r={...CT.get("default").icons,...CT.get(n).icons};ht(r,(c,u)=>{_n(o,u)||e.ui.registry.addIcon(u,c)})},GC=e=>{const n=hg(e);if(G(n)){const o=id.get(n);e.theme=o(e,id.urls[n])||{},fe(e.theme.init)&&e.theme.init(e,id.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},F9=e=>{const n=Dh(e),o=d0.get(n);e.model=o(e,d0.urls[n])},BI=e=>{const n=e.theme.renderUI;return n?n():PI(e)},L9=e=>{const n=e.getElement(),r=hg(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},$I=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),H9=e=>{const n=RI.create("div");return RI.insertAfter(n,e),$I(n,n)},PI=e=>{const n=e.getElement();return e.inline?$I(null):H9(n)},II=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,G(hg(e))?BI(e):fe(hg(e))?L9(e):PI(e)},V9=(e,n)=>{const o={show:H.from(n.show).getOr(jt),hide:H.from(n.hide).getOr(jt),isEnabled:H.from(n.isEnabled).getOr(gt),setEnabled:r=>{e.mode.isReadOnly()||H.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},FI=async e=>{e.dispatch("ScriptsLoaded"),NI(e),GC(e),F9(e),I9(e);const n=await II(e);V9(e,H.from(n.api).getOr({})),e.editorContainer=n.editorContainer,nm(e),e.inline?AI(e):DI(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},db=Vs.DOM,LI=e=>e.charAt(0)==="-",z9=(e,n)=>{const o=a1(n),r=_c(n);if(!Ku.hasCode(o)&&o!=="en"){const c=Lo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{NN(n,c,o)})}},U9=(e,n)=>{const o=hg(e);if(G(o)&&!LI(o)&&!_n(id.urls,o)){const r=c1(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;id.load(o,c).catch(()=>{BN(e,c,o)})}},W9=(e,n)=>{const o=Dh(e);if(o!=="plugin"&&!_n(d0.urls,o)){const r=Xu(e),c=G(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;d0.load(o,c).catch(()=>{TT(e,c,o)})}},Z9=e=>H.from(By(e)).filter(Lo).map(n=>({url:n,name:H.none()})),HI=(e,n,o)=>H.from(n).filter(r=>Lo(r)&&!CT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:H.some(r)})),j9=(e,n,o)=>{const r=HI(n,"default",o),c=Z9(n).orThunk(()=>HI(n,Q2(n),""));De(Ys([r,c]),u=>{e.add(u.url).catch(()=>{MN(n,u.url,u.name.getOrUndefined())})})},G9=(e,n)=>{const o=(r,c)=>{tm.load(r,c).catch(()=>{h0(e,c,r)})};ht(i3(e),(r,c)=>{o(c,r),e.options.set("plugins",l1(e).concat(c))}),De(l1(e),r=>{r=Qe.trim(r),r&&!tm.urls[r]&&!LI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},VI=e=>{const n=hg(e);return!G(n)||Pe(id.get(n))},RD=e=>{const n=Dh(e);return Pe(d0.get(n))},zI=(e,n)=>{const o=ji.ScriptLoader,r=()=>{!e.removed&&VI(e)&&RD(e)&&FI(e)};U9(e,n),W9(e,n),z9(o,e),j9(o,e,n),G9(e,n),o.loadQueue().then(r,r)},UI=(e,n)=>bh.forElement(e,{contentCssCors:Rh(n),referrerPolicy:iv(n)}),q9=e=>{const n=e.id;Ku.setCode(a1(e));const o=()=>{db.unbind(window,"ready",o),e.render()};if(!rc.Event.domLoaded){db.bind(window,"ready",o);return}if(!e.getElement())return;const r=re.fromDom(e.getElement()),c=um(r);e.on("remove",()=>{Gs(r.dom.attributes,f=>kr(r,f.name)),tc(r,c)}),e.ui.styleSheetLoader=UI(r,e),pg(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||db.getParent(n,"form");u&&(e.formElement=u,TE(e)&&!bm(e.getElement())&&(db.insertAfter(db.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},db.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),uS(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=hC(e),e.notificationManager=gC(e),FE(e)&&e.on("GetContent",f=>{f.save&&(f.content=db.encode(f.content))}),dS(e)&&e.on("submit",()=>{e.initialized&&e.save()}),kE(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),zI(e,e.suffix)},K9=(e,n)=>({sections:nt(e),options:nt(n)}),WI=wo().deviceType,MD=WI.isPhone(),ZI=WI.isTablet(),qC=e=>{if(Bt(e))return[];{const n=at(e)?e:e.split(/[ ,]/),o=Vt(n,hc);return rn(o,Lo)}},Y9=(e,n)=>{const o=Ka(n,(r,c)=>Tt(e,c));return K9(o.t,o.f)},ND=(e,n,o={})=>{const r=e.sections(),c=Wo(r,n).getOr({});return Qe.extend({},o,c)},P0=(e,n)=>_n(e.sections(),n),Rk=(e,n)=>P0(e,n)?e.sections()[n]:{},qg=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Wo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Mk=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Qe.extend({},e.external_plugins,r):r},I0=(e,n)=>[...qC(e),...qC(n)],jI=(e,n,o,r)=>e&&P0(n,"mobile")?r:o,X9=(e,n,o,r)=>{const c=qC(o.forced_plugins),u=qC(r.plugins),f=Rk(n,"mobile"),b=f.plugins?qC(f.plugins):u,w=jI(e,n,u,b),k=I0(c,w);return Qe.extend(r,{forced_plugins:c,plugins:k})},J9=(e,n)=>e&&P0(n,"mobile"),GI=(e,n,o,r,c)=>{var u;const f=e?{mobile:qg((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=Y9(["mobile"],k4(f,c)),w=Qe.extend(o,r,b.options(),J9(e,b)?ND(b,"mobile"):{},{external_plugins:Mk(r,b.options())});return X9(e,b,r,w)},Q9=(e,n)=>GI(MD||ZI,MD,n,e,n),BD=(e,n)=>I6(e,n),Nk=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{De("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Cp=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return $t(c,u=>Pe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},mb=e=>{Nk(e),Cp(e)},qI=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Io.os.isMacOS()||Io.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"â+")),e.notificationManager.open({text:c,type:"error"})}}})},eU=(e,n,o)=>{const r=re.fromDom(e.getRoot());return Lw(r,He.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Hw(r,He.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},tU=e=>{if(typeof e!="string"){const n=Qe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},nU=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?eU(r,o.getRng(),n):n},Bk=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=tU(n);iT(e,{...r,content:nU(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=$6(e,c.content,r);rA(e,u,c),e.addVisual()})}},oU=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Bk(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Bk(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Bk(e,r)},mceInsertContent:(n,o,r)=>{Bk(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},sU={"font-size":"size","font-family":"face"},KI=wi("font"),rU=(e,n,o)=>{const r=u=>$c(u,e).orThunk(()=>KI(u)?Wo(sU,e).bind(f=>al(u,f)):H.none()),c=u=>ss(re.fromDom(n),u);return vO(re.fromDom(o),u=>r(u),c)},aU=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),cU=(e,n)=>H.from(Vs.DOM.getStyle(n,e,!0)),lU=e=>(n,o)=>H.from(o).map(re.fromDom).filter(Os).bind(r=>rU(e,n,r.dom).or(cU(e,r.dom))).getOr(""),iU=lU("font-size"),$D=O(aU,lU("font-family")),uU=e=>ii(e.getBody()).bind(n=>{const o=n.container();return H.from(mt(o)?o.parentNode:o)}),dU=e=>H.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?H.none():H.from(e.selection.getStart(!0))}),YI=(e,n)=>dU(e).orThunk(je(uU,e)).map(re.fromDom).filter(Os).bind(n),PD=(e,n)=>YI(e,Eo(H.some,n)),ID=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=PE(e),c=IE(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},mU=e=>{const n=e.split(/\s*,\s*/);return Vt(n,o=>o.indexOf(" ")!==-1&&!(fs(o,'"')||fs(o,"'"))?`'${o}'`:o).join(",")},FD=(e,n)=>{const o=ID(e,n);e.formatter.toggle("fontname",{value:mU(o)}),e.nodeChanged()},fU=e=>PD(e,n=>$D(e.getBody(),n.dom)).getOr(""),gU=(e,n)=>{e.formatter.toggle("fontsize",{value:ID(e,n)}),e.nodeChanged()},hU=e=>PD(e,n=>iU(e.getBody(),n.dom)).getOr(""),pU=e=>PD(e,n=>{const o=re.fromDom(e.getBody()),r=vO(n,u=>$c(u,"line-height"),je(ss,o)),c=()=>{const u=parseFloat(Ci(n,"line-height")),f=parseFloat(Ci(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),XI=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},LD=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{FD(e,c)},FontSize:(o,r,c)=>{gU(e,c)},LineHeight:(o,r,c)=>{XI(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(G(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},JI=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>fU(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>hU(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>pU(e))},HD=e=>{LD(e),JI(e)},bU=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},hZ=e=>{e.editorCommands.addCommands({Indent:()=>{l4(e)},Outdent:()=>{EC(e)}}),e.editorCommands.addCommands({Outdent:()=>c4(e)},"state")},pZ=e=>{const n=(o,r,c)=>{const u=G(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Xe(u)&&G(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},vU=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},QI=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},yU=e=>{vU(e),QI(e)},wU=e=>{e.editorCommands.addCommands({insertParagraph:()=>{uk(zf,e)},mceInsertNewLine:(n,o,r)=>{dk(e,r)},InsertLineBreak:(n,o,r)=>{uk(K4,e)}})},CU=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>ze(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Wi);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},bZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{H5(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},vZ=e=>{mb(e),qI(e),bU(e),CU(e),oU(e),pZ(e),hZ(e),wU(e),yU(e),HD(e),bZ(e)},e5=["toggleview"],VD=e=>Tt(e5,e.toLowerCase());class t5{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Xh(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const k=this.commands.exec[f];return fe(k)?(k(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!VD(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return fe(r)?r(o):!1}queryCommandValue(n){if(!VD(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return fe(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;ht(n,(c,u)=>{De(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const fb="data-mce-contenteditable",SU=(e,n,o)=>{Ed(e,n)&&!o?Td(e,n):o&&Pu(e,n)},n5=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},zD=(e,n)=>{e.dom.contentEditable=n?"true":"false"},yZ=e=>{De(nc(e,'*[contenteditable="true"]'),n=>{Vr(n,fb,"true"),zD(n,!1)})},xU=e=>{De(nc(e,`*[${fb}="true"]`),n=>{kr(n,fb),zD(n,!0)})},wZ=e=>{H.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},TU=e=>{e.selection.setRng(e.selection.getRng())},gb=(e,n)=>{const o=re.fromDom(e.getBody());SU(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),wZ(e),e.readonly=!0,zD(o,!1),yZ(o)):(e.readonly=!1,zD(o,!0),xU(o),n5(e,"StyleWithCSS",!1),n5(e,"enableInlineTableEditing",!1),n5(e,"enableObjectResizing",!1),b3(e)&&e.focus(),TU(e),e.nodeChanged())},Kg=e=>e.readonly,KC=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Kg(e)&&De(n,o=>{o.attr(fb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(fb,n=>{Kg(e)&&De(n,o=>{o.attr("contenteditable",o.attr(fb))})}),e.serializer.addTempAttr(fb)},o5=e=>{e.serializer?KC(e):e.on("PreInit",()=>{KC(e)})},s5=e=>e.type==="click",r5=["copy"],kU=e=>Tt(r5,e.type),EU=(e,n)=>On(n,"a",r=>ss(r,re.fromDom(e.getBody()))).bind(r=>al(r,"href")),_U=(e,n)=>{if(s5(n)&&!on.metaKeyPressed(n)){const o=re.fromDom(n.target);EU(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${qs(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else kU(n)&&e.dispatch(n.type,n)},OU=e=>{e.on("ShowCaret",n=>{Kg(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Kg(e)&&n.preventDefault()})},hb=Qe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class UD{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||_e}static isNative(n){return!!hb[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=lg(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const w=u[f];if(!w.removed){if(w.once&&this.off(r,w.func),c.isImmediatePropagationStopped())return c;if(w.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=_e),o){const u={func:o,removed:!1};c&&Qe.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const w=f[b];let k=this.bindings[w];k||(k=[],this.toggleEvent(w,!0)),r?k=[u,...k]:k=[...k,u],this.bindings[w]=k}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return ht(this.bindings,(b,w)=>{this.toggleEvent(w,!1),delete this.bindings[w]}),this;if(f){if(!o)f.length=0;else{const b=cs(f,w=>w.func===o);f=b.fail,this.bindings[u]=f,De(b.pass,w=>{w.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else ht(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const F0=e=>(e._eventDispatcher||(e._eventDispatcher=new UD({scope:e,toggleEvent:(n,o)=>{UD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),WD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return lg(e.toLowerCase(),n??{},r);const c=F0(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return F0(this).on(e,n,o)},off(e,n){return F0(this).off(e,n)},once(e,n){return F0(this).once(e,n)},hasEventListeners(e){return F0(this).has(e)}},pb=Vs.DOM;let bb;const $k=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=dv(e);return o?(e.eventRoot||(e.eventRoot=pb.select(o)[0]),e.eventRoot):e.getBody()},AU=e=>!e.hidden&&!Kg(e),ZD=(e,n,o)=>{AU(e)?e.dispatch(n,o):Kg(e)&&_U(e,o)},a5=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=$k(e,n);if(dv(e)){if(bb||(bb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||bb&&(ht(bb,(c,u)=>{e.dom.unbind($k(e,u))}),bb=null)})),bb[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const w=f[b].getBody();(w===u||pb.isChildOf(u,w))&&ZD(f[b],n,c)}};bb[n]=r,pb.bind(o,n,r)}else{const r=c=>{ZD(e,n,c)};pb.bind(o,n,r),e.delegates[n]=r}},c5={...WD,bindPendingEventDelegates(){const e=this;Qe.each(e._pendingNativeEvents,n=>{a5(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?a5(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind($k(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(ht(e.delegates,(r,c)=>{e.dom.unbind($k(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},DU=e=>G(e)?{value:e.split(/[ ,]/),valid:!0}:Zn(e,G)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},RU=e=>{const n=(()=>{switch(e){case"array":return at;case"boolean":return ft;case"function":return fe;case"number":return Vo;case"object":return Xe;case"string":return G;case"string[]":return DU;case"object[]":return o=>Zn(o,Xe);case"regexp":return o=>qe(o,RegExp);default:return gt}})();return o=>Pa(o,n,`The value must be a ${e}.`)},jD=e=>G(e.processor),l5=(e,n)=>{const o=ba(n.message)?"":`. ${n.message}`;return e+o},i5=e=>e.valid,Pa=(e,n,o="")=>{const r=n(e);return ft(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},MU=(e,n,o)=>{if(!Mn(n)){const r=Pa(n,o);if(i5(r))return r.value;console.error(l5(`Invalid default value passed for the "${e}" option`,r))}},NU=(e,n)=>{const o={},r={},c=(R,L,Q)=>{const te=Pa(L,Q);return i5(te)?(r[R]=te.value,!0):(console.warn(l5(`Invalid value passed for the ${R} option`,te)),!1)},u=(R,L)=>{const Q=jD(L)?RU(L.processor):L.processor,te=MU(R,L.default,Q);o[R]={...L,default:te,processor:Q},Wo(r,R).orThunk(()=>Wo(n,R)).each(ee=>c(R,ee,Q))},f=R=>_n(o,R);return{register:u,isRegistered:f,get:R=>Wo(r,R).orThunk(()=>Wo(o,R).map(L=>L.default)).getOrUndefined(),set:(R,L)=>{if(f(R)){const Q=o[R];return Q.immutable?(console.error(`"${R}" is an immutable option and cannot be updated`),!1):c(R,L,Q.processor)}else return console.warn(`"${R}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:R=>{const L=f(R);return L&&delete r[R],L},isSet:R=>_n(r,R)}},GD=["design","readonly"],qD=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&gb(e,u.editorReadOnly),n.set(r),l_(e,r)},KD=(e,n,o,r)=>{if(r!==o.get()){if(!_n(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?qD(e,o,n,r):e.on("init",()=>qD(e,o,n,r))}},BU=(e,n,o)=>{if(Tt(GD,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},$U=e=>{const n=xc("design"),o=xc({design:{activate:jt,deactivate:jt,editorReadOnly:!1},readonly:{activate:jt,deactivate:jt,editorReadOnly:!0}});return o5(e),OU(e),{isReadOnly:()=>Kg(e),set:r=>KD(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(BU(o.get(),r,c))}}},YD=Qe.each,XD=Qe.explode,PU={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u5=Qe.makeMap("alt,ctrl,shift,meta,access"),IU=e=>e in u5,FU=e=>{const n={},o=Io.os.isMacOS()||Io.os.isiOS();YD(XD(e.toLowerCase(),"+"),u=>{IU(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=PU[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in u5)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class vb{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(YD(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return YD(XD(Qe.trim(n)),b=>{const w=u.createShortcut(b,o,f,c);u.shortcuts[w.id]=w}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Qe.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Qe.map(XD(n,">"),FU);return u[u.length-1]=Qe.extend(u[u.length-1],{func:r,scope:c||this.editor}),Qe.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const qm=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},w=(N,R)=>(L,Q)=>{N[L.toLowerCase()]={...Q,type:R}},k=(N,R)=>r[N.toLowerCase()]=R;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(n,"menuitem"),addNestedMenuItem:w(n,"nestedmenuitem"),addToggleMenuItem:w(n,"togglemenuitem"),addAutocompleter:w(o,"autocompleter"),addContextMenu:w(c,"contextmenu"),addContextToolbar:w(u,"contexttoolbar"),addContextForm:w(u,"contextform"),addSidebar:w(f,"sidebar"),addView:w(b,"views"),addIcon:k,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},LU=()=>{const e=qm();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},yb=Vs.DOM,d5=Qe.extend,HU=Qe.each;class Pk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,d5(this,c5);const c=this;this.id=n,this.hidden=!1;const u=Q9(r.defaultOptions,o);this.options=NU(c,u),bE(c);const f=this.options.get;f("deprecation_warnings")&&n8(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const w=f("base_url");w&&r._setBaseUrl(w),this.baseUri=r.baseURI;const k=iv(c);k&&(ji.ScriptLoader._setReferrerPolicy(k),Vs.DOM.styleSheetLoader._setReferrerPolicy(k));const N=Rh(c);Pe(N)&&Vs.DOM.styleSheetLoader._setContentCssCors(N),Rl.languageLoad=f("language_load"),Rl.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new ld(J2(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=pg(c),this.hasVisual=OE(c),this.shortcuts=new vb(this),this.editorCommands=new t5(this),vZ(this);const R=f("cache_suffix");R&&(Io.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:LU(),styleSheetLoader:void 0,show:jt,hide:jt,setEnabled:jt,isEnabled:gt},this.mode=$U(c),r.dispatch("SetupEditor",{editor:this});const L=hS(c);fe(L)&&L.call(c,c)}render(){q9(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Jh(this)}translate(n){return Ku.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Pe(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:gt,default:o})),!c.isSet(n)&&!Mn(o)?o:c.get(n)}hasPlugin(n,o){return Tt(l1(this),n)?o?tm.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(yb.show(n.getContainer()),yb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(yb.hide(n.getContainer()),yb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=bm(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,bm(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=yb.getParent(o.id,"form");b&&HU(b.elements,w=>w.name===o.id?(w.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return CA(this,n,o)}getContent(n){return EN(this,n)}insertContent(n,o){o&&(n=d5({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?CA(this,this.startContent,{format:"raw"}):CA(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||yb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=yb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=pS(c);return fe(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||Xe(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){BD(this,n)}remove(){a8(this)}destroy(n){c8(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const L0=Vs.DOM,Ik=Qe.each;let m5=!1,Fk,ou=[];const Lk=e=>{const n=e.type;Ik(Sp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},f5=e=>{if(e!==m5){const n=Vs.DOM;e?(n.bind(window,"resize",Lk),n.bind(window,"scroll",Lk)):(n.unbind(window,"resize",Lk),n.unbind(window,"scroll",Lk)),m5=e}},g5=e=>{const n=ou;return ou=rn(ou,o=>e!==o),Sp.activeEditor===e&&(Sp.activeEditor=ou.length>0?ou[0]:null),Sp.focusedEditor===e&&(Sp.focusedEditor=null),n.length!==ou.length},VU=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(g5(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},zU=document.compatMode!=="CSS1Compat",Sp={...WD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.2",releaseDate:"2023-04-26",i18n:Ku,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=ld.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const w=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){w.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new ld(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new ld(e.baseURL),e.suffix=o,M_(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&ht(r,(c,u)=>{Rl.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Qe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(N,R)=>N.inline&&R.tagName.toLowerCase()in r,u=N=>{let R=N.id;return R||(R=Wo(N,"name").filter(L=>!L0.get(L)).getOrThunk(L0.uniqueId),N.setAttribute("id",R)),R},f=N=>{const R=e[N];if(R)return R.apply(n,[])},b=N=>Io.browser.isIE()||Io.browser.isEdge()?(pC("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):zU?(pC("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):G(N.selector)?L0.select(N.selector):Pe(N.target)?[N.target]:[];let w=N=>{o=N};const k=()=>{let N=0;const R=[];let L;const Q=(te,j,ee)=>{const ve=new Pk(te,j,n);R.push(ve),ve.on("init",()=>{++N===L.length&&w(R)}),ve.targetElm=ve.targetElm||ee,ve.render()};L0.unbind(window,"ready",k),f("onpageload"),L=rr(b(e)),Qe.each(L,te=>{VU(n.get(te.id))}),L=Qe.grep(L,te=>!n.get(te.id)),L.length===0?w([]):Ik(L,te=>{c(e,te)?pC("Could not initialize inline editor on invalid inline target element",te):Q(u(te),e,te)})};return L0.bind(window,"ready",k),new Promise(N=>{o?N(o):w=R=>{N(R)}})},get(e){return arguments.length===0?ou.slice(0):G(e)?ls(ou,n=>n.id===e).getOr(null):Vo(e)&&ou[e]?ou[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&ou.push(e),f5(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Fk||(Fk=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Fk))),e},createEditor(e,n){return this.add(new Pk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=ou.length-1;r>=0;r--)n.remove(ou[r]);return}if(G(e)){Ik(L0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,q(n.get(o.id))?null:(g5(o)&&n.dispatch("RemoveEditor",{editor:o}),ou.length===0&&window.removeEventListener("beforeunload",Fk),o.remove(),f5(ou.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Xe(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new Pk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Ik(ou,e=>{e.save()})},addI18n:(e,n)=>{Ku.add(e,n)},translate:e=>Ku.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ld(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ld(this.baseURL)}};Sp.setup();const UU=(()=>{const e=Qs(),n=u=>({items:u,types:xs(u),getType:f=>Wo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),h5=Math.min,H0=Math.max,Hk=Math.round,p5=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,w=n.h,k=(o||"").split("");return k[0]==="b"&&(c+=w),k[1]==="r"&&(r+=b),k[0]==="c"&&(c+=Hk(w/2)),k[1]==="c"&&(r+=Hk(b/2)),k[3]==="b"&&(c-=f),k[4]==="r"&&(r-=u),k[3]==="c"&&(c-=Hk(f/2)),k[4]==="c"&&(r-=Hk(u/2)),V0(r,c,u,f)},WU=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=p5(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},ZU=(e,n,o)=>V0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),jU=(e,n)=>{const o=H0(e.x,n.x),r=H0(e.y,n.y),c=h5(e.x+e.w,n.x+n.w),u=h5(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:V0(o,r,c-o,u-r)},GU=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,w=n.y+n.h,k=H0(0,n.x-r),N=H0(0,n.y-c),R=H0(0,u-b),L=H0(0,f-w);return r+=k,c+=N,o&&(u+=k,f+=N,r-=R,c-=L),u-=R,f-=L,V0(r,c,u-r,f-c)},V0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),qU={inflate:ZU,relativePosition:p5,findBestRelativePosition:WU,intersect:jU,clamp:GU,create:V0,fromClientRect:e=>V0(e.left,e.top,e.width,e.height)},KU=(e,n,o=1e3)=>{let r=!1,c=null;const u=k=>(...N)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),k.apply(null,N))},f=u(e),b=u(n);return{start:(...k)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,k),o))},resolve:f,reject:b}},YU=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,w=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const k=new Promise((N,R)=>{const L=KU(N,R);n[u]=L.resolve,ji.ScriptLoader.loadScript(f).then(()=>L.start(w),()=>L.reject(b))});return e[u]=k,k}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),XU=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let z0;try{const e="__storage_test__";z0=window.localStorage,z0.setItem(e,e),z0.removeItem(e)}catch{z0=XU()}var JU=z0;const QU={geom:{Rect:qU},util:{Delay:hr,Tools:Qe,VK:on,URI:ld,EventDispatcher:UD,Observable:WD,I18n:Ku,LocalStorage:JU,ImageUploader:w8},dom:{EventUtils:rc,TreeWalker:ia,TextSeeker:dg,DOMUtils:Vs,ScriptLoader:ji,RangeUtils:Mg,Serializer:yA,StyleSheetLoader:Ld,ControlSelection:M1,BookmarkManager:Af,Selection:pA,Event:rc.Event},html:{Styles:Em,Entities:Dl,Node:Mi,Schema:ai,DomParser:nb,Writer:B3,Serializer:Qh},Env:Io,AddOnManager:Rl,Annotator:Di,Formatter:ud,UndoManager:OA,EditorCommands:t5,WindowManager:hC,NotificationManager:gC,EditorObservable:c5,Shortcuts:vb,Editor:Pk,FocusManager:Qv,EditorManager:Sp,DOM:Vs.DOM,ScriptLoader:ji.ScriptLoader,PluginManager:tm,ThemeManager:id,ModelManager:d0,IconManager:CT,Resource:YU,FakeClipboard:UU,trim:Qe.trim,isArray:Qe.isArray,is:Qe.is,toArray:Qe.toArray,makeMap:Qe.makeMap,each:Qe.each,map:Qe.map,grep:Qe.grep,inArray:Qe.inArray,extend:Qe.extend,walk:Qe.walk,resolve:Qe.resolve,explode:Qe.explode,_addCacheSuffix:Qe._addCacheSuffix},b5=Qe.extend(Sp,QU),eW=e=>{try{ct.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(b5),eW(b5)})()})(tq);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var ct=tinymce.util.Tools.resolve("tinymce.ModelManager");const En=(i,m,h)=>{var v;return h(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},sn=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&En(i,String,(h,v)=>v.isPrototypeOf(h))?"string":m},pt=i=>m=>sn(m)===i,Rt=i=>m=>typeof m===i,Jt=i=>m=>i===m,Hn=pt("string"),_t=pt("object"),Zt=pt("array"),Wn=Jt(null),vn=Rt("boolean"),un=Jt(void 0),Qt=i=>i==null,dt=i=>!Qt(i),Ht=Rt("function"),it=Rt("number"),ot=()=>{},Sn=(i,m)=>(...h)=>i(m.apply(null,h)),qe=(i,m)=>h=>i(m(h)),G=i=>()=>i,Xe=i=>i,Nt=(i,m)=>i===m;function at(i,...m){return(...h)=>{const v=m.concat(h);return i.apply(null,v)}}const q=i=>m=>!i(m),ft=i=>()=>{throw new Error(i)},Mn=i=>i(),Bt=G(!1),Pe=G(!0);class fe{constructor(m,h){this.tag=m,this.value=h}static some(m){return new fe(!0,m)}static none(){return fe.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?fe.some(m(this.value)):fe.none()}bind(m){return this.tag?m(this.value):fe.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:fe.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return dt(m)?fe.some(m):fe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}fe.singletonNone=new fe(!1);const Vo=Array.prototype.slice,Zn=Array.prototype.indexOf,jt=Array.prototype.push,O=(i,m)=>Zn.call(i,m),Eo=(i,m)=>O(i,m)>-1,nt=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];if(m(T,h))return!0}return!1},No=(i,m)=>{const h=[];for(let v=0;v<i;v++)h.push(m(v));return h},dn=(i,m)=>{const h=i.length,v=new Array(h);for(let T=0;T<h;T++){const A=i[T];v[T]=m(A,T)}return v},je=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];m(T,h)}},po=(i,m)=>{for(let h=i.length-1;h>=0;h--){const v=i[h];m(v,h)}},Xo=(i,m)=>{const h=[],v=[];for(let T=0,A=i.length;T<A;T++){const P=i[T];(m(P,T)?h:v).push(P)}return{pass:h,fail:v}},Bo=(i,m)=>{const h=[];for(let v=0,T=i.length;v<T;v++){const A=i[v];m(A,v)&&h.push(A)}return h},Ps=(i,m,h)=>(po(i,(v,T)=>{h=m(h,v,T)}),h),_e=(i,m,h)=>(je(i,(v,T)=>{h=m(h,v,T)}),h),gt=(i,m,h)=>{for(let v=0,T=i.length;v<T;v++){const A=i[v];if(m(A,v))return fe.some(A);if(h(A,v))break}return fe.none()},H=(i,m)=>gt(i,m,Bt),Hr=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];if(m(T,h))return fe.some(h)}return fe.none()},Fn=i=>{const m=[];for(let h=0,v=i.length;h<v;++h){if(!Zt(i[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+i);jt.apply(m,i[h])}return m},ms=(i,m)=>Fn(dn(i,m)),In=(i,m)=>{for(let h=0,v=i.length;h<v;++h){const T=i[h];if(m(T,h)!==!0)return!1}return!0},js=i=>{const m=Vo.call(i,0);return m.reverse(),m},Tt=(i,m)=>{const h={};for(let v=0,T=i.length;v<T;v++){const A=i[v];h[String(A)]=m(A,v)}return h},$t=(i,m)=>{const h=Vo.call(i,0);return h.sort(m),h},Vt=(i,m)=>m>=0&&m<i.length?fe.some(i[m]):fe.none(),De=i=>Vt(i,0),Gs=i=>Vt(i,i.length-1),cs=(i,m)=>{for(let h=0;h<i.length;h++){const v=m(i[h],h);if(v.isSome())return v}return fe.none()},rn=Object.keys,Ea=Object.hasOwnProperty,zo=(i,m)=>{const h=rn(i);for(let v=0,T=h.length;v<T;v++){const A=h[v],P=i[A];m(P,A)}},_a=(i,m)=>ls(i,(h,v)=>({k:v,v:m(h,v)})),ls=(i,m)=>{const h={};return zo(i,(v,T)=>{const A=m(v,T);h[A.k]=A.v}),h},Ms=i=>(m,h)=>{i[h]=m},Wr=(i,m,h,v)=>{zo(i,(T,A)=>{(m(T,A)?h:v)(T,A)})},ur=(i,m)=>{const h={};return Wr(i,m,Ms(h),ot),h},Jo=(i,m)=>{const h=[];return zo(i,(v,T)=>{h.push(m(v,T))}),h},Uo=i=>Jo(i,Xe),tt=(i,m)=>Ye(i,m)?fe.from(i[m]):fe.none(),Ye=(i,m)=>Ea.call(i,m),qt=(i,m)=>Ye(i,m)&&i[m]!==void 0&&i[m]!==null,en=i=>{for(const m in i)if(Ea.call(i,m))return!1;return!0},Bn=typeof window<"u"?window:Function("return this;")(),Yt=(i,m)=>{let h=m??Bn;for(let v=0;v<i.length&&h!==void 0&&h!==null;++v)h=h[i[v]];return h},Ns=(i,m)=>{const h=i.split(".");return Yt(h,m)},ga=(i,m)=>Ns(i,m),rr=(i,m)=>{const h=ga(i,m);if(h==null)throw new Error(i+" not available on this browser");return h},xs=Object.getPrototypeOf,Mr=i=>rr("HTMLElement",i),ht=i=>{const m=Ns("ownerDocument.defaultView",i);return _t(i)&&(Mr(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(xs(i).constructor.name))},so=8,ha=9,ar=11,Uc=1,Ka=3,Qo=i=>i.dom.nodeName.toLowerCase(),Ya=i=>i.dom.nodeType,pa=i=>m=>Ya(m)===i,Wo=i=>Ya(i)===so||Qo(i)==="#comment",_n=i=>Zr(i)&&ht(i.dom),Zr=pa(Uc),Oa=pa(Ka),Xa=pa(ha),Ja=pa(ar),Is=i=>m=>Zr(m)&&Qo(m)===i,dr=(i,m,h)=>{if(Hn(h)||vn(h)||it(h))i.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",i),new Error("Attribute value was not simple")},ys=(i,m,h)=>{dr(i.dom,m,h)},yr=(i,m)=>{const h=i.dom;zo(m,(v,T)=>{dr(h,T,v)})},ue=(i,m)=>{zo(m,(h,v)=>{h.fold(()=>{Re(i,v)},T=>{dr(i.dom,v,T)})})},se=(i,m)=>{const h=i.dom.getAttribute(m);return h===null?void 0:h},Be=(i,m)=>fe.from(se(i,m)),Re=(i,m)=>{i.dom.removeAttribute(m)},Xt=i=>_e(i.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),yn=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,i),new Error(T)}return Yn(v.childNodes[0])},no=(i,m)=>{const v=(m||document).createElement(i);return Yn(v)},jo=(i,m)=>{const v=(m||document).createTextNode(i);return Yn(v)},Yn=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},pe={fromHtml:yn,fromTag:no,fromText:jo,fromDom:Yn,fromPoint:(i,m,h)=>fe.from(i.dom.elementFromPoint(m,h)).map(Yn)},Fo=(i,m)=>{const h=i.dom;if(h.nodeType!==Uc)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},wr=i=>i.nodeType!==Uc&&i.nodeType!==ha&&i.nodeType!==ar||i.childElementCount===0,mr=(i,m)=>{const h=m===void 0?document:m.dom;return wr(h)?[]:dn(h.querySelectorAll(i),pe.fromDom)},Wc=(i,m)=>{const h=m===void 0?document:m.dom;return wr(h)?fe.none():fe.from(h.querySelector(i)).map(pe.fromDom)},bo=(i,m)=>i.dom===m.dom,Cl=(i,m)=>{const h=i.dom,v=m.dom;return h===v?!1:h.contains(v)},Cr=Fo,fr=i=>pe.fromDom(i.dom.ownerDocument),qs=i=>Xa(i)?i:fr(i),Ts=i=>pe.fromDom(qs(i).dom.documentElement),fs=i=>pe.fromDom(qs(i).dom.defaultView),Zc=i=>fe.from(i.dom.parentNode).map(pe.fromDom),Qa=i=>fe.from(i.dom.parentElement).map(pe.fromDom),hc=(i,m)=>{const h=Ht(m)?m:Bt;let v=i.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const A=v.parentNode,P=pe.fromDom(A);if(T.push(P),h(P)===!0)break;v=A}return T},ol=i=>fe.from(i.dom.previousSibling).map(pe.fromDom),sl=i=>fe.from(i.dom.nextSibling).map(pe.fromDom),Lo=i=>dn(i.dom.childNodes,pe.fromDom),ba=(i,m)=>{const h=i.dom.childNodes;return fe.from(h[m]).map(pe.fromDom)},Ac=i=>ba(i,0),pc=(i,m)=>{Zc(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},Aa=(i,m)=>{sl(i).fold(()=>{Zc(i).each(T=>{_s(T,m)})},v=>{pc(v,m)})},Sr=(i,m)=>{Ac(i).fold(()=>{_s(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},_s=(i,m)=>{i.dom.appendChild(m.dom)},au=(i,m,h)=>{ba(i,h).fold(()=>{_s(i,m)},v=>{pc(v,m)})},Kl=(i,m)=>{pc(i,m),_s(m,i)},es=(i,m)=>{je(m,(h,v)=>{const T=v===0?i:m[v-1];Aa(T,h)})},sa=(i,m)=>{je(m,h=>{_s(i,h)})},va=i=>{i.dom.textContent="",je(Lo(i),m=>{Ks(m)})},Ks=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Yl=i=>{const m=Lo(i);m.length>0&&es(i,m),Ks(i)},ec=(i,m)=>pe.fromDom(i.dom.cloneNode(m)),ra=i=>ec(i,!1),bc=i=>ec(i,!0),vi=(i,m)=>{const h=pe.fromTag(m),v=Xt(i);return yr(h,v),h},Sl=(i,m)=>{const h=vi(i,m),v=Lo(bc(i));return sa(h,v),h},yi=(i,m)=>{const h=vi(i,m);Aa(i,h);const v=Lo(i);return sa(h,v),Ks(i),h},ya=["tfoot","thead","tbody","colgroup"],Dc=i=>Eo(ya,i),Xl=(i,m)=>({rows:i,columns:m}),jc=(i,m)=>({row:i,column:m}),Jl=(i,m,h)=>({element:i,rowspan:m,colspan:h}),Z=(i,m,h,v)=>({element:i,rowspan:m,colspan:h,isNew:v}),le=(i,m,h,v,T,A)=>({element:i,rowspan:m,colspan:h,row:v,column:T,isLocked:A}),be=(i,m,h)=>({element:i,cells:m,section:h}),$e=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),rt=(i,m,h)=>({element:i,isNew:m,isLocked:h}),wn=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),os=(i,m,h,v)=>({startRow:i,startCol:m,finishRow:h,finishCol:v}),xr=(i,m,h)=>({element:i,colspan:m,column:h}),wo=(i,m)=>({element:i,columns:m}),Tr=i=>Ja(i)&&dt(i.dom.host),$o=Ht(Element.prototype.attachShadow)&&Ht(Node.prototype.getRootNode),Ws=G($o),Rc=$o?i=>pe.fromDom(i.dom.getRootNode()):qs,vc=i=>{const m=Rc(i);return Tr(m)?fe.some(m):fe.none()},Vn=i=>pe.fromDom(i.dom.host),Io=i=>{if(Ws()&&dt(i.target)){const m=pe.fromDom(i.target);if(Zr(m)&&jr(m)&&i.composed&&i.composedPath){const h=i.composedPath();if(h)return De(h)}}return fe.from(i.target)},jr=i=>dt(i.dom.shadowRoot),$=i=>{const m=Oa(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return vc(pe.fromDom(m)).fold(()=>h.body.contains(m),qe($,Vn))},K=()=>ne(pe.fromDom(document)),ne=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return pe.fromDom(m)},Ae=(i,m,h)=>Bo(hc(i,h),m),Pt=(i,m)=>Bo(Lo(i),m),Xn=(i,m)=>{let h=[];return je(Lo(i),v=>{m(v)&&(h=h.concat([v])),h=h.concat(Xn(v,m))}),h},Kt=(i,m,h)=>Ae(i,v=>Fo(v,m),h),Nr=(i,m)=>Pt(i,h=>Fo(h,m)),Gr=(i,m)=>mr(m,i);var Qe=(i,m,h,v,T)=>i(h,v)?fe.some(h):Ht(T)&&T(h)?fe.none():m(h,v,T);const Br=(i,m,h)=>{let v=i.dom;const T=Ht(h)?h:Bt;for(;v.parentNode;){v=v.parentNode;const A=pe.fromDom(v);if(m(A))return fe.some(A);if(T(A))break}return fe.none()},Ys=(i,m,h)=>Qe((T,A)=>A(T),Br,i,m,h),qr=(i,m)=>{const h=T=>m(pe.fromDom(T));return H(i.dom.childNodes,h).map(pe.fromDom)},Cd=(i,m)=>{const h=v=>{for(let T=0;T<v.childNodes.length;T++){const A=pe.fromDom(v.childNodes[T]);if(m(A))return fe.some(A);const P=h(v.childNodes[T]);if(P.isSome())return P}return fe.none()};return h(i.dom)},mo=(i,m,h)=>Br(i,v=>Fo(v,m),h),Y=(i,m)=>qr(i,h=>Fo(h,m)),oe=(i,m)=>Wc(m,i),Se=(i,m,h)=>Qe((T,A)=>Fo(T,A),mo,i,m,h),Le=(i,m,h=Nt)=>i.exists(v=>h(v,m)),tn=i=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(h);return m},_o=(i,m)=>i!=null?m(i):fe.none(),Fs=(i,m)=>i?fe.some(m):fe.none(),vo=(i,m,h)=>m===""||i.length>=m.length&&i.substr(h,h+m.length)===m,Bs=(i,m,h=0,v)=>{const T=i.indexOf(m,h);return T!==-1?un(v)?!0:T+m.length<=v:!1},aa=(i,m)=>vo(i,m,0),ws=(i,m)=>vo(i,m,i.length-m.length),Gc=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),hs=i=>i.length>0,ca=i=>{const m=parseFloat(i);return isNaN(m)?fe.none():fe.some(m)},Xs=i=>i.style!==void 0&&Ht(i.style.getPropertyValue),Pl=(i,m,h)=>{if(!Hn(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",i),new Error("CSS value must be a string: "+h);Xs(i)&&i.style.setProperty(m,h)},Ii=(i,m)=>{Xs(i)&&i.style.removeProperty(m)},Os=(i,m,h)=>{const v=i.dom;Pl(v,m,h)},wc=(i,m)=>{const h=i.dom;zo(m,(v,T)=>{Pl(h,T,v)})},Il=(i,m)=>{const h=i.dom,T=window.getComputedStyle(h).getPropertyValue(m);return T===""&&!$(i)?Sd(h,m):T},Sd=(i,m)=>Xs(i)?i.style.getPropertyValue(m):"",wi=(i,m)=>{const h=i.dom,v=Sd(h,m);return fe.from(v).filter(T=>T.length>0)},rl=(i,m)=>{const h=i.dom;Ii(h,m),Le(Be(i,"style").map(Gc),"")&&Re(i,"style")},Vr=(i,m)=>{const h=i.dom,v=m.dom;Xs(h)&&Xs(v)&&(v.style.cssText=h.style.cssText)},tc=(i,m,h=0)=>Be(i,m).map(v=>parseInt(v,10)).getOr(h),Mc=(i,m)=>tc(i,m,1),al=i=>Is("col")(i)?tc(i,"span",1)>1:Mc(i,"colspan")>1,La=i=>Mc(i,"rowspan")>1,kr=(i,m)=>parseInt(Il(i,m),10),qc=G(10),um=G(10),cu=(i,m)=>lu(i,m,Pe),lu=(i,m,h)=>ms(Lo(i),v=>Fo(v,m)?h(v)?[v]:[]:lu(v,m,h)),Qm=(i,m,h=Bt)=>{if(h(m))return fe.none();if(Eo(i,Qo(m)))return fe.some(m);const v=T=>Fo(T,"table")||h(T);return mo(m,i.join(","),v)},xl=(i,m)=>Qm(["td","th"],i,m),iu=i=>cu(i,"th,td"),xd=i=>Fo(i,"colgroup")?Nr(i,"col"):ms(Pu(i),m=>Nr(m,"col")),$r=(i,m)=>Se(i,"table",m),dm=i=>cu(i,"tr"),Pu=i=>$r(i).fold(G([]),m=>Nr(m,"colgroup")),Iu=(i,m)=>dn(i,h=>{if(Qo(h)==="colgroup"){const v=dn(xd(h),T=>{const A=tc(T,"span",1);return Jl(T,1,A)});return be(h,v,"colgroup")}else{const v=dn(iu(h),T=>{const A=tc(T,"rowspan",1),P=tc(T,"colspan",1);return Jl(T,A,P)});return be(h,v,m(h))}}),Td=i=>Zc(i).map(m=>{const h=Qo(m);return Dc(h)?h:"tbody"}).getOr("tbody"),kd=i=>{const m=dm(i),v=[...Pu(i),...m];return Iu(v,Td)},Ed=(i,m)=>Iu(i,()=>m),Fu=i=>{let m=!1,h;return(...v)=>(m||(m=!0,h=i.apply(null,v)),h)},ef=(i,m,h,v)=>{const T=i.isiOS()&&/ipad/i.test(h)===!0,A=i.isiOS()&&!T,P=i.isiOS()||i.isAndroid(),U=P||v("(pointer:coarse)"),J=T||!A&&P&&v("(min-device-width:768px)"),ae=A||P&&!J,Ce=m.isSafari()&&i.isiOS()&&/safari/i.test(h)===!1,lt=!ae&&!J&&!Ce;return{isiPad:G(T),isiPhone:G(A),isTablet:G(J),isPhone:G(ae),isTouch:G(U),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:G(Ce),isDesktop:G(lt)}},tf=(i,m)=>{for(let h=0;h<i.length;h++){const v=i[h];if(v.test(m))return v}},uu=(i,m)=>{const h=tf(i,m);if(!h)return{major:0,minor:0};const v=T=>Number(m.replace(h,"$"+T));return _d(v(1),v(2))},Ep=(i,m)=>{const h=String(m).toLowerCase();return i.length===0?re():uu(i,h)},re=()=>_d(0,0),_d=(i,m)=>({major:i,minor:m}),Nc={nu:_d,detect:Ep,unknown:re},Gf=(i,m)=>cs(m.brands,h=>{const v=h.brand.toLowerCase();return H(i,T=>{var A;return v===((A=T.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(T=>({current:T.name,version:Nc.nu(parseInt(h.version,10),0)}))}),_p=(i,m)=>{const h=String(m).toLowerCase();return H(i,v=>v.search(h))},Op=(i,m)=>_p(i,m).map(h=>{const v=Nc.detect(h.versionRegexes,m);return{current:h.name,version:v}}),ss=(i,m)=>_p(i,m).map(h=>{const v=Nc.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Fl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Cc=i=>m=>Bs(m,i),cl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>Bs(i,"edge/")&&Bs(i,"chrome")&&Bs(i,"safari")&&Bs(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fl],search:i=>Bs(i,"chrome")&&!Bs(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>Bs(i,"msie")||Bs(i,"trident")},{name:"Opera",versionRegexes:[Fl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Cc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Cc("firefox")},{name:"Safari",versionRegexes:[Fl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(Bs(i,"safari")||Bs(i,"mobile/"))&&Bs(i,"applewebkit")}],Qg=[{name:"Windows",search:Cc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>Bs(i,"iphone")||Bs(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Cc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Cc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Cc("linux"),versionRegexes:[]},{name:"Solaris",search:Cc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Cc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Cc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fi={browsers:G(cl),oses:G(Qg)},Tl="Edge",mm="Chromium",qf="IE",eh="Opera",Kc="Firefox",Od="Safari",th=()=>ll({current:void 0,version:Nc.unknown()}),ll=i=>{const m=i.current,h=i.version,v=T=>()=>m===T;return{current:m,version:h,isEdge:v(Tl),isChromium:v(mm),isIE:v(qf),isOpera:v(eh),isFirefox:v(Kc),isSafari:v(Od)}},Da={unknown:th,nu:ll,edge:G(Tl),chromium:G(mm),ie:G(qf),opera:G(eh),firefox:G(Kc),safari:G(Od)},Ad="Windows",Dd="iOS",Ll="Android",Bc="Linux",nf="macOS",of="Solaris",sf="FreeBSD",rf="ChromeOS",Ql=()=>fm({current:void 0,version:Nc.unknown()}),fm=i=>{const m=i.current,h=i.version,v=T=>()=>m===T;return{current:m,version:h,isWindows:v(Ad),isiOS:v(Dd),isAndroid:v(Ll),isMacOS:v(nf),isLinux:v(Bc),isSolaris:v(of),isFreeBSD:v(sf),isChromeOS:v(rf)}},nh={unknown:Ql,nu:fm,windows:G(Ad),ios:G(Dd),android:G(Ll),linux:G(Bc),macos:G(nf),solaris:G(of),freebsd:G(sf),chromeos:G(rf)},oh={detect:(i,m,h)=>{const v=Fi.browsers(),T=Fi.oses(),A=m.bind(J=>Gf(v,J)).orThunk(()=>Op(v,i)).fold(Da.unknown,Da.nu),P=ss(T,i).fold(nh.unknown,nh.nu),U=ef(P,A,i,h);return{browser:A,os:P,deviceType:U}}},gm=i=>window.matchMedia(i).matches;let Kf=Fu(()=>oh.detect(navigator.userAgent,fe.from(navigator.userAgentData),gm));const Li=()=>Kf(),Yf=(i,m)=>{const h=(U,J)=>{if(!it(J)&&!J.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+J);const ae=U.dom;Xs(ae)&&(ae.style[i]=J+"px")},v=U=>{const J=m(U);if(J<=0||J===null){const ae=Il(U,i);return parseFloat(ae)||0}return J},T=v,A=(U,J)=>_e(J,(ae,Ce)=>{const lt=Il(U,Ce),It=lt===void 0?0:parseInt(lt,10);return isNaN(It)?ae:ae+It},0);return{set:h,get:v,getOuter:T,aggregate:A,max:(U,J,ae)=>{const Ce=A(U,ae);return J>Ce?J-Ce:0}}},Zs=(i,m)=>ca(i).getOr(m),E=(i,m,h)=>Zs(Il(i,m),h),M=(i,m,h,v)=>{const T=E(i,`padding-${h}`,0),A=E(i,`padding-${v}`,0),P=E(i,`border-${h}-width`,0),U=E(i,`border-${v}-width`,0);return m-T-A-P-U},z=(i,m)=>{const h=i.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:M(i,v,"left","right")},ie=i=>E(i,"height",i.dom.offsetHeight),de=i=>E(i,"width",i.dom.offsetWidth),xt=i=>z(i,"content-box"),On=Yf("width",i=>i.dom.offsetWidth),jn=i=>On.get(i),fo=i=>On.getOuter(i),St=xt,gs=de,wa=(i,m,h)=>{const v=i.cells,T=v.slice(0,m),A=v.slice(m),P=T.concat(h).concat(A);return Xf(i,P)},kl=(i,m,h)=>wa(i,m,[h]),hm=(i,m,h)=>{const v=i.cells;v[m]=h},Xf=(i,m)=>wn(i.element,m,i.section,i.isNew),Ci=(i,m)=>{const h=i.cells,v=dn(h,m);return wn(i.element,v,i.section,i.isNew)},El=(i,m)=>i.cells[m],$c=(i,m)=>El(i,m).element,Hl=i=>i.cells.length,Ha=i=>{const m=Xo(i,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},Eb=(i,m,h)=>{const v=dn(i.cells,h);return wn(m(i.element),v,i.section,!0)},is="data-snooker-locked-cols",Lu=i=>Be(i,is).bind(m=>fe.from(m.match(/\d+/g))).map(m=>Tt(m,Pe)),Rd=i=>{const m=_e(Ha(i).rows,(v,T)=>(je(T.cells,(A,P)=>{A.isLocked&&(v[P]=!0)}),v),{}),h=Jo(m,(v,T)=>parseInt(T,10));return $t(h)},Pr=(i,m)=>i+","+m,_b=(i,m,h)=>fe.from(i.access[Pr(m,h)]),X0=(i,m,h)=>{const v=Hu(i,T=>h(m,T.element));return v.length>0?fe.some(v[0]):fe.none()},Hu=(i,m)=>{const h=ms(i.all,v=>v.cells);return Bo(h,m)},$s=i=>{const m={};let h=0;return je(i.cells,v=>{const T=v.colspan;No(T,A=>{const P=h+A;m[P]=xr(v.element,T,P)}),h+=T}),m},Ls=i=>{const m={},h=[],T=De(i).map(Et=>Et.element).bind($r).bind(Lu).getOr({});let A=0,P=0,U=0;const{pass:J,fail:ae}=Xo(i,Et=>Et.section==="colgroup");je(ae,Et=>{const Ge=[];je(Et.cells,At=>{let We=0;for(;m[Pr(U,We)]!==void 0;)We++;const an=qt(T,We.toString()),Ln=le(At.element,At.rowspan,At.colspan,U,We,an);for(let to=0;to<At.colspan;to++)for(let er=0;er<At.rowspan;er++){const dc=U+er,ta=We+to,Wl=Pr(dc,ta);m[Wl]=Ln,P=Math.max(P,ta+1)}Ge.push(Ln)}),A++,h.push(be(Et.element,Ge,Et.section)),U++});const{columns:Ce,colgroups:lt}=Gs(J).map(Et=>{const Ge=$s(Et);return{colgroups:[wo(Et.element,Uo(Ge))],columns:Ge}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Xl(A,P),access:m,all:h,columns:Ce,colgroups:lt}},Co={fromTable:i=>{const m=kd(i);return Ls(m)},generate:Ls,getAt:_b,findItem:X0,filterItems:Hu,justCells:i=>ms(i.all,m=>m.cells),justColumns:i=>Uo(i.columns),hasColumns:i=>rn(i.columns).length>0,getColumnAt:(i,m)=>fe.from(i.columns[m])},sh=(i,m=Pe)=>{const h=i.grid,v=No(h.columns,Xe),T=No(h.rows,Xe);return dn(v,A=>Ap(()=>ms(T,ae=>Co.getAt(i,ae,A).filter(Ce=>Ce.column===A).toArray()),ae=>ae.colspan===1&&m(ae.element),()=>Co.getAt(i,0,A)))},Ap=(i,m,h)=>{const v=i();return H(v,m).orThunk(()=>fe.from(v[0]).orThunk(h)).map(P=>P.element)},J0=i=>{const m=i.grid,h=No(m.rows,Xe),v=No(m.columns,Xe);return dn(h,T=>Ap(()=>ms(v,J=>Co.getAt(i,T,J).filter(ae=>ae.row===T).fold(G([]),ae=>[ae])),J=>J.rowspan===1,()=>Co.getAt(i,T,0)))},Q0=(i,m)=>{if(m<0||m>=i.length-1)return fe.none();const h=i[m].fold(()=>{const T=js(i.slice(0,m));return cs(T,(A,P)=>A.map(U=>({value:U,delta:P+1})))},T=>fe.some({value:T,delta:0})),v=i[m+1].fold(()=>{const T=i.slice(m+1);return cs(T,(A,P)=>A.map(U=>({value:U,delta:P+1})))},T=>fe.some({value:T,delta:1}));return h.bind(T=>v.map(A=>{const P=A.delta+T.delta;return Math.abs(A.value-T.value)/P}))},Jf=(i,m)=>h=>Ob(h)==="rtl"?m:i,Ob=i=>Il(i,"direction")==="rtl"?"rtl":"ltr",Qf=Yf("height",i=>{const m=i.dom;return $(i)?m.getBoundingClientRect().height:m.offsetHeight}),Si=i=>Qf.get(i),Ab=i=>Qf.getOuter(i),rh=ie,Db=(i,m)=>({left:i,top:m,translate:(v,T)=>Db(i+v,m+T)}),Hi=Db,Dp=i=>{const m=i.getBoundingClientRect();return Hi(m.left,m.top)},Vi=(i,m)=>i!==void 0?i:m!==void 0?m:0,af=i=>{const m=i.dom.ownerDocument,h=m.body,v=m.defaultView,T=m.documentElement;if(h===i.dom)return Hi(h.offsetLeft,h.offsetTop);const A=Vi(v==null?void 0:v.pageYOffset,T.scrollTop),P=Vi(v==null?void 0:v.pageXOffset,T.scrollLeft),U=Vi(T.clientTop,h.clientTop),J=Vi(T.clientLeft,h.clientLeft);return Rb(i).translate(P-J,A-U)},Rb=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?Hi(v.offsetLeft,v.offsetTop):$(i)?Dp(m):Hi(0,0)},ah=(i,m)=>({row:i,y:m}),Rp=(i,m)=>({col:i,x:m}),Mp=i=>af(i).left+fo(i),nc=i=>af(i).left,Np=(i,m)=>Rp(i,nc(m)),ia=(i,m)=>Rp(i,Mp(m)),$d=i=>af(i).top,il=(i,m)=>ah(i,$d(m)),ze=(i,m)=>ah(i,$d(m)+Ab(m)),zi=(i,m,h)=>{if(h.length===0)return[];const v=dn(h.slice(1),(A,P)=>A.map(U=>i(P,U))),T=h[h.length-1].map(A=>m(h.length-1,A));return v.concat([T])},ei=i=>-i,Vu={delta:Xe,positions:i=>zi(il,ze,i),edge:$d},oc=Jf({delta:Xe,edge:nc,positions:i=>zi(Np,ia,i)},{delta:ei,edge:Mp,positions:i=>zi(ia,Np,i)}),zu={delta:(i,m)=>oc(m).delta(i,m),positions:(i,m)=>oc(m).positions(i,m),edge:i=>oc(i).edge(i)},xi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Va=(()=>{const i="[0-9]+",h="[eE]"+("[+-]?"+i),v="\\.",T=U=>`(?:${U})?`,P=`[+-]?(?:${["Infinity",i+v+T(i)+T(h),v+i+T(h),i+T(h)].join("|")})`;return new RegExp(`^(${P})(.*)$`)})(),bm=(i,m)=>nt(m,h=>nt(xi[h],v=>i===v)),mt=(i,m)=>fe.from(Va.exec(i)).bind(v=>{const T=Number(v[1]),A=v[2];return bm(A,m)?fe.some({value:T,unit:A}):fe.none()}),Pp=/(\d+(\.\d+)?)%/,ey=/(\d+(\.\d+)?)px|em/,Uu=Is("col"),Ui=(i,m,h)=>{const v=Qa(i).getOrThunk(()=>ne(fr(i)));return m(i)/h(v)*100},ch=(i,m)=>{Os(i,"width",m+"px")},gr=(i,m)=>{Os(i,"width",m+"%")},cf=(i,m)=>{Os(i,"height",m+"px")},Wi=i=>rh(i)+"px",oo=(i,m,h,v)=>{const T=$r(i).map(A=>{const P=h(A);return Math.floor(m/100*P)}).getOr(m);return v(i,T),T},Vl=(i,m,h,v)=>{const T=parseFloat(i);return ws(i,"%")&&Qo(m)!=="table"?oo(m,T,h,v):T},ul=i=>{const m=Wi(i);return m?Vl(m,i,Si,cf):Si(i)},_l=(i,m,h)=>{const v=h(i),T=Mc(i,m);return v/T},dl=(i,m)=>wi(i,m).orThunk(()=>Be(i,m).map(h=>h+"px")),ti=i=>dl(i,"width"),ps=i=>dl(i,"height"),Pc=i=>Ui(i,jn,St),lh=i=>Uu(i)?jn(i):gs(i),Je=i=>_l(i,"rowspan",ul),ml=i=>ti(i).bind(h=>mt(h,["fixed","relative","empty"])),eg=(i,m,h)=>{Os(i,"width",m+h)},Qr=i=>jn(i)+"px",du=i=>Ui(i,jn,St)+"%",Ip=i=>ti(i).exists(m=>Pp.test(m)),Ti=i=>ti(i).exists(m=>ey.test(m)),ty=i=>ti(i).isNone(),Wu=G(Pp),Mb=Is("col"),Ol=i=>ti(i).getOrThunk(()=>lh(i)+"px"),rs=i=>ps(i).getOrThunk(()=>Je(i)+"px"),mu=i=>dn(Co.justColumns(i),m=>fe.from(m.element)),tg=i=>{const m=Li().browser,h=m.isChromium()||m.isFirefox();return Mb(i)?h:!0},ea=(i,m,h,v,T,A)=>i.filter(v).fold(()=>A(Q0(h,m)),P=>T(P)),fl=(i,m,h,v)=>{const T=sh(i),A=Co.hasColumns(i)?mu(i):T,P=[fe.some(zu.edge(m))].concat(dn(zu.positions(T,m),J=>J.map(ae=>ae.x))),U=q(al);return dn(A,(J,ae)=>ea(J,ae,P,U,Ce=>{if(tg(Ce))return h(Ce);{const lt=_o(T[ae],Xe);return ea(lt,ae,P,U,It=>v(fe.some(jn(It))),v)}},v))},vm=i=>i.map(m=>m+"px").getOr(""),ng=(i,m)=>fl(i,m,Ol,vm),za=(i,m,h)=>fl(i,m,Pc,v=>v.fold(()=>h.minCellWidth(),T=>T/h.pixelWidth()*100)),ih=(i,m,h)=>fl(i,m,lh,v=>v.getOrThunk(h.minCellWidth)),xe=(i,m,h,v,T)=>{const A=J0(i),P=[fe.some(h.edge(m))].concat(dn(h.positions(A,m),U=>U.map(J=>J.y)));return dn(A,(U,J)=>ea(U,J,P,q(La),v,T))},Ic=(i,m,h)=>xe(i,m,h,Je,v=>v.getOrThunk(um)),lf=(i,m,h)=>xe(i,m,h,rs,vm),Sc=(i,m)=>()=>$(i)?m(i):parseFloat(wi(i,"width").getOr("0")),ni=i=>{const m=Sc(i,jn),h=G(0);return{width:m,pixelWidth:m,getWidths:(T,A)=>ih(T,i,A),getCellDelta:h,singleColumnWidth:G([0]),minCellWidth:h,setElementWidth:ot,adjustTableWidth:ot,isRelative:!0,label:"none"}},Fc=i=>{const m=Sc(i,J=>parseFloat(du(J))),h=Sc(i,jn);return{width:m,pixelWidth:h,getWidths:(J,ae)=>za(J,i,ae),getCellDelta:J=>J/h()*100,singleColumnWidth:(J,ae)=>[100-J],minCellWidth:()=>qc()/h()*100,setElementWidth:gr,adjustTableWidth:J=>{const ae=m(),Ce=J/100*ae,lt=ae+Ce;gr(i,lt)},isRelative:!0,label:"percent"}},Ca=i=>{const m=Sc(i,jn);return{width:m,pixelWidth:m,getWidths:(P,U)=>ih(P,i,U),getCellDelta:Xe,singleColumnWidth:(P,U)=>[Math.max(qc(),P+U)-P],minCellWidth:qc,setElementWidth:ch,adjustTableWidth:P=>{const U=m()+P;ch(i,U)},isRelative:!1,label:"pixel"}},ny=(i,m)=>Wu().exec(m)!==null?Fc(i):Ca(i),C={getTableSize:i=>ti(i).fold(()=>ni(i),h=>ny(i,h)),pixelSize:Ca,percentageSize:Fc,noneSize:ni},S=(i,m,h,v,T,A)=>({minRow:i,minCol:m,maxRow:h,maxCol:v,allCells:T,selectedCells:A}),F=(i,m)=>{const h=i.grid.columns;let T=i.grid.rows,A=h,P=0,U=0;const J=[],ae=[];return zo(i.access,Ce=>{if(J.push(Ce),m(Ce)){ae.push(Ce);const lt=Ce.row,It=lt+Ce.rowspan-1,Et=Ce.column,Ge=Et+Ce.colspan-1;lt<T?T=lt:It>P&&(P=It),Et<A?A=Et:Ge>U&&(U=Ge)}}),S(T,A,P,U,J,ae)},W=(i,m,h)=>{const v=i[h].element,T=pe.fromTag("td");_s(T,pe.fromTag("br")),(m?_s:Sr)(v,T)},me=(i,m,h,v)=>{const T=Bo(i,U=>U.section!=="colgroup"),A=m.grid.columns,P=m.grid.rows;for(let U=0;U<P;U++){let J=!1;for(let ae=0;ae<A;ae++)U<h.minRow||U>h.maxRow||ae<h.minCol||ae>h.maxCol||(Co.getAt(m,U,ae).filter(v).isNone()?W(T,J,U):J=!0)}},Ie=(i,m,h,v)=>{zo(h.columns,P=>{(P.column<m.minCol||P.column>m.maxCol)&&Ks(P.element)});const T=Bo(cu(i,"tr"),P=>P.dom.childElementCount===0);je(T,Ks),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&je(cu(i,"th,td"),P=>{Re(P,"rowspan"),Re(P,"colspan")}),Re(i,is),Re(i,"data-snooker-col-series"),C.getTableSize(i).adjustTableWidth(v)},bt=(i,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=ih(m,i,h),A=_e(T,(ae,Ce)=>ae+Ce,0),J=_e(T.slice(v.minCol,v.maxCol+1),(ae,Ce)=>ae+Ce,0)/A*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(J)},Gt=(i,m)=>{const h=It=>Fo(It.element,m),v=bc(i),T=kd(v),A=C.getTableSize(i),P=Co.generate(T),U=F(P,h),J="th:not("+m+"),td:not("+m+")",ae=lu(v,"th,td",It=>Fo(It,J));je(ae,Ks),me(T,P,U,h);const Ce=Co.fromTable(i),lt=bt(i,Ce,A,U);return Ie(v,U,P,lt),v},qn="Â ",ts=((i,m)=>{const h=A=>{if(!i(A))throw new Error("Can only get "+m+" value of a "+m+" node");return v(A).getOr("")},v=A=>i(A)?fe.from(A.dom.nodeValue):fe.none();return{get:h,getOption:v,set:(A,P)=>{if(!i(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=P}}})(Oa,"text"),ks=i=>ts.get(i),cr=i=>ts.getOption(i),gl=(i,m)=>ts.set(i,m),sc=i=>Qo(i)==="img"?1:cr(i).fold(()=>Lo(i).length,m=>m.length),Zu=i=>cr(i).filter(m=>m.trim().length!==0||m.indexOf(qn)>-1).isSome(),oi=i=>_n(i)&&se(i,"contenteditable")==="false",ym=["img","br"],og=i=>Zu(i)||Eo(ym,Qo(i))||oi(i),si=i=>Cd(i,og),wm=i=>dh(i,og),dh=(i,m)=>{const h=v=>{const T=Lo(v);for(let A=T.length-1;A>=0;A--){const P=T[A];if(m(P))return fe.some(P);const U=h(P);if(U.isSome())return U}return fe.none()};return h(i)},mh={scope:["row","col"]},uf=i=>()=>{const m=pe.fromTag("td",i.dom);return _s(m,pe.fromTag("br",i.dom)),m},Ra=i=>()=>pe.fromTag("col",i.dom),fu=i=>()=>pe.fromTag("colgroup",i.dom),Oo=i=>()=>pe.fromTag("tr",i.dom),Hs=(i,m,h)=>{const v=Sl(i,m);return zo(h,(T,A)=>{T===null?Re(v,A):ys(v,A,T)}),v},Yc=i=>i,As=(i,m,h)=>si(i).map(T=>{const A=h.join(","),P=Kt(T,A,U=>bo(U,i));return Ps(P,(U,J)=>{const ae=ra(J);return _s(U,ae),ae},m)}).getOr(m),fh=(i,m)=>{zo(mh,(h,v)=>Be(i,v).filter(T=>Eo(h,T)).each(T=>ys(m,v,T)))},Cm=(i,m,h)=>{const v=(P,U)=>{Vr(P.element,U),rl(U,"height"),P.colspan!==1&&rl(U,"width")},T=P=>{const U=pe.fromTag(Qo(P.element),m.dom),J=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ae=J.length>0?As(P.element,U,J):U;return _s(ae,pe.fromTag("br")),v(P,U),fh(P.element,U),i(P.element,U),U};return{col:P=>{const U=pe.fromTag(Qo(P.element),m.dom);return v(P,U),i(P.element,U),U},colgroup:fu(m),row:Oo(m),cell:T,replace:Hs,colGap:Ra(m),gap:uf(m)}},Sm=i=>({col:Ra(i),colgroup:fu(i),row:Oo(i),cell:uf(i),replace:Yc,colGap:Ra(i),gap:uf(i)}),ki=(i,m)=>{const v=(m||document).createElement("div");return v.innerHTML=i,Lo(pe.fromDom(v))},df=i=>dn(i,pe.fromDom),Nb=i=>Se(i,"[contenteditable]"),ri=(i,m=!1)=>$(i)?i.dom.isContentEditable:Nb(i).fold(G(m),h=>mf(h)==="true"),mf=i=>i.dom.contentEditable,Pd=i=>pe.fromDom(i.getBody()),gu=i=>m=>bo(m,Pd(i)),Zi=i=>{Re(i,"data-mce-style");const m=h=>Re(h,"data-mce-style");je(iu(i),m),je(xd(i),m),je(dm(i),m)},Fp=i=>pe.fromDom(i.selection.getStart()),gh=i=>i.getBoundingClientRect().width,o2=i=>i.getBoundingClientRect().height,Yk=(i,m)=>{const h=i.dom.getStyle(m,"width")||i.dom.getAttrib(m,"width");return fe.from(h).filter(hs)},zr=i=>/^(\d+(\.\d+)?)%$/.test(i),Xk=i=>/^(\d+(\.\d+)?)px$/.test(i),Id=i=>Ys(i,Is("table")).exists(ri),oy=(i,m)=>{const h=m.column,v=m.column+m.colspan-1,T=m.row,A=m.row+m.rowspan-1;return h<=i.finishCol&&v>=i.startCol&&T<=i.finishRow&&A>=i.startRow},sy=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,Ir=(i,m)=>{let h=!0;const v=at(sy,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let A=m.startCol;A<=m.finishCol;A++)h=h&&Co.getAt(i,T,A).exists(v);return h?fe.some(m):fe.none()},hl=(i,m)=>os(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),hh=(i,m,h)=>{const v=Co.findItem(i,m,bo),T=Co.findItem(i,h,bo);return v.bind(A=>T.map(P=>hl(A,P)))},sg=(i,m,h)=>hh(i,m,h).bind(v=>Ir(i,v)),s2=(i,m,h,v)=>Co.findItem(i,m,bo).bind(T=>{const A=h>0?T.row+T.rowspan-1:T.row,P=v>0?T.column+T.colspan-1:T.column;return Co.getAt(i,A+h,P+v).map(J=>J.element)}),ph=(i,m,h)=>hh(i,m,h).map(v=>{const T=Co.filterItems(i,at(oy,v));return dn(T,A=>A.element)}),Lp=(i,m)=>{const h=(v,T)=>Cl(T,v);return Co.findItem(i,m,h).map(v=>v.element)},Bb=(i,m,h)=>$r(i).bind(v=>{const T=rg(v);return s2(T,i,m,h)}),Jk=(i,m,h)=>{const v=rg(i);return ph(v,m,h)},ry=(i,m,h,v,T)=>{const A=rg(i),P=bo(i,h)?fe.some(m):Lp(A,m),U=bo(i,T)?fe.some(v):Lp(A,v);return P.bind(J=>U.bind(ae=>ph(A,J,ae)))},Hp=(i,m,h)=>{const v=rg(i);return sg(v,m,h)},rg=Co.fromTable;var Fd=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ju=()=>{const i=ae=>pe.fromDom(ae.dom.cloneNode(!1)),m=ae=>qs(ae).dom,h=ae=>Zr(ae)?Qo(ae)==="body"?!0:Eo(Fd,Qo(ae)):!1,v=ae=>Zr(ae)?Eo(["br","img","hr","input"],Qo(ae)):!1,T=ae=>Zr(ae)&&se(ae,"contenteditable")==="false",A=(ae,Ce)=>ae.dom.compareDocumentPosition(Ce.dom),P=(ae,Ce)=>{const lt=Xt(ae);yr(Ce,lt)},U=ae=>{const Ce=Qo(ae);return Eo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ce)},J=ae=>Zr(ae)?Be(ae,"lang"):fe.none();return{up:G({selector:mo,closest:Se,predicate:Br,all:hc}),down:G({selector:Gr,predicate:Xn}),styles:G({get:Il,getRaw:wi,set:Os,remove:rl}),attrs:G({get:se,set:ys,remove:Re,copyTo:P}),insert:G({before:pc,after:Aa,afterAll:es,append:_s,appendAll:sa,prepend:Sr,wrap:Kl}),remove:G({unwrap:Yl,remove:Ks}),create:G({nu:pe.fromTag,clone:i,text:pe.fromText}),query:G({comparePosition:A,prevSibling:ol,nextSibling:sl}),property:G({children:Lo,name:Qo,parent:Zc,document:m,isText:Oa,isComment:Wo,isElement:Zr,isSpecial:U,getLanguage:J,getText:ks,setText:gl,isBoundary:h,isEmptyTag:v,isNonEditable:T}),eq:bo,is:Cr}};const xm=(i,m,h,v)=>{const T=h[0],A=h.slice(1);return v(i,m,T,A)},$b=(i,m,h)=>h.length>0?xm(i,m,h,ff):fe.none(),ff=(i,m,h,v)=>{const T=m(i,h);return Ps(v,(A,P)=>{const U=m(i,P);return ay(i,A,U)},T)},ay=(i,m,h)=>m.bind(v=>h.filter(at(i.eq,v))),r2=(i,m)=>at(i.eq,m),cy=(i,m,h,v=Bt)=>{const T=[m].concat(i.up().all(m)),A=[h].concat(i.up().all(h)),P=Ce=>Hr(Ce,v).fold(()=>Ce,It=>Ce.slice(0,It+1)),U=P(T),J=P(A),ae=H(U,Ce=>nt(J,r2(i,Ce)));return{firstpath:U,secondpath:J,shared:ae}},a2=$b,ly=cy,Pb=ju(),Go=(i,m)=>a2(Pb,(h,v)=>i(v),m),xn=(i,m,h)=>ly(Pb,i,m,h),Ld=i=>mo(i,"table"),Vp=(i,m,h)=>{const v=T=>A=>h!==void 0&&h(A)||bo(A,T);return bo(i,m)?fe.some({boxes:fe.some([i]),start:i,finish:m}):Ld(i).bind(T=>Ld(m).bind(A=>{if(bo(T,A))return fe.some({boxes:Jk(T,i,m),start:i,finish:m});if(Cl(T,A)){const P=Kt(m,"td,th",v(T)),U=P.length>0?P[P.length-1]:m;return fe.some({boxes:ry(T,i,T,m,A),start:i,finish:U})}else if(Cl(A,T)){const P=Kt(i,"td,th",v(A)),U=P.length>0?P[P.length-1]:i;return fe.some({boxes:ry(A,i,T,m,A),start:i,finish:U})}else return xn(i,m).shared.bind(P=>Se(P,"table",h).bind(U=>{const J=Kt(m,"td,th",v(U)),ae=J.length>0?J[J.length-1]:m,Ce=Kt(i,"td,th",v(U)),lt=Ce.length>0?Ce[Ce.length-1]:i;return fe.some({boxes:ry(U,i,T,m,A),start:lt,finish:ae})}))}))},bh=(i,m)=>{const h=Gr(i,m);return h.length>0?fe.some(h):fe.none()},Qk=(i,m)=>H(i,h=>Fo(h,m)),Ib=(i,m,h)=>oe(i,m).bind(v=>oe(i,h).bind(T=>Go(Ld,[v,T]).map(A=>({first:v,last:T,table:A})))),Js=(i,m)=>mo(i,"table").bind(h=>oe(h,m).bind(v=>Vp(v,i).bind(T=>T.boxes.map(A=>({boxes:A,start:T.start,finish:T.finish}))))),iy=(i,m,h,v,T)=>Qk(i,T).bind(A=>Bb(A,m,h).bind(P=>Js(P,v))),c2=(i,m)=>bh(i,m),l2=(i,m,h)=>Ib(i,m,h).bind(v=>{const T=J=>bo(i,J),A="thead,tfoot,tbody,table",P=mo(v.first,A,T),U=mo(v.last,A,T);return P.bind(J=>U.bind(ae=>bo(J,ae)?Hp(v.table,v.first,v.last):fe.none()))}),et=Xe,zp=i=>{const m=(v,T)=>Be(v,T).exists(A=>parseInt(A,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&In(i,h)?fe.some(i):fe.none()},eE=(i,m,h)=>m.length<=1?fe.none():l2(i,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Hd="data-mce-selected",Fb="td["+Hd+"],th["+Hd+"]",vh="["+Hd+"]",Up="data-mce-first-selected",ag="td["+Up+"],th["+Up+"]",Tm="data-mce-last-selected",yh="td["+Tm+"],th["+Tm+"]",Fr=vh,Al={selected:Hd,selectedSelector:Fb,firstSelected:Up,firstSelectedSelector:ag,lastSelected:Tm,lastSelectedSelector:yh},wh=(i,m,h)=>({element:h,mergable:eE(m,i,Al),unmergable:zp(i),selection:et(i)}),Vd=(i,m,h)=>({element:i,clipboard:m,generators:h}),tE=(i,m,h,v)=>({selection:et(i),clipboard:h,generators:v}),Lb=i=>$r(i).bind(m=>c2(m,Al.firstSelectedSelector)).fold(G(i),m=>m[0]),km=i=>(m,h)=>{const v=Qo(m),T=v==="col"||v==="colgroup"?Lb(m):m;return Se(T,i,h)},c3=km("th,td,caption"),i2=km("th,td"),Dl=i=>df(i.model.table.getSelectedCells()),Hb=i=>Bo(Dl(i),m=>Fo(m,Al.selectedSelector)),Gu=i=>$r(i[0]).map(m=>{const h=Gt(m,Fr);return Zi(h),[h]}),nE=(i,m)=>dn(m,h=>i.selection.serializer.serialize(h.dom,{})).join(""),Ch=i=>dn(i,m=>m.dom.innerText).join(""),pl=(i,m)=>{i.on("BeforeGetContent",h=>{const v=T=>{h.preventDefault(),Gu(T).each(A=>{h.content=h.format==="text"?Ch(A):nE(i,A)})};if(h.selection===!0){const T=Hb(i);T.length>=1&&v(T)}}),i.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=Dl(i);De(v).each(T=>{$r(T).each(A=>{const P=Bo(ki(h.content),J=>Qo(J)!=="meta"),U=Is("table");if(P.length===1&&U(P[0])){h.preventDefault();const J=pe.fromDom(i.getDoc()),ae=Sm(J),Ce=Vd(T,P[0],ae);m.pasteCells(A,Ce).each(()=>{i.focus()})}})})}})},gf=(i,m)=>({element:i,offset:m}),nn=(i,m,h)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?h(m).bind(v=>nn(i,v,h).orThunk(()=>fe.some(v))):fe.none(),u2=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,Lc=(i,m)=>{const h=nn(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(h))return gf(h,u2(i,h));const v=i.property().children(h);return v.length>0?Lc(i,v[v.length-1]):gf(h,u2(i,h))},d2=Lc,uy=ju(),oE=i=>d2(uy,i),Wp=(i,m)=>{al(i)||ml(i).each(v=>{const T=v.value/2;eg(i,T,v.unit),eg(m,T,v.unit)})},ai=i=>dn(i,G(0)),Em=(i,m,h,v,T)=>T(i.slice(0,m)).concat(v).concat(T(i.slice(h))),m2=i=>(m,h,v,T)=>{if(i(v)){const A=Math.max(T,m[h]-Math.abs(v)),P=Math.abs(A-m[h]);return v>=0?P:-P}else return v},cg=m2(i=>i<0),sE=m2(Pe),f2=()=>{const i=(U,J,ae,Ce,lt)=>{const It=cg(U,J,Ce,lt);return Em(U,J,ae+1,[It,0],ai)},m=(U,J,ae,Ce)=>{const lt=(100+ae)/100,It=Math.max(Ce,(U[J]+ae)/lt);return dn(U,(Et,Ge)=>(Ge===J?It:Et/lt)-Et)},h=(U,J,ae,Ce,lt,It)=>It?m(U,J,Ce,lt):i(U,J,ae,Ce,lt);return{resizeTable:(U,J)=>U(J),clampTableDelta:cg,calcLeftEdgeDeltas:h,calcMiddleDeltas:(U,J,ae,Ce,lt,It,Et)=>h(U,ae,Ce,lt,It,Et),calcRightEdgeDeltas:(U,J,ae,Ce,lt,It)=>{if(It)return m(U,ae,Ce,lt);{const Et=cg(U,ae,Ce,lt);return ai(U.slice(0,ae)).concat([Et])}},calcRedestributedWidths:(U,J,ae,Ce)=>{if(Ce){const It=(J+ae)/J,Et=dn(U,Ge=>Ge/It);return{delta:It*100-100,newSizes:Et}}else return{delta:ae,newSizes:U}}}},Sh=()=>{const i=(P,U,J,ae,Ce)=>{const lt=ae>=0?J:U,It=sE(P,lt,ae,Ce);return Em(P,U,J+1,[It,-It],ai)};return{resizeTable:(P,U,J)=>{J&&P(U)},clampTableDelta:(P,U,J,ae,Ce)=>{if(Ce){if(J>=0)return J;{const lt=_e(P,(It,Et)=>It+Et-ae,0);return Math.max(-lt,J)}}else return cg(P,U,J,ae)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(P,U,J,ae,Ce,lt)=>i(P,J,ae,Ce,lt),calcRightEdgeDeltas:(P,U,J,ae,Ce,lt)=>{if(lt)return ai(P);{const It=ae/P.length;return dn(P,G(It))}},calcRedestributedWidths:(P,U,J,ae)=>({delta:0,newSizes:P})}},lg=i=>Co.fromTable(i).grid,Vb=Is("th"),ig=i=>In(i,m=>Vb(m.element)),zb=(i,m)=>i&&m?"sectionCells":i?"section":"cells",Zp=i=>{const m=i.section==="thead",h=Le(Ub(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:zb(m,h)}:{type:"body"}},Ub=i=>{const m=Bo(i,h=>Vb(h.element));return m.length===0?fe.some("td"):m.length===i.length?fe.some("th"):fe.none()},hf=i=>{const m=dn(i,T=>Zp(T).type),h=Eo(m,"header"),v=Eo(m,"footer");if(!h&&!v)return fe.some("body");{const T=Eo(m,"body");return h&&!T&&!v?fe.some("header"):!h&&!T&&v?fe.some("footer"):fe.none()}},qu=i=>cs(i.all,m=>{const h=Zp(m);return h.type==="header"?fe.from(h.subType):fe.none()}),rc=(i,m,h)=>rt(h(i.element,m),!0,i.isLocked),jp=(i,m)=>i.section!==m?wn(i.element,i.cells,m,i.isNew):i,g2=()=>({transformRow:jp,transformCell:(i,m,h)=>{const v=h(i.element,m),T=Qo(v)!=="td"?yi(v,"td"):v;return rt(T,i.isNew,i.isLocked)}}),Wb=()=>({transformRow:jp,transformCell:rc}),dy=()=>({transformRow:(i,m)=>jp(i,m==="thead"?"tbody":m),transformCell:rc}),zd={getTableSectionType:(i,m)=>{const h=Co.fromTable(i);switch(qu(h).getOr(m)){case"section":return g2();case"sectionCells":return Wb();case"cells":return dy()}},section:g2,sectionCells:Wb,cells:dy,fallback:()=>({transformRow:Xe,transformCell:rc})},xh=(i,m,h,v)=>{h===v?Re(i,m):ys(i,m,h)},h2=(i,m,h)=>{Gs(Nr(i,m)).fold(()=>Sr(i,h),v=>Aa(v,h))},p2=(i,m)=>{const h=Y(i,m).getOrThunk(()=>{const v=pe.fromTag(m,fr(i).dom);return m==="thead"?h2(i,"caption,colgroup",v):m==="colgroup"?h2(i,"caption",v):_s(i,v),v});return va(h),h},aE=(i,m)=>{const h=[],v=[],T=Et=>dn(Et,Ge=>{Ge.isNew&&h.push(Ge.element);const At=Ge.element;return va(At),je(Ge.cells,We=>{We.isNew&&v.push(We.element),xh(We.element,"colspan",We.colspan,1),xh(We.element,"rowspan",We.rowspan,1),_s(At,We.element)}),At}),A=Et=>ms(Et,Ge=>dn(Ge.cells,At=>(xh(At.element,"span",At.colspan,1),At.element))),P=(Et,Ge)=>{const At=p2(i,Ge),an=(Ge==="colgroup"?A:T)(Et);sa(At,an)},U=Et=>{Y(i,Et).each(Ks)},J=(Et,Ge)=>{Et.length>0?P(Et,Ge):U(Ge)},ae=[],Ce=[],lt=[],It=[];return je(m,Et=>{switch(Et.section){case"thead":ae.push(Et);break;case"tbody":Ce.push(Et);break;case"tfoot":lt.push(Et);break;case"colgroup":It.push(Et);break}}),J(It,"colgroup"),J(ae,"thead"),J(Ce,"tbody"),J(lt,"tfoot"),{newRows:h,newCells:v}},Vs=i=>dn(i,m=>{const h=ra(m.element);return je(m.cells,v=>{const T=bc(v.element);xh(T,"colspan",v.colspan,1),xh(T,"rowspan",v.rowspan,1),_s(h,T)}),h}),cE=(i,m)=>dn(i,h=>El(h,m)),lE=(i,m)=>i[m],b2=(i,m)=>{if(i.length===0)return 0;const h=i[0];return Hr(i,T=>!m(h.element,T.element)).getOr(i.length)},Zb=(i,m,h,v)=>{const T=lE(i,m),A=T.section==="colgroup",P=b2(T.cells.slice(h),v),U=A?1:b2(cE(i.slice(m),h),v);return{colspan:P,rowspan:U}},v2=(i,m)=>{const h=dn(i,T=>dn(T.cells,Bt)),v=(T,A,P,U)=>{for(let J=T;J<T+P;J++)for(let ae=A;ae<A+U;ae++)h[J][ae]=!0};return dn(i,(T,A)=>{const P=ms(T.cells,(U,J)=>{if(h[A][J]===!1){const ae=Zb(i,A,J,m);return v(A,J,ae.rowspan,ae.colspan),[Z(U.element,ae.rowspan,ae.colspan,U.isNew)]}else return[]});return $e(T.element,P,T.section,T.isNew)})},ji=(i,m,h)=>{const v=[];je(i.colgroups,T=>{const A=[];for(let P=0;P<i.grid.columns;P++){const U=Co.getColumnAt(i,P).map(J=>rt(J.element,h,!1)).getOrThunk(()=>rt(m.colGap(),!0,!1));A.push(U)}v.push(wn(T.element,A,"colgroup",h))});for(let T=0;T<i.grid.rows;T++){const A=[];for(let J=0;J<i.grid.columns;J++){const ae=Co.getAt(i,T,J).map(Ce=>rt(Ce.element,h,Ce.isLocked)).getOrThunk(()=>rt(m.gap(),!0,!1));A.push(ae)}const P=i.all[T],U=wn(P.element,A,P.section,h);v.push(U)}return v},xc=(i,m)=>ji(i,m,!1),jb=i=>v2(i,bo),_m=(i,m)=>cs(i.all,h=>H(h.cells,v=>bo(m,v.element))),ug=(i,m,h)=>{const v=dn(m.selection,A=>xl(A).bind(P=>_m(i,P)).filter(h)),T=tn(v);return Fs(T.length>0,T)},ac=(i,m,h,v,T)=>(A,P,U,J)=>{const ae=Co.fromTable(A),Ce=fe.from(J==null?void 0:J.section).getOrThunk(zd.fallback);return m(ae,P).map(It=>{const Et=xc(ae,U),Ge=i(Et,It,bo,T(U),Ce),At=Rd(Ge.grid),We=jb(Ge.grid);return{info:It,grid:We,cursor:Ge.cursor,lockedColumns:At}}).bind(It=>{const Et=aE(A,It.grid),Ge=fe.from(J==null?void 0:J.sizing).getOrThunk(()=>C.getTableSize(A)),At=fe.from(J==null?void 0:J.resize).getOrThunk(Sh);return h(A,It.grid,It.info,{sizing:Ge,resize:At,section:Ce}),v(A),Re(A,is),It.lockedColumns.length>0&&ys(A,is,It.lockedColumns.join(",")),fe.some({cursor:It.cursor,newRows:Et.newRows,newCells:Et.newCells})})},y2=(i,m)=>xl(m.element).bind(h=>_m(i,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),w2=(i,m)=>ug(i,m,Pe).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),l3=(i,m)=>m.mergable,C2=(i,m)=>m.unmergable,pf=(i,m)=>ug(i,m,Pe),bf=(i,m)=>ug(i,m,h=>!h.isLocked),Gb=(i,m)=>_m(i,m).exists(h=>!h.isLocked),S2=(i,m)=>In(m,h=>Gb(i,h)),Ku=(i,m)=>l3(i,m).filter(h=>S2(i,h.cells)),Rl=(i,m)=>C2(i,m).filter(h=>S2(i,h)),Ma=(i,m,h,v)=>{const T=Ha(i).rows;if(T.length===0)return i;for(let A=m.startRow;A<=m.finishRow;A++)for(let P=m.startCol;P<=m.finishCol;P++){const U=T[A],J=El(U,P).isLocked;hm(U,P,rt(v(),!1,J))}return i},x2=(i,m,h,v)=>{const T=Ha(i).rows;let A=!0;for(let P=0;P<T.length;P++)for(let U=0;U<Hl(T[0]);U++){const J=T[P],ae=El(J,U),Ce=ae.element,lt=h(Ce,m);lt&&!A?hm(J,U,rt(v(),!0,ae.isLocked)):lt&&(A=!1)}return i},Qs=(i,m)=>_e(i,(h,v)=>nt(h,T=>m(T.element,v.element))?h:h.concat([v]),[]),Xc=(i,m,h,v)=>(m>0&&m<i[0].cells.length&&je(i,T=>{const A=T.cells[m-1];let P=0;const U=v();for(;T.cells.length>m+P&&h(A.element,T.cells[m+P].element);)hm(T,m+P,rt(U,!0,T.cells[m+P].isLocked)),P++}),i),hu=(i,m,h,v)=>{const T=Ha(i).rows;if(m>0&&m<T.length){const A=T[m-1].cells,P=Qs(A,h);je(P,U=>{let J=fe.none();for(let ae=m;ae<T.length;ae++)for(let Ce=0;Ce<Hl(T[0]);Ce++){const lt=T[ae],It=El(lt,Ce);h(It.element,U.element)&&(J.isNone()&&(J=fe.some(v())),J.each(Ge=>{hm(lt,Ce,rt(Ge,!0,It.isLocked))}))}})}return i},Jc=i=>{const m=A=>A(i),h=G(i),v=()=>T,T={tag:!0,inner:i,fold:(A,P)=>P(i),isValue:Pe,isError:Bt,map:A=>vf.value(A(i)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:A=>{A(i)},toOptional:()=>fe.some(i)};return T},Om=i=>{const m=()=>h,h={tag:!1,inner:i,fold:(v,T)=>v(i),isValue:Bt,isError:Pe,map:m,mapError:v=>vf.error(v(i)),bind:m,exists:Bt,forall:Pe,getOr:Xe,or:Xe,getOrThunk:Mn,orThunk:Mn,getOrDie:ft(String(i)),each:ot,toOptional:fe.none};return h},vf={value:Jc,error:Om,fromOption:(i,m)=>i.fold(()=>Om(m),Jc)},Ei=(i,m,h)=>{if(i.row>=m.length||i.column>Hl(m[0]))return vf.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),T=v[0].cells.slice(i.column),A=Hl(h[0]),P=h.length;return vf.value({rowDelta:v.length-P,colDelta:T.length-A})},Gi=(i,m)=>{const h=Hl(i[0]),v=Hl(m[0]);return{rowDelta:0,colDelta:h-v}},my=(i,m)=>{const h=i.length,v=m.length;return{rowDelta:h-v,colDelta:0}},qp=(i,m,h,v)=>{const T=m.section==="colgroup"?h.col:h.cell;return No(i,A=>rt(T(),!0,v(A)))},T2=(i,m,h,v)=>{const T=i[i.length-1];return i.concat(No(m,()=>{const A=T.section==="colgroup"?h.colgroup:h.row,P=Eb(T,A,Xe),U=qp(P.cells.length,P,h,J=>Ye(v,J.toString()));return Xf(P,U)}))},fy=(i,m,h,v)=>dn(i,T=>{const A=qp(m,T,h,Bt);return wa(T,v,A)}),k2=(i,m,h)=>dn(i,v=>_e(h,(T,A)=>{const P=qp(1,v,m,Pe)[0];return kl(T,A,P)},v)),Th=(i,m,h)=>{const v=m.colDelta<0?fy:Xe,T=m.rowDelta<0?T2:Xe,A=Rd(i),P=Hl(i[0]),U=nt(A,Ce=>Ce===P-1),J=v(i,Math.abs(m.colDelta),h,U?P-1:P),ae=Rd(J);return T(J,Math.abs(m.rowDelta),h,Tt(ae,Pe))},E2=(i,m,h,v)=>{const T=El(i[m],h),A=at(v,T.element),P=i[m];return i.length>1&&Hl(P)>1&&(h>0&&A($c(P,h-1))||h<P.cells.length-1&&A($c(P,h+1))||m>0&&A($c(i[m-1],h))||m<i.length-1&&A($c(i[m+1],h)))},iE=(i,m,h,v,T,A)=>{const P=i.row,U=i.column,J=h.length,ae=Hl(h[0]),Ce=P+J,lt=U+ae+A.length,It=Tt(A,Pe);for(let Et=P;Et<Ce;Et++){let Ge=0;for(let At=U;At<lt;At++){if(It[At]){Ge++;continue}E2(m,Et,At,T)&&x2(m,$c(m[Et],At),T,v.cell);const We=At-U-Ge,an=El(h[Et-P],We),Ln=an.element,to=v.replace(Ln);hm(m[Et],At,rt(to,!0,an.isLocked))}}return m},uE=(i,m,h)=>{const v=Hl(m[0]),T=Ha(m).cols.length+i.row,A=No(v-i.column,U=>U+i.column),P=H(A,U=>In(h,J=>J!==U)).getOr(v-1);return{row:T,column:P}},gy=(i,m,h)=>Bo(h,v=>v>=i.column&&v<=Hl(m[0])+i.column),_2=(i,m,h,v,T)=>{const A=Rd(m),P=uE(i,m,A),U=Ha(h).rows,J=gy(P,U,A);return Ei(P,m,U).map(Ce=>{const lt={...Ce,colDelta:Ce.colDelta-J.length},It=Th(m,lt,v),Et=Rd(It),Ge=gy(P,U,Et);return iE(P,It,U,v,T,Ge)})},O2=(i,m,h,v,T)=>{Xc(m,i,T,v.cell);const A=my(h,m),P=Th(h,A,v),U=my(m,P),J=Th(m,U,v);return dn(J,(ae,Ce)=>wa(ae,i,P[Ce].cells))},A2=(i,m,h,v,T)=>{hu(m,i,T,v.cell);const A=Rd(m),P=Gi(m,h),U={...P,colDelta:P.colDelta-A.length},J=Th(m,U,v),{cols:ae,rows:Ce}=Ha(J),lt=Rd(J),It=Gi(h,m),Et={...It,colDelta:It.colDelta+lt.length},Ge=k2(h,v,lt),At=Th(Ge,Et,v);return[...ae,...Ce.slice(0,i),...At,...Ce.slice(i,Ce.length)]},D2=(i,m,h,v)=>Eb(i,T=>v(T,h),m),yf=(i,m,h,v,T)=>{const{rows:A,cols:P}=Ha(i),U=A.slice(0,m),J=A.slice(m),ae=D2(A[h],(Ce,lt)=>m>0&&m<A.length&&v($c(A[m-1],lt),$c(A[m],lt))?El(A[m],lt):rt(T(Ce.element,v),!0,Ce.isLocked),v,T);return[...P,...U,ae,...J]},R2=(i,m,h,v,T,A,P)=>{if(h==="colgroup"||!v){const U=El(i,T);return rt(P(U.element,A),!0,!1)}else return El(i,m)},M2=(i,m,h,v,T)=>dn(i,A=>{const P=m>0&&m<Hl(A)&&v($c(A,m-1),$c(A,m)),U=R2(A,m,A.section,P,h,v,T);return kl(A,m,U)}),dE=(i,m)=>ms(i,h=>{const v=h.cells,T=Ps(m,(A,P)=>P>=0&&P<A.length?A.slice(0,P).concat(A.slice(P+1)):A,v);return T.length>0?[wn(h.element,T,h.section,h.isNew)]:[]}),N2=(i,m,h)=>{const{rows:v,cols:T}=Ha(i);return[...T,...v.slice(0,m),...v.slice(h+1)]},dg=(i,m,h,v)=>$c(i[m],h)!==void 0&&m>0&&v($c(i[m-1],h),$c(i[m],h)),Er=(i,m,h)=>m>0&&h($c(i,m-1),$c(i,m)),Am=(i,m,h,v)=>dg(i,m,h,v)||Er(i[m],h,v),B2=(i,m)=>In(m,Xe)&&ig(i.cells)?Pe:(v,T,A)=>!(Qo(v.element)==="th"&&m[A]),mE=(i,m)=>In(m,Xe)&&ig(i)?Pe:(v,T,A)=>!(Qo(v.element)==="th"&&m[T]),Kp=(i,m,h,v)=>{const T=P=>P==="row"?La(m):al(m),A=P=>T(P)?`${P}group`:P;return i?Vb(m)?A(h):null:v&&Vb(m)?A(h==="row"?"col":"row"):null},cc=(i,m)=>(h,v,T)=>fe.some(Kp(i,h.element,"col",m[T])),zl=(i,m)=>(h,v)=>fe.some(Kp(i,h.element,"row",m[v])),hy=(i,m,h)=>rt(h(i.element,m),!0,i.isLocked),qb=(i,m,h,v,T,A,P)=>{const U=J=>nt(m,ae=>h(J.element,ae.element));return dn(i,(J,ae)=>Ci(J,(Ce,lt)=>{if(U(Ce)){const It=P(Ce,ae,lt)?T(Ce,h,v):Ce;return A(It,ae,lt).each(Et=>{ue(It.element,{scope:fe.from(Et)})}),It}else return Ce}))},Kb=(i,m,h)=>ms(i,(v,T)=>Am(i,T,m,h)?[]:[El(v,m)]),fE=(i,m,h)=>{const v=i[m];return ms(v.cells,(T,A)=>Am(i,m,A,h)?[]:[T])},$2=(i,m,h,v,T)=>{const A=Ha(i).rows,P=ms(m,Ce=>Kb(A,Ce,v)),U=dn(A,Ce=>ig(Ce.cells)),J=mE(P,U),ae=zl(h,U);return qb(i,P,v,T,hy,ae,J)},Yp=(i,m,h,v,T,A,P)=>{const{cols:U,rows:J}=Ha(i),ae=J[m[0]],Ce=ms(m,We=>fE(J,We,T)),lt=dn(ae.cells,(We,an)=>ig(Kb(J,an,T))),It=[...J];je(m,We=>{It[We]=P.transformRow(J[We],h)});const Et=[...U,...It],Ge=B2(ae,lt),At=cc(v,lt);return qb(Et,Ce,T,A,P.transformCell,At,Ge)},Ul=(i,m,h,v)=>{const T=Ha(i).rows,A=dn(m,P=>El(T[P.row],P.column));return qb(i,A,h,v,hy,fe.none,Pe)},_r={generate:i=>{if(!Zt(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],h={};return je(i,(v,T)=>{const A=rn(v);if(A.length!==1)throw new Error("one and only one name per case");const P=A[0],U=v[P];if(h[P]!==void 0)throw new Error("duplicate key detected:"+P);if(P==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Zt(U))throw new Error("case arguments must be an array");m.push(P),h[P]=(...J)=>{const ae=J.length;if(ae!==U.length)throw new Error("Wrong number of arguments to case "+P+". Expected "+U.length+" ("+U+"), got "+ae);return{fold:(...lt)=>{if(lt.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+lt.length);return lt[T].apply(null,J)},match:lt=>{const It=rn(lt);if(m.length!==It.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+It.join(","));if(!In(m,Ge=>Eo(It,Ge)))throw new Error("Not all branches were specified when using match. Specified: "+It.join(", ")+`
Required: `+m.join(", "));return lt[P].apply(null,J)},log:lt=>{console.log(lt,{constructors:m,constructor:P,params:J})}}}}),h}},Ud={..._r.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},gE=(i,m)=>i.length===0?Ud.none():i.length===1?Ud.only(0):m===0?Ud.left(0,1):m===i.length-1?Ud.right(m-1,m):m>0&&m<i.length-1?Ud.middle(m-1,m,m+1):Ud.none(),py=(i,m,h,v,T)=>{const A=i.slice(0),P=gE(i,m),U=G(dn(A,G(0))),J=It=>v.singleColumnWidth(A[It],h),ae=(It,Et)=>T.calcLeftEdgeDeltas(A,It,Et,h,v.minCellWidth(),v.isRelative),Ce=(It,Et,Ge)=>T.calcMiddleDeltas(A,It,Et,Ge,h,v.minCellWidth(),v.isRelative),lt=(It,Et)=>T.calcRightEdgeDeltas(A,It,Et,h,v.minCellWidth(),v.isRelative);return P.fold(U,J,ae,Ce,lt)},I2=(i,m,h)=>{let v=0;for(let T=i;T<m;T++)v+=h[T]!==void 0?h[T]:0;return v},wf=(i,m)=>{const h=Co.justCells(i);return dn(h,v=>{const T=I2(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},F2=(i,m)=>{const h=Co.justColumns(i);return dn(h,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},Wd=(i,m)=>{const h=Co.justCells(i);return dn(h,v=>{const T=I2(v.row,v.row+v.rowspan,m);return{element:v.element,height:T,rowspan:v.rowspan}})},by=(i,m)=>dn(i.all,(h,v)=>({element:h.element,height:m[v]})),Xp=i=>Ps(i,(m,h)=>m+h,0),vy=(i,m)=>Co.hasColumns(i)?F2(i,m):wf(i,m),Yb=(i,m,h)=>{const v=vy(i,m);je(v,T=>{h.setElementWidth(T.element,T.width)})},Jp=(i,m,h,v,T)=>{const A=Co.fromTable(i),P=T.getCellDelta(m),U=T.getWidths(A,T),J=h===A.grid.columns-1,ae=v.clampTableDelta(U,h,P,T.minCellWidth(),J),Ce=py(U,h,ae,T,v),lt=dn(Ce,(It,Et)=>It+U[Et]);Yb(A,lt,T),v.resizeTable(T.adjustTableWidth,ae,J)},yy=(i,m,h,v)=>{const T=Co.fromTable(i),A=Ic(T,i,v),P=dn(A,(Ce,lt)=>h===lt?Math.max(m+Ce,um()):Ce),U=Wd(T,P),J=by(T,P);je(J,Ce=>{cf(Ce.element,Ce.height)}),je(U,Ce=>{cf(Ce.element,Ce.height)});const ae=Xp(P);cf(i,ae)},Qp=(i,m,h,v,T)=>{const A=Co.generate(m),P=v.getWidths(A,v),U=v.pixelWidth(),{newSizes:J,delta:ae}=T.calcRedestributedWidths(P,U,h.pixelDelta,v.isRelative);Yb(A,J,v),v.adjustTableWidth(ae)},L2=(i,m,h,v)=>{const T=Co.generate(m),A=v.getWidths(T,v);Yb(T,A,v)},Dm=i=>_e(i,(h,v)=>nt(h,A=>A.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),Xb=Is("col"),H2=Is("colgroup"),wy=i=>Qo(i)==="tr"||H2(i),Cf=i=>{const m=tc(i,"colspan",1),h=tc(i,"rowspan",1);return{element:i,colspan:m,rowspan:h}},Zd=(i,m=Cf)=>{const h=U=>Xb(U.element)?i.col(U):i.cell(U),v=U=>H2(U.element)?i.colgroup(U):i.row(U),T=U=>{if(wy(U))return v({element:U});{const J=U,ae=h(m(J));return A=fe.some({item:J,replacement:ae}),ae}};let A=fe.none();return{getOrInit:(U,J)=>A.fold(()=>T(U),ae=>J(U,ae.item)?ae.replacement:T(U))}},mg=i=>m=>{const h=[],v=(P,U)=>H(h,J=>U(J.item,P)),T=P=>{const U=i==="td"?{scope:null}:{},J=m.replace(P,i,U);return h.push({item:P,sub:J}),J};return{replaceOrInit:(P,U)=>{if(wy(P)||Xb(P))return P;{const J=P;return v(J,U).fold(()=>T(J),ae=>U(P,ae.item)?ae.sub:T(J))}}}},He=i=>Be(i,"scope").map(m=>m.substr(0,3)),Ur={modification:Zd,transform:mg,merging:i=>({unmerge:v=>{const T=He(v);return T.each(A=>ys(v,"scope",A)),()=>{const A=i.cell({element:v,colspan:1,rowspan:1});return rl(A,"width"),rl(v,"width"),T.each(P=>ys(A,"scope",P)),A}},merge:v=>{const T=()=>{const A=tn(dn(v,He));if(A.length===0)return fe.none();{const P=A[0],U=["row","col"];return nt(A,ae=>ae!==P&&Eo(U,ae))?fe.none():fe.from(P)}};return rl(v[0],"width"),T().fold(()=>Re(v[0],"scope"),A=>ys(v[0],"scope",A+"group")),G(v[0])}})},fg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],e1=(i,m)=>{const h=i.property().name(m);return Eo(["ol","ul"],h)},us=(i,m)=>{const h=i.property().name(m);return Eo(fg,h)},Cy=(i,m)=>Eo(["br","img","hr","input"],i.property().name(m)),t1=ju(),Ua=i=>us(t1,i),jd=i=>e1(t1,i),hE=i=>Cy(t1,i),V2=i=>{const m=Is("br"),h=J=>In(J,ae=>m(ae)||Oa(ae)&&ks(ae).trim().length===0),v=J=>Qo(J)==="li"||Br(J,jd).isSome(),T=J=>sl(J).map(ae=>Ua(ae)?!0:hE(ae)?Qo(ae)!=="img":!1).getOr(!1),A=J=>wm(J).bind(ae=>{const Ce=T(ae);return Zc(ae).map(lt=>Ce===!0||v(lt)||m(ae)||Ua(lt)&&!bo(J,lt)?[]:[pe.fromTag("br")])}).getOr([]),U=(()=>{const J=ms(i,ae=>{const Ce=Lo(ae);return h(Ce)?[]:Ce.concat(A(ae))});return J.length===0?[pe.fromTag("br")]:J})();va(i[0]),sa(i[0],U)},z2=i=>ri(i,!0),kh=i=>{iu(i).length===0&&Ks(i)},Eh=(i,m)=>({grid:i,cursor:m}),Jb=i=>cs(i,m=>cs(m.cells,h=>{const v=h.element;return Fs(z2(v),v)})),Sy=(i,m,h)=>{var v,T;const A=Ha(i).rows;return fe.from((T=(v=A[m])===null||v===void 0?void 0:v.cells[h])===null||T===void 0?void 0:T.element).filter(z2).orThunk(()=>Jb(A))},Ml=(i,m,h)=>{const v=Sy(i,m,h);return Eh(i,v)},_h=i=>_e(i,(h,v)=>nt(h,A=>A.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),n1=(i,m,h,v)=>{const T=m[0].row,A=_h(m),P=Ps(A,(U,J)=>({grid:yf(U.grid,T,J.row+U.delta,h,v.getOrInit),delta:U.delta+1}),{grid:i,delta:0}).grid;return Ml(P,T,m[0].column)},U2=(i,m,h,v)=>{const T=_h(m),A=T[T.length-1],P=A.row+A.rowspan,U=Ps(T,(J,ae)=>yf(J,P,ae.row,h,v.getOrInit),i);return Ml(U,P,m[0].column)},gg=(i,m,h,v)=>{const T=m.details,A=Dm(T),P=A[0].column,U=Ps(A,(J,ae)=>({grid:M2(J.grid,P,ae.column+J.delta,h,v.getOrInit),delta:J.delta+1}),{grid:i,delta:0}).grid;return Ml(U,T[0].row,P)},_i=(i,m,h,v)=>{const T=m.details,A=T[T.length-1],P=A.column+A.colspan,U=Dm(T),J=Ps(U,(ae,Ce)=>M2(ae,P,Ce.column,h,v.getOrInit),i);return Ml(J,T[0].row,P)},xy=(i,m,h,v)=>{const T=Dm(m),A=dn(T,U=>U.column),P=$2(i,A,!0,h,v.replaceOrInit);return Ml(P,m[0].row,m[0].column)},Tc=(i,m,h,v)=>{const T=Ul(i,m,h,v.replaceOrInit);return Ml(T,m[0].row,m[0].column)},W2=(i,m,h,v)=>{const T=Dm(m),A=dn(T,U=>U.column),P=$2(i,A,!1,h,v.replaceOrInit);return Ml(P,m[0].row,m[0].column)},Rm=(i,m,h,v)=>{const T=Ul(i,m,h,v.replaceOrInit);return Ml(T,m[0].row,m[0].column)},Qb=(i,m)=>(h,v,T,A,P)=>{const U=_h(v),J=dn(U,Ce=>Ce.row),ae=Yp(h,J,i,m,T,A.replaceOrInit,P);return Ml(ae,v[0].row,v[0].column)},Ty=Qb("thead",!0),Z2=Qb("tbody",!1),ky=Qb("tfoot",!1),ev=(i,m,h,v)=>{const T=Dm(m.details),A=dE(i,dn(T,U=>U.column)),P=A.length>0?A[0].cells.length-1:0;return Ml(A,T[0].row,Math.min(T[0].column,P))},Ey=(i,m,h,v)=>{const T=_h(m),A=N2(i,T[0].row,T[T.length-1].row),P=A.length>0?A.length-1:0;return Ml(A,Math.min(m[0].row,P),m[0].column)},pE=(i,m,h,v)=>{const T=m.cells;V2(T);const A=Ma(i,m.bounds,h,v.merge(T));return Eh(A,fe.from(T[0]))},_y=(i,m,h,v)=>{const A=Ps(m,(P,U)=>x2(P,U,h,v.unmerge(U)),i);return Eh(A,fe.from(m[0]))},kc=(i,m,h,v)=>{const A=((J,ae)=>{const Ce=Co.fromTable(J);return ji(Ce,ae,!0)})(m.clipboard,m.generators),P=jc(m.row,m.column);return _2(P,i,A,m.generators,h).fold(()=>Eh(i,fe.some(m.element)),J=>Ml(J,m.row,m.column))},Na=(i,m,h)=>{const v=Ed(i,h.section),T=Co.generate(v);return ji(T,m,!0)},li=(i,m,h,v)=>{const T=Ha(i).rows,A=m.cells[0].column,P=T[m.cells[0].row],U=Na(m.clipboard,m.generators,P),J=O2(A,i,U,m.generators,h);return Ml(J,m.cells[0].row,m.cells[0].column)},Or=(i,m,h,v)=>{const T=Ha(i).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,P=T[m.cells[0].row],U=Na(m.clipboard,m.generators,P),J=O2(A,i,U,m.generators,h);return Ml(J,m.cells[0].row,m.cells[0].column)},qi=(i,m,h,v)=>{const T=Ha(i).rows,A=m.cells[0].row,P=T[A],U=Na(m.clipboard,m.generators,P),J=A2(A,i,U,m.generators,h);return Ml(J,m.cells[0].row,m.cells[0].column)},Ar=(i,m,h,v)=>{const T=Ha(i).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,P=T[m.cells[0].row],U=Na(m.clipboard,m.generators,P),J=A2(A,i,U,m.generators,h);return Ml(J,m.cells[0].row,m.cells[0].column)},Oy=(i,m)=>{const h=Co.fromTable(i);return pf(h,m).bind(T=>{const A=T[T.length-1],P=T[0].column,U=A.column+A.colspan,J=Fn(dn(h.all,ae=>Bo(ae.cells,Ce=>Ce.column>=P&&Ce.column<U)));return Ub(J)}).getOr("")},Ay=(i,m)=>{const h=Co.fromTable(i);return pf(h,m).bind(Ub).getOr("")},j2=(i,m)=>{const h=Co.fromTable(i);return pf(h,m).bind(T=>{const A=T[T.length-1],P=T[0].row,U=A.row+A.rowspan,J=h.all.slice(P,U);return hf(J)}).getOr("")},tv=(i,m,h,v)=>L2(i,m,h,v.sizing),o1=(i,m,h,v)=>Qp(i,m,h,v.sizing,v.resize),nv=(i,m)=>nt(m,h=>h.column===0&&h.isLocked),ov=(i,m)=>nt(m,h=>h.column+h.colspan>=i.grid.columns&&h.isLocked),s1=(i,m)=>{const h=sh(i),v=Dm(m);return _e(v,(T,A)=>{const U=h[A.column].map(fo).getOr(0);return T+U},0)},G2=i=>(m,h)=>pf(m,h).filter(v=>!(i?nv:ov)(m,v)).map(v=>({details:v,pixelDelta:s1(m,v)})),q2=(i,m)=>bf(i,m).map(h=>({details:h,pixelDelta:-s1(i,h)})),K2=i=>(m,h)=>w2(m,h).filter(v=>!(i?nv:ov)(m,v.cells)),Dy=Ur.transform("th"),sv=Ur.transform("td"),rv=ac(n1,pf,ot,ot,Ur.modification),cn=ac(U2,pf,ot,ot,Ur.modification),Ry=ac(gg,G2(!0),o1,ot,Ur.modification),Y2=ac(_i,G2(!1),o1,ot,Ur.modification),bE=ac(ev,q2,o1,kh,Ur.modification),X2=ac(Ey,pf,ot,kh,Ur.modification),vt=ac(xy,bf,ot,ot,Dy),J2=ac(W2,bf,ot,ot,sv),Ec=ac(Ty,bf,ot,ot,Dy),vE=ac(Z2,bf,ot,ot,sv),My=ac(ky,bf,ot,ot,sv),yE=ac(Tc,bf,ot,ot,Dy),ua=ac(Rm,bf,ot,ot,sv),av=ac(pE,Ku,tv,ot,Ur.merging),wE=ac(_y,Rl,tv,ot,Ur.merging),pu=ac(kc,y2,tv,ot,Ur.modification),Ny=ac(li,K2(!0),ot,ot,Ur.modification),r1=ac(Or,K2(!1),ot,ot,Ur.modification),Gd=ac(qi,w2,ot,ot,Ur.modification),bu=ac(Ar,w2,ot,ot,Ur.modification),cv=Oy,vu=Ay,Q2=j2,By=(i,m)=>i.dispatch("NewRow",{node:m}),lv=(i,m)=>i.dispatch("NewCell",{node:m}),Sf=(i,m,h)=>{i.dispatch("TableModified",{...h,table:m})},eS=(i,m,h,v,T)=>{i.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:T})},$y=i=>{i.dispatch("TableSelectionClear")},CE=(i,m,h,v,T)=>{i.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:T})},iv=(i,m,h,v,T)=>{i.dispatch("ObjectResized",{target:m,width:h,height:v,origin:T})},a1={structure:!1,style:!0},_c={structure:!0,style:!1},tS={structure:!0,style:!0},Oh=i=>m=>m.options.get(i),nS="100%",uv=i=>{var m;const h=i.dom,v=(m=h.getParent(i.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:i.getBody();return St(pe.fromDom(v))+"px"},oS=(i,m)=>Cs(i)||!bl(i)?m:Xu(i)?{...m,width:uv(i)}:{...m,width:nS},sS=(i,m)=>Cs(i)||bl(i)?m:Xu(i)?{...m,width:uv(i)}:{...m,width:nS},SE=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=Eo(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=Eo(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},Ah=i=>fe.from(i.options.get("table_clone_elements")),xE=i=>{const m=i.options.get("object_resizing");return Eo(m.split(","),"table")},rS=Oh("table_header_type"),dv=Oh("table_column_resizing"),aS=i=>dv(i)==="preservetable",hg=i=>dv(i)==="resizetable",c1=Oh("table_sizing_mode"),Dh=i=>c1(i)==="relative",Xu=i=>c1(i)==="fixed",Cs=i=>c1(i)==="responsive",cS=Oh("table_resize_bars"),bl=Oh("table_style_by_css"),Py=i=>{const m=i.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:sS(i,h)},lS=i=>{const m=i.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:oS(i,h)},iS=Oh("table_use_colgroups"),pg=(i,m)=>Dh(i)?C.percentageSize(m):Xu(i)?C.pixelSize(m):C.getTableSize(m),TE=(i,m,h)=>{const v=Zl=>Qo(Pd(Zl))==="table",T=Zl=>!v(i)||lg(Zl).rows>1,A=Zl=>!v(i)||lg(Zl).columns>1,P=Ah(i),U=hg(i)?ot:Wp,J=Zl=>{switch(rS(i)){case"section":return zd.section();case"sectionCells":return zd.sectionCells();case"cells":return zd.cells();default:return zd.getTableSectionType(Zl,"section")}},ae=(Zl,Qv)=>Qv.cursor.fold(()=>{const I1=iu(Zl);return De(I1).filter($).map(Xi=>{h.clearSelectedCells(Zl.dom);const hr=i.dom.createRng();return hr.selectNode(Xi.dom),i.selection.setRng(hr),ys(Xi,"data-mce-selected","1"),hr})},I1=>{const Xi=oE(I1),hr=i.dom.createRng();return hr.setStart(Xi.element.dom,Xi.offset),hr.setEnd(Xi.element.dom,Xi.offset),i.selection.setRng(hr),h.clearSelectedCells(Zl.dom),fe.some(hr)}),Ce=(Zl,Qv,I1,Xi)=>(hr,A_,fx=!1)=>{Zi(hr);const gx=pe.fromDom(i.getDoc()),D_=Cm(I1,gx,P),R_={sizing:pg(i,hr),resize:hg(i)?f2():Sh(),section:J(hr)};return Qv(hr)?Zl(hr,A_,D_,R_).bind(Mf=>{m.refresh(hr.dom),je(Mf.newRows,F1=>{By(i,F1.dom)}),je(Mf.newCells,F1=>{lv(i,F1.dom)});const Bw=ae(hr,Mf);return $(hr)&&(Zi(hr),fx||Sf(i,hr.dom,Xi)),Bw.map(F1=>({rng:F1,effect:Xi}))}):fe.none()},lt=Ce(X2,T,ot,_c),It=Ce(bE,A,ot,_c),Et=Ce(rv,Pe,ot,_c),Ge=Ce(cn,Pe,ot,_c),At=Ce(Ry,Pe,U,_c),We=Ce(Y2,Pe,U,_c),an=Ce(av,Pe,ot,_c),Ln=Ce(wE,Pe,ot,_c),to=Ce(Ny,Pe,ot,_c),er=Ce(r1,Pe,ot,_c),dc=Ce(Gd,Pe,ot,_c),ta=Ce(bu,Pe,ot,_c),Wl=Ce(pu,Pe,ot,tS),Rf=Ce(yE,Pe,ot,_c),Xv=Ce(ua,Pe,ot,_c),Nw=Ce(vt,Pe,ot,_c),Jv=Ce(J2,Pe,ot,_c),Ds=Ce(Ec,Pe,ot,_c),Bl=Ce(vE,Pe,ot,_c),$l=Ce(My,Pe,ot,_c);return{deleteRow:lt,deleteColumn:It,insertRowsBefore:Et,insertRowsAfter:Ge,insertColumnsBefore:At,insertColumnsAfter:We,mergeCells:an,unmergeCells:Ln,pasteColsBefore:to,pasteColsAfter:er,pasteRowsBefore:dc,pasteRowsAfter:ta,pasteCells:Wl,makeCellsHeader:Rf,unmakeCellsHeader:Xv,makeColumnsHeader:Nw,unmakeColumnsHeader:Jv,makeRowsHeader:Ds,makeRowsBody:Bl,makeRowsFooter:$l,getTableRowType:Q2,getTableCellType:vu,getTableColType:cv}},uS=(i,m,h)=>{const v=tc(i,m,1);h===1||v<=1?Re(i,m):ys(i,m,Math.min(h,v))},dS=(i,m)=>h=>{const v=h.column+h.colspan-1,T=h.column;return v>=i&&T<m},kE=(i,m,h)=>{if(Co.hasColumns(i)){const v=Bo(Co.justColumns(i),dS(m,h)),T=dn(v,P=>{const U=bc(P.element);return uS(U,"span",h-m),U}),A=pe.fromTag("colgroup");return sa(A,T),[A]}else return[]},EE=(i,m,h)=>dn(i.all,v=>{const T=Bo(v.cells,dS(m,h)),A=dn(T,U=>{const J=bc(U.element);return uS(J,"colspan",h-m),J}),P=pe.fromTag("tr");return sa(P,A),P}),_E=(i,m)=>{const h=Co.fromTable(i);return bf(h,m).map(T=>{const A=T[T.length-1],P=T[0].column,U=A.column+A.colspan,J=kE(h,P,U),ae=EE(h,P,U);return[...J,...ae]})},mS=(i,m,h)=>{const v=Co.fromTable(i);return pf(v,m).bind(A=>{const P=ji(v,h,!1),J=Ha(P).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),ae=ms(J,lt=>{const It=Bo(lt.cells,Et=>!Et.isLocked);return It.length>0?[{...lt,cells:It}]:[]}),Ce=jb(ae);return Fs(Ce.length>0,Ce)}).map(A=>Vs(A))},Rh=_r.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),l1=(i,m,h)=>{const v=h.substring(0,h.length-i.length),T=parseFloat(v);return v===T.toString()?m(T):Rh.invalid(h)},bg={...Rh,from:i=>ws(i,"%")?l1("%",Rh.percent,i):ws(i,"px")?l1("px",Rh.pixels,i):Rh.invalid(i)},OE=(i,m)=>dn(i,h=>bg.from(h).fold(()=>h,T=>T/m*100+"%",T=>T+"%")),AE=(i,m,h)=>{const v=h/m;return dn(i,T=>bg.from(T).fold(()=>T,P=>P*v+"px",P=>P/100*h+"px"))},fS=(i,m)=>{const h=i.fold(()=>G(""),v=>{const T=v/m;return G(T+"px")},()=>{const v=100/m;return G(v+"%")});return No(m,h)},gS=(i,m,h)=>i.fold(()=>m,v=>AE(m,h,v),v=>OE(m,h)),hS=(i,m,h)=>{const v=bg.from(h),T=In(i,A=>A==="0px")?fS(v,i.length):gS(v,i,m);return RE(T)},vg=(i,m)=>i.length===0?m:Ps(i,(h,v)=>bg.from(v).fold(G(0),Xe,Xe)+h,0),pS=(i,m)=>{const h=Math.floor(i);return{value:h+m,remainder:i-h}},DE=(i,m)=>bg.from(i).fold(G(i),h=>h+m+"px",h=>h+m+"%"),RE=i=>{if(i.length===0)return i;const m=Ps(i,(v,T)=>{const A=bg.from(T).fold(()=>({value:T,remainder:0}),P=>pS(P,"px"),P=>({value:P+"%",remainder:0}));return{output:[A.value].concat(v.output),remainder:v.remainder+A.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([DE(h[h.length-1],Math.round(m.remainder))])},ME=bg.from,Mh=(i,m,h)=>{je(m,v=>{const T=i.slice(v.column,v.colspan+v.column),A=vg(T,qc());Os(v.element,"width",A+h)})},yg=(i,m,h)=>{je(m,(v,T)=>{const A=vg([i[T]],qc());Os(v.element,"width",A+h)})},mv=(i,m,h,v)=>{je(h,T=>{const A=i.slice(T.row,T.rowspan+T.row),P=vg(A,um());Os(T.element,"height",P+v)}),je(m,(T,A)=>{Os(T.element,"height",i[A])})},fv=i=>ME(i).fold(G("px"),G("px"),G("%")),bS=(i,m,h)=>{const v=Co.fromTable(i),T=v.all,A=Co.justCells(v),P=Co.justColumns(v);m.each(U=>{const J=fv(U),ae=jn(i),Ce=ng(v,i),lt=hS(Ce,ae,U);Co.hasColumns(v)?yg(lt,P,J):Mh(lt,A,J),Os(i,"width",U)}),h.each(U=>{const J=fv(U),ae=Si(i),Ce=lf(v,i,Vu),lt=hS(Ce,ae,U);mv(lt,T,A,J),Os(i,"height",U)})},qd=Ip,gv=Ti,vS=ty,Ju=i=>{Re(i,"width")},xf=i=>{const m=du(i);bS(i,fe.some(m),fe.none()),Ju(i)},Iy=i=>{const m=Qr(i);bS(i,fe.some(m),fe.none()),Ju(i)},yS=i=>{rl(i,"width");const m=xd(i),h=m.length>0?m:iu(i);je(h,v=>{rl(v,"width"),Ju(v)}),Ju(i)},NE={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},wS=()=>pe.fromTag("th"),CS=()=>pe.fromTag("td"),BE=()=>pe.fromTag("col"),$E=(i,m,h,v)=>{const T=pe.fromTag("tr");for(let A=0;A<i;A++){const P=v<m||A<h?wS():CS();A<h&&ys(P,"scope","row"),v<m&&ys(P,"scope","col"),_s(P,pe.fromTag("br")),_s(T,P)}return T},SS=i=>{const m=pe.fromTag("colgroup");return No(i,()=>_s(m,BE())),m},hv=(i,m,h,v)=>No(i,T=>$E(m,h,v,T)),xS=(i,m,h,v,T,A=NE)=>{const P=pe.fromTag("table"),U=T!=="cells";wc(P,A.styles),yr(P,A.attributes),A.colGroups&&_s(P,SS(m));const J=Math.min(i,h);if(U&&h>0){const Et=pe.fromTag("thead");_s(P,Et);const At=hv(h,m,T==="sectionCells"?J:0,v);sa(Et,At)}const ae=pe.fromTag("tbody");_s(P,ae);const Ce=U?i-J:i,It=hv(Ce,m,U?0:h,v);return sa(ae,It),P},PE=i=>i.dom.innerHTML,IE=i=>{const m=pe.fromTag("div"),h=pe.fromDom(i.dom.cloneNode(!0));return _s(m,h),PE(m)},FE=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},Fy=(i,m)=>{oe(m,"td,th").each(at(FE,i))},TS=(i,m)=>{je(Gr(m,"tr"),h=>{By(i,h.dom),je(Gr(h,"th,td"),v=>{lv(i,v.dom)})})},kS=i=>Hn(i)&&i.indexOf("%")!==-1,ES=(i,m,h,v,T)=>{const A=lS(i),P={styles:A,attributes:Py(i),colGroups:iS(i)};return i.undoManager.ignore(()=>{const U=xS(h,m,T,v,rS(i),P);ys(U,"data-mce-id","__mce");const J=IE(U);i.insertContent(J),i.addVisual()}),oe(Pd(i),'table[data-mce-id="__mce"]').map(U=>(Xu(i)?Iy(U):Cs(i)?yS(U):(Dh(i)||kS(A.width))&&xf(U),Zi(U),Re(U,"data-mce-id"),TS(i,U),Fy(i,U),U.dom)).getOrNull()},_S=(i,m,h,v={})=>{const T=A=>it(A)&&A>0;if(T(m)&&T(h)){const A=v.headerRows||0,P=v.headerColumns||0;return ES(i,h,m,P,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var i1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ly="x-tinymce/dom-table-",Hy=Ly+"rows",u1=Ly+"columns",pv=i=>{const m=i1.FakeClipboardItem(i);i1.write([m])},Vy=i=>{var m;const h=(m=i1.read())!==null&&m!==void 0?m:[];return cs(h,v=>fe.from(v.getType(i)))},OS=i=>{Vy(i).isSome()&&i1.clear()},AS=i=>{i.fold(LE,m=>pv({[Hy]:m}))},Tf=()=>Vy(Hy),LE=()=>OS(Hy),DS=i=>{i.fold(HE,m=>pv({[u1]:m}))},d1=()=>Vy(u1),HE=()=>OS(u1),bv=i=>c3(Fp(i),gu(i)).filter(Id),VE=i=>i2(Fp(i),gu(i)).filter(Id),zE=(i,m)=>{const h=gu(i),v=()=>bv(i).each(We=>{$r(We,h).filter(q(h)).each(an=>{const Ln=pe.fromText("");if(Aa(an,Ln),Ks(an),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const to=i.dom.createRng();to.setStart(Ln.dom,0),to.setEnd(Ln.dom,0),i.selection.setRng(to),i.nodeChanged()}})}),T=We=>bv(i).each(an=>{Cs(i)||Xu(i)||Dh(i)||$r(an,h).each(to=>{We==="relative"&&!qd(to)?xf(to):We==="fixed"&&!gv(to)?Iy(to):We==="responsive"&&!vS(to)&&yS(to),Zi(to),Sf(i,to.dom,_c)})}),A=We=>$r(We,h),P=We=>VE(i).bind(an=>A(an).map(Ln=>We(Ln,an))),U=(We,an)=>{P(Ln=>{i.formatter.toggle("tableclass",{value:an},Ln.dom),Sf(i,Ln.dom,a1)})},J=(We,an)=>{P(Ln=>{const to=Dl(i),dc=In(to,ta=>i.formatter.match("tablecellclass",{value:an},ta.dom))?i.formatter.remove:i.formatter.apply;je(to,ta=>dc("tablecellclass",{value:an},ta.dom)),Sf(i,Ln.dom,a1)})},ae=()=>{bv(i).each(We=>{$r(We,h).each(an=>{Y(an,"caption").fold(()=>{const Ln=pe.fromTag("caption");_s(Ln,pe.fromText("Caption")),au(an,Ln,0),i.selection.setCursorLocation(Ln.dom,0)},Ln=>{Is("caption")(We)&&Wc("td",an).each(to=>i.selection.setCursorLocation(to.dom,0)),Ks(Ln)}),Sf(i,an.dom,_c)})})},Ce=We=>{i.focus()},lt=(We,an=!1)=>P((Ln,to)=>{const er=wh(Dl(i),Ln,to);We(Ln,er,an).each(Ce)}),It=()=>P((We,an)=>{const Ln=wh(Dl(i),We,an),to=Cm(ot,pe.fromDom(i.getDoc()),fe.none());return mS(We,Ln,to)}),Et=()=>P((We,an)=>{const Ln=wh(Dl(i),We,an);return _E(We,Ln)}),Ge=(We,an)=>an().each(Ln=>{const to=dn(Ln,er=>bc(er));P((er,dc)=>{const ta=Sm(pe.fromDom(i.getDoc())),Wl=tE(Dl(i),dc,to,ta);We(er,Wl).each(Ce)})}),At=We=>(an,Ln)=>tt(Ln,"type").each(to=>{lt(We(to),Ln.no_events)});zo({mceTableSplitCells:()=>lt(m.unmergeCells),mceTableMergeCells:()=>lt(m.mergeCells),mceTableInsertRowBefore:()=>lt(m.insertRowsBefore),mceTableInsertRowAfter:()=>lt(m.insertRowsAfter),mceTableInsertColBefore:()=>lt(m.insertColumnsBefore),mceTableInsertColAfter:()=>lt(m.insertColumnsAfter),mceTableDeleteCol:()=>lt(m.deleteColumn),mceTableDeleteRow:()=>lt(m.deleteRow),mceTableCutCol:()=>Et().each(We=>{DS(We),lt(m.deleteColumn)}),mceTableCutRow:()=>It().each(We=>{AS(We),lt(m.deleteRow)}),mceTableCopyCol:()=>Et().each(We=>DS(We)),mceTableCopyRow:()=>It().each(We=>AS(We)),mceTablePasteColBefore:()=>Ge(m.pasteColsBefore,d1),mceTablePasteColAfter:()=>Ge(m.pasteColsAfter,d1),mceTablePasteRowBefore:()=>Ge(m.pasteRowsBefore,Tf),mceTablePasteRowAfter:()=>Ge(m.pasteRowsAfter,Tf),mceTableDelete:v,mceTableCellToggleClass:J,mceTableToggleClass:U,mceTableToggleCaption:ae,mceTableSizingMode:(We,an)=>T(an),mceTableCellType:At(We=>We==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:At(We=>We==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:At(We=>{switch(We){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(We,an)=>i.addCommand(an,We)),i.addCommand("mceInsertTable",(We,an)=>{_S(i,an.rows,an.columns,an.options)}),i.addCommand("mceTableApplyCellStyle",(We,an)=>{const Ln=dc=>"tablecell"+dc.toLowerCase().replace("-","");if(!_t(an))return;const to=Bo(Dl(i),Id);if(to.length===0)return;const er=ur(an,(dc,ta)=>i.formatter.has(Ln(ta))&&Hn(dc));en(er)||(zo(er,(dc,ta)=>{const Wl=Ln(ta);je(to,Rf=>{dc===""?i.formatter.remove(Wl,{value:null},Rf.dom,!0):i.formatter.apply(Wl,{value:dc},Rf.dom)})}),A(to[0]).each(dc=>Sf(i,dc.dom,a1)))})},RS=(i,m)=>{const h=gu(i),v=T=>i2(Fp(i)).bind(A=>$r(A,h).map(P=>{const U=wh(Dl(i),P,A);return T(P,U)})).getOr("");zo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,A)=>i.addQueryValueHandler(A,T))},wg=_r.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),m1=(i,m,h,v)=>i.fold(m,h,v),f1=i=>i.fold(Xe,Xe,Xe),zy=wg.before,UE=wg.on,Uy=wg.after,Qc={before:zy,on:UE,after:Uy,cata:m1,getStart:f1},Nh={create:(i,m)=>({selection:i,kill:m})},WE=(i,m)=>{const h=i.document.createRange();return h.selectNode(m.dom),h},g1=(i,m)=>{const h=i.document.createRange();return Cg(h,m),h},Cg=(i,m)=>i.selectNodeContents(m.dom),Sg=(i,m)=>{m.fold(h=>{i.setStartBefore(h.dom)},(h,v)=>{i.setStart(h.dom,v)},h=>{i.setStartAfter(h.dom)})},vv=(i,m)=>{m.fold(h=>{i.setEndBefore(h.dom)},(h,v)=>{i.setEnd(h.dom,v)},h=>{i.setEndAfter(h.dom)})},Bh=(i,m,h)=>{const v=i.document.createRange();return Sg(v,m),vv(v,h),v},yv=(i,m,h,v,T)=>{const A=i.document.createRange();return A.setStart(m.dom,h),A.setEnd(v.dom,T),A},kf=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),da=i=>{const m=i.getClientRects(),h=m.length>0?m[0]:i.getBoundingClientRect();return h.width>0||h.height>0?fe.some(h).map(kf):fe.none()},xg=_r.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Wy=(i,m,h)=>m(pe.fromDom(h.startContainer),h.startOffset,pe.fromDom(h.endContainer),h.endOffset),ZE=(i,m)=>m.match({domRange:h=>({ltr:G(h),rtl:fe.none}),relative:(h,v)=>({ltr:Fu(()=>Bh(i,h,v)),rtl:Fu(()=>fe.some(Bh(i,v,h)))}),exact:(h,v,T,A)=>({ltr:Fu(()=>yv(i,h,v,T,A)),rtl:Fu(()=>fe.some(yv(i,T,A,h,v)))})}),Zy=(i,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>xg.rtl(pe.fromDom(T.endContainer),T.endOffset,pe.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>Wy(i,xg.ltr,h)):Wy(i,xg.ltr,h)},$h=(i,m)=>{const h=ZE(i,m);return Zy(i,h)},Tg=(i,m)=>$h(i,m).match({ltr:(v,T,A,P)=>{const U=i.document.createRange();return U.setStart(v.dom,T),U.setEnd(A.dom,P),U},rtl:(v,T,A,P)=>{const U=i.document.createRange();return U.setStart(A.dom,P),U.setEnd(v.dom,T),U}});xg.ltr,xg.rtl;const Ph={create:(i,m,h,v)=>({start:i,soffset:m,finish:h,foffset:v})},h1={create:(i,m,h,v)=>({start:Qc.on(i,m),finish:Qc.on(h,v)})},NS=(i,m)=>{const h=Tg(i,m);return Ph.create(pe.fromDom(h.startContainer),h.startOffset,pe.fromDom(h.endContainer),h.endOffset)},Mm=h1.create,wv=(i,m,h,v,T,A,P)=>bo(h,T)&&v===A?fe.none():Se(h,"td,th",m).bind(U=>Se(T,"td,th",m).bind(J=>Wa(i,m,U,J,P))),Wa=(i,m,h,v,T)=>bo(h,v)?fe.none():Vp(h,v,m).bind(A=>{const P=A.boxes.getOr([]);return P.length>1?(T(i,P,A.start,A.finish),fe.some(Nh.create(fe.some(Mm(h,0,h,sc(h))),!0))):fe.none()}),BS=(i,m,h,v,T)=>{const A=P=>(T.clearBeforeUpdate(h),T.selectRange(h,P.boxes,P.start,P.finish),P.boxes);return iy(v,i,m,T.firstSelectedSelector,T.lastSelectedSelector).map(A)},yu=(i,m)=>({item:i,mode:m}),qy=(i,m,h,v=Qu)=>i.property().parent(m).map(T=>yu(T,v)),Qu=(i,m,h,v=ed)=>h.sibling(i,m).map(T=>yu(T,v)),ed=(i,m,h,v=ed)=>{const T=i.property().children(m);return h.first(T).map(P=>yu(P,v))},Ky=[{current:qy,next:Qu,fallback:fe.none()},{current:Qu,next:ed,fallback:fe.some(qy)},{current:ed,next:ed,fallback:fe.some(Qu)}],Ih=(i,m,h,v,T=Ky)=>H(T,P=>P.current===h).bind(P=>P.current(i,m,v,P.next).orThunk(()=>P.fallback.bind(U=>Ih(i,m,U,v)))),Cv={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?fe.some(h[h.length-1]):fe.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?fe.some(h[0]):fe.none()})},Sv=(i,m,h,v,T,A)=>Ih(i,m,v,T).bind(U=>A(U.item)?fe.none():h(U.item)?fe.some(U.item):Sv(i,U.item,h,U.mode,T,A)),xv=(i,m,h,v)=>Sv(i,m,h,Qu,Cv.left(),v),td=(i,m,h,v)=>Sv(i,m,h,Qu,Cv.right(),v),Yy=i=>m=>i.property().children(m).length===0,GE=(i,m,h)=>Xy(i,m,Yy(i),h),PS=(i,m,h)=>Jy(i,m,Yy(i),h),Xy=xv,Jy=td,Tv=ju(),IS=(i,m)=>GE(Tv,i,m),Oi=(i,m)=>PS(Tv,i,m),kv=(i,m,h)=>Xy(Tv,i,m,h),FS=(i,m,h)=>Jy(Tv,i,m,h),Fh=(i,m,h)=>Br(i,m,h).isSome(),el=_r.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),wu=(i,m,h)=>{const v=i.getRect(m),T=i.getRect(h);return T.right>v.left&&T.left<v.right},ii=i=>Se(i,"tr"),Nl={...el,verify:(i,m,h,v,T,A,P)=>Se(v,"td,th",P).bind(U=>Se(m,"td,th",P).map(J=>bo(U,J)?bo(v,U)&&sc(U)===T?A(J):el.none("in same cell"):Go(ii,[U,J]).fold(()=>wu(i,J,U)?el.success():A(J),ae=>A(J)))).getOr(el.none("default")),cata:(i,m,h,v,T)=>i.fold(m,h,v,T)},Ba=(i,m,h,v)=>({parent:i,children:m,element:h,index:v}),Qy=i=>Zc(i).bind(m=>{const h=Lo(m);return p1(h,i).map(v=>Ba(m,h,i,v))}),p1=(i,m)=>Hr(i,at(bo,m)),kg=Is("br"),b1=(i,m,h)=>m(i,h).bind(v=>Oa(v)&&ks(v).trim().length===0?b1(v,m,h):fe.some(v)),Ev=(i,m,h)=>h.traverse(m).orThunk(()=>b1(m,h.gather,i)).map(h.relative),v1=(i,m)=>ba(i,m).filter(kg).orThunk(()=>ba(i,m-1).filter(kg)),LS=(i,m,h,v)=>v1(m,h).bind(T=>v.traverse(T).fold(()=>b1(T,v.gather,i).map(v.relative),A=>Qy(A).map(P=>Qc.on(P.parent,P.index)))),KE=(i,m,h,v)=>(kg(m)?Ev(i,m,v):LS(i,m,h,v)).map(A=>({start:A,finish:A})),YE=i=>Nl.cata(i,m=>fe.none(),()=>fe.none(),m=>fe.some(gf(m,0)),m=>fe.some(gf(m,sc(m)))),Kd=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),y1=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),_v=(i,m,h)=>({left:i.left+m,top:i.top+h,right:i.right+m,bottom:i.bottom+h}),Yd=i=>i.top,Ov=i=>i.bottom,Av=(i,m,h)=>h>=0&&h<sc(m)?i.getRangedRect(m,h,m,h+1):h>0?i.getRangedRect(m,h-1,m,h):fe.none(),Eg=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),ew=(i,m)=>fe.some(i.getRect(m)),HS=(i,m,h)=>Zr(m)?ew(i,m).map(Eg):Oa(m)?Av(i,m,h).map(Eg):fe.none(),tw=(i,m)=>Zr(m)?ew(i,m).map(Eg):Oa(m)?i.getRangedRect(m,0,m,sc(m)).map(Eg):fe.none(),Ef=5,XE=100,lc=_r.generate([{none:[]},{retry:["caret"]}]),JE=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,Lh=(i,m,h)=>Ys(m,Ua).fold(Bt,v=>tw(i,v).exists(T=>JE(h,T))),Hh=(i,m,h,v,T)=>{const A=Kd(T,Ef);return Math.abs(h.bottom-v.bottom)<1||h.top>T.bottom?lc.retry(A):h.top===T.bottom?lc.retry(Kd(T,1)):Lh(i,m,T)?lc.retry(_v(A,Ef,0)):lc.none()},QE={point:Yd,adjuster:(i,m,h,v,T)=>{const A=y1(T,Ef);return Math.abs(h.top-v.top)<1||h.bottom<T.top?lc.retry(A):h.bottom===T.top?lc.retry(y1(T,1)):Lh(i,m,T)?lc.retry(_v(A,Ef,0)):lc.none()},move:y1,gather:IS},e_={point:Ov,adjuster:Hh,move:Kd,gather:Oi},Dv=(i,m,h)=>i.elementFromPoint(m,h).filter(v=>Qo(v)==="table").isSome(),t_=(i,m,h,v,T)=>Rv(i,m,h,m.move(v,Ef),T),Rv=(i,m,h,v,T)=>T===0?fe.some(v):Dv(i,v.left,m.point(v))?t_(i,m,h,v,T-1):i.situsFromPoint(v.left,m.point(v)).bind(A=>A.start.fold(fe.none,P=>tw(i,P).bind(U=>m.adjuster(i,P,U,h,v).fold(fe.none,J=>Rv(i,m,h,J,T-1))).orThunk(()=>fe.some(v)),fe.none)),n_=(i,m,h)=>i.point(m)>h.getInnerHeight()?fe.some(i.point(m)-h.getInnerHeight()):i.point(m)<0?fe.some(-i.point(m)):fe.none(),zS=(i,m,h)=>{const v=i.move(h,Ef),T=Rv(m,i,h,v,XE).getOr(v);return n_(i,T,m).fold(()=>m.situsFromPoint(T.left,i.point(T)),A=>(m.scrollBy(0,A),m.situsFromPoint(T.left,i.point(T)-A)))},Mv={tryUp:at(zS,QE),tryDown:at(zS,e_),getJumpSize:G(Ef)},o_=20,nw=(i,m,h)=>i.getSelection().bind(v=>KE(m,v.finish,v.foffset,h).fold(()=>fe.some(gf(v.finish,v.foffset)),T=>{const A=i.fromSitus(T),P=Nl.verify(i,v.finish,v.foffset,A.finish,A.foffset,h.failure,m);return YE(P)})),w1=(i,m,h,v,T,A)=>A===0?fe.none():Vh(i,m,h,v,T).bind(P=>{const U=i.fromSitus(P),J=Nl.verify(i,h,v,U.finish,U.foffset,T.failure,m);return Nl.cata(J,()=>fe.none(),()=>fe.some(P),ae=>bo(h,ae)&&v===0?Po(i,h,v,y1,T):w1(i,m,ae,0,T,A-1),ae=>bo(h,ae)&&v===sc(ae)?Po(i,h,v,Kd,T):w1(i,m,ae,sc(ae),T,A-1))}),Po=(i,m,h,v,T)=>HS(i,m,h).bind(A=>Bm(i,T,v(A,Mv.getJumpSize()))),Bm=(i,m,h)=>{const v=Li().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,h):fe.none()},Vh=(i,m,h,v,T)=>HS(i,h,v).bind(A=>Bm(i,T,A)),ow=(i,m,h)=>nw(i,m,h).bind(v=>w1(i,m,v.element,v.offset,h,o_).map(i.fromSitus)),US=(i,m)=>Fh(i,h=>Zc(h).exists(v=>bo(v,m))),$m=(i,m,h,v,T)=>Se(v,"td,th",m).bind(A=>Se(A,"table",m).bind(P=>US(T,P)?ow(i,m,h).bind(U=>Se(U.finish,"td,th",m).map(J=>({start:A,finish:J,range:U}))):fe.none())),zh=(i,m,h,v,T,A)=>A(v,m).orThunk(()=>$m(i,m,h,v,T).map(P=>{const U=P.range;return Nh.create(fe.some(Mm(U.start,U.soffset,U.finish,U.foffset)),!0)})),sw=(i,m)=>Se(i,"tr",m).bind(h=>Se(h,"table",m).bind(v=>{const T=Gr(v,"tr");return bo(h,T[0])?kv(v,A=>wm(A).isSome(),m).map(A=>{const P=sc(A);return Nh.create(fe.some(Mm(A,P,A,P)),!0)}):fe.none()})),rw=(i,m)=>Se(i,"tr",m).bind(h=>Se(h,"table",m).bind(v=>{const T=Gr(v,"tr");return bo(h,T[T.length-1])?FS(v,A=>si(A).isSome(),m).map(A=>Nh.create(fe.some(Mm(A,0,A,0)),!0)):fe.none()})),Nv=(i,m,h,v,T,A,P)=>$m(i,h,v,T,A).bind(U=>Wa(m,h,U.start,U.finish,P)),Bv=i=>{let m=i;return{get:()=>m,set:T=>{m=T}}},WS=i=>{const m=Bv(fe.none()),h=()=>m.get().each(i);return{clear:()=>{h(),m.set(fe.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:U=>{h(),m.set(fe.some(U))}}},C1=()=>{const i=WS(ot);return{...i,on:h=>i.get().each(h)}},S1=(i,m)=>Se(i,"td,th",m),ZS=i=>Qa(i).exists(ri),jS=(i,m,h,v)=>{const T=C1(),A=T.clear,P=Ce=>{T.on(lt=>{v.clearBeforeUpdate(m),S1(Ce.target,h).each(It=>{Vp(lt,It,h).each(Et=>{const Ge=Et.boxes.getOr([]);if(Ge.length===1){const At=Ge[0],We=mf(At)==="false",an=Le(Nb(Ce.target),At,bo);We&&an&&(v.selectRange(m,Ge,At,At),i.selectContents(At))}else Ge.length>1&&(v.selectRange(m,Ge,Et.start,Et.finish),i.selectContents(It))})})})};return{clearstate:A,mousedown:Ce=>{v.clear(m),S1(Ce.target,h).filter(ZS).each(T.set)},mouseover:Ce=>{P(Ce)},mouseup:Ce=>{P(Ce),A()}}},Uh={traverse:sl,gather:Oi,relative:Qc.before,retry:Mv.tryDown,failure:Nl.failedDown},$v={traverse:ol,gather:IS,relative:Qc.before,retry:Mv.tryUp,failure:Nl.failedUp},_g=i=>m=>m===i,_f=_g(38),x1=_g(40),Og=i=>i>=37&&i<=40,GS={isBackward:_g(37),isForward:_g(39)},aw={isBackward:_g(39),isForward:_g(37)},Wh=i=>{const m=i!==void 0?i.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Hi(h,v)},cw=(i,m,h)=>{const T=(h!==void 0?h.dom:document).defaultView;T&&T.scrollBy(i,m)},Pv=_r.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),s_=i=>Pv.exact(i.start,i.soffset,i.finish,i.foffset),qS=i=>i.match({domRange:m=>pe.fromDom(m.startContainer),relative:(m,h)=>Qc.getStart(m),exact:(m,h,v,T)=>m}),Of=Pv.domRange,lw=Pv.relative,iw=Pv.exact,Iv=i=>{const m=qS(i);return fs(m)},KS=Ph.create,Pm={domRange:Of,relative:lw,exact:iw,exactFromRange:s_,getWin:Iv,range:KS},uw=(i,m,h)=>{var v,T;return fe.from((T=(v=i.dom).caretPositionFromPoint)===null||T===void 0?void 0:T.call(v,m,h)).bind(A=>{if(A.offsetNode===null)return fe.none();const P=i.dom.createRange();return P.setStart(A.offsetNode,A.offset),P.collapse(),fe.some(P)})},zt=(i,m,h)=>{var v,T;return fe.from((T=(v=i.dom).caretRangeFromPoint)===null||T===void 0?void 0:T.call(v,m,h))},ic=(()=>document.caretPositionFromPoint?uw:document.caretRangeFromPoint?zt:fe.none)(),Ki=(i,m,h)=>{const v=pe.fromDom(i.document);return ic(v,m,h).map(T=>Ph.create(pe.fromDom(T.startContainer),T.startOffset,pe.fromDom(T.endContainer),T.endOffset))},$a=(i,m)=>{const h=Qo(i);return h==="input"?Qc.after(i):Eo(["br","img"],h)?m===0?Qc.before(i):Qc.after(i):Qc.on(i,m)},Cu=(i,m)=>{const h=i.fold(Qc.before,$a,Qc.after),v=m.fold(Qc.before,$a,Qc.after);return Pm.relative(h,v)},Ai=(i,m,h,v)=>{const T=$a(i,m),A=$a(h,v);return Pm.relative(T,A)},Sa=(i,m,h,v)=>{const A=fr(i).dom.createRange();return A.setStart(i.dom,m),A.setEnd(h.dom,v),A},dw=(i,m,h,v)=>{const T=Sa(i,m,h,v),A=bo(i,h)&&m===v;return T.collapsed&&!A},Zh=i=>fe.from(i.getSelection()),Ag=(i,m)=>{Zh(i).each(h=>{h.removeAllRanges(),h.addRange(m)})},T1=(i,m,h,v,T)=>{const A=yv(i,m,h,v,T);Ag(i,A)},YS=(i,m,h,v,T,A)=>{m.collapse(h.dom,v),m.extend(T.dom,A)},XS=(i,m)=>$h(i,m).match({ltr:(h,v,T,A)=>{T1(i,h,v,T,A)},rtl:(h,v,T,A)=>{Zh(i).each(P=>{if(P.setBaseAndExtent)P.setBaseAndExtent(h.dom,v,T.dom,A);else if(P.extend)try{YS(i,P,h,v,T,A)}catch{T1(i,T,A,h,v)}else T1(i,T,A,h,v)})}}),JS=(i,m,h,v,T)=>{const A=Ai(m,h,v,T);XS(i,A)},Fv=(i,m,h)=>{const v=Cu(m,h);XS(i,v)},mw=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),h=i.getRangeAt(i.rangeCount-1);return fe.some(Ph.create(pe.fromDom(m.startContainer),m.startOffset,pe.fromDom(h.endContainer),h.endOffset))}else return fe.none()},QS=i=>{if(i.anchorNode===null||i.focusNode===null)return mw(i);{const m=pe.fromDom(i.anchorNode),h=pe.fromDom(i.focusNode);return dw(m,i.anchorOffset,h,i.focusOffset)?fe.some(Ph.create(m,i.anchorOffset,h,i.focusOffset)):mw(i)}},k1=(i,m,h=!0)=>{const T=(h?g1:WE)(i,m);Ag(i,T)},E1=i=>Zh(i).filter(m=>m.rangeCount>0).bind(QS),_1=i=>E1(i).map(m=>Pm.exact(m.start,m.soffset,m.finish,m.foffset)),O1=(i,m)=>{const h=Tg(i,m);return da(h)},Lv=(i,m,h)=>Ki(i,m,h),Hv=i=>{Zh(i).each(m=>m.removeAllRanges())},Dg=i=>({elementFromPoint:(We,an)=>pe.fromPoint(pe.fromDom(i.document),We,an),getRect:We=>We.dom.getBoundingClientRect(),getRangedRect:(We,an,Ln,to)=>{const er=Pm.exact(We,an,Ln,to);return O1(i,er)},getSelection:()=>_1(i).map(We=>NS(i,We)),fromSitus:We=>{const an=Pm.relative(We.start,We.finish);return NS(i,an)},situsFromPoint:(We,an)=>Lv(i,We,an).map(Ln=>h1.create(Ln.start,Ln.soffset,Ln.finish,Ln.foffset)),clearSelection:()=>{Hv(i)},collapseSelection:(We=!1)=>{_1(i).each(an=>an.fold(Ln=>Ln.collapse(We),(Ln,to)=>{const er=We?Ln:to;Fv(i,er,er)},(Ln,to,er,dc)=>{const ta=We?Ln:er,Wl=We?to:dc;JS(i,ta,Wl,ta,Wl)}))},setSelection:We=>{JS(i,We.start,We.soffset,We.finish,We.foffset)},setRelativeSelection:(We,an)=>{Fv(i,We,an)},selectNode:We=>{k1(i,We,!1)},selectContents:We=>{k1(i,We)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>Wh(pe.fromDom(i.document)).top,scrollBy:(We,an)=>{cw(We,an,pe.fromDom(i.document))}}),ui=(i,m)=>({rows:i,cols:m}),A1=(i,m,h,v)=>{const T=Dg(i),A=jS(T,m,h,v);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},ex=i=>Ys(i,_n).exists(ri),fw=(i,m)=>ex(i)||ex(m),r_=(i,m,h,v)=>{const T=Dg(i),A=()=>(v.clear(m),fe.none());return{keydown:(J,ae,Ce,lt,It,Et)=>{const Ge=J.raw,At=Ge.which,We=Ge.shiftKey===!0;return bh(m,v.selectedSelector).fold(()=>(Og(At)&&!We&&v.clearBeforeUpdate(m),Og(At)&&We&&!fw(ae,lt)?fe.none:x1(At)&&We?at(Nv,T,m,h,Uh,lt,ae,v.selectRange):_f(At)&&We?at(Nv,T,m,h,$v,lt,ae,v.selectRange):x1(At)?at(zh,T,h,Uh,lt,ae,rw):_f(At)?at(zh,T,h,$v,lt,ae,sw):fe.none),Ln=>{const to=er=>()=>cs(er,ta=>BS(ta.rows,ta.cols,m,Ln,v)).fold(()=>Ib(m,v.firstSelectedSelector,v.lastSelectedSelector).map(ta=>{const Wl=x1(At)||Et.isForward(At)?Qc.after:Qc.before;return T.setRelativeSelection(Qc.on(ta.first,0),Wl(ta.table)),v.clear(m),Nh.create(fe.none(),!0)}),ta=>fe.some(Nh.create(fe.none(),!0)));return Og(At)&&We&&!fw(ae,lt)?fe.none:x1(At)&&We?to([ui(1,0)]):_f(At)&&We?to([ui(-1,0)]):Et.isBackward(At)&&We?to([ui(0,-1),ui(-1,0)]):Et.isForward(At)&&We?to([ui(0,1),ui(1,0)]):Og(At)&&!We?A:fe.none})()},keyup:(J,ae,Ce,lt,It)=>bh(m,v.selectedSelector).fold(()=>{const Et=J.raw,Ge=Et.which;return Et.shiftKey===!0&&Og(Ge)&&fw(ae,lt)?wv(m,h,ae,Ce,lt,It,v.selectRange):fe.none()},fe.none)}},tx=(i,m,h,v)=>{const T=Dg(i);return(A,P)=>{v.clearBeforeUpdate(m),Vp(A,P,h).each(U=>{const J=U.boxes.getOr([]);v.selectRange(m,J,U.start,U.finish),T.selectContents(P),T.collapseSelection()})}},D1=(i,m)=>{const h=se(i,m);return h===void 0||h===""?[]:h.split(" ")},a_=(i,m,h)=>{const T=D1(i,m).concat([h]);return ys(i,m,T.join(" ")),!0},R1=(i,m,h)=>{const v=Bo(D1(i,m),T=>T!==h);return v.length>0?ys(i,m,v.join(" ")):Re(i,m),!1},uc=i=>i.dom.classList!==void 0,Su=i=>D1(i,"class"),Di=(i,m)=>a_(i,"class",m),Af=(i,m)=>R1(i,"class",m),xu=(i,m)=>{uc(i)?i.dom.classList.add(m):Di(i,m)},c_=i=>{(uc(i)?i.dom.classList:Su(i)).length===0&&Re(i,"class")},gw=(i,m)=>{uc(i)?i.dom.classList.remove(m):Af(i,m),c_(i)},hw=(i,m)=>uc(i)&&i.dom.classList.contains(m),pw=(i,m)=>{je(m,h=>{gw(i,h)})},l_=i=>m=>{xu(m,i)},bw=i=>m=>{pw(m,i)},vw={byClass:i=>{const m=l_(i.selected),h=bw([i.selected,i.lastSelected,i.firstSelected]),v=A=>{const P=Gr(A,i.selectedSelector);je(P,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(A,P,U,J)=>{v(A),je(P,m),xu(U,i.firstSelected),xu(J,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,h)=>{const v=J=>{Re(J,i.selected),Re(J,i.firstSelected),Re(J,i.lastSelected)},T=J=>{ys(J,i.selected,"1")},A=J=>{P(J),h()},P=J=>{const ae=Gr(J,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);je(ae,v)};return{clearBeforeUpdate:P,clear:A,selectRange:(J,ae,Ce,lt)=>{A(J),je(ae,T),ys(Ce,i.firstSelected,"1"),ys(lt,i.lastSelected,"1"),m(ae,Ce,lt)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},yw=(i,m,h,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return h(i.elements)}},zs=()=>({tag:"none"}),nd=i=>({tag:"multiple",elements:i}),ww=i=>({tag:"single",element:i}),Cw=(i,m,h)=>({get:()=>c2(i(),h).fold(()=>m().fold(zs,ww),nd)}),nx=(i,m)=>{const h=i.slice(0,m[m.length-1].row+1),v=jb(h);return ms(v,T=>{const A=T.cells.slice(0,m[m.length-1].column+1);return dn(A,P=>P.element)})},Vv=(i,m)=>{const h=i.slice(m[0].row+m[0].rowspan-1,i.length),v=jb(h);return ms(v,T=>{const A=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return dn(A,P=>P.element)})},ox=(i,m,h)=>{const v=Co.fromTable(i);return pf(v,m).map(A=>{const P=ji(v,h,!1),{rows:U}=Ha(P),J=nx(U,A),ae=Vv(U,A);return{upOrLeftCells:J,downOrRightCells:ae}})},zv=(i,m,h,v,T,A,P)=>({target:i,x:m,y:h,stop:v,prevent:T,kill:A,raw:P}),sx=i=>{const m=pe.fromDom(Io(i).getOr(i.target)),h=()=>i.stopPropagation(),v=()=>i.preventDefault(),T=Sn(v,h);return zv(m,i.clientX,i.clientY,h,v,T,i)},d_=(i,m)=>h=>{i(h)&&m(sx(h))},rx=(i,m,h,v,T)=>{const A=d_(h,v);return i.dom.addEventListener(m,A,T),{unbind:at(Sw,i,m,A,T)}},m_=(i,m,h,v)=>rx(i,m,h,v,!1),Sw=(i,m,h,v)=>{i.dom.removeEventListener(m,h,v)},ax=Pe,on=(i,m,h)=>m_(i,m,ax,h),od=sx,xw=i=>!hw(pe.fromDom(i.target),"ephox-snooker-resizer-bar"),cx=(i,m)=>{const h=Cw(()=>pe.fromDom(i.getBody()),()=>i2(Fp(i),gu(i)),Al.selectedSelector),v=(J,ae,Ce)=>{$r(ae).each(It=>{const Et=Ah(i),Ge=Cm(ot,pe.fromDom(i.getDoc()),Et),At=Dl(i),We=ox(It,{selection:At},Ge);eS(i,J,ae,Ce,We)})},T=()=>$y(i),A=vw.byAttr(Al,v,T);return i.on("init",J=>{const ae=i.getWin(),Ce=Pd(i),lt=gu(i),It=()=>{const Ds=i.selection,Bl=pe.fromDom(Ds.getStart()),$l=pe.fromDom(Ds.getEnd());Go($r,[Bl,$l]).fold(()=>A.clear(Ce),ot)},Et=A1(ae,Ce,lt,A),Ge=r_(ae,Ce,lt,A),At=tx(ae,Ce,lt,A),We=Ds=>Ds.raw.shiftKey===!0;i.on("TableSelectorChange",Ds=>At(Ds.start,Ds.finish));const an=(Ds,Bl)=>{We(Ds)&&(Bl.kill&&Ds.kill(),Bl.selection.each($l=>{const Ri=Pm.relative($l.start,$l.finish),mi=Tg(ae,Ri);i.selection.setRng(mi)}))},Ln=Ds=>{const Bl=od(Ds);if(Bl.raw.shiftKey&&Og(Bl.raw.which)){const $l=i.selection.getRng(),Ri=pe.fromDom($l.startContainer),mi=pe.fromDom($l.endContainer);Ge.keyup(Bl,Ri,$l.startOffset,mi,$l.endOffset).each(Xh=>{an(Bl,Xh)})}},to=Ds=>{const Bl=od(Ds);m.hide();const $l=i.selection.getRng(),Ri=pe.fromDom($l.startContainer),mi=pe.fromDom($l.endContainer),Xh=Jf(GS,aw)(pe.fromDom(i.selection.getStart()));Ge.keydown(Bl,Ri,$l.startOffset,mi,$l.endOffset,Xh).each(Zl=>{an(Bl,Zl)}),m.show()},er=Ds=>Ds.button===0,dc=Ds=>Ds.buttons===void 0?!0:(Ds.buttons&1)!==0,ta=Ds=>{Et.clearstate()},Wl=Ds=>{er(Ds)&&xw(Ds)&&Et.mousedown(od(Ds))},Rf=Ds=>{dc(Ds)&&xw(Ds)&&Et.mouseover(od(Ds))},Xv=Ds=>{er(Ds)&&xw(Ds)&&Et.mouseup(od(Ds))},Jv=(()=>{const Ds=Bv(pe.fromDom(Ce)),Bl=Bv(0);return{touchEnd:Ri=>{const mi=pe.fromDom(Ri.target);if(Is("td")(mi)||Is("th")(mi)){const Xh=Ds.get(),Zl=Bl.get();bo(Xh,mi)&&Ri.timeStamp-Zl<300&&(Ri.preventDefault(),At(mi,mi))}Ds.set(mi),Bl.set(Ri.timeStamp)}}})();i.on("dragstart",ta),i.on("mousedown",Wl),i.on("mouseover",Rf),i.on("mouseup",Xv),i.on("touchend",Jv.touchEnd),i.on("keyup",Ln),i.on("keydown",to),i.on("NodeChange",It)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Al.firstSelected),i.serializer.addTempAttr(Al.lastSelected)}),{getSelectedCells:()=>yw(h.get(),G([]),J=>dn(J,ae=>ae.dom),J=>[J.dom]),clearSelectedCells:J=>A.clear(pe.fromDom(J))}},Kr=i=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=Bo(m,P=>P!==A)},trigger:(...A)=>{const P={};je(i,(U,J)=>{P[U]=A[J]}),je(m,U=>{U(P)})}}},ma=i=>{const m=_a(i,v=>({bind:v.bind,unbind:v.unbind})),h=_a(i,v=>v.trigger);return{registry:m,trigger:h}},jh=(i,m)=>{let h=null;const v=()=>{Wn(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...A)=>{v(),h=setTimeout(()=>{h=null,i.apply(null,A)},m)}}},M1=i=>i.slice(0).sort(),f_=(i,m)=>{throw new Error("All required keys ("+M1(i).join(", ")+") were not specified. Specified keys were: "+M1(m).join(", ")+".")},g_=i=>{throw new Error("Unsupported keys for object: "+M1(i).join(", "))},So=(i,m)=>{if(!Zt(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");je(m,h=>{if(!Hn(h))throw new Error("The value "+h+" in the "+i+" fields was not a string.")})},Tw=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+M1(i).join(", ")+") were not.")},Gh=i=>{const m=M1(i);H(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},Uv=(i,m)=>h_(i,m,{validate:Ht,label:"function"}),h_=(i,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return So("required",m),Gh(m),v=>{const T=rn(v);In(m,U=>Eo(T,U))||f_(m,T),i(m,T);const P=Bo(m,U=>!h.validate(v[U],U));return P.length>0&&Tw(P,h.label),v}},p_=(i,m)=>{const h=Bo(m,v=>!Eo(i,v));h.length>0&&g_(h)},kw=i=>Uv(p_,i),u3=kw(["compare","extract","mutate","sink"]),lx=kw(["element","start","stop","destroy"]),b_=kw(["forceDrop","drop","move","delayDrop"]),Ew=()=>{let i=fe.none();const m=()=>{i=fe.none()},h=(A,P)=>{const U=i.map(J=>A.compare(J,P));return i=fe.some(P),U},v=(A,P)=>{P.extract(A).each(J=>{h(P,J).each(Ce=>{T.trigger.move(Ce)})})},T=ma({move:Kr(["info"])});return{onEvent:v,reset:m,events:T.registry}},_w=()=>{const i=ma({move:Kr(["info"])});return{onEvent:ot,reset:ot,events:i.registry}},ix=()=>{const i=_w(),m=Ew();let h=i;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=i},isOn:()=>h===m,onEvent:(U,J)=>{h.onEvent(U,J)},events:m.events}},ux=(i,m,h)=>{let v=!1;const T=ma({start:Kr([]),stop:Kr([])}),A=ix(),P=()=>{Ge.stop(),A.isOn()&&(A.off(),T.trigger.stop())},U=jh(P,200),J=We=>{Ge.start(We),A.on(),T.trigger.start()},ae=We=>{U.cancel(),A.onEvent(We,m)};A.events.move.bind(We=>{m.mutate(i,We.info)});const Ce=()=>{v=!0},lt=()=>{v=!1},It=()=>v,Et=We=>(...an)=>{v&&We.apply(null,an)},Ge=m.sink(b_({forceDrop:P,drop:Et(P),move:Et(ae),delayDrop:Et(U.throttle)}),h),At=()=>{Ge.destroy()};return{element:Ge.element,go:J,on:Ce,off:lt,isActive:It,destroy:At,events:T.registry}},dx=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},v_=dx("ephox-dragster").resolve,y_=i=>{const m={layerClass:v_("blocker"),...i},h=pe.fromTag("div");return ys(h,"role","presentation"),wc(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),xu(h,v_("blocker")),xu(h,m.layerClass),{element:G(h),destroy:()=>{Ks(h)}}};var w_=u3({compare:(i,m)=>Hi(m.left-i.left,m.top-i.top),extract:i=>fe.some(Hi(i.x,i.y)),sink:(i,m)=>{const h=y_(m),v=on(h.element(),"mousedown",i.forceDrop),T=on(h.element(),"mouseup",i.drop),A=on(h.element(),"mousemove",i.move),P=on(h.element(),"mouseout",i.delayDrop),U=()=>{h.destroy(),T.unbind(),A.unbind(),P.unbind(),v.unbind()},J=Ce=>{_s(Ce,h.element())},ae=()=>{Ks(h.element())};return lx({element:h.element,start:J,stop:ae,destroy:U})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const N1=(i,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:w_;return ux(i,v,m)},Zv=dx("ephox-snooker").resolve,C_=()=>{const i=ma({drag:Kr(["xDelta","yDelta"])});return{mutate:(h,v)=>{i.trigger.drag(h,v)},events:i.registry}},S_=()=>{const i=ma({drag:Kr(["xDelta","yDelta","target"])});let m=fe.none();const h=C_();return h.events.drag.bind(A=>{m.each(P=>{i.trigger.drag(A.xDelta,A.yDelta,P)})}),{assign:A=>{m=fe.some(A)},get:()=>m,mutate:h.mutate,events:i.registry}},Df=(i,m,h,v,T)=>{const A=pe.fromTag("div");return wc(A,{position:"absolute",left:m-v/2+"px",top:h+"px",height:T+"px",width:v+"px"}),yr(A,{"data-column":i,role:"presentation"}),A},jv=(i,m,h,v,T)=>{const A=pe.fromTag("div");return wc(A,{position:"absolute",left:m+"px",top:h-T/2+"px",height:T+"px",width:v+"px"}),yr(A,{"data-row":i,role:"presentation"}),A},Ow=Zv("resizer-bar"),Gv=Zv("resizer-rows"),Aw=Zv("resizer-cols"),B1=7,x_=(i,m)=>ms(i.all,(h,v)=>m(h.element)?[v]:[]),T_=(i,m)=>{const h=[];return No(i.grid.columns,v=>{Co.getColumnAt(i,v).map(A=>A.element).forall(m)&&h.push(v)}),Bo(h,v=>{const T=Co.filterItems(i,A=>A.column===v);return In(T,A=>m(A.element))})},$1=i=>{const m=Gr(i.parent(),"."+Ow);je(m,Ks)},qv=(i,m,h)=>{const v=i.origin();je(m,T=>{T.each(A=>{const P=h(v,A);xu(P,Ow),_s(i.parent(),P)})})},k_=(i,m,h,v)=>{qv(i,m,(T,A)=>{const P=Df(A.col,A.x-T.left,h.top-T.top,B1,v);return xu(P,Aw),P})},qo=(i,m,h,v)=>{qv(i,m,(T,A)=>{const P=jv(A.row,h.left-T.left,A.y-T.top,v,B1);return xu(P,Gv),P})},E_=(i,m,h,v,T)=>{const A=af(h),P=m.isResizable,U=v.length>0?Vu.positions(v,h):[],J=U.length>0?x_(i,P):[],ae=Bo(U,(Et,Ge)=>nt(J,At=>Ge===At));qo(m,ae,A,fo(h));const Ce=T.length>0?zu.positions(T,h):[],lt=Ce.length>0?T_(i,P):[],It=Bo(Ce,(Et,Ge)=>nt(lt,At=>Ge===At));k_(m,It,A,Ab(h))},Xd=(i,m)=>{if($1(i),i.isResizable(m)){const h=Co.fromTable(m),v=J0(h),T=sh(h);E_(h,i,m,v,T)}},Tu=(i,m)=>{const h=Gr(i.parent(),"."+Ow);je(h,m)},Kv=i=>{Tu(i,m=>{Os(m,"display","none")})},di=i=>{Tu(i,m=>{Os(m,"display","block")})},qh=i=>hw(i,Gv),Kh=i=>hw(i,Aw),Rg=Zv("resizer-bar-dragging"),Im=i=>{const m=S_(),h=N1(m,{});let v=fe.none();const T=(Ge,At)=>fe.from(se(Ge,At));m.events.drag.bind(Ge=>{T(Ge.target,"data-row").each(At=>{const We=kr(Ge.target,"top");Os(Ge.target,"top",We+Ge.yDelta+"px")}),T(Ge.target,"data-column").each(At=>{const We=kr(Ge.target,"left");Os(Ge.target,"left",We+Ge.xDelta+"px")})});const A=(Ge,At)=>{const We=kr(Ge,At),an=tc(Ge,"data-initial-"+At,0);return We-an};h.events.stop.bind(()=>{m.get().each(Ge=>{v.each(At=>{T(Ge,"data-row").each(We=>{const an=A(Ge,"top");Re(Ge,"data-initial-top"),Et.trigger.adjustHeight(At,an,parseInt(We,10))}),T(Ge,"data-column").each(We=>{const an=A(Ge,"left");Re(Ge,"data-initial-left"),Et.trigger.adjustWidth(At,an,parseInt(We,10))}),Xd(i,At)})})});const P=(Ge,At)=>{Et.trigger.startAdjust(),m.assign(Ge),ys(Ge,"data-initial-"+At,kr(Ge,At)),xu(Ge,Rg),Os(Ge,"opacity","0.2"),h.go(i.parent())},U=on(i.parent(),"mousedown",Ge=>{qh(Ge.target)&&P(Ge.target,"top"),Kh(Ge.target)&&P(Ge.target,"left")}),J=Ge=>bo(Ge,i.view()),ae=Ge=>Se(Ge,"table",J).filter(ri),Ce=on(i.view(),"mouseover",Ge=>{ae(Ge.target).fold(()=>{$(Ge.target)&&$1(i)},At=>{h.isActive()&&(v=fe.some(At),Xd(i,At))})}),lt=()=>{U.unbind(),Ce.unbind(),h.destroy(),$1(i)},It=Ge=>{Xd(i,Ge)},Et=ma({adjustHeight:Kr(["table","delta","row"]),adjustWidth:Kr(["table","delta","column"]),startAdjust:Kr([])});return{destroy:lt,refresh:It,on:h.on,off:h.off,hideBars:at(Kv,i),showBars:at(di,i),events:Et.registry}},Mg={create:(i,m,h)=>{const v=Vu,T=zu,A=Im(i),P=ma({beforeResize:Kr(["table","type"]),afterResize:Kr(["table","type"]),startDrag:Kr([])});return A.events.adjustHeight.bind(U=>{const J=U.table;P.trigger.beforeResize(J,"row");const ae=v.delta(U.delta,J);yy(J,ae,U.row,v),P.trigger.afterResize(J,"row")}),A.events.startAdjust.bind(U=>{P.trigger.startDrag()}),A.events.adjustWidth.bind(U=>{const J=U.table;P.trigger.beforeResize(J,"col");const ae=T.delta(U.delta,J),Ce=h(J);Jp(J,ae,U.column,m,Ce),P.trigger.afterResize(J,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:P.registry}}},Yi={only:(i,m)=>{const h=Xa(i)?Ts(i):i;return{parent:G(h),view:G(i),origin:G(Hi(0,0)),isResizable:m}},detached:(i,m,h)=>{const v=()=>af(m);return{parent:G(m),view:G(i),origin:v,isResizable:h}},body:(i,m,h)=>({parent:G(m),view:G(i),origin:G(Hi(0,0)),isResizable:h})},Ng=()=>{const i=pe.fromTag("div");return wc(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),_s(K(),i),i},__=(i,m)=>i.inline?Yi.body(pe.fromDom(i.getBody()),Ng(),m):Yi.only(pe.fromDom(i.getDoc()),m),Yv=(i,m)=>{i.inline&&Ks(m.parent())},Zo=i=>dt(i)&&i.nodeName==="TABLE",Rw="bar-",mx=i=>se(i,"data-mce-resize")!=="false",P1=i=>{const m=Co.fromTable(i);Co.hasColumns(m)||je(iu(i),h=>{const v=Il(h,"width");Os(h,"width",v),Re(h,"width")})},O_=i=>{const m=C1(),h=C1(),v=C1();let T,A;const P=Ge=>pg(i,Ge),U=()=>aS(i)?Sh():f2(),J=Ge=>lg(Ge).columns,ae=(Ge,At,We)=>{const an=ws(At,"e");if(A===""&&xf(Ge),We!==T&&A!==""){Os(Ge,"width",A);const Ln=U(),to=P(Ge),er=aS(i)||an?J(Ge)-1:0;Jp(Ge,We-T,er,Ln,to)}else if(zr(A)){const Ln=parseFloat(A.replace("%","")),to=We*Ln/T;Os(Ge,"width",to+"%")}Xk(A)&&P1(Ge)},Ce=()=>{h.on(Ge=>{Ge.destroy()}),v.on(Ge=>{Yv(i,Ge)})};return i.on("init",()=>{const Ge=__(i,mx);if(v.set(Ge),xE(i)&&cS(i)){const At=U(),We=Mg.create(Ge,At,P);We.on(),We.events.startDrag.bind(an=>{m.set(i.selection.getRng())}),We.events.beforeResize.bind(an=>{const Ln=an.table.dom;CE(i,Ln,gh(Ln),o2(Ln),Rw+an.type)}),We.events.afterResize.bind(an=>{const Ln=an.table,to=Ln.dom;Zi(Ln),m.on(er=>{i.selection.setRng(er),i.focus()}),iv(i,to,gh(to),o2(to),Rw+an.type),i.undoManager.add()}),h.set(We)}}),i.on("ObjectResizeStart",Ge=>{const At=Ge.target;if(Zo(At)){const We=pe.fromDom(At);je(i.dom.select(".mce-clonedresizable"),an=>{i.dom.addClass(an,"mce-"+dv(i)+"-columns")}),!gv(We)&&Xu(i)?Iy(We):!qd(We)&&Dh(i)&&xf(We),vS(We)&&aa(Ge.origin,Rw)&&xf(We),T=Ge.width,A=Cs(i)?"":Yk(i,At).getOr("")}}),i.on("ObjectResized",Ge=>{const At=Ge.target;if(Zo(At)){const We=pe.fromDom(At),an=Ge.origin;aa(an,"corner-")&&ae(We,an,Ge.width),Zi(We),Sf(i,We.dom,a1)}}),i.on("SwitchMode",()=>{h.on(Ge=>{i.mode.isReadOnly()?Ge.hideBars():Ge.showBars()})}),i.on("dragstart dragend",Ge=>{h.on(At=>{Ge.type==="dragstart"?(At.hideBars(),At.off()):(At.on(),At.showBars())})}),i.on("remove",()=>{Ce()}),{refresh:Ge=>{h.on(At=>At.refreshBars(pe.fromDom(Ge)))},hide:()=>{h.on(Ge=>Ge.hideBars())},show:()=>{h.on(Ge=>Ge.showBars())}}},Yh=i=>{SE(i);const m=O_(i),h=cx(i,m),v=TE(i,m,h);return zE(i,v),RS(i,v),pl(i,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},Bg=i=>({table:Yh(i)});var Mw=()=>{ct.add("dom",Bg)};Mw()})();(function(){const ct=G=>{let Xe=G;return{get:()=>Xe,set:q=>{Xe=q}}};var En=tinymce.util.Tools.resolve("tinymce.PluginManager");const sn=G=>()=>G;var pt=tinymce.util.Tools.resolve("tinymce.Env");const Rt=G=>G.dispatch("ResizeEditor"),Jt=G=>Xe=>Xe.options.get(G),Hn=G=>{const Xe=G.options.register;Xe("autoresize_overflow_padding",{processor:"number",default:1}),Xe("autoresize_bottom_margin",{processor:"number",default:50})},_t=Jt("min_height"),Zt=Jt("max_height"),Wn=Jt("autoresize_overflow_padding"),vn=Jt("autoresize_bottom_margin"),un=G=>G.plugins.fullscreen&&G.plugins.fullscreen.isFullscreen(),Qt=(G,Xe)=>{const Nt=G.getBody();Nt&&(Nt.style.overflowY=Xe?"":"hidden",Xe||(Nt.scrollTop=0))},dt=(G,Xe,Nt,at)=>{var q;const ft=parseInt((q=G.getStyle(Xe,Nt,at))!==null&&q!==void 0?q:"",10);return isNaN(ft)?0:ft},Ht=G=>{if((G==null?void 0:G.type.toLowerCase())==="setcontent"){const Xe=G;return Xe.selection===!0||Xe.paste===!0}else return!1},it=(G,Xe,Nt,at)=>{var q;const ft=G.dom,Mn=G.getDoc();if(!Mn)return;if(un(G)){Qt(G,!0);return}const Bt=Mn.documentElement,Pe=at?at():Wn(G),fe=(q=_t(G))!==null&&q!==void 0?q:G.getElement().offsetHeight;let Vo=fe;const Zn=dt(ft,Bt,"margin-top",!0),jt=dt(ft,Bt,"margin-bottom",!0);let O=Bt.offsetHeight+Zn+jt+Pe;O<0&&(O=0);const Eo=G.getContainer().offsetHeight,nt=G.getContentAreaContainer().offsetHeight,No=Eo-nt;O+No>fe&&(Vo=O+No);const dn=Zt(G);if(dn&&Vo>dn?(Vo=dn,Qt(G,!0)):Qt(G,!1),Vo!==Xe.get()){const je=Vo-Xe.get();if(ft.setStyle(G.getContainer(),"height",Vo+"px"),Xe.set(Vo),Rt(G),pt.browser.isSafari()&&(pt.os.isMacOS()||pt.os.isiOS())){const po=G.getWin();po.scrollTo(po.pageXOffset,po.pageYOffset)}G.hasFocus()&&Ht(Nt)&&G.selection.scrollIntoView(),(pt.browser.isSafari()||pt.browser.isChromium())&&je<0&&it(G,Xe,Nt,at)}},ot=(G,Xe)=>{let Nt=()=>vn(G),at,q;G.on("init",ft=>{at=0;const Mn=Wn(G),Bt=G.dom;Bt.setStyles(G.getDoc().documentElement,{height:"auto"}),pt.browser.isEdge()||pt.browser.isIE()?Bt.setStyles(G.getBody(),{paddingLeft:Mn,paddingRight:Mn,"min-height":0}):Bt.setStyles(G.getBody(),{paddingLeft:Mn,paddingRight:Mn}),it(G,Xe,ft,Nt),at+=1}),G.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",ft=>{if(at===1)q=G.getContainer().offsetHeight,it(G,Xe,ft,Nt),at+=1;else if(at===2){const Mn=q<G.getContainer().offsetHeight;if(Mn){const Bt=G.dom,Pe=G.getDoc();Bt.setStyles(Pe.documentElement,{"min-height":0}),Bt.setStyles(G.getBody(),{"min-height":"inherit"})}Nt=Mn?sn(0):Nt,at+=1}else it(G,Xe,ft,Nt)})},Sn=(G,Xe)=>{G.addCommand("mceAutoResize",()=>{it(G,Xe)})};var qe=()=>{En.add("autoresize",G=>{if(Hn(G),G.options.isSet("resize")||G.options.set("resize",!1),!G.inline){const Xe=ct(0);Sn(G,Xe),ot(G,Xe)}})};qe()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=(_t,Zt)=>{_t.focus(),_t.undoManager.transact(()=>{_t.setContent(Zt)}),_t.selection.setCursorLocation(),_t.nodeChanged()},sn=_t=>_t.getContent({source_view:!0}),pt=_t=>{const Zt=sn(_t);_t.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Zt},onSubmit:Wn=>{En(_t,Wn.getData().code),Wn.close()}})},Rt=_t=>{_t.addCommand("mceCodeEditor",()=>{pt(_t)})},Jt=_t=>{const Zt=()=>_t.execCommand("mceCodeEditor");_t.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Zt}),_t.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Zt})};var Hn=()=>{ct.add("code",_t=>(Rt(_t),Jt(_t),{}))};Hn()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=(tt,Ye,qt)=>{var en;return qt(tt,Ye.prototype)?!0:((en=tt.constructor)===null||en===void 0?void 0:en.name)===Ye.name},sn=tt=>{const Ye=typeof tt;return tt===null?"null":Ye==="object"&&Array.isArray(tt)?"array":Ye==="object"&&En(tt,String,(qt,en)=>en.isPrototypeOf(qt))?"string":Ye},pt=tt=>Ye=>sn(Ye)===tt,Rt=tt=>Ye=>typeof Ye===tt,Jt=pt("string"),Hn=Rt("boolean"),_t=tt=>tt==null,Zt=tt=>!_t(tt),Wn=Rt("function"),vn=Rt("number"),un=(tt,Ye)=>qt=>tt(Ye(qt)),dt=(tt=>()=>tt)(!1);class Ht{constructor(Ye,qt){this.tag=Ye,this.value=qt}static some(Ye){return new Ht(!0,Ye)}static none(){return Ht.singletonNone}fold(Ye,qt){return this.tag?qt(this.value):Ye()}isSome(){return this.tag}isNone(){return!this.tag}map(Ye){return this.tag?Ht.some(Ye(this.value)):Ht.none()}bind(Ye){return this.tag?Ye(this.value):Ht.none()}exists(Ye){return this.tag&&Ye(this.value)}forall(Ye){return!this.tag||Ye(this.value)}filter(Ye){return!this.tag||Ye(this.value)?this:Ht.none()}getOr(Ye){return this.tag?this.value:Ye}or(Ye){return this.tag?this:Ye}getOrThunk(Ye){return this.tag?this.value:Ye()}orThunk(Ye){return this.tag?this:Ye()}getOrDie(Ye){if(this.tag)return this.value;throw new Error(Ye??"Called getOrDie on None")}static from(Ye){return Zt(Ye)?Ht.some(Ye):Ht.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ye){this.tag&&Ye(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ht.singletonNone=new Ht(!1);const it=(tt,Ye)=>{const qt=tt.length,en=new Array(qt);for(let Bn=0;Bn<qt;Bn++){const Yt=tt[Bn];en[Bn]=Ye(Yt,Bn)}return en},ot=(tt,Ye)=>{for(let qt=0,en=tt.length;qt<en;qt++){const Bn=tt[qt];Ye(Bn,qt)}},Sn=(tt,Ye)=>{const qt=[];for(let en=0,Bn=tt.length;en<Bn;en++){const Yt=tt[en];Ye(Yt,en)&&qt.push(Yt)}return qt},qe=9,G=11,Xe=1,Nt=3,at=(tt,Ye)=>{const en=(Ye||document).createElement("div");if(en.innerHTML=tt,!en.hasChildNodes()||en.childNodes.length>1){const Bn="HTML does not have a single root node";throw console.error(Bn,tt),new Error(Bn)}return Mn(en.childNodes[0])},q=(tt,Ye)=>{const en=(Ye||document).createElement(tt);return Mn(en)},ft=(tt,Ye)=>{const en=(Ye||document).createTextNode(tt);return Mn(en)},Mn=tt=>{if(tt==null)throw new Error("Node cannot be null or undefined");return{dom:tt}},Pe={fromHtml:at,fromTag:q,fromText:ft,fromDom:Mn,fromPoint:(tt,Ye,qt)=>Ht.from(tt.dom.elementFromPoint(Ye,qt)).map(Mn)},fe=(tt,Ye)=>{const qt=tt.dom;if(qt.nodeType!==Xe)return!1;{const en=qt;if(en.matches!==void 0)return en.matches(Ye);if(en.msMatchesSelector!==void 0)return en.msMatchesSelector(Ye);if(en.webkitMatchesSelector!==void 0)return en.webkitMatchesSelector(Ye);if(en.mozMatchesSelector!==void 0)return en.mozMatchesSelector(Ye);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const Vo=tt=>tt.dom.nodeName.toLowerCase(),Zn=tt=>tt.dom.nodeType,jt=tt=>Ye=>Zn(Ye)===tt,O=jt(Xe),Eo=jt(Nt),nt=jt(qe),No=jt(G),dn=tt=>Ye=>O(Ye)&&Vo(Ye)===tt,je=tt=>Pe.fromDom(tt.dom.ownerDocument),po=tt=>nt(tt)?tt:je(tt),Xo=tt=>Ht.from(tt.dom.parentNode).map(Pe.fromDom),Bo=tt=>it(tt.dom.childNodes,Pe.fromDom),Ps=(tt,Ye,qt)=>{if(Jt(qt)||Hn(qt)||vn(qt))tt.setAttribute(Ye,qt+"");else throw console.error("Invalid call to Attribute.set. Key ",Ye,":: Value ",qt,":: Element ",tt),new Error("Attribute value was not simple")},_e=(tt,Ye,qt)=>{Ps(tt.dom,Ye,qt)},gt=(tt,Ye)=>{tt.dom.removeAttribute(Ye)},H=tt=>No(tt)&&Zt(tt.dom.host),Fn=Wn(Element.prototype.attachShadow)&&Wn(Node.prototype.getRootNode)?tt=>Pe.fromDom(tt.dom.getRootNode()):po,ms=tt=>{const Ye=Fn(tt);return H(Ye)?Ht.some(Ye):Ht.none()},In=tt=>Pe.fromDom(tt.dom.host),js=tt=>{const Ye=Eo(tt)?tt.dom.parentNode:tt.dom;if(Ye==null||Ye.ownerDocument===null)return!1;const qt=Ye.ownerDocument;return ms(Pe.fromDom(Ye)).fold(()=>qt.body.contains(Ye),un(js,In))},Tt=(tt,Ye,qt)=>{let en=tt.dom;const Bn=Wn(qt)?qt:dt;for(;en.parentNode;){en=en.parentNode;const Yt=Pe.fromDom(en);if(Ye(Yt))return Ht.some(Yt);if(Bn(Yt))break}return Ht.none()},$t=(tt,Ye,qt)=>Tt(tt,en=>fe(en,Ye),qt),Vt=tt=>tt.style!==void 0&&Wn(tt.style.getPropertyValue),De=(tt,Ye)=>{const qt=tt.dom,Bn=window.getComputedStyle(qt).getPropertyValue(Ye);return Bn===""&&!js(tt)?Gs(qt,Ye):Bn},Gs=(tt,Ye)=>Vt(tt)?tt.style.getPropertyValue(Ye):"",cs=tt=>De(tt,"direction")==="rtl"?"rtl":"ltr",rn=(tt,Ye)=>Sn(Bo(tt),Ye),Ea=(tt,Ye)=>rn(tt,qt=>fe(qt,Ye)),zo=tt=>Xo(tt).filter(O),_a=(tt,Ye)=>(Ye?$t(tt,"ol,ul"):Ht.some(tt)).getOr(tt),ls=dn("li"),Ms=(tt,Ye)=>{const qt=tt.selection.getSelectedBlocks();qt.length>0&&(ot(qt,en=>{const Bn=Pe.fromDom(en),Yt=ls(Bn),Ns=_a(Bn,Yt);zo(Ns).each(rr=>{if(cs(rr)!==Ye?_e(Ns,"dir",Ye):cs(Ns)!==Ye&&gt(Ns,"dir"),Yt){const Mr=Ea(Ns,"li[dir]");ot(Mr,ht=>gt(ht,"dir"))}})}),tt.nodeChanged())},Wr=tt=>{tt.addCommand("mceDirectionLTR",()=>{Ms(tt,"ltr")}),tt.addCommand("mceDirectionRTL",()=>{Ms(tt,"rtl")})},ur=(tt,Ye)=>qt=>{const en=Bn=>{const Yt=Pe.fromDom(Bn.element);qt.setActive(cs(Yt)===Ye)};return tt.on("NodeChange",en),()=>tt.off("NodeChange",en)},Jo=tt=>{tt.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>tt.execCommand("mceDirectionLTR"),onSetup:ur(tt,"ltr")}),tt.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>tt.execCommand("mceDirectionRTL"),onSetup:ur(tt,"rtl")})};var Uo=()=>{ct.add("directionality",tt=>{Wr(tt),Jo(tt)})};Uo()})();(function(){const ct=Y=>{let oe=Y;return{get:()=>oe,set:tn=>{oe=tn}}};var En=tinymce.util.Tools.resolve("tinymce.PluginManager");const sn=Y=>({isFullscreen:()=>Y.get()!==null}),pt=(Y,oe,Se)=>{var Le;return Se(Y,oe.prototype)?!0:((Le=Y.constructor)===null||Le===void 0?void 0:Le.name)===oe.name},Rt=Y=>{const oe=typeof Y;return Y===null?"null":oe==="object"&&Array.isArray(Y)?"array":oe==="object"&&pt(Y,String,(Se,Le)=>Le.isPrototypeOf(Se))?"string":oe},Jt=Y=>oe=>Rt(oe)===Y,Hn=Y=>oe=>typeof oe===Y,_t=Y=>oe=>Y===oe,Zt=Jt("string"),Wn=Jt("array"),vn=_t(null),un=Hn("boolean"),Qt=_t(void 0),dt=Y=>Y==null,Ht=Y=>!dt(Y),it=Hn("function"),ot=Hn("number"),Sn=()=>{},qe=(Y,oe)=>(...Se)=>Y(oe.apply(null,Se)),G=(Y,oe)=>Se=>Y(oe(Se)),Xe=Y=>()=>Y;function Nt(Y,...oe){return(...Se)=>{const Le=oe.concat(Se);return Y.apply(null,Le)}}const at=Xe(!1),q=Xe(!0);class ft{constructor(oe,Se){this.tag=oe,this.value=Se}static some(oe){return new ft(!0,oe)}static none(){return ft.singletonNone}fold(oe,Se){return this.tag?Se(this.value):oe()}isSome(){return this.tag}isNone(){return!this.tag}map(oe){return this.tag?ft.some(oe(this.value)):ft.none()}bind(oe){return this.tag?oe(this.value):ft.none()}exists(oe){return this.tag&&oe(this.value)}forall(oe){return!this.tag||oe(this.value)}filter(oe){return!this.tag||oe(this.value)?this:ft.none()}getOr(oe){return this.tag?this.value:oe}or(oe){return this.tag?this:oe}getOrThunk(oe){return this.tag?this.value:oe()}orThunk(oe){return this.tag?this:oe()}getOrDie(oe){if(this.tag)return this.value;throw new Error(oe??"Called getOrDie on None")}static from(oe){return Ht(oe)?ft.some(oe):ft.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oe){this.tag&&oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ft.singletonNone=new ft(!1);const Mn=Y=>{const oe=ct(ft.none()),Se=()=>oe.get().each(Y);return{clear:()=>{Se(),oe.set(ft.none())},isSet:()=>oe.get().isSome(),get:()=>oe.get(),set:vo=>{Se(),oe.set(ft.some(vo))}}},Bt=()=>Mn(Y=>Y.unbind()),Pe=()=>{const Y=Mn(Sn);return{...Y,on:Se=>Y.get().each(Se)}},fe=(Y,oe)=>{let Se=null;return{cancel:()=>{vn(Se)||(clearTimeout(Se),Se=null)},throttle:(..._o)=>{vn(Se)&&(Se=setTimeout(()=>{Se=null,Y.apply(null,_o)},oe))}}},Vo=Array.prototype.push,Zn=(Y,oe)=>{const Se=Y.length,Le=new Array(Se);for(let tn=0;tn<Se;tn++){const _o=Y[tn];Le[tn]=oe(_o,tn)}return Le},jt=(Y,oe)=>{for(let Se=0,Le=Y.length;Se<Le;Se++){const tn=Y[Se];oe(tn,Se)}},O=(Y,oe)=>{const Se=[];for(let Le=0,tn=Y.length;Le<tn;Le++){const _o=Y[Le];oe(_o,Le)&&Se.push(_o)}return Se},Eo=(Y,oe,Se)=>{for(let Le=0,tn=Y.length;Le<tn;Le++){const _o=Y[Le];if(oe(_o,Le))return ft.some(_o);if(Se(_o,Le))break}return ft.none()},nt=(Y,oe)=>Eo(Y,oe,at),No=Y=>{const oe=[];for(let Se=0,Le=Y.length;Se<Le;++Se){if(!Wn(Y[Se]))throw new Error("Arr.flatten item "+Se+" was not an array, input: "+Y);Vo.apply(oe,Y[Se])}return oe},dn=(Y,oe)=>No(Zn(Y,oe)),je=(Y,oe)=>oe>=0&&oe<Y.length?ft.some(Y[oe]):ft.none(),po=Y=>je(Y,0),Xo=(Y,oe)=>{for(let Se=0;Se<Y.length;Se++){const Le=oe(Y[Se],Se);if(Le.isSome())return Le}return ft.none()},Bo=Object.keys,Ps=(Y,oe)=>{const Se=Bo(Y);for(let Le=0,tn=Se.length;Le<tn;Le++){const _o=Se[Le],Fs=Y[_o];oe(Fs,_o)}},_e=(Y,oe,Se=0,Le)=>{const tn=Y.indexOf(oe,Se);return tn!==-1?Qt(Le)?!0:tn+oe.length<=Le:!1},gt=Y=>Y.style!==void 0&&it(Y.style.getPropertyValue),H=(Y,oe)=>{const Le=(oe||document).createElement("div");if(Le.innerHTML=Y,!Le.hasChildNodes()||Le.childNodes.length>1){const tn="HTML does not have a single root node";throw console.error(tn,Y),new Error(tn)}return ms(Le.childNodes[0])},Hr=(Y,oe)=>{const Le=(oe||document).createElement(Y);return ms(Le)},Fn=(Y,oe)=>{const Le=(oe||document).createTextNode(Y);return ms(Le)},ms=Y=>{if(Y==null)throw new Error("Node cannot be null or undefined");return{dom:Y}},js={fromHtml:H,fromTag:Hr,fromText:Fn,fromDom:ms,fromPoint:(Y,oe,Se)=>ft.from(Y.dom.elementFromPoint(oe,Se)).map(ms)};typeof window<"u"||Function("return this;")();const Tt=9,$t=11,Vt=1,De=3,Gs=Y=>Y.dom.nodeType,cs=Y=>oe=>Gs(oe)===Y,rn=cs(Vt),Ea=cs(De),zo=cs(Tt),_a=cs($t),ls=(Y,oe)=>{const Se=Y.dom;if(Se.nodeType!==Vt)return!1;{const Le=Se;if(Le.matches!==void 0)return Le.matches(oe);if(Le.msMatchesSelector!==void 0)return Le.msMatchesSelector(oe);if(Le.webkitMatchesSelector!==void 0)return Le.webkitMatchesSelector(oe);if(Le.mozMatchesSelector!==void 0)return Le.mozMatchesSelector(oe);throw new Error("Browser lacks native selectors")}},Ms=Y=>Y.nodeType!==Vt&&Y.nodeType!==Tt&&Y.nodeType!==$t||Y.childElementCount===0,Wr=(Y,oe)=>{const Se=oe===void 0?document:oe.dom;return Ms(Se)?[]:Zn(Se.querySelectorAll(Y),js.fromDom)},ur=(Y,oe)=>Y.dom===oe.dom,Jo=Y=>js.fromDom(Y.dom.ownerDocument),Uo=Y=>zo(Y)?Y:Jo(Y),tt=Y=>ft.from(Y.dom.parentNode).map(js.fromDom),Ye=(Y,oe)=>{const Se=it(oe)?oe:at;let Le=Y.dom;const tn=[];for(;Le.parentNode!==null&&Le.parentNode!==void 0;){const _o=Le.parentNode,Fs=js.fromDom(_o);if(tn.push(Fs),Se(Fs)===!0)break;Le=_o}return tn},qt=Y=>{const oe=Se=>O(Se,Le=>!ur(Y,Le));return tt(Y).map(en).map(oe).getOr([])},en=Y=>Zn(Y.dom.childNodes,js.fromDom),Bn=Y=>_a(Y)&&Ht(Y.dom.host),Yt=it(Element.prototype.attachShadow)&&it(Node.prototype.getRootNode),Ns=Xe(Yt),ga=Yt?Y=>js.fromDom(Y.dom.getRootNode()):Uo,rr=Y=>{const oe=ga(Y);return Bn(oe)?ft.some(oe):ft.none()},xs=Y=>js.fromDom(Y.dom.host),Mr=Y=>{if(Ns()&&Ht(Y.target)){const oe=js.fromDom(Y.target);if(rn(oe)&&ht(oe)&&Y.composed&&Y.composedPath){const Se=Y.composedPath();if(Se)return po(Se)}}return ft.from(Y.target)},ht=Y=>Ht(Y.dom.shadowRoot),so=Y=>{const oe=Ea(Y)?Y.dom.parentNode:Y.dom;if(oe==null||oe.ownerDocument===null)return!1;const Se=oe.ownerDocument;return rr(js.fromDom(oe)).fold(()=>Se.body.contains(oe),G(so,xs))},ha=Y=>{const oe=Y.dom.body;if(oe==null)throw new Error("Body is not available yet");return js.fromDom(oe)},ar=(Y,oe,Se)=>{if(Zt(Se)||un(Se)||ot(Se))Y.setAttribute(oe,Se+"");else throw console.error("Invalid call to Attribute.set. Key ",oe,":: Value ",Se,":: Element ",Y),new Error("Attribute value was not simple")},Uc=(Y,oe,Se)=>{ar(Y.dom,oe,Se)},Ka=(Y,oe)=>{const Se=Y.dom.getAttribute(oe);return Se===null?void 0:Se},Qo=(Y,oe)=>{Y.dom.removeAttribute(oe)},Ya=(Y,oe,Se)=>{if(!Zt(Se))throw console.error("Invalid call to CSS.set. Property ",oe,":: Value ",Se,":: Element ",Y),new Error("CSS value must be a string: "+Se);gt(Y)&&Y.style.setProperty(oe,Se)},pa=(Y,oe)=>{const Se=Y.dom;Ps(oe,(Le,tn)=>{Ya(Se,tn,Le)})},Wo=(Y,oe)=>{const Se=Y.dom,tn=window.getComputedStyle(Se).getPropertyValue(oe);return tn===""&&!so(Y)?_n(Se,oe):tn},_n=(Y,oe)=>gt(Y)?Y.style.getPropertyValue(oe):"",Zr=(Y,oe,Se,Le,tn,_o,Fs)=>({target:Y,x:oe,y:Se,stop:Le,prevent:tn,kill:_o,raw:Fs}),Oa=Y=>{const oe=js.fromDom(Mr(Y).getOr(Y.target)),Se=()=>Y.stopPropagation(),Le=()=>Y.preventDefault(),tn=qe(Le,Se);return Zr(oe,Y.clientX,Y.clientY,Se,Le,tn,Y)},Xa=(Y,oe)=>Se=>{Y(Se)&&oe(Oa(Se))},Ja=(Y,oe,Se,Le,tn)=>{const _o=Xa(Se,Le);return Y.dom.addEventListener(oe,_o,tn),{unbind:Nt(dr,Y,oe,_o,tn)}},Is=(Y,oe,Se,Le)=>Ja(Y,oe,Se,Le,!1),dr=(Y,oe,Se,Le)=>{Y.dom.removeEventListener(oe,Se,Le)},ys=q,yr=(Y,oe,Se)=>Is(Y,oe,ys,Se),ue=Y=>{let oe=!1,Se;return(...Le)=>(oe||(oe=!0,Se=Y.apply(null,Le)),Se)},se=(Y,oe,Se,Le)=>{const tn=Y.isiOS()&&/ipad/i.test(Se)===!0,_o=Y.isiOS()&&!tn,Fs=Y.isiOS()||Y.isAndroid(),vo=Fs||Le("(pointer:coarse)"),Bs=tn||!_o&&Fs&&Le("(min-device-width:768px)"),aa=_o||Fs&&!Bs,ws=oe.isSafari()&&Y.isiOS()&&/safari/i.test(Se)===!1,yc=!aa&&!Bs&&!ws;return{isiPad:Xe(tn),isiPhone:Xe(_o),isTablet:Xe(Bs),isPhone:Xe(aa),isTouch:Xe(vo),isAndroid:Y.isAndroid,isiOS:Y.isiOS,isWebView:Xe(ws),isDesktop:Xe(yc)}},Be=(Y,oe)=>{for(let Se=0;Se<Y.length;Se++){const Le=Y[Se];if(Le.test(oe))return Le}},Re=(Y,oe)=>{const Se=Be(Y,oe);if(!Se)return{major:0,minor:0};const Le=tn=>Number(oe.replace(Se,"$"+tn));return no(Le(1),Le(2))},Xt=(Y,oe)=>{const Se=String(oe).toLowerCase();return Y.length===0?yn():Re(Y,Se)},yn=()=>no(0,0),no=(Y,oe)=>({major:Y,minor:oe}),jo={nu:no,detect:Xt,unknown:yn},Yn=(Y,oe)=>Xo(oe.brands,Se=>{const Le=Se.brand.toLowerCase();return nt(Y,tn=>{var _o;return Le===((_o=tn.brand)===null||_o===void 0?void 0:_o.toLowerCase())}).map(tn=>({current:tn.name,version:jo.nu(parseInt(Se.version,10),0)}))}),uo=(Y,oe)=>{const Se=String(oe).toLowerCase();return nt(Y,Le=>Le.search(Se))},pe=(Y,oe)=>uo(Y,oe).map(Se=>{const Le=jo.detect(Se.versionRegexes,oe);return{current:Se.name,version:Le}}),Fo=(Y,oe)=>uo(Y,oe).map(Se=>{const Le=jo.detect(Se.versionRegexes,oe);return{current:Se.name,version:Le}}),wr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,mr=Y=>oe=>_e(oe,Y),Wc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Y=>_e(Y,"edge/")&&_e(Y,"chrome")&&_e(Y,"safari")&&_e(Y,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,wr],search:Y=>_e(Y,"chrome")&&!_e(Y,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Y=>_e(Y,"msie")||_e(Y,"trident")},{name:"Opera",versionRegexes:[wr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:mr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:mr("firefox")},{name:"Safari",versionRegexes:[wr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Y=>(_e(Y,"safari")||_e(Y,"mobile/"))&&_e(Y,"applewebkit")}],bo=[{name:"Windows",search:mr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Y=>_e(Y,"iphone")||_e(Y,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:mr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:mr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:mr("linux"),versionRegexes:[]},{name:"Solaris",search:mr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:mr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:mr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Cl={browsers:Xe(Wc),oses:Xe(bo)},Cr="Edge",fr="Chromium",qs="IE",Ts="Opera",fs="Firefox",Zc="Safari",Qa=()=>hc({current:void 0,version:jo.unknown()}),hc=Y=>{const oe=Y.current,Se=Y.version,Le=tn=>()=>oe===tn;return{current:oe,version:Se,isEdge:Le(Cr),isChromium:Le(fr),isIE:Le(qs),isOpera:Le(Ts),isFirefox:Le(fs),isSafari:Le(Zc)}},ol={unknown:Qa,nu:hc,edge:Xe(Cr),chromium:Xe(fr),ie:Xe(qs),opera:Xe(Ts),firefox:Xe(fs),safari:Xe(Zc)},sl="Windows",Lo="iOS",ba="Android",Ac="Linux",pc="macOS",Aa="Solaris",Sr="FreeBSD",_s="ChromeOS",au=()=>Kl({current:void 0,version:jo.unknown()}),Kl=Y=>{const oe=Y.current,Se=Y.version,Le=tn=>()=>oe===tn;return{current:oe,version:Se,isWindows:Le(sl),isiOS:Le(Lo),isAndroid:Le(ba),isMacOS:Le(pc),isLinux:Le(Ac),isSolaris:Le(Aa),isFreeBSD:Le(Sr),isChromeOS:Le(_s)}},es={unknown:au,nu:Kl,windows:Xe(sl),ios:Xe(Lo),android:Xe(ba),linux:Xe(Ac),macos:Xe(pc),solaris:Xe(Aa),freebsd:Xe(Sr),chromeos:Xe(_s)},va={detect:(Y,oe,Se)=>{const Le=Cl.browsers(),tn=Cl.oses(),_o=oe.bind(Bs=>Yn(Le,Bs)).orThunk(()=>pe(Le,Y)).fold(ol.unknown,ol.nu),Fs=Fo(tn,Y).fold(es.unknown,es.nu),vo=se(Fs,_o,Y,Se);return{browser:_o,os:Fs,deviceType:vo}}},Ks=Y=>window.matchMedia(Y).matches;let Yl=ue(()=>va.detect(navigator.userAgent,ft.from(navigator.userAgentData),Ks));const ec=()=>Yl(),ra=(Y,oe)=>({left:Y,top:oe,translate:(Le,tn)=>ra(Y+Le,oe+tn)}),bc=ra,vi=Y=>{const oe=Y!==void 0?Y.dom:document,Se=oe.body.scrollLeft||oe.documentElement.scrollLeft,Le=oe.body.scrollTop||oe.documentElement.scrollTop;return bc(Se,Le)},Sl=Y=>{const oe=Y===void 0?window:Y;return ec().browser.isFirefox()?ft.none():ft.from(oe.visualViewport)},yi=(Y,oe,Se,Le)=>({x:Y,y:oe,width:Se,height:Le,right:Y+Se,bottom:oe+Le}),ya=Y=>{const oe=Y===void 0?window:Y,Se=oe.document,Le=vi(js.fromDom(Se));return Sl(oe).fold(()=>{const tn=oe.document.documentElement,_o=tn.clientWidth,Fs=tn.clientHeight;return yi(Le.left,Le.top,_o,Fs)},tn=>yi(Math.max(tn.pageLeft,Le.left),Math.max(tn.pageTop,Le.top),tn.width,tn.height))},Dc=(Y,oe,Se)=>Sl(Se).map(Le=>{const tn=_o=>oe(Oa(_o));return Le.addEventListener(Y,tn),{unbind:()=>Le.removeEventListener(Y,tn)}}).getOrThunk(()=>({unbind:Sn}));var Xl=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),jc=tinymce.util.Tools.resolve("tinymce.Env");const Jl=(Y,oe)=>{Y.dispatch("FullscreenStateChanged",{state:oe}),Y.dispatch("ResizeEditor")},Z=Y=>oe=>oe.options.get(Y),le=Y=>{const oe=Y.options.register;oe("fullscreen_native",{processor:"boolean",default:!1})},be=Z("fullscreen_native"),$e=Y=>{const oe=js.fromDom(Y.getElement());return rr(oe).map(xs).getOrThunk(()=>ha(Jo(oe)))},rt=Y=>Y.fullscreenElement!==void 0?Y.fullscreenElement:Y.msFullscreenElement!==void 0?Y.msFullscreenElement:Y.webkitFullscreenElement!==void 0?Y.webkitFullscreenElement:null,wn=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",os=Y=>{const oe=Y.dom;oe.requestFullscreen?oe.requestFullscreen():oe.msRequestFullscreen?oe.msRequestFullscreen():oe.webkitRequestFullScreen&&oe.webkitRequestFullScreen()},xr=Y=>{const oe=Y.dom;oe.exitFullscreen?oe.exitFullscreen():oe.msExitFullscreen?oe.msExitFullscreen():oe.webkitCancelFullScreen&&oe.webkitCancelFullScreen()},wo=Y=>Y.dom===rt(Jo(Y).dom),Tr=(Y,oe,Se)=>O(Ye(Y,Se),oe),$o=(Y,oe)=>O(qt(Y),oe),Ws=Y=>Wr(Y),Rc=(Y,oe,Se)=>Tr(Y,Le=>ls(Le,oe),Se),vc=(Y,oe)=>$o(Y,Se=>ls(Se,oe)),Vn="data-ephox-mobile-fullscreen-style",Io="display:none!important;",jr="position:absolute!important;",$="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",K="background-color:rgb(255,255,255)!important;",ne=jc.os.isAndroid(),Ae=Y=>{const oe=Wo(Y,"background-color");return oe!==void 0&&oe!==""?"background-color:"+oe+"!important":K},Pt=(Y,oe,Se)=>{const Le=aa=>vc(aa,"*:not(.tox-silver-sink)"),tn=aa=>ws=>{const yc=Ka(ws,"style"),Gc=yc===void 0?"no-styles":yc.trim();Gc!==aa&&(Uc(ws,Vn,Gc),pa(ws,Y.parseStyle(aa)))},_o=Rc(oe,"*"),Fs=dn(_o,Le),vo=Ae(Se);jt(Fs,tn(Io)),jt(_o,tn(jr+$+vo)),tn((ne===!0?"":jr)+$+vo)(oe)},Xn=Y=>{const oe=Ws("["+Vn+"]");jt(oe,Se=>{const Le=Ka(Se,Vn);Le&&Le!=="no-styles"?pa(Se,Y.parseStyle(Le)):Qo(Se,"style"),Qo(Se,Vn)})},Kt=Xl.DOM,Nr=()=>ya(window),Gr=Y=>window.scrollTo(Y.x,Y.y),Qe=Sl().fold(()=>({bind:Sn,unbind:Sn}),Y=>{const oe=Pe(),Se=Bt(),Le=Bt(),tn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},_o=()=>{window.requestAnimationFrame(()=>{oe.on(aa=>pa(aa,{top:Y.offsetTop+"px",left:Y.offsetLeft+"px",height:Y.height+"px",width:Y.width+"px"}))})},Fs=fe(()=>{tn(),_o()},50);return{bind:aa=>{oe.set(aa),Fs.throttle(),Se.set(Dc("resize",Fs.throttle)),Le.set(Dc("scroll",Fs.throttle))},unbind:()=>{oe.on(()=>{Se.clear(),Le.clear()}),oe.clear()}}}),Br=(Y,oe)=>{const Se=document.body,Le=document.documentElement,tn=Y.getContainer(),_o=js.fromDom(tn),Fs=$e(Y),vo=oe.get(),Bs=js.fromDom(Y.getBody()),aa=jc.deviceType.isTouch(),ws=tn.style,yc=Y.iframeElement,Gc=yc==null?void 0:yc.style,hs=Xs=>{Xs(Se,"tox-fullscreen"),Xs(Le,"tox-fullscreen"),Xs(tn,"tox-fullscreen"),rr(_o).map(Pl=>xs(Pl).dom).each(Pl=>{Xs(Pl,"tox-fullscreen"),Xs(Pl,"tox-shadowhost")})},ca=()=>{aa&&Xn(Y.dom),hs(Kt.removeClass),Qe.unbind(),ft.from(oe.get()).each(Xs=>Xs.fullscreenChangeHandler.unbind())};if(vo)vo.fullscreenChangeHandler.unbind(),be(Y)&&wo(Fs)&&xr(Jo(Fs)),Gc.width=vo.iframeWidth,Gc.height=vo.iframeHeight,ws.width=vo.containerWidth,ws.height=vo.containerHeight,ws.top=vo.containerTop,ws.left=vo.containerLeft,ca(),Gr(vo.scrollPos),oe.set(null),Jl(Y,!1),Y.off("remove",ca);else{const Xs=yr(Jo(Fs),wn(),Ii=>{be(Y)&&!wo(Fs)&&oe.get()!==null&&Br(Y,oe)}),Pl={scrollPos:Nr(),containerWidth:ws.width,containerHeight:ws.height,containerTop:ws.top,containerLeft:ws.left,iframeWidth:Gc.width,iframeHeight:Gc.height,fullscreenChangeHandler:Xs};aa&&Pt(Y.dom,_o,Bs),Gc.width=Gc.height="100%",ws.width=ws.height="",hs(Kt.addClass),Qe.bind(_o),Y.on("remove",ca),oe.set(Pl),be(Y)&&os(Fs),Jl(Y,!0)}},Ys=(Y,oe)=>{Y.addCommand("mceFullScreen",()=>{Br(Y,oe)})},qr=(Y,oe)=>Se=>{Se.setActive(oe.get()!==null);const Le=tn=>Se.setActive(tn.state);return Y.on("FullscreenStateChanged",Le),()=>Y.off("FullscreenStateChanged",Le)},Cd=(Y,oe)=>{const Se=()=>Y.execCommand("mceFullScreen");Y.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Se,onSetup:qr(Y,oe)}),Y.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Se,onSetup:qr(Y,oe)})};var mo=()=>{En.add("fullscreen",Y=>{const oe=ct(null);return Y.inline||(le(Y),Ys(Y,oe),Cd(Y,oe),Y.addShortcut("Meta+Shift+F","","mceFullScreen")),sn(oe)})};mo()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=Object.getPrototypeOf,sn=($,K,ne)=>{var Ae;return ne($,K.prototype)?!0:((Ae=$.constructor)===null||Ae===void 0?void 0:Ae.name)===K.name},pt=$=>{const K=typeof $;return $===null?"null":K==="object"&&Array.isArray($)?"array":K==="object"&&sn($,String,(ne,Ae)=>Ae.isPrototypeOf(ne))?"string":K},Rt=$=>K=>pt(K)===$,Jt=$=>K=>typeof K===$,Hn=$=>K=>$===K,_t=($,K)=>Wn($)&&sn($,K,(ne,Ae)=>En(ne)===Ae),Zt=Rt("string"),Wn=Rt("object"),vn=$=>_t($,Object),un=Rt("array"),Qt=Hn(null),dt=Jt("boolean"),Ht=$=>$==null,it=$=>!Ht($),ot=Jt("function"),Sn=Jt("number"),qe=($,K)=>{if(un($)){for(let ne=0,Ae=$.length;ne<Ae;++ne)if(!K($[ne]))return!1;return!0}return!1},G=()=>{};class Xe{constructor(K,ne){this.tag=K,this.value=ne}static some(K){return new Xe(!0,K)}static none(){return Xe.singletonNone}fold(K,ne){return this.tag?ne(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?Xe.some(K(this.value)):Xe.none()}bind(K){return this.tag?K(this.value):Xe.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:Xe.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return it(K)?Xe.some(K):Xe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xe.singletonNone=new Xe(!1);const Nt=Object.keys,at=Object.hasOwnProperty,q=($,K)=>{const ne=Nt($);for(let Ae=0,Pt=ne.length;Ae<Pt;Ae++){const Xn=ne[Ae],Kt=$[Xn];K(Kt,Xn)}},ft=$=>(K,ne)=>{$[ne]=K},Mn=($,K,ne,Ae)=>{q($,(Pt,Xn)=>{(K(Pt,Xn)?ne:Ae)(Pt,Xn)})},Bt=($,K)=>{const ne={};return Mn($,K,ft(ne),G),ne},Pe=($,K)=>at.call($,K),fe=($,K)=>Pe($,K)&&$[K]!==void 0&&$[K]!==null,Vo=Array.prototype.push,Zn=$=>{const K=[];for(let ne=0,Ae=$.length;ne<Ae;++ne){if(!un($[ne]))throw new Error("Arr.flatten item "+ne+" was not an array, input: "+$);Vo.apply(K,$[ne])}return K},jt=($,K)=>K>=0&&K<$.length?Xe.some($[K]):Xe.none(),O=$=>jt($,0),Eo=($,K)=>{for(let ne=0;ne<$.length;ne++){const Ae=K($[ne],ne);if(Ae.isSome())return Ae}return Xe.none()};typeof window<"u"||Function("return this;")();const nt=($,K,ne)=>{if(Zt(ne)||dt(ne)||Sn(ne))$.setAttribute(K,ne+"");else throw console.error("Invalid call to Attribute.set. Key ",K,":: Value ",ne,":: Element ",$),new Error("Attribute value was not simple")},No=($,K,ne)=>{nt($.dom,K,ne)},dn=($,K)=>{$.dom.removeAttribute(K)},je=($,K)=>{const Ae=(K||document).createElement("div");if(Ae.innerHTML=$,!Ae.hasChildNodes()||Ae.childNodes.length>1){const Pt="HTML does not have a single root node";throw console.error(Pt,$),new Error(Pt)}return Bo(Ae.childNodes[0])},po=($,K)=>{const Ae=(K||document).createElement($);return Bo(Ae)},Xo=($,K)=>{const Ae=(K||document).createTextNode($);return Bo(Ae)},Bo=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},_e={fromHtml:je,fromTag:po,fromText:Xo,fromDom:Bo,fromPoint:($,K,ne)=>Xe.from($.dom.elementFromPoint(K,ne)).map(Bo)};var gt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),H=tinymce.util.Tools.resolve("tinymce.util.URI");const Hr=$=>$.length>0,Fn=$=>K=>K.options.get($),ms=$=>{const K=$.options.register;K("image_dimensions",{processor:"boolean",default:!0}),K("image_advtab",{processor:"boolean",default:!1}),K("image_uploadtab",{processor:"boolean",default:!0}),K("image_prepend_url",{processor:"string",default:""}),K("image_class_list",{processor:"object[]"}),K("image_description",{processor:"boolean",default:!0}),K("image_title",{processor:"boolean",default:!1}),K("image_caption",{processor:"boolean",default:!1}),K("image_list",{processor:ne=>{const Ae=ne===!1||Zt(ne)||qe(ne,Wn)||ot(ne);return Ae?{value:ne,valid:Ae}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},In=Fn("image_dimensions"),js=Fn("image_advtab"),Tt=Fn("image_uploadtab"),$t=Fn("image_prepend_url"),Vt=Fn("image_class_list"),De=Fn("image_description"),Gs=Fn("image_title"),cs=Fn("image_caption"),rn=Fn("image_list"),Ea=Fn("a11y_advanced_options"),zo=Fn("automatic_uploads"),_a=$=>Hr($.options.get("images_upload_url")),ls=$=>it($.options.get("images_upload_handler")),Ms=($,K)=>Math.max(parseInt($,10),parseInt(K,10)),Wr=$=>new Promise(K=>{const ne=document.createElement("img"),Ae=Xn=>{ne.onload=ne.onerror=null,ne.parentNode&&ne.parentNode.removeChild(ne),K(Xn)};ne.onload=()=>{const Xn=Ms(ne.width,ne.clientWidth),Kt=Ms(ne.height,ne.clientHeight),Nr={width:Xn,height:Kt};Ae(Promise.resolve(Nr))},ne.onerror=()=>{Ae(Promise.reject(`Failed to get image dimensions for: ${$}`))};const Pt=ne.style;Pt.visibility="hidden",Pt.position="fixed",Pt.bottom=Pt.left="0px",Pt.width=Pt.height="auto",document.body.appendChild(ne),ne.src=$}),ur=$=>($&&($=$.replace(/px$/,"")),$),Jo=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),Uo=$=>{if($.margin){const K=String($.margin).split(" ");switch(K.length){case 1:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[0],$["margin-bottom"]=$["margin-bottom"]||K[0],$["margin-left"]=$["margin-left"]||K[0];break;case 2:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[1],$["margin-bottom"]=$["margin-bottom"]||K[0],$["margin-left"]=$["margin-left"]||K[1];break;case 3:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[1],$["margin-bottom"]=$["margin-bottom"]||K[2],$["margin-left"]=$["margin-left"]||K[1];break;case 4:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[1],$["margin-bottom"]=$["margin-bottom"]||K[2],$["margin-left"]=$["margin-left"]||K[3]}delete $.margin}return $},tt=($,K)=>{const ne=rn($);Zt(ne)?fetch(ne).then(Ae=>{Ae.ok&&Ae.json().then(K)}):ot(ne)?ne(K):K(ne)},Ye=($,K,ne)=>{const Ae=()=>{ne.onload=ne.onerror=null,$.selection&&($.selection.select(ne),$.nodeChanged())};ne.onload=()=>{!K.width&&!K.height&&In($)&&$.dom.setAttribs(ne,{width:String(ne.clientWidth),height:String(ne.clientHeight)}),Ae()},ne.onerror=Ae},qt=$=>new Promise((K,ne)=>{const Ae=new FileReader;Ae.onload=()=>{K(Ae.result)},Ae.onerror=()=>{var Pt;ne((Pt=Ae.error)===null||Pt===void 0?void 0:Pt.message)},Ae.readAsDataURL($)}),en=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),Bn=($,K)=>{const ne=$.options.get;return H.isDomSafe(K,"img",{allow_html_data_urls:ne("allow_html_data_urls"),allow_script_urls:ne("allow_script_urls"),allow_svg_data_urls:ne("allow_svg_data_urls")})},Yt=gt.DOM,Ns=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?ur($.style.marginLeft):"",ga=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?ur($.style.marginTop):"",rr=$=>$.style.borderWidth?ur($.style.borderWidth):"",xs=($,K)=>{var ne;return $.hasAttribute(K)&&(ne=$.getAttribute(K))!==null&&ne!==void 0?ne:""},Mr=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",ht=($,K,ne)=>{ne===""||ne===null?$.removeAttribute(K):$.setAttribute(K,ne)},so=$=>{const K=Yt.create("figure",{class:"image"});Yt.insertAfter(K,$),K.appendChild($),K.appendChild(Yt.create("figcaption",{contentEditable:"true"},"Caption")),K.contentEditable="false"},ha=$=>{const K=$.parentNode;it(K)&&(Yt.insertAfter($,K),Yt.remove(K))},ar=$=>{Mr($)?ha($):so($)},Uc=($,K)=>{const ne=$.getAttribute("style"),Ae=K(ne!==null?ne:"");Ae.length>0?($.setAttribute("style",Ae),$.setAttribute("data-mce-style",Ae)):$.removeAttribute("style")},Ka=($,K)=>(ne,Ae,Pt)=>{const Xn=ne.style;Xn[Ae]?(Xn[Ae]=Jo(Pt),Uc(ne,K)):ht(ne,Ae,Pt)},Qo=($,K)=>$.style[K]?ur($.style[K]):xs($,K),Ya=($,K)=>{const ne=Jo(K);$.style.marginLeft=ne,$.style.marginRight=ne},pa=($,K)=>{const ne=Jo(K);$.style.marginTop=ne,$.style.marginBottom=ne},Wo=($,K)=>{const ne=Jo(K);$.style.borderWidth=ne},_n=($,K)=>{$.style.borderStyle=K},Zr=$=>{var K;return(K=$.style.borderStyle)!==null&&K!==void 0?K:""},Oa=$=>it($)&&$.nodeName==="FIGURE",Xa=$=>$.nodeName==="IMG",Ja=$=>Yt.getAttrib($,"alt").length===0&&Yt.getAttrib($,"role")==="presentation",Is=$=>Ja($)?"":xs($,"alt"),dr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),ys=($,K)=>{var ne;const Ae=document.createElement("img");return ht(Ae,"style",K.style),(Ns(Ae)||K.hspace!=="")&&Ya(Ae,K.hspace),(ga(Ae)||K.vspace!=="")&&pa(Ae,K.vspace),(rr(Ae)||K.border!=="")&&Wo(Ae,K.border),(Zr(Ae)||K.borderStyle!=="")&&_n(Ae,K.borderStyle),$((ne=Ae.getAttribute("style"))!==null&&ne!==void 0?ne:"")},yr=($,K)=>{const ne=document.createElement("img");if(yn($,{...K,caption:!1},ne),Be(ne,K.alt,K.isDecorative),K.caption){const Ae=Yt.create("figure",{class:"image"});return Ae.appendChild(ne),Ae.appendChild(Yt.create("figcaption",{contentEditable:"true"},"Caption")),Ae.contentEditable="false",Ae}else return ne},ue=($,K)=>({src:xs(K,"src"),alt:Is(K),title:xs(K,"title"),width:Qo(K,"width"),height:Qo(K,"height"),class:xs(K,"class"),style:$(xs(K,"style")),caption:Mr(K),hspace:Ns(K),vspace:ga(K),border:rr(K),borderStyle:Zr(K),isDecorative:Ja(K)}),se=($,K,ne,Ae,Pt)=>{ne[Ae]!==K[Ae]&&Pt($,Ae,String(ne[Ae]))},Be=($,K,ne)=>{if(ne){Yt.setAttrib($,"role","presentation");const Ae=_e.fromDom($);No(Ae,"alt","")}else{if(Qt(K)){const Ae=_e.fromDom($);dn(Ae,"alt")}else{const Ae=_e.fromDom($);No(Ae,"alt",K)}Yt.getAttrib($,"role")==="presentation"&&Yt.setAttrib($,"role","")}},Re=($,K,ne)=>{(ne.alt!==K.alt||ne.isDecorative!==K.isDecorative)&&Be($,ne.alt,ne.isDecorative)},Xt=($,K)=>(ne,Ae,Pt)=>{$(ne,Pt),Uc(ne,K)},yn=($,K,ne)=>{const Ae=ue($,ne);se(ne,Ae,K,"caption",(Pt,Xn,Kt)=>ar(Pt)),se(ne,Ae,K,"src",ht),se(ne,Ae,K,"title",ht),se(ne,Ae,K,"width",Ka("width",$)),se(ne,Ae,K,"height",Ka("height",$)),se(ne,Ae,K,"class",ht),se(ne,Ae,K,"style",Xt((Pt,Xn)=>ht(Pt,"style",Xn),$)),se(ne,Ae,K,"hspace",Xt(Ya,$)),se(ne,Ae,K,"vspace",Xt(pa,$)),se(ne,Ae,K,"border",Xt(Wo,$)),se(ne,Ae,K,"borderStyle",Xt(_n,$)),Re(ne,Ae,K)},no=($,K)=>{const ne=$.dom.styles.parse(K),Ae=Uo(ne),Pt=$.dom.styles.parse($.dom.styles.serialize(Ae));return $.dom.styles.serialize(Pt)},jo=$=>{const K=$.selection.getNode(),ne=$.dom.getParent(K,"figure.image");return ne?$.dom.select("img",ne)[0]:K&&(K.nodeName!=="IMG"||en(K))?null:K},Yn=($,K)=>{var ne;const Ae=$.dom,Pt=Bt($.schema.getTextBlockElements(),(Kt,Nr)=>!$.schema.isValidChild(Nr,"figure")),Xn=Ae.getParent(K.parentNode,Kt=>fe(Pt,Kt.nodeName),$.getBody());return Xn&&(ne=Ae.split(Xn,K))!==null&&ne!==void 0?ne:K},uo=$=>{const K=jo($);return K?ue(ne=>no($,ne),K):dr()},pe=($,K)=>{const ne=yr(Pt=>no($,Pt),K);$.dom.setAttrib(ne,"data-mce-id","__mcenew"),$.focus(),$.selection.setContent(ne.outerHTML);const Ae=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(Ae,"data-mce-id",null),Oa(Ae)){const Pt=Yn($,Ae);$.selection.select(Pt)}else $.selection.select(Ae)},Fo=($,K)=>{$.dom.setAttrib(K,"src",K.getAttribute("src"))},wr=($,K)=>{if(K){const ne=$.dom.is(K.parentNode,"figure.image")?K.parentNode:K;$.dom.remove(ne),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},mr=($,K)=>{const ne=jo($);if(ne)if(yn(Ae=>no($,Ae),K,ne),Fo($,ne),Oa(ne.parentNode)){const Ae=ne.parentNode;Yn($,Ae),$.selection.select(ne.parentNode)}else $.selection.select(ne),Ye($,K,ne)},Wc=($,K)=>{const ne=K.src;return{...K,src:Bn($,ne)?ne:""}},bo=($,K)=>{const ne=jo($);if(ne){const Pt={...ue(Kt=>no($,Kt),ne),...K},Xn=Wc($,Pt);Pt.src?mr($,Xn):wr($,ne)}else K.src&&pe($,{...dr(),...K})},fr=($=>(...K)=>{if(K.length===0)throw new Error("Can't merge zero objects");const ne={};for(let Ae=0;Ae<K.length;Ae++){const Pt=K[Ae];for(const Xn in Pt)Pe(Pt,Xn)&&(ne[Xn]=$(ne[Xn],Pt[Xn]))}return ne})(($,K)=>vn($)&&vn(K)?fr($,K):K);var qs=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ts=tinymce.util.Tools.resolve("tinymce.util.Tools");const fs=$=>Zt($.value)?$.value:"",Zc=$=>Zt($.text)?$.text:Zt($.title)?$.title:"",Qa=($,K)=>{const ne=[];return Ts.each($,Ae=>{const Pt=Zc(Ae);if(Ae.menu!==void 0){const Xn=Qa(Ae.menu,K);ne.push({text:Pt,items:Xn})}else{const Xn=K(Ae);ne.push({text:Pt,value:Xn})}}),ne},hc=($=fs)=>K=>K?Xe.from(K).map(ne=>Qa(ne,$)):Xe.none(),ol=$=>hc(fs)($),sl=$=>Pe($,"items"),Lo=($,K)=>Eo($,ne=>sl(ne)?Lo(ne.items,K):ne.value===K?Xe.some(ne):Xe.none()),Ac={sanitizer:hc,sanitize:ol,findEntry:($,K)=>$.bind(ne=>Lo(ne,K))},Aa={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Sr=$=>{const K=Ac.sanitizer(oe=>$.convertURL(oe.value||oe.url||"","src")),ne=new Promise(oe=>{tt($,Se=>{oe(K(Se).map(Le=>Zn([[{text:"None",value:""}],Le])))})}),Ae=Ac.sanitize(Vt($)),Pt=js($),Xn=Tt($),Kt=_a($),Nr=ls($),Gr=uo($),Qe=De($),Br=Gs($),Ys=In($),qr=cs($),Cd=Ea($),mo=zo($),Y=Xe.some($t($)).filter(oe=>Zt(oe)&&oe.length>0);return ne.then(oe=>({image:Gr,imageList:oe,classList:Ae,hasAdvTab:Pt,hasUploadTab:Xn,hasUploadUrl:Kt,hasUploadHandler:Nr,hasDescription:Qe,hasImageTitle:Br,hasDimensions:Ys,hasImageCaption:qr,prependURL:Y,hasAccessibilityOptions:Cd,automaticUploads:mo}))},_s=$=>{const K={name:"src",type:"urlinput",filetype:"image",label:"Source"},ne=$.imageList.map(Br=>({name:"images",type:"listbox",label:"Image list",items:Br})),Ae={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},Pt={name:"title",type:"input",label:"Image title"},Xn={name:"dimensions",type:"sizeinput"},Kt={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Nr=$.classList.map(Br=>({name:"classes",type:"listbox",label:"Class",items:Br})),Gr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Qe=Br=>Br?{type:"grid",columns:2}:{type:"panel"};return Zn([[K],ne.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[Kt]:[],$.hasDescription?[Ae]:[],$.hasImageTitle?[Pt]:[],$.hasDimensions?[Xn]:[],[{...Qe($.classList.isSome()&&$.hasImageCaption),items:Zn([Nr.toArray(),$.hasImageCaption?[Gr]:[]])}]])},Kl={makeTab:$=>({title:"General",name:"general",items:_s($)}),makeItems:_s},sa={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},va=$=>({prevImage:Ac.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),Ks=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),Yl=($,K)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&K?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),ec=($,K)=>/^(?:[a-zA-Z]+:)?\/\//.test(K)?Xe.none():$.prependURL.bind(ne=>K.substring(0,ne.length)!==ne?Xe.some(ne+K):Xe.none()),ra=($,K)=>{const ne=K.getData();ec($,ne.src.value).each(Ae=>{K.setData({src:{value:Ae,meta:ne.src.meta}})})},bc=($,K,ne)=>{$.hasDescription&&Zt(ne.alt)&&(K.alt=ne.alt),$.hasAccessibilityOptions&&(K.isDecorative=ne.isDecorative||K.isDecorative||!1),$.hasImageTitle&&Zt(ne.title)&&(K.title=ne.title),$.hasDimensions&&(Zt(ne.width)&&(K.dimensions.width=ne.width),Zt(ne.height)&&(K.dimensions.height=ne.height)),Zt(ne.class)&&Ac.findEntry($.classList,ne.class).each(Ae=>{K.classes=Ae.value}),$.hasImageCaption&&dt(ne.caption)&&(K.caption=ne.caption),$.hasAdvTab&&(Zt(ne.style)&&(K.style=ne.style),Zt(ne.vspace)&&(K.vspace=ne.vspace),Zt(ne.border)&&(K.border=ne.border),Zt(ne.hspace)&&(K.hspace=ne.hspace),Zt(ne.borderstyle)&&(K.borderstyle=ne.borderstyle))},vi=($,K)=>{const ne=K.getData(),Ae=ne.src.meta;if(Ae!==void 0){const Pt=fr({},ne);bc($,Pt,Ae),K.setData(Pt)}},Sl=($,K,ne,Ae)=>{const Pt=Ae.getData(),Xn=Pt.src.value,Kt=Pt.src.meta||{};!Kt.width&&!Kt.height&&K.hasDimensions&&(Hr(Xn)?$.imageSize(Xn).then(Nr=>{ne.open&&Ae.setData({dimensions:Nr})}).catch(Nr=>console.error(Nr)):Ae.setData({dimensions:{width:"",height:""}}))},yi=($,K,ne)=>{const Ae=ne.getData(),Pt=Ac.findEntry($.imageList,Ae.src.value);K.prevImage=Pt,ne.setData({images:Pt.map(Xn=>Xn.value).getOr("")})},ya=($,K,ne,Ae)=>{ra(K,Ae),vi(K,Ae),Sl($,K,ne,Ae),yi(K,ne,Ae)},Dc=($,K,ne,Ae)=>{const Pt=Ae.getData(),Xn=Ac.findEntry(K.imageList,Pt.images);Xn.each(Kt=>{Pt.alt===""||ne.prevImage.map(Gr=>Gr.text===Pt.alt).getOr(!1)?Kt.value===""?Ae.setData({src:Kt,alt:ne.prevAlt}):Ae.setData({src:Kt,alt:Kt.text}):Ae.setData({src:Kt})}),ne.prevImage=Xn,ya($,K,ne,Ae)},Xl=($,K,ne,Ae)=>{const Pt=Ae.getData();Ae.block("Uploading image"),O(Pt.fileinput).fold(()=>{Ae.unblock()},Xn=>{const Kt=URL.createObjectURL(Xn),Nr=()=>{Ae.unblock(),URL.revokeObjectURL(Kt)},Gr=Qe=>{Ae.setData({src:{value:Qe,meta:{}}}),Ae.showTab("general"),ya($,K,ne,Ae)};qt(Xn).then(Qe=>{const Br=$.createBlobCache(Xn,Kt,Qe);K.automaticUploads?$.uploadImage(Br).then(Ys=>{Gr(Ys.url),Nr()}).catch(Ys=>{Nr(),$.alertErr(Ys)}):($.addToBlobCache(Br),Gr(Br.blobUri()),Ae.unblock())})})},jc=($,K,ne)=>(Ae,Pt)=>{Pt.name==="src"?ya($,K,ne,Ae):Pt.name==="images"?Dc($,K,ne,Ae):Pt.name==="alt"?ne.prevAlt=Ae.getData().alt:Pt.name==="fileinput"?Xl($,K,ne,Ae):Pt.name==="isDecorative"&&Ae.setEnabled("alt",!Ae.getData().isDecorative)},Jl=$=>()=>{$.open=!1},Z=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:Zn([[Kl.makeTab($)],$.hasAdvTab?[Aa.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[sa.makeTab($)]:[]])}:{type:"panel",items:Kl.makeItems($)},le=($,K,ne)=>Ae=>{const Pt=fr(Ks(K.image),Ae.getData()),Xn={...Pt,style:ys(ne.normalizeCss,Yl(Pt,!1))};$.execCommand("mceUpdateImage",!1,Yl(Xn,K.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),Ae.close()},be=$=>K=>Bn($,K)?Wr($.documentBaseURI.toAbsolute(K)).then(ne=>({width:String(ne.width),height:String(ne.height)})):Promise.resolve({width:"",height:""}),$e=$=>(K,ne,Ae)=>{var Pt;return $.editorUpload.blobCache.create({blob:K,blobUri:ne,name:(Pt=K.name)===null||Pt===void 0?void 0:Pt.replace(/\.[^\.]+$/,""),filename:K.name,base64:Ae.split(",")[1]})},rt=$=>K=>{$.editorUpload.blobCache.add(K)},wn=$=>K=>{$.windowManager.alert(K)},os=$=>K=>no($,K),xr=$=>K=>$.dom.parseStyle(K),wo=$=>(K,ne)=>$.dom.serializeStyle(K,ne),Tr=$=>K=>qs($).upload([K],!1).then(ne=>{var Ae;return ne.length===0?Promise.reject("Failed to upload image"):ne[0].status===!1?Promise.reject((Ae=ne[0].error)===null||Ae===void 0?void 0:Ae.message):ne[0]}),$o=$=>{const K={imageSize:be($),addToBlobCache:rt($),createBlobCache:$e($),alertErr:wn($),normalizeCss:os($),parseStyle:xr($),serializeStyle:wo($),uploadImage:Tr($)};return{open:()=>{Sr($).then(Ae=>{const Pt=va(Ae);return{title:"Insert/Edit Image",size:"normal",body:Z(Ae),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ks(Ae.image),onSubmit:le($,Ae,K),onChange:jc(K,Ae,Pt),onClose:Jl(Pt)}}).then($.windowManager.open)}}},Ws=$=>{$.addCommand("mceImage",$o($).open),$.addCommand("mceUpdateImage",(K,ne)=>{$.undoManager.transact(()=>bo($,ne))})},Rc=$=>{const K=$.attr("class");return it(K)&&/\bimage\b/.test(K)},vc=$=>K=>{let ne=K.length;const Ae=Pt=>{Pt.attr("contenteditable",$?"true":null)};for(;ne--;){const Pt=K[ne];Rc(Pt)&&(Pt.attr("contenteditable",$?"false":null),Ts.each(Pt.getAll("figcaption"),Ae))}},Vn=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",vc(!0)),$.serializer.addNodeFilter("figure",vc(!1))})},Io=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:$o($).open,onSetup:K=>(K.setActive(it(jo($))),$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",K.setActive).unbind)}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:$o($).open}),$.ui.registry.addContextMenu("image",{update:K=>Oa(K)||Xa(K)&&!en(K)?["image"]:[]})};var jr=()=>{ct.add("image",$=>{ms($),Vn($),Io($),Ws($)})};jr()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=Nt=>at=>at.options.get(Nt),sn=Nt=>{const at=Nt.options.register;at("insertdatetime_dateformat",{processor:"string",default:Nt.translate("%Y-%m-%d")}),at("insertdatetime_timeformat",{processor:"string",default:Nt.translate("%H:%M:%S")}),at("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),at("insertdatetime_element",{processor:"boolean",default:!1})},pt=En("insertdatetime_dateformat"),Rt=En("insertdatetime_timeformat"),Jt=En("insertdatetime_formats"),Hn=En("insertdatetime_element"),_t=Nt=>{const at=Jt(Nt);return at.length>0?at[0]:Rt(Nt)},Zt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Wn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),vn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),un="January February March April May June July August September October November December".split(" "),Qt=(Nt,at)=>{if(Nt=""+Nt,Nt.length<at)for(let q=0;q<at-Nt.length;q++)Nt="0"+Nt;return Nt},dt=(Nt,at,q=new Date)=>(at=at.replace("%D","%m/%d/%Y"),at=at.replace("%r","%I:%M:%S %p"),at=at.replace("%Y",""+q.getFullYear()),at=at.replace("%y",""+q.getYear()),at=at.replace("%m",Qt(q.getMonth()+1,2)),at=at.replace("%d",Qt(q.getDate(),2)),at=at.replace("%H",""+Qt(q.getHours(),2)),at=at.replace("%M",""+Qt(q.getMinutes(),2)),at=at.replace("%S",""+Qt(q.getSeconds(),2)),at=at.replace("%I",""+((q.getHours()+11)%12+1)),at=at.replace("%p",q.getHours()<12?"AM":"PM"),at=at.replace("%B",""+Nt.translate(un[q.getMonth()])),at=at.replace("%b",""+Nt.translate(vn[q.getMonth()])),at=at.replace("%A",""+Nt.translate(Wn[q.getDay()])),at=at.replace("%a",""+Nt.translate(Zt[q.getDay()])),at=at.replace("%%","%"),at),Ht=(Nt,at,q,ft)=>{const Mn=Nt.dom.create("time",{datetime:q},ft);Nt.dom.replace(Mn,at),Nt.selection.select(Mn,!0),Nt.selection.collapse(!1)},it=(Nt,at)=>{if(Hn(Nt)){const q=dt(Nt,at);let ft;/%[HMSIp]/.test(at)?ft=dt(Nt,"%Y-%m-%dT%H:%M"):ft=dt(Nt,"%Y-%m-%d");const Mn=Nt.dom.getParent(Nt.selection.getStart(),"time");Mn?Ht(Nt,Mn,ft,q):Nt.insertContent('<time datetime="'+ft+'">'+q+"</time>")}else Nt.insertContent(dt(Nt,at))},ot=Nt=>{Nt.addCommand("mceInsertDate",(at,q)=>{it(Nt,q??pt(Nt))}),Nt.addCommand("mceInsertTime",(at,q)=>{it(Nt,q??Rt(Nt))})},Sn=Nt=>{let at=Nt;return{get:()=>at,set:Mn=>{at=Mn}}};var qe=tinymce.util.Tools.resolve("tinymce.util.Tools");const G=Nt=>{const at=Jt(Nt),q=Sn(_t(Nt)),ft=Bt=>Nt.execCommand("mceInsertDate",!1,Bt);Nt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Bt=>Bt===q.get(),fetch:Bt=>{Bt(qe.map(at,Pe=>({type:"choiceitem",text:dt(Nt,Pe),value:Pe})))},onAction:Bt=>{ft(q.get())},onItemAction:(Bt,Pe)=>{q.set(Pe),ft(Pe)}});const Mn=Bt=>()=>{q.set(Bt),ft(Bt)};Nt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>qe.map(at,Bt=>({type:"menuitem",text:dt(Nt,Bt),onAction:Mn(Bt)}))})};var Xe=()=>{ct.add("insertdatetime",Nt=>{sn(Nt),ot(Nt),G(Nt)})};Xe()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=(Z,le,be)=>{var $e;return be(Z,le.prototype)?!0:(($e=Z.constructor)===null||$e===void 0?void 0:$e.name)===le.name},sn=Z=>{const le=typeof Z;return Z===null?"null":le==="object"&&Array.isArray(Z)?"array":le==="object"&&En(Z,String,(be,$e)=>$e.isPrototypeOf(be))?"string":le},pt=Z=>le=>sn(le)===Z,Rt=Z=>le=>typeof le===Z,Jt=Z=>le=>Z===le,Hn=pt("string"),_t=pt("object"),Zt=pt("array"),Wn=Jt(null),vn=Rt("boolean"),un=Z=>Z==null,Qt=Z=>!un(Z),dt=Rt("function"),Ht=(Z,le)=>{if(Zt(Z)){for(let be=0,$e=Z.length;be<$e;++be)if(!le(Z[be]))return!1;return!0}return!1},it=()=>{},ot=Z=>()=>Z,Sn=(Z,le)=>Z===le;class qe{constructor(le,be){this.tag=le,this.value=be}static some(le){return new qe(!0,le)}static none(){return qe.singletonNone}fold(le,be){return this.tag?be(this.value):le()}isSome(){return this.tag}isNone(){return!this.tag}map(le){return this.tag?qe.some(le(this.value)):qe.none()}bind(le){return this.tag?le(this.value):qe.none()}exists(le){return this.tag&&le(this.value)}forall(le){return!this.tag||le(this.value)}filter(le){return!this.tag||le(this.value)?this:qe.none()}getOr(le){return this.tag?this.value:le}or(le){return this.tag?this:le}getOrThunk(le){return this.tag?this.value:le()}orThunk(le){return this.tag?this:le()}getOrDie(le){if(this.tag)return this.value;throw new Error(le??"Called getOrDie on None")}static from(le){return Qt(le)?qe.some(le):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(le){this.tag&&le(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const G=Array.prototype.indexOf,Xe=Array.prototype.push,Nt=(Z,le)=>G.call(Z,le),at=(Z,le)=>Nt(Z,le)>-1,q=(Z,le)=>{const be=Z.length,$e=new Array(be);for(let rt=0;rt<be;rt++){const wn=Z[rt];$e[rt]=le(wn,rt)}return $e},ft=(Z,le)=>{for(let be=0,$e=Z.length;be<$e;be++){const rt=Z[be];le(rt,be)}},Mn=(Z,le,be)=>(ft(Z,($e,rt)=>{be=le(be,$e,rt)}),be),Bt=Z=>{const le=[];for(let be=0,$e=Z.length;be<$e;++be){if(!Zt(Z[be]))throw new Error("Arr.flatten item "+be+" was not an array, input: "+Z);Xe.apply(le,Z[be])}return le},Pe=(Z,le)=>Bt(q(Z,le)),fe=(Z,le)=>{for(let be=0;be<Z.length;be++){const $e=le(Z[be],be);if($e.isSome())return $e}return qe.none()},Vo=(Z,le,be=Sn)=>Z.exists($e=>be($e,le)),Zn=Z=>{const le=[],be=$e=>{le.push($e)};for(let $e=0;$e<Z.length;$e++)Z[$e].each(be);return le},jt=(Z,le)=>Z?qe.some(le):qe.none(),O=Z=>le=>le.options.get(Z),Eo=Z=>{const le=Z.options.register;le("link_assume_external_targets",{processor:be=>{const $e=Hn(be)||vn(be);return $e?be===!0?{value:1,valid:$e}:be==="http"||be==="https"?{value:be,valid:$e}:{value:0,valid:$e}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),le("link_context_toolbar",{processor:"boolean",default:!1}),le("link_list",{processor:be=>Hn(be)||dt(be)||Ht(be,_t)}),le("link_default_target",{processor:"string"}),le("link_default_protocol",{processor:"string",default:"https"}),le("link_target_list",{processor:be=>vn(be)||Ht(be,_t),default:!0}),le("link_rel_list",{processor:"object[]",default:[]}),le("link_class_list",{processor:"object[]",default:[]}),le("link_title",{processor:"boolean",default:!0}),le("allow_unsafe_link_target",{processor:"boolean",default:!1}),le("link_quicklink",{processor:"boolean",default:!1})},nt=O("link_assume_external_targets"),No=O("link_context_toolbar"),dn=O("link_list"),je=O("link_default_target"),po=O("link_default_protocol"),Xo=O("link_target_list"),Bo=O("link_rel_list"),Ps=O("link_class_list"),_e=O("link_title"),gt=O("allow_unsafe_link_target"),H=O("link_quicklink");var Hr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Fn=Z=>Hn(Z.value)?Z.value:"",ms=Z=>Hn(Z.text)?Z.text:Hn(Z.title)?Z.title:"",In=(Z,le)=>{const be=[];return Hr.each(Z,$e=>{const rt=ms($e);if($e.menu!==void 0){const wn=In($e.menu,le);be.push({text:rt,items:wn})}else{const wn=le($e);be.push({text:rt,value:wn})}}),be},js=(Z=Fn)=>le=>qe.from(le).map(be=>In(be,Z)),Vt={sanitize:Z=>js(Fn)(Z),sanitizeWith:js,createUi:(Z,le)=>be=>({name:Z,type:"listbox",label:le,items:be}),getValue:Fn},De=Object.keys,Gs=Object.hasOwnProperty,cs=(Z,le)=>{const be=De(Z);for(let $e=0,rt=be.length;$e<rt;$e++){const wn=be[$e],os=Z[wn];le(os,wn)}},rn=Z=>(le,be)=>{Z[be]=le},Ea=(Z,le,be,$e)=>{cs(Z,(rt,wn)=>{(le(rt,wn)?be:$e)(rt,wn)})},zo=(Z,le)=>{const be={};return Ea(Z,le,rn(be),it),be},_a=(Z,le)=>Gs.call(Z,le),ls=(Z,le)=>_a(Z,le)&&Z[le]!==void 0&&Z[le]!==null;var Ms=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Wr=tinymce.util.Tools.resolve("tinymce.util.URI");const ur=Z=>Qt(Z)&&Z.nodeName.toLowerCase()==="a",Jo=Z=>ur(Z)&&!!Ye(Z),Uo=(Z,le)=>{if(Z.collapsed)return[];{const be=Z.cloneContents(),$e=be.firstChild,rt=new Ms($e,be),wn=[];let os=$e;do le(os)&&wn.push(os);while(os=rt.next());return wn}},tt=Z=>/^\w+:/i.test(Z),Ye=Z=>{var le,be;return(be=(le=Z.getAttribute("data-mce-href"))!==null&&le!==void 0?le:Z.getAttribute("href"))!==null&&be!==void 0?be:""},qt=(Z,le)=>{const be=["noopener"],$e=Z?Z.split(/\s+/):[],rt=wo=>Hr.trim(wo.sort().join(" ")),wn=wo=>(wo=os(wo),wo.length>0?wo.concat(be):be),os=wo=>wo.filter(Tr=>Hr.inArray(be,Tr)===-1),xr=le?wn($e):os($e);return xr.length>0?rt(xr):""},en=Z=>Z.replace(/\uFEFF/g,""),Bn=(Z,le)=>(le=le||ga(Z.selection.getRng())[0]||Z.selection.getNode(),so(le)?qe.from(Z.dom.select("a[href]",le)[0]):qe.from(Z.dom.getParent(le,"a[href]"))),Yt=(Z,le)=>Bn(Z,le).isSome(),Ns=(Z,le)=>{const be=le.fold(()=>Z.getContent({format:"text"}),$e=>$e.innerText||$e.textContent||"");return en(be)},ga=Z=>Uo(Z,Jo),rr=Z=>Hr.grep(Z,Jo),xs=Z=>rr(Z).length>0,Mr=Z=>ga(Z).length>0,ht=Z=>{const le=Z.schema.getTextInlineElements(),be=wn=>wn.nodeType===1&&!ur(wn)&&!_a(le,wn.nodeName.toLowerCase());if(Bn(Z).exists(wn=>wn.hasAttribute("data-mce-block")))return!1;const rt=Z.selection.getRng();return rt.collapsed?!0:Uo(rt,be).length===0},so=Z=>Qt(Z)&&Z.nodeName==="FIGURE"&&/\bimage\b/i.test(Z.className),ha=Z=>Mn(["title","rel","class","target"],(be,$e)=>(Z[$e].each(rt=>{be[$e]=rt.length>0?rt:null}),be),{href:Z.href}),ar=(Z,le)=>(le==="http"||le==="https")&&!tt(Z)?le+"://"+Z:Z,Uc=(Z,le)=>{const be={...le};if(Bo(Z).length===0&&!gt(Z)){const $e=qt(be.rel,be.target==="_blank");be.rel=$e||null}return qe.from(be.target).isNone()&&Xo(Z)===!1&&(be.target=je(Z)),be.href=ar(be.href,nt(Z)),be},Ka=(Z,le,be,$e)=>{be.each(rt=>{_a(le,"innerText")?le.innerText=rt:le.textContent=rt}),Z.dom.setAttribs(le,$e),Z.selection.select(le)},Qo=(Z,le,be,$e)=>{const rt=Z.dom;so(le)?Is(rt,le,$e):be.fold(()=>{Z.execCommand("mceInsertLink",!1,$e)},wn=>{Z.insertContent(rt.createHTML("a",$e,rt.encode(wn)))})},Ya=(Z,le,be)=>{const $e=Z.selection.getNode(),rt=Bn(Z,$e),wn=Uc(Z,ha(be));Z.undoManager.transact(()=>{be.href===le.href&&le.attach(),rt.fold(()=>{Qo(Z,$e,be.text,wn)},os=>{Z.focus(),Ka(Z,os,be.text,wn)})})},pa=Z=>{const le=Z.dom,be=Z.selection,$e=be.getBookmark(),rt=be.getRng().cloneRange(),wn=le.getParent(rt.startContainer,"a[href]",Z.getBody()),os=le.getParent(rt.endContainer,"a[href]",Z.getBody());wn&&rt.setStartBefore(wn),os&&rt.setEndAfter(os),be.setRng(rt),Z.execCommand("unlink"),be.moveToBookmark($e)},Wo=Z=>{Z.undoManager.transact(()=>{const le=Z.selection.getNode();so(le)?Ja(Z,le):pa(Z),Z.focus()})},_n=Z=>{const{class:le,href:be,rel:$e,target:rt,text:wn,title:os}=Z;return zo({class:le.getOrNull(),href:be,rel:$e.getOrNull(),target:rt.getOrNull(),text:wn.getOrNull(),title:os.getOrNull()},(xr,wo)=>Wn(xr)===!1)},Zr=(Z,le)=>{const be=Z.options.get,$e={allow_html_data_urls:be("allow_html_data_urls"),allow_script_urls:be("allow_script_urls"),allow_svg_data_urls:be("allow_svg_data_urls")},rt=le.href;return{...le,href:Wr.isDomSafe(rt,"a",$e)?rt:""}},Oa=(Z,le,be)=>{const $e=Zr(Z,be);Z.hasPlugin("rtc",!0)?Z.execCommand("createlink",!1,_n($e)):Ya(Z,le,$e)},Xa=Z=>{Z.hasPlugin("rtc",!0)?Z.execCommand("unlink"):Wo(Z)},Ja=(Z,le)=>{var be;const $e=Z.dom.select("img",le)[0];if($e){const rt=Z.dom.getParents($e,"a[href]",le)[0];rt&&((be=rt.parentNode)===null||be===void 0||be.insertBefore($e,rt),Z.dom.remove(rt))}},Is=(Z,le,be)=>{var $e;const rt=Z.select("img",le)[0];if(rt){const wn=Z.create("a",be);($e=rt.parentNode)===null||$e===void 0||$e.insertBefore(wn,rt),wn.appendChild(rt)}},dr=Z=>ls(Z,"items"),ys=(Z,le)=>fe(le,be=>dr(be)?ys(Z,be.items):jt(be.value===Z,be)),yr=(Z,le,be,$e)=>{const rt=$e[le],wn=Z.length>0;return rt!==void 0?ys(rt,be).map(os=>({url:{value:os.value,meta:{text:wn?Z:os.text,attach:it}},text:wn?Z:os.text})):qe.none()},ue=(Z,le)=>le==="link"?Z.link:le==="anchor"?Z.anchor:qe.none(),Be={init:(Z,le)=>{const be={text:Z.text,title:Z.title},$e=wo=>{var Tr;return jt(be.title.length<=0,qe.from((Tr=wo.meta)===null||Tr===void 0?void 0:Tr.title).getOr(""))},rt=wo=>{var Tr;return jt(be.text.length<=0,qe.from((Tr=wo.meta)===null||Tr===void 0?void 0:Tr.text).getOr(wo.value))},wn=wo=>{const Tr=rt(wo.url),$o=$e(wo.url);return Tr.isSome()||$o.isSome()?qe.some({...Tr.map(Ws=>({text:Ws})).getOr({}),...$o.map(Ws=>({title:Ws})).getOr({})}):qe.none()},os=(wo,Tr)=>{const $o=ue(le,Tr).getOr([]);return yr(be.text,Tr,$o,wo)};return{onChange:(wo,Tr)=>{const $o=Tr.name;return $o==="url"?wn(wo()):at(["anchor","link"],$o)?os(wo(),$o):(($o==="text"||$o==="title")&&(be[$o]=wo()[$o]),qe.none())}}},getDelta:yr};var Re=tinymce.util.Tools.resolve("tinymce.util.Delay");const Xt=(Z,le,be)=>{const $e=Z.selection.getRng();Re.setEditorTimeout(Z,()=>{Z.windowManager.confirm(le,rt=>{Z.selection.setRng($e),be(rt)})})},yn=Z=>{const le=Z.href;return le.indexOf("@")>0&&le.indexOf("/")===-1&&le.indexOf("mailto:")===-1?qe.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:$e=>({...$e,href:"mailto:"+le})}):qe.none()},no=(Z,le)=>be=>{const $e=be.href;return Z===1&&!tt($e)||Z===0&&/^\s*www(\.|\d\.)/i.test($e)?qe.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${le}:// prefix?`,preprocess:wn=>({...wn,href:le+"://"+$e})}):qe.none()},Yn={preprocess:(Z,le)=>fe([yn,no(nt(Z),po(Z))],be=>be(le)).fold(()=>Promise.resolve(le),be=>new Promise($e=>{Xt(Z,be.message,rt=>{$e(rt?be.preprocess(le):le)})}))},pe={getAnchors:Z=>{const le=Z.dom.select("a:not([href])"),be=Pe(le,$e=>{const rt=$e.name||$e.id;return rt?[{text:rt,value:"#"+rt}]:[]});return be.length>0?qe.some([{text:"None",value:""}].concat(be)):qe.none()}},wr={getClasses:Z=>{const le=Ps(Z);return le.length>0?Vt.sanitize(le):qe.none()}},mr=Z=>{try{return qe.some(JSON.parse(Z))}catch{return qe.none()}},bo={getLinks:Z=>{const le=$e=>Z.convertURL($e.value||$e.url||"","href"),be=dn(Z);return new Promise($e=>{Hn(be)?fetch(be).then(rt=>rt.ok?rt.text().then(mr):Promise.reject()).then($e,()=>$e(qe.none())):dt(be)?be(rt=>$e(qe.some(rt))):$e(qe.from(be))}).then($e=>$e.bind(Vt.sanitizeWith(le)).map(rt=>rt.length>0?[{text:"None",value:""}].concat(rt):rt))}},Cr={getRels:(Z,le)=>{const be=Bo(Z);if(be.length>0){const $e=Vo(le,"_blank"),rt=gt(Z)===!1,wn=xr=>qt(Vt.getValue(xr),$e);return(rt?Vt.sanitizeWith(wn):Vt.sanitize)(be)}return qe.none()}},fr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ts={getTargets:Z=>{const le=Xo(Z);return Zt(le)?Vt.sanitize(le).orThunk(()=>qe.some(fr)):le===!1?qe.none():qe.some(fr)}},fs=(Z,le,be)=>{const $e=Z.getAttrib(le,be);return $e!==null&&$e.length>0?qe.some($e):qe.none()},Zc=(Z,le)=>{const be=Z.dom,rt=ht(Z)?qe.some(Ns(Z.selection,le)):qe.none(),wn=le.bind($o=>qe.from(be.getAttrib($o,"href"))),os=le.bind($o=>qe.from(be.getAttrib($o,"target"))),xr=le.bind($o=>fs(be,$o,"rel")),wo=le.bind($o=>fs(be,$o,"class")),Tr=le.bind($o=>fs(be,$o,"title"));return{url:wn,text:rt,title:Tr,target:os,rel:xr,linkClass:wo}},hc={collect:(Z,le)=>bo.getLinks(Z).then(be=>{const $e=Zc(Z,le);return{anchor:$e,catalogs:{targets:Ts.getTargets(Z),rels:Cr.getRels(Z,$e.target),classes:wr.getClasses(Z),anchor:pe.getAnchors(Z),link:be},optNode:le,flags:{titleEnabled:_e(Z)}}})},ol=(Z,le)=>be=>{const $e=be.getData();if(!$e.url.value){Xa(Z),be.close();return}const rt=xr=>qe.from($e[xr]).filter(wo=>!Vo(le.anchor[xr],wo)),wn={href:$e.url.value,text:rt("text"),target:rt("target"),rel:rt("rel"),class:rt("linkClass"),title:rt("title")},os={href:$e.url.value,attach:$e.url.meta!==void 0&&$e.url.meta.attach?$e.url.meta.attach:it};Yn.preprocess(Z,wn).then(xr=>{Oa(Z,os,xr)}),be.close()},sl=Z=>{const le=Bn(Z);return hc.collect(Z,le)},Lo=(Z,le)=>{const be=Z.anchor,$e=be.url.getOr("");return{url:{value:$e,meta:{original:{value:$e}}},text:be.text.getOr(""),title:be.title.getOr(""),anchor:$e,link:$e,rel:be.rel.getOr(""),target:be.target.or(le).getOr(""),linkClass:be.linkClass.getOr("")}},ba=(Z,le,be)=>{const $e=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],rt=Z.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),wn=Z.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],os=qe.from(je(be)),xr=Lo(Z,os),wo=Z.catalogs,Tr=Be.init(xr,wo);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Bt([$e,rt,wn,Zn([wo.anchor.map(Vt.createUi("anchor","Anchors")),wo.rels.map(Vt.createUi("rel","Rel")),wo.targets.map(Vt.createUi("target","Open link in...")),wo.link.map(Vt.createUi("link","Link list")),wo.classes.map(Vt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:xr,onChange:(Ws,{name:Rc})=>{Tr.onChange(Ws.getData,{name:Rc}).each(vc=>{Ws.setData(vc)})},onSubmit:le}},Ac=Z=>{sl(Z).then(be=>{const $e=ol(Z,be);return ba(be,$e,Z)}).then(be=>{Z.windowManager.open(be)})},pc=Z=>{Z.addCommand("mceLink",(le,be)=>{(be==null?void 0:be.dialog)===!0||!H(Z)?Ac(Z):Z.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Aa=tinymce.util.Tools.resolve("tinymce.util.VK");const Sr=(Z,le)=>{document.body.appendChild(Z),Z.dispatchEvent(le),document.body.removeChild(Z)},_s=Z=>{const le=document.createElement("a");le.target="_blank",le.href=Z,le.rel="noreferrer noopener";const be=document.createEvent("MouseEvents");be.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Sr(le,be)},au=(Z,le)=>Z.dom.getParent(le,"a[href]"),Kl=Z=>au(Z,Z.selection.getStart()),es=Z=>Z.altKey===!0&&Z.shiftKey===!1&&Z.ctrlKey===!1&&Z.metaKey===!1,sa=(Z,le)=>{if(le){const be=Ye(le);if(/^#/.test(be)){const $e=Z.dom.select(be);$e.length&&Z.selection.scrollIntoView($e[0],!0)}else _s(le.href)}},va=Z=>()=>{Z.execCommand("mceLink",!1,{dialog:!0})},Ks=Z=>()=>{sa(Z,Kl(Z))},Yl=Z=>{Z.on("click",le=>{const be=au(Z,le.target);be&&Aa.metaKeyPressed(le)&&(le.preventDefault(),sa(Z,be))}),Z.on("keydown",le=>{if(!le.isDefaultPrevented()&&le.keyCode===13&&es(le)){const be=Kl(Z);be&&(le.preventDefault(),sa(Z,be))}})},ec=(Z,le)=>(Z.on("NodeChange",le),()=>Z.off("NodeChange",le)),ra=Z=>le=>{const be=()=>le.setActive(!Z.mode.isReadOnly()&&Yt(Z,Z.selection.getNode()));return be(),ec(Z,be)},bc=Z=>(Z.selection.isCollapsed()?rr(Z.dom.getParents(Z.selection.getStart())):ga(Z.selection.getRng())).length===1,vi=Z=>le=>{const be=()=>le.setEnabled(bc(Z));return be(),ec(Z,be)},Sl=Z=>le=>{const be=rt=>xs(rt)||Mr(Z.selection.getRng()),$e=Z.dom.getParents(Z.selection.getStart());return le.setEnabled(be($e)),ec(Z,rt=>le.setEnabled(be(rt.parents)))},yi=Z=>{Z.addShortcut("Meta+K","",()=>{Z.execCommand("mceLink")})},ya=Z=>{Z.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:va(Z),onSetup:ra(Z)}),Z.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ks(Z),onSetup:vi(Z)}),Z.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Xa(Z),onSetup:Sl(Z)})},Dc=Z=>{Z.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ks(Z),onSetup:vi(Z)}),Z.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:va(Z)}),Z.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Xa(Z),onSetup:Sl(Z)})},Xl=Z=>{const le="link unlink openlink",be="link";Z.ui.registry.addContextMenu("link",{update:$e=>Z.dom.isEditable($e)?xs(Z.dom.getParents($e,"a"))?le:be:""})},jc=Z=>{const le=rt=>{rt.selection.collapse(!1)},be=rt=>{const wn=Z.selection.getNode();return rt.setEnabled(Yt(Z,wn)),it},$e=rt=>{const wn=Bn(Z),os=ht(Z);if(wn.isNone()&&os){const xr=Ns(Z.selection,wn);return jt(xr.length===0,rt)}else return qe.none()};Z.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ra(Z)},label:"Link",predicate:rt=>No(Z)&&Yt(Z,rt),initValue:()=>Bn(Z).fold(ot(""),Ye),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:rt=>{const wn=Z.selection.getNode();return rt.setActive(Yt(Z,wn)),ra(Z)(rt)},onAction:rt=>{const wn=rt.getValue(),os=$e(wn);Oa(Z,{href:wn,attach:it},{href:wn,text:os,title:qe.none(),rel:qe.none(),target:qe.none(),class:qe.none()}),le(Z),rt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:be,onAction:rt=>{Xa(Z),rt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:be,onAction:rt=>{Ks(Z)(),rt.hide()}}]})};var Jl=()=>{ct.add("link",Z=>{Eo(Z),ya(Z),Dc(Z),Xl(Z),jc(Z),Yl(Z),pc(Z),yi(Z)})};Jl()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=(E,M,z)=>{var ie;return z(E,M.prototype)?!0:((ie=E.constructor)===null||ie===void 0?void 0:ie.name)===M.name},sn=E=>{const M=typeof E;return E===null?"null":M==="object"&&Array.isArray(E)?"array":M==="object"&&En(E,String,(z,ie)=>ie.isPrototypeOf(z))?"string":M},pt=E=>M=>sn(M)===E,Rt=E=>M=>typeof M===E,Jt=pt("string"),Hn=pt("object"),_t=pt("array"),Zt=Rt("boolean"),Wn=E=>E==null,vn=E=>!Wn(E),un=Rt("function"),Qt=Rt("number"),dt=()=>{},Ht=E=>()=>E,it=(E,M)=>E===M,ot=E=>M=>!E(M),Sn=Ht(!1);class qe{constructor(M,z){this.tag=M,this.value=z}static some(M){return new qe(!0,M)}static none(){return qe.singletonNone}fold(M,z){return this.tag?z(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?qe.some(M(this.value)):qe.none()}bind(M){return this.tag?M(this.value):qe.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:qe.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M??"Called getOrDie on None")}static from(M){return vn(M)?qe.some(M):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const G=Array.prototype.slice,Xe=Array.prototype.indexOf,Nt=Array.prototype.push,at=(E,M)=>Xe.call(E,M),q=(E,M)=>at(E,M)>-1,ft=(E,M)=>{for(let z=0,ie=E.length;z<ie;z++){const de=E[z];if(M(de,z))return!0}return!1},Mn=(E,M)=>{const z=E.length,ie=new Array(z);for(let de=0;de<z;de++){const xt=E[de];ie[de]=M(xt,de)}return ie},Bt=(E,M)=>{for(let z=0,ie=E.length;z<ie;z++){const de=E[z];M(de,z)}},Pe=(E,M)=>{const z=[];for(let ie=0,de=E.length;ie<de;ie++){const xt=E[ie];M(xt,ie)&&z.push(xt)}return z},fe=(E,M)=>{if(E.length===0)return[];{let z=M(E[0]);const ie=[];let de=[];for(let xt=0,On=E.length;xt<On;xt++){const jn=E[xt],fo=M(jn);fo!==z&&(ie.push(de),de=[]),z=fo,de.push(jn)}return de.length!==0&&ie.push(de),ie}},Vo=(E,M,z)=>(Bt(E,(ie,de)=>{z=M(z,ie,de)}),z),Zn=(E,M,z)=>{for(let ie=0,de=E.length;ie<de;ie++){const xt=E[ie];if(M(xt,ie))return qe.some(xt);if(z(xt,ie))break}return qe.none()},jt=(E,M)=>Zn(E,M,Sn),O=E=>{const M=[];for(let z=0,ie=E.length;z<ie;++z){if(!_t(E[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+E);Nt.apply(M,E[z])}return M},Eo=(E,M)=>O(Mn(E,M)),nt=E=>{const M=G.call(E,0);return M.reverse(),M},No=(E,M)=>M>=0&&M<E.length?qe.some(E[M]):qe.none(),dn=E=>No(E,0),je=E=>No(E,E.length-1),po=(E,M)=>{const z=[],ie=un(M)?de=>ft(z,xt=>M(xt,de)):de=>q(z,de);for(let de=0,xt=E.length;de<xt;de++){const On=E[de];ie(On)||z.push(On)}return z},Xo=(E,M,z=it)=>E.exists(ie=>z(ie,M)),Bo=(E,M,z=it)=>Ps(E,M,z).getOr(E.isNone()&&M.isNone()),Ps=(E,M,z)=>E.isSome()&&M.isSome()?qe.some(z(E.getOrDie(),M.getOrDie())):qe.none(),_e=1,gt=(E,M)=>{const ie=(M||document).createElement("div");if(ie.innerHTML=E,!ie.hasChildNodes()||ie.childNodes.length>1){const de="HTML does not have a single root node";throw console.error(de,E),new Error(de)}return Fn(ie.childNodes[0])},H=(E,M)=>{const ie=(M||document).createElement(E);return Fn(ie)},Hr=(E,M)=>{const ie=(M||document).createTextNode(E);return Fn(ie)},Fn=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},In={fromHtml:gt,fromTag:H,fromText:Hr,fromDom:Fn,fromPoint:(E,M,z)=>qe.from(E.dom.elementFromPoint(M,z)).map(Fn)},js=(E,M)=>{const z=E.dom;if(z.nodeType!==_e)return!1;{const ie=z;if(ie.matches!==void 0)return ie.matches(M);if(ie.msMatchesSelector!==void 0)return ie.msMatchesSelector(M);if(ie.webkitMatchesSelector!==void 0)return ie.webkitMatchesSelector(M);if(ie.mozMatchesSelector!==void 0)return ie.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},Tt=(E,M)=>E.dom===M.dom,$t=(E,M)=>{const z=E.dom,ie=M.dom;return z===ie?!1:z.contains(ie)},Vt=js;var De=(E,M,z,ie,de)=>E(z,ie)?qe.some(z):un(de)&&de(z)?qe.none():M(z,ie,de);typeof window<"u"||Function("return this;")();const Gs=E=>E.dom.nodeName.toLowerCase(),cs=E=>E.dom.nodeType,Ea=(E=>M=>cs(M)===E)(_e),zo=E=>M=>Ea(M)&&Gs(M)===E,_a=E=>qe.from(E.dom.parentNode).map(In.fromDom),ls=E=>qe.from(E.dom.parentElement).map(In.fromDom),Ms=E=>qe.from(E.dom.nextSibling).map(In.fromDom),Wr=E=>Mn(E.dom.childNodes,In.fromDom),ur=(E,M)=>{const z=E.dom.childNodes;return qe.from(z[M]).map(In.fromDom)},Jo=E=>ur(E,0),Uo=E=>ur(E,E.dom.childNodes.length-1),tt=(E,M,z)=>{let ie=E.dom;const de=un(z)?z:Sn;for(;ie.parentNode;){ie=ie.parentNode;const xt=In.fromDom(ie);if(M(xt))return qe.some(xt);if(de(xt))break}return qe.none()},Ye=(E,M,z)=>De((de,xt)=>xt(de),tt,E,M,z),qt=(E,M)=>{_a(E).each(ie=>{ie.dom.insertBefore(M.dom,E.dom)})},en=(E,M)=>{Ms(E).fold(()=>{_a(E).each(de=>{Bn(de,M)})},ie=>{qt(ie,M)})},Bn=(E,M)=>{E.dom.appendChild(M.dom)},Yt=(E,M)=>{Bt(M,z=>{qt(E,z)})},Ns=(E,M)=>{Bt(M,z=>{Bn(E,z)})},ga=E=>{E.dom.textContent="",Bt(Wr(E),M=>{rr(M)})},rr=E=>{const M=E.dom;M.parentNode!==null&&M.parentNode.removeChild(M)};var xs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Mr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ht=tinymce.util.Tools.resolve("tinymce.util.VK");const so=E=>Mn(E,In.fromDom),ha=Object.keys,ar=(E,M)=>{const z=ha(E);for(let ie=0,de=z.length;ie<de;ie++){const xt=z[ie],On=E[xt];M(On,xt)}},Uc=E=>(M,z)=>{E[z]=M},Ka=(E,M,z,ie)=>{ar(E,(de,xt)=>{(M(de,xt)?z:ie)(de,xt)})},Qo=(E,M)=>{const z={};return Ka(E,M,Uc(z),dt),z},Ya=(E,M,z)=>{if(Jt(z)||Zt(z)||Qt(z))E.setAttribute(M,z+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",z,":: Element ",E),new Error("Attribute value was not simple")},pa=(E,M)=>{const z=E.dom;ar(M,(ie,de)=>{Ya(z,de,ie)})},Wo=E=>Vo(E.dom.attributes,(M,z)=>(M[z.name]=z.value,M),{}),_n=(E,M)=>In.fromDom(E.dom.cloneNode(M)),Zr=E=>_n(E,!0),Oa=(E,M)=>{const z=In.fromTag(M),ie=Wo(E);return pa(z,ie),z},Xa=(E,M)=>{const z=Oa(E,M);en(E,z);const ie=Wr(E);return Ns(z,ie),rr(E),z};var Ja=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Is=tinymce.util.Tools.resolve("tinymce.util.Tools");const dr=E=>M=>vn(M)&&M.nodeName.toLowerCase()===E,ys=E=>M=>vn(M)&&E.test(M.nodeName),yr=E=>vn(E)&&E.nodeType===3,ue=E=>vn(E)&&E.nodeType===1,se=ys(/^(OL|UL|DL)$/),Be=ys(/^(OL|UL)$/),Re=dr("ol"),Xt=ys(/^(LI|DT|DD)$/),yn=ys(/^(DT|DD)$/),no=ys(/^(TH|TD)$/),jo=dr("br"),Yn=E=>{var M;return((M=E.parentNode)===null||M===void 0?void 0:M.firstChild)===E},uo=(E,M)=>vn(M)&&M.nodeName in E.schema.getTextBlockElements(),pe=(E,M)=>vn(E)&&E.nodeName in M,Fo=(E,M)=>vn(M)&&M.nodeName in E.schema.getVoidElements(),wr=(E,M)=>jo(M)?E.isBlock(M.nextSibling)&&!jo(M.previousSibling):!1,mr=(E,M,z)=>{const ie=E.isEmpty(M);return z&&E.select("span[data-mce-type=bookmark]",M).length>0?!1:ie},Wc=(E,M)=>E.isChildOf(M,E.getRoot()),bo=E=>M=>M.options.get(E),Cl=E=>{const M=E.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},Cr=bo("lists_indent_on_tab"),fr=bo("forced_root_block"),qs=bo("forced_root_block_attrs"),Ts=(E,M)=>{const z=E.dom,ie=E.schema.getBlockElements(),de=z.createFragment(),xt=fr(E),On=qs(E);let jn,fo,St=!1;for(fo=z.create(xt,On),pe(M.firstChild,ie)||de.appendChild(fo);jn=M.firstChild;){const gs=jn.nodeName;!St&&(gs!=="SPAN"||jn.getAttribute("data-mce-type")!=="bookmark")&&(St=!0),pe(jn,ie)?(de.appendChild(jn),fo=null):(fo||(fo=z.create(xt,On),de.appendChild(fo)),fo.appendChild(jn))}return!St&&fo&&fo.appendChild(z.create("br",{"data-mce-bogus":"1"})),de},fs=Ja.DOM,Zc=(E,M,z)=>{const ie=St=>{const gs=St.parentNode;gs&&Is.each(de,wa=>{gs.insertBefore(wa,z.parentNode)}),fs.remove(St)},de=fs.select('span[data-mce-type="bookmark"]',M),xt=Ts(E,z),On=fs.createRng();On.setStartAfter(z),On.setEndAfter(M);const jn=On.extractContents();for(let St=jn.firstChild;St;St=St.firstChild)if(St.nodeName==="LI"&&E.dom.isEmpty(St)){fs.remove(St);break}E.dom.isEmpty(jn)||fs.insertAfter(jn,M),fs.insertAfter(xt,M);const fo=z.parentElement;fo&&mr(E.dom,fo)&&ie(fo),fs.remove(z),mr(E.dom,M)&&fs.remove(M)},Qa=zo("dd"),hc=zo("dt"),ol=(E,M)=>{Qa(M)?Xa(M,"dt"):hc(M)&&ls(M).each(z=>Zc(E,z.dom,M.dom))},sl=E=>{hc(E)&&Xa(E,"dd")},Lo=(E,M,z)=>{M==="Indent"?Bt(z,sl):Bt(z,ie=>ol(E,ie))},ba=(E,M)=>{if(yr(E))return{container:E,offset:M};const z=xs.getNode(E,M);return yr(z)?{container:z,offset:M>=E.childNodes.length?z.data.length:0}:z.previousSibling&&yr(z.previousSibling)?{container:z.previousSibling,offset:z.previousSibling.data.length}:z.nextSibling&&yr(z.nextSibling)?{container:z.nextSibling,offset:0}:{container:E,offset:M}},Ac=E=>{const M=E.cloneRange(),z=ba(E.startContainer,E.startOffset);M.setStart(z.container,z.offset);const ie=ba(E.endContainer,E.endOffset);return M.setEnd(ie.container,ie.offset),M},pc=["OL","UL","DL"],Aa=pc.join(","),Sr=(E,M)=>{const z=M||E.selection.getStart(!0);return E.dom.getParent(z,Aa,ec(E,z))},_s=(E,M)=>vn(E)&&M.length===1&&M[0]===E,au=E=>Pe(E.querySelectorAll(Aa),se),Kl=E=>{const M=Sr(E),z=E.selection.getSelectedBlocks();return _s(M,z)?au(M):Pe(z,ie=>se(ie)&&M!==ie)},es=(E,M)=>{const z=Is.map(M,ie=>{const de=E.dom.getParent(ie,"li,dd,dt",ec(E,ie));return de||ie});return po(z)},sa=E=>{const M=E.selection.getSelectedBlocks();return Pe(es(E,M),Xt)},va=E=>Pe(sa(E),yn),Ks=(E,M)=>{const z=E.dom.getParents(M,"TD,TH");return z.length>0?z[0]:E.getBody()},Yl=(E,M)=>!se(M)&&!Xt(M)&&ft(pc,z=>E.isValidChild(M.nodeName,z)),ec=(E,M)=>{const z=E.dom.getParents(M,E.dom.isBlock);return jt(z,de=>Yl(E.schema,de)).getOr(E.getBody())},ra=(E,M)=>{const z=E.dom.getParents(M,"ol,ul",ec(E,M));return je(z)},bc=E=>{const M=ra(E,E.selection.getStart()),z=Pe(E.selection.getSelectedBlocks(),Be);return M.toArray().concat(z)},vi=E=>{const M=bc(E);return Sl(E,M)},Sl=(E,M)=>{const z=Mn(M,ie=>ra(E,ie).getOr(ie));return po(z)},yi=E=>/\btox\-/.test(E.className),ya=(E,M)=>Zn(E,se,no).exists(z=>z.nodeName===M&&!yi(z)),Dc=(E,M)=>M!==null&&!E.dom.isEditable(M),Xl=E=>{const M=Sr(E);return Dc(E,M)},jc=(E,M)=>{const z=E.dom.getParent(M,"ol,ul,dl");return Dc(E,z)},Jl=E=>ft(E.selection.getSelectedBlocks(),ot(E.dom.isEditable)),Z=(E,M)=>{const z=E.selection.getNode();return M({parents:E.dom.getParents(z),element:z}),E.on("NodeChange",M),()=>E.off("NodeChange",M)},le=(E,M)=>{const ie=(M||document).createDocumentFragment();return Bt(E,de=>{ie.appendChild(de.dom)}),In.fromDom(ie)},be=(E,M,z)=>E.dispatch("ListMutation",{action:M,element:z}),rt=(E=>M=>M.replace(E,""))(/^\s+|\s+$/g),wn=E=>E.length>0,os=E=>!wn(E),xr=E=>E.style!==void 0&&un(E.style.getPropertyValue),wo=(E,M,z)=>{if(!Jt(z))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",z,":: Element ",E),new Error("CSS value must be a string: "+z);xr(E)&&E.style.setProperty(M,z)},Tr=(E,M,z)=>{const ie=E.dom;wo(ie,M,z)},$o=(E,M)=>{Bn(E.item,M.list)},Ws=E=>{for(let M=1;M<E.length;M++)$o(E[M-1],E[M])},Rc=(E,M)=>{Ps(je(E),dn(M),$o)},vc=(E,M)=>{const z={list:In.fromTag(M,E),item:In.fromTag("li",E)};return Bn(z.list,z.item),z},Vn=(E,M,z)=>{const ie=[];for(let de=0;de<z;de++)ie.push(vc(E,M.listType));return ie},Io=(E,M)=>{for(let z=0;z<E.length-1;z++)Tr(E[z].item,"list-style-type","none");je(E).each(z=>{pa(z.list,M.listAttributes),pa(z.item,M.itemAttributes),Ns(z.item,M.content)})},jr=(E,M)=>{Gs(E.list)!==M.listType&&(E.list=Xa(E.list,M.listType)),pa(E.list,M.listAttributes)},$=(E,M,z)=>{const ie=In.fromTag("li",E);return pa(ie,M),Ns(ie,z),ie},K=(E,M)=>{Bn(E.list,M),E.item=M},ne=(E,M,z)=>{const ie=M.slice(0,z.depth);return je(ie).each(de=>{const xt=$(E,z.itemAttributes,z.content);K(de,xt),jr(de,z)}),ie},Ae=(E,M,z)=>{const ie=Vn(E,z,z.depth-M.length);return Ws(ie),Io(ie,z),Rc(M,ie),M.concat(ie)},Pt=(E,M)=>{const z=Vo(M,(ie,de)=>de.depth>ie.length?Ae(E,ie,de):ne(E,ie,de),[]);return dn(z).map(ie=>ie.list)},Xn=E=>Vt(E,"OL,UL"),Kt=E=>Jo(E).exists(Xn),Nr=E=>Uo(E).exists(Xn),Gr=E=>E.depth>0,Qe=E=>E.isSelected,Br=E=>{const M=Wr(E),z=Nr(E)?M.slice(0,-1):M;return Mn(z,Zr)},Ys=(E,M,z)=>_a(E).filter(Ea).map(ie=>({depth:M,dirty:!1,isSelected:z,content:Br(E),itemAttributes:Wo(E),listAttributes:Wo(ie),listType:Gs(ie)})),qr=(E,M)=>{switch(E){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},Cd=(E,M)=>{E.listType=M.listType,E.listAttributes={...M.listAttributes}},mo=E=>{E.listAttributes=Qo(E.listAttributes,(M,z)=>z!=="start")},Y=(E,M)=>{const z=E[M].depth,ie=xt=>xt.depth===z&&!xt.dirty,de=xt=>xt.depth<z;return Zn(nt(E.slice(0,M)),ie,de).orThunk(()=>Zn(E.slice(M+1),ie,de))},oe=E=>(Bt(E,(M,z)=>{Y(E,z).fold(()=>{M.dirty&&mo(M)},ie=>Cd(M,ie))}),E),Se=E=>{let M=E;return{get:()=>M,set:de=>{M=de}}},Le=(E,M,z,ie)=>Jo(ie).filter(Xn).fold(()=>{M.each(On=>{Tt(On.start,ie)&&z.set(!0)});const de=Ys(ie,E,z.get());M.each(On=>{Tt(On.end,ie)&&z.set(!1)});const xt=Uo(ie).filter(Xn).map(On=>tn(E,M,z,On)).getOr([]);return de.toArray().concat(xt)},de=>tn(E,M,z,de)),tn=(E,M,z,ie)=>Eo(Wr(ie),de=>{const xt=Xn(de)?tn:Le,On=E+1;return xt(On,M,z,de)}),_o=(E,M)=>{const z=Se(!1),ie=0;return Mn(E,de=>({sourceList:de,entries:tn(ie,M,z,de)}))},Fs=(E,M)=>{const z=oe(M);return Mn(z,ie=>{const de=le(ie.content);return In.fromDom(Ts(E,de.dom))})},vo=(E,M)=>{const z=oe(M);return Pt(E.contentDocument,z).toArray()},Bs=(E,M)=>Eo(fe(M,Gr),z=>dn(z).exists(Gr)?vo(E,z):Fs(E,z)),aa=(E,M)=>{Bt(Pe(E,Qe),z=>qr(M,z))},ws=E=>{const M=Mn(sa(E),In.fromDom);return Ps(jt(M,ot(Kt)),jt(nt(M),ot(Kt)),(z,ie)=>({start:z,end:ie}))},yc=(E,M,z)=>{const ie=_o(M,ws(E));Bt(ie,de=>{aa(de.entries,z);const xt=Bs(E,de.entries);Bt(xt,On=>{be(E,z==="Indent"?"IndentList":"OutdentList",On.dom)}),Yt(de.sourceList,xt),rr(de.sourceList)})},Gc=(E,M)=>{const z=so(vi(E)),ie=so(va(E));let de=!1;if(z.length||ie.length){const xt=E.selection.getBookmark();yc(E,z,M),Lo(E,M,ie),E.selection.moveToBookmark(xt),E.selection.setRng(Ac(E.selection.getRng())),E.nodeChanged(),de=!0}return de},hs=(E,M)=>!Xl(E)&&Gc(E,M),ca=E=>hs(E,"Indent"),Xs=E=>hs(E,"Outdent"),Pl=E=>hs(E,"Flatten"),Ii="\uFEFF",Os=E=>E===Ii;var wc=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Il=Ja.DOM,Sd=E=>{const M={},z=ie=>{let de=E[ie?"startContainer":"endContainer"],xt=E[ie?"startOffset":"endOffset"];if(ue(de)){const On=Il.create("span",{"data-mce-type":"bookmark"});de.hasChildNodes()?(xt=Math.min(xt,de.childNodes.length-1),ie?de.insertBefore(On,de.childNodes[xt]):Il.insertAfter(On,de.childNodes[xt])):de.appendChild(On),de=On,xt=0}M[ie?"startContainer":"endContainer"]=de,M[ie?"startOffset":"endOffset"]=xt};return z(!0),E.collapsed||z(),M},wi=E=>{const M=ie=>{const de=jn=>{var fo;let St=(fo=jn.parentNode)===null||fo===void 0?void 0:fo.firstChild,gs=0;for(;St;){if(St===jn)return gs;(!ue(St)||St.getAttribute("data-mce-type")!=="bookmark")&&gs++,St=St.nextSibling}return-1};let xt=E[ie?"startContainer":"endContainer"],On=E[ie?"startOffset":"endOffset"];if(xt){if(ue(xt)&&xt.parentNode){const jn=xt;On=de(xt),xt=xt.parentNode,Il.remove(jn),!xt.hasChildNodes()&&Il.isBlock(xt)&&xt.appendChild(Il.create("br"))}E[ie?"startContainer":"endContainer"]=xt,E[ie?"startOffset":"endOffset"]=On}};M(!0),M();const z=Il.createRng();return z.setStart(E.startContainer,E.startOffset),E.endContainer&&z.setEnd(E.endContainer,E.endOffset),Ac(z)},rl=E=>{switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Vr=(E,M,z)=>{const ie=z["list-style-type"]?z["list-style-type"]:null;E.setStyle(M,"list-style-type",ie)},tc=(E,M)=>{Is.each(M,(z,ie)=>{E.setAttribute(ie,z)})},Mc=(E,M,z)=>{tc(M,z["list-attributes"]),Is.each(E.select("li",M),ie=>{tc(ie,z["list-item-attributes"])})},al=(E,M,z)=>{Vr(E,M,z),Mc(E,M,z)},La=(E,M,z)=>{Is.each(z,ie=>E.setStyle(M,ie,""))},kr=(E,M)=>vn(M)&&!pe(M,E.schema.getBlockElements()),qc=(E,M,z,ie)=>{let de=M[z?"startContainer":"endContainer"];const xt=M[z?"startOffset":"endOffset"];ue(de)&&(de=de.childNodes[Math.min(xt,de.childNodes.length-1)]||de),!z&&jo(de.nextSibling)&&(de=de.nextSibling);const On=(jn,fo)=>{var St;const gs=new Mr(jn,ie),wa=fo?"next":"prev";let kl;for(;kl=gs[wa]();)if(!(Fo(E,kl)||Os(kl.textContent)||((St=kl.textContent)===null||St===void 0?void 0:St.length)===0))return qe.some(kl);return qe.none()};if(z&&yr(de))if(Os(de.textContent))de=On(de,!1).getOr(de);else for(de.parentNode!==null&&kr(E,de.parentNode)&&(de=de.parentNode);de.previousSibling!==null&&(kr(E,de.previousSibling)||yr(de.previousSibling));)de=de.previousSibling;if(!z&&yr(de))if(Os(de.textContent))de=On(de,!0).getOr(de);else for(de.parentNode!==null&&kr(E,de.parentNode)&&(de=de.parentNode);de.nextSibling!==null&&(kr(E,de.nextSibling)||yr(de.nextSibling));)de=de.nextSibling;for(;de.parentNode!==ie;){const jn=de.parentNode;if(uo(E,de)||/^(TD|TH)$/.test(jn.nodeName))return de;de=jn}return de},um=(E,M,z)=>{const ie=[],de=E.dom,xt=qc(E,M,!0,z),On=qc(E,M,!1,z);let jn;const fo=[];for(let St=xt;St&&(fo.push(St),St!==On);St=St.nextSibling);return Is.each(fo,St=>{var gs;if(uo(E,St)){ie.push(St),jn=null;return}if(de.isBlock(St)||jo(St)){jo(St)&&de.remove(St),jn=null;return}const wa=St.nextSibling;if(wc.isBookmarkNode(St)&&(se(wa)||uo(E,wa)||!wa&&St.parentNode===z)){jn=null;return}jn||(jn=de.create("p"),(gs=St.parentNode)===null||gs===void 0||gs.insertBefore(jn,St),ie.push(jn)),jn.appendChild(St)}),ie},cu=(E,M,z)=>{const ie=E.getStyle(M,"list-style-type");let de=z?z["list-style-type"]:"";return de=de===null?"":de,ie===de},lu=(E,M,z)=>{const ie=E.selection.getRng();let de="LI";const xt=ec(E,E.selection.getStart(!0)),On=E.dom;if(On.getContentEditable(E.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&(de="DT");const jn=Sd(ie),fo=um(E,ie,xt);Is.each(fo,St=>{let gs;const wa=St.previousSibling,kl=St.parentNode;Xt(kl)||(wa&&se(wa)&&wa.nodeName===M&&cu(On,wa,z)?(gs=wa,St=On.rename(St,de),wa.appendChild(St)):(gs=On.create(M),kl.insertBefore(gs,St),gs.appendChild(St),St=On.rename(St,de)),La(On,St,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),al(On,gs,z),$r(E.dom,gs))}),E.selection.setRng(wi(jn))},Qm=(E,M)=>se(E)&&E.nodeName===(M==null?void 0:M.nodeName),xl=(E,M,z)=>{const ie=E.getStyle(M,"list-style-type",!0),de=E.getStyle(z,"list-style-type",!0);return ie===de},iu=(E,M)=>E.className===M.className,xd=(E,M,z)=>Qm(M,z)&&xl(E,M,z)&&iu(M,z),$r=(E,M)=>{let z,ie=M.nextSibling;if(xd(E,M,ie)){const de=ie;for(;z=de.firstChild;)M.appendChild(z);E.remove(de)}if(ie=M.previousSibling,xd(E,M,ie)){const de=ie;for(;z=de.lastChild;)M.insertBefore(z,M.firstChild);E.remove(de)}},dm=(E,M,z,ie)=>{if(M.nodeName!==z){const de=E.dom.rename(M,z);al(E.dom,de,ie),be(E,rl(z),de)}else al(E.dom,M,ie),be(E,rl(z),M)},Pu=(E,M,z,ie,de)=>{const xt=se(M);if(xt&&M.nodeName===ie&&!Iu(de))Pl(E);else{lu(E,ie,de);const On=Sd(E.selection.getRng()),jn=xt?[M,...z]:z;Is.each(jn,fo=>{dm(E,fo,ie,de)}),E.selection.setRng(wi(On))}},Iu=E=>"list-style-type"in E,Td=(E,M,z,ie)=>{if(M!==E.getBody())if(M)if(M.nodeName===z&&!Iu(ie)&&!yi(M))Pl(E);else{const de=Sd(E.selection.getRng());al(E.dom,M,ie);const xt=E.dom.rename(M,z);$r(E.dom,xt),E.selection.setRng(wi(de)),lu(E,z,ie),be(E,rl(z),xt)}else lu(E,z,ie),be(E,rl(z),M)},kd=(E,M,z)=>{const ie=Sr(E);if(jc(E,ie)||Jl(E))return;const de=Kl(E),xt=Hn(z)?z:{};de.length>0?Pu(E,ie,de,M,xt):Td(E,ie,M,xt)},Ed=Ja.DOM,Fu=(E,M)=>{const z=M.parentElement;if(z&&z.nodeName==="LI"&&z.firstChild===M){const ie=z.previousSibling;ie&&ie.nodeName==="LI"?(ie.appendChild(M),mr(E,z)&&Ed.remove(z)):Ed.setStyle(z,"listStyleType","none")}if(se(z)){const ie=z.previousSibling;ie&&ie.nodeName==="LI"&&ie.appendChild(M)}},ef=(E,M)=>{const z=Is.grep(E.select("ol,ul",M));Is.each(z,ie=>{Fu(E,ie)})},tf=(E,M,z,ie)=>{let de=M.startContainer;const xt=M.startOffset;if(yr(de)&&(z?xt<de.data.length:xt>0))return de;const On=E.schema.getNonEmptyElements();ue(de)&&(de=xs.getNode(de,xt));const jn=new Mr(de,ie);z&&wr(E.dom,de)&&jn.next();const fo=z?jn.next.bind(jn):jn.prev2.bind(jn);for(;de=fo();)if(de.nodeName==="LI"&&!de.hasChildNodes()||On[de.nodeName]||yr(de)&&de.data.length>0)return de;return null},uu=(E,M)=>{const z=M.childNodes;return z.length===1&&!se(z[0])&&E.isBlock(z[0])},Ep=(E,M)=>{uu(E,M)&&E.remove(M.firstChild,!0)},re=(E,M,z)=>{let ie;const de=uu(E,z)?z.firstChild:z;if(Ep(E,M),!mr(E,M,!0))for(;ie=M.firstChild;)de.appendChild(ie)},_d=(E,M,z)=>{let ie;const de=M.parentNode;if(!Wc(E,M)||!Wc(E,z))return;se(z.lastChild)&&(ie=z.lastChild),de===z.lastChild&&jo(de.previousSibling)&&E.remove(de.previousSibling);const xt=z.lastChild;xt&&jo(xt)&&M.hasChildNodes()&&E.remove(xt),mr(E,z,!0)&&ga(In.fromDom(z)),re(E,M,z),ie&&z.appendChild(ie);const jn=$t(In.fromDom(z),In.fromDom(M))?E.getParents(M,se,z):[];E.remove(M),Bt(jn,fo=>{mr(E,fo)&&fo!==E.getRoot()&&E.remove(fo)})},Nc=(E,M,z)=>{ga(In.fromDom(z)),_d(E.dom,M,z),E.selection.setCursorLocation(z,0)},Gf=(E,M,z,ie)=>{const de=E.dom;if(de.isEmpty(ie))Nc(E,z,ie);else{const xt=Sd(M);_d(de,z,ie),E.selection.setRng(wi(xt))}},_p=(E,M,z,ie)=>{const de=Sd(M);_d(E.dom,z,ie);const xt=wi(de);E.selection.setRng(xt)},Op=(E,M)=>{const z=E.dom,ie=E.selection,de=ie.getStart(),xt=Ks(E,de),On=z.getParent(ie.getStart(),"LI",xt);if(On){const jn=On.parentElement;if(jn===E.getBody()&&mr(z,jn))return!0;const fo=Ac(ie.getRng()),St=z.getParent(tf(E,fo,M,xt),"LI",xt);if(St&&St!==On)return E.undoManager.transact(()=>{M?Gf(E,fo,St,On):Yn(On)?Xs(E):_p(E,fo,On,St)}),!0;if(!St&&!M&&fo.startOffset===0&&fo.endOffset===0)return E.undoManager.transact(()=>{Pl(E)}),!0}return!1},ss=(E,M,z)=>{const ie=E.getParent(M.parentNode,E.isBlock,z);E.remove(M),ie&&E.isEmpty(ie)&&E.remove(ie)},Fl=(E,M)=>{const z=E.dom,ie=E.selection.getStart(),de=Ks(E,ie),xt=z.getParent(ie,z.isBlock,de);if(xt&&z.isEmpty(xt)){const On=Ac(E.selection.getRng()),jn=z.getParent(tf(E,On,M,de),"LI",de);if(jn){const fo=kl=>q(["td","th","caption"],Gs(kl)),St=kl=>kl.dom===de,gs=Ye(In.fromDom(jn),fo,St),wa=Ye(In.fromDom(On.startContainer),fo,St);return Bo(gs,wa,Tt)?(E.undoManager.transact(()=>{ss(z,xt,de),$r(z,jn.parentNode),E.selection.select(jn,!0),E.selection.collapse(M)}),!0):!1}}return!1},Cc=(E,M)=>Op(E,M)||Fl(E,M),cl=E=>{const M=E.selection.getStart(),z=Ks(E,M);return E.dom.getParent(M,"LI,DT,DD",z)||sa(E).length>0},Qg=E=>cl(E)?(E.undoManager.transact(()=>{E.execCommand("Delete"),ef(E.dom,E.getBody())}),!0):!1,Fi=(E,M)=>{const z=E.selection;return!jc(E,z.getNode())&&(z.isCollapsed()?Cc(E,M):Qg(E))},Tl=E=>{E.on("ExecCommand",M=>{const z=M.command.toLowerCase();(z==="delete"||z==="forwarddelete")&&cl(E)&&ef(E.dom,E.getBody())}),E.on("keydown",M=>{M.keyCode===ht.BACKSPACE?Fi(E,!1)&&M.preventDefault():M.keyCode===ht.DELETE&&Fi(E,!0)&&M.preventDefault()})},mm=E=>({backspaceDelete:M=>{Fi(E,M)}}),qf=(E,M)=>{const z=Sr(E);z===null||jc(E,z)||E.undoManager.transact(()=>{Hn(M.styles)&&E.dom.setStyles(z,M.styles),Hn(M.attrs)&&ar(M.attrs,(ie,de)=>E.dom.setAttrib(z,de,ie))})},eh=E=>{const M=nt(rt(E).split("")),z=Mn(M,(ie,de)=>{const xt=ie.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,de)*xt});return Vo(z,(ie,de)=>ie+de,0)},Kc=E=>{if(E--,E<0)return"";{const M=E%26,z=Math.floor(E/26),ie=Kc(z),de=String.fromCharCode("A".charCodeAt(0)+M);return ie+de}},Od=E=>/^[A-Z]+$/.test(E),th=E=>/^[a-z]+$/.test(E),ll=E=>/^[0-9]+$/.test(E),Da=E=>ll(E)?2:Od(E)?0:th(E)?1:os(E)?3:4,Ad=E=>{switch(Da(E)){case 2:return qe.some({listStyleType:qe.none(),start:E});case 0:return qe.some({listStyleType:qe.some("upper-alpha"),start:eh(E).toString()});case 1:return qe.some({listStyleType:qe.some("lower-alpha"),start:eh(E).toString()});case 3:return qe.some({listStyleType:qe.none(),start:""});case 4:return qe.none()}},Dd=E=>{const M=parseInt(E.start,10);return Xo(E.listStyleType,"upper-alpha")?Kc(M):Xo(E.listStyleType,"lower-alpha")?Kc(M).toLowerCase():E.start},Ll=E=>{const M=Sr(E);!Re(M)||jc(E,M)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Dd({start:E.dom.getAttrib(M,"start","1"),listStyleType:qe.from(E.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:z=>{const ie=z.getData();Ad(ie.start).each(de=>{E.execCommand("mceListUpdate",!1,{attrs:{start:de.start==="1"?"":de.start},styles:{"list-style-type":de.listStyleType.getOr("")}})}),z.close()}})},Bc=(E,M)=>()=>{const z=Sr(E);return vn(z)&&z.nodeName===M},nf=E=>{E.addCommand("mceListProps",()=>{Ll(E)})},of=E=>{E.on("BeforeExecCommand",M=>{const z=M.command.toLowerCase();z==="indent"?ca(E):z==="outdent"&&Xs(E)}),E.addCommand("InsertUnorderedList",(M,z)=>{kd(E,"UL",z)}),E.addCommand("InsertOrderedList",(M,z)=>{kd(E,"OL",z)}),E.addCommand("InsertDefinitionList",(M,z)=>{kd(E,"DL",z)}),E.addCommand("RemoveList",()=>{Pl(E)}),nf(E),E.addCommand("mceListUpdate",(M,z)=>{Hn(z)&&qf(E,z)}),E.addQueryStateHandler("InsertUnorderedList",Bc(E,"UL")),E.addQueryStateHandler("InsertOrderedList",Bc(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",Bc(E,"DL"))};var sf=tinymce.util.Tools.resolve("tinymce.html.Node");const rf=E=>E.type===3,Ql=E=>E.length===0,fm=E=>{const M=(de,xt)=>{const On=sf.create("li");Bt(de,jn=>On.append(jn)),xt?E.insert(On,xt,!0):E.append(On)},z=(de,xt)=>rf(xt)?[...de,xt]:!Ql(de)&&!rf(xt)?(M(de,xt),[]):de,ie=Vo(E.children(),z,[]);Ql(ie)||M(ie)},nh=E=>{E.on("PreInit",()=>{const{parser:M}=E;M.addNodeFilter("ul,ol",z=>Bt(z,fm))})},Y0=E=>{E.on("keydown",M=>{M.keyCode!==ht.TAB||ht.metaKeyPressed(M)||E.undoManager.transact(()=>{(M.shiftKey?Xs(E):ca(E))&&M.preventDefault()})})},oh=E=>{Cr(E)&&Y0(E),Tl(E)},gm=(E,M)=>z=>Z(E,de=>{z.setActive(ya(de.parents,M)),z.setEnabled(!jc(E,de.element))}),Kf=E=>{const M=z=>()=>E.execCommand(z);E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:gm(E,"OL")}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:gm(E,"UL")}))},Li=(E,M)=>z=>Z(E,de=>z.setEnabled(ya(de.parents,M)&&!jc(E,de.element))),Yf=E=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>E.execCommand("mceListProps"),onSetup:Li(E,"OL")};E.ui.registry.addMenuItem("listprops",M),E.ui.registry.addContextMenu("lists",{update:z=>{const ie=Sr(E,z);return Re(ie)?["listprops"]:[]}})};var Zs=()=>{ct.add("lists",E=>(Cl(E),nh(E),E.hasPlugin("rtc",!0)?nf(E):(oh(E),of(E)),Kf(E),Yf(E),mm(E)))};Zs()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=(ue,se,Be)=>{var Re;return Be(ue,se.prototype)?!0:((Re=ue.constructor)===null||Re===void 0?void 0:Re.name)===se.name},sn=ue=>{const se=typeof ue;return ue===null?"null":se==="object"&&Array.isArray(ue)?"array":se==="object"&&En(ue,String,(Be,Re)=>Re.isPrototypeOf(Be))?"string":se},pt=ue=>se=>sn(se)===ue,Rt=pt("string"),Jt=pt("object"),Hn=pt("array"),_t=ue=>ue==null,Zt=ue=>!_t(ue);class Wn{constructor(se,Be){this.tag=se,this.value=Be}static some(se){return new Wn(!0,se)}static none(){return Wn.singletonNone}fold(se,Be){return this.tag?Be(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?Wn.some(se(this.value)):Wn.none()}bind(se){return this.tag?se(this.value):Wn.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:Wn.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Zt(se)?Wn.some(se):Wn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Wn.singletonNone=new Wn(!1);const vn=Array.prototype.push,un=(ue,se)=>{for(let Be=0,Re=ue.length;Be<Re;Be++){const Xt=ue[Be];se(Xt,Be)}},Qt=ue=>{const se=[];for(let Be=0,Re=ue.length;Be<Re;++Be){if(!Hn(ue[Be]))throw new Error("Arr.flatten item "+Be+" was not an array, input: "+ue);vn.apply(se,ue[Be])}return se},dt=ue=>{let se=ue;return{get:()=>se,set:Xt=>{se=Xt}}},Ht=Object.keys,it=Object.hasOwnProperty,ot=(ue,se)=>{const Be=Ht(ue);for(let Re=0,Xt=Be.length;Re<Xt;Re++){const yn=Be[Re],no=ue[yn];se(no,yn)}},Sn=(ue,se)=>qe(ue,se)?Wn.from(ue[se]):Wn.none(),qe=(ue,se)=>it.call(ue,se),G=ue=>se=>se.options.get(ue),Xe=ue=>{const se=ue.options.register;se("audio_template_callback",{processor:"function"}),se("video_template_callback",{processor:"function"}),se("iframe_template_callback",{processor:"function"}),se("media_live_embeds",{processor:"boolean",default:!0}),se("media_filter_html",{processor:"boolean",default:!0}),se("media_url_resolver",{processor:"function"}),se("media_alt_source",{processor:"boolean",default:!0}),se("media_poster",{processor:"boolean",default:!0}),se("media_dimensions",{processor:"boolean",default:!0})},Nt=G("audio_template_callback"),at=G("video_template_callback"),q=G("iframe_template_callback"),ft=G("media_live_embeds"),Mn=G("media_filter_html"),Bt=G("media_url_resolver"),Pe=G("media_alt_source"),fe=G("media_poster"),Vo=G("media_dimensions");var Zn=tinymce.util.Tools.resolve("tinymce.util.Tools"),jt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),O=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Eo=jt.DOM,nt=ue=>ue.replace(/px$/,""),No=ue=>{const se=ue.attr("style"),Be=se?Eo.parseStyle(se):{};return{type:"ephox-embed-iri",source:ue.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Sn(Be,"max-width").map(nt).getOr(""),height:Sn(Be,"max-height").map(nt).getOr("")}},dn=(ue,se)=>{let Be={};const Xt=O({validate:!1,forced_root_block:!1},se).parse(ue);for(let yn=Xt;yn;yn=yn.walk())if(yn.type===1){const no=yn.name;if(yn.attr("data-ephox-embed-iri")){Be=No(yn);break}else!Be.source&&no==="param"&&(Be.source=yn.attr("movie")),(no==="iframe"||no==="object"||no==="embed"||no==="video"||no==="audio")&&(Be.type||(Be.type=no),Be=Zn.extend(yn.attributes.map,Be)),no==="script"&&(Be={type:"script",source:yn.attr("src")}),no==="source"&&(Be.source?Be.altsource||(Be.altsource=yn.attr("src")):Be.source=yn.attr("src")),no==="img"&&!Be.poster&&(Be.poster=yn.attr("src"))}return Be.source=Be.source||Be.src||"",Be.altsource=Be.altsource||"",Be.poster=Be.poster||"",Be},je=ue=>{var se;const Be={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Re=(se=ue.toLowerCase().split(".").pop())!==null&&se!==void 0?se:"";return Sn(Be,Re).getOr("")};var po=tinymce.util.Tools.resolve("tinymce.html.Node"),Xo=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Bo=(ue,se={})=>O({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...se},ue),Ps=jt.DOM,_e=ue=>/^[0-9.]+$/.test(ue)?ue+"px":ue,gt=(ue,se)=>{const Be=se.attr("style"),Re=Be?Ps.parseStyle(Be):{};Zt(ue.width)&&(Re["max-width"]=_e(ue.width)),Zt(ue.height)&&(Re["max-height"]=_e(ue.height)),se.attr("style",Ps.serializeStyle(Re))},H=["source","altsource"],Hr=(ue,se,Be,Re)=>{let Xt=0,yn=0;const no=Bo(Re);no.addNodeFilter("source",Yn=>Xt=Yn.length);const jo=no.parse(ue);for(let Yn=jo;Yn;Yn=Yn.walk())if(Yn.type===1){const uo=Yn.name;if(Yn.attr("data-ephox-embed-iri")){gt(se,Yn);break}else{switch(uo){case"video":case"object":case"embed":case"img":case"iframe":se.height!==void 0&&se.width!==void 0&&(Yn.attr("width",se.width),Yn.attr("height",se.height));break}if(Be)switch(uo){case"video":Yn.attr("poster",se.poster),Yn.attr("src",null);for(let Fo=Xt;Fo<2;Fo++)if(se[H[Fo]]){const wr=new po("source",1);wr.attr("src",se[H[Fo]]),wr.attr("type",se[H[Fo]+"mime"]||null),Yn.append(wr)}break;case"iframe":Yn.attr("src",se.source);break;case"object":const pe=Yn.getAll("img").length>0;if(se.poster&&!pe){Yn.attr("src",se.poster);const Fo=new po("img",1);Fo.attr("src",se.poster),Fo.attr("width",se.width),Fo.attr("height",se.height),Yn.append(Fo)}break;case"source":if(yn<2&&(Yn.attr("src",se[H[yn]]),Yn.attr("type",se[H[yn]+"mime"]||null),!se[H[yn]])){Yn.remove();continue}yn++;break;case"img":se.poster||Yn.remove();break}}}return Xo({},Re).serialize(jo)},Fn=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ms=ue=>{const se=ue.match(/^(https?:\/\/|www\.)(.+)$/i);return se&&se.length>1?se[1]==="www."?"https://":se[1]:"https://"},In=(ue,se)=>{const Be=ms(se),Re=ue.regex.exec(se);let Xt=Be+ue.url;if(Zt(Re))for(let yn=0;yn<Re.length;yn++)Xt=Xt.replace("$"+yn,()=>Re[yn]?Re[yn]:"");return Xt.replace(/\?$/,"")},js=ue=>{const se=Fn.filter(Be=>Be.regex.test(ue));return se.length>0?Zn.extend({},se[0],{url:In(se[0],ue)}):null},Tt=(ue,se)=>{if(se)return se(ue);{const Be=ue.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ue.source+'" width="'+ue.width+'" height="'+ue.height+'"'+Be+"></iframe>"}},$t=ue=>{let se='<object data="'+ue.source+'" width="'+ue.width+'" height="'+ue.height+'" type="application/x-shockwave-flash">';return ue.poster&&(se+='<img src="'+ue.poster+'" width="'+ue.width+'" height="'+ue.height+'" />'),se+="</object>",se},Vt=(ue,se)=>se?se(ue):'<audio controls="controls" src="'+ue.source+'">'+(ue.altsource?`
<source src="`+ue.altsource+'"'+(ue.altsourcemime?' type="'+ue.altsourcemime+'"':"")+` />
`:"")+"</audio>",De=(ue,se)=>se?se(ue):'<video width="'+ue.width+'" height="'+ue.height+'"'+(ue.poster?' poster="'+ue.poster+'"':"")+` controls="controls">
<source src="`+ue.source+'"'+(ue.sourcemime?' type="'+ue.sourcemime+'"':"")+` />
`+(ue.altsource?'<source src="'+ue.altsource+'"'+(ue.altsourcemime?' type="'+ue.altsourcemime+'"':"")+` />
`:"")+"</video>",Gs=ue=>'<script src="'+ue.source+'"><\/script>',cs=(ue,se)=>{var Be;const Re=Zn.extend({},se);if(!Re.source&&(Zn.extend(Re,dn((Be=Re.embed)!==null&&Be!==void 0?Be:"",ue.schema)),!Re.source))return"";Re.altsource||(Re.altsource=""),Re.poster||(Re.poster=""),Re.source=ue.convertURL(Re.source,"source"),Re.altsource=ue.convertURL(Re.altsource,"source"),Re.sourcemime=je(Re.source),Re.altsourcemime=je(Re.altsource),Re.poster=ue.convertURL(Re.poster,"poster");const Xt=js(Re.source);if(Xt&&(Re.source=Xt.url,Re.type=Xt.type,Re.allowfullscreen=Xt.allowFullscreen,Re.width=Re.width||String(Xt.w),Re.height=Re.height||String(Xt.h)),Re.embed)return Hr(Re.embed,Re,!0,ue.schema);{const yn=Nt(ue),no=at(ue),jo=q(ue);return Re.width=Re.width||"300",Re.height=Re.height||"150",Zn.each(Re,(Yn,uo)=>{Re[uo]=ue.dom.encode(""+Yn)}),Re.type==="iframe"?Tt(Re,jo):Re.sourcemime==="application/x-shockwave-flash"?$t(Re):Re.sourcemime.indexOf("audio")!==-1?Vt(Re,yn):Re.type==="script"?Gs(Re):De(Re,no)}},rn=ue=>ue.hasAttribute("data-mce-object")||ue.hasAttribute("data-ephox-embed-iri"),Ea=ue=>{ue.on("click keyup touchend",()=>{const se=ue.selection.getNode();se&&ue.dom.hasClass(se,"mce-preview-object")&&ue.dom.getAttrib(se,"data-mce-selected")&&se.setAttribute("data-mce-selected","2")}),ue.on("ObjectSelected",se=>{se.target.getAttribute("data-mce-object")==="script"&&se.preventDefault()}),ue.on("ObjectResized",se=>{const Be=se.target;if(Be.getAttribute("data-mce-object")){let Re=Be.getAttribute("data-mce-html");Re&&(Re=unescape(Re),Be.setAttribute("data-mce-html",escape(Hr(Re,{width:String(se.width),height:String(se.height)},!1,ue.schema))))}})},zo={},_a=(ue,se,Be)=>new Promise((Re,Xt)=>{const yn=no=>(no.html&&(zo[ue.source]=no),Re({url:ue.source,html:no.html?no.html:se(ue)}));zo[ue.source]?yn(zo[ue.source]):Be({url:ue.source},yn,Xt)}),ls=(ue,se)=>Promise.resolve({html:se(ue),url:ue.source}),Ms=ue=>se=>cs(ue,se),Wr=(ue,se)=>{const Be=Bt(ue);return Be?_a(se,Ms(ue),Be):ls(se,Ms(ue))},ur=ue=>qe(zo,ue),Jo=(ue,se)=>Sn(se,ue).bind(Be=>Sn(Be,"meta")),Uo=(ue,se,Be)=>Re=>{const Xt=()=>Sn(ue,Re),yn=()=>Sn(se,Re),no=uo=>Sn(uo,"value").bind(pe=>pe.length>0?Wn.some(pe):Wn.none()),jo=()=>Xt().bind(uo=>Jt(uo)?no(uo).orThunk(yn):yn().orThunk(()=>Wn.from(uo))),Yn=()=>yn().orThunk(()=>Xt().bind(uo=>Jt(uo)?no(uo):Wn.from(uo)));return{[Re]:(Re===Be?jo():Yn()).getOr("")}},tt=(ue,se)=>{const Be={};return Sn(ue,"dimensions").each(Re=>{un(["width","height"],Xt=>{Sn(se,Xt).orThunk(()=>Sn(Re,Xt)).each(yn=>Be[Xt]=yn)})}),Be},Ye=(ue,se)=>{const Be=se&&se!=="dimensions"?Jo(se,ue).getOr({}):{},Re=Uo(ue,Be,se);return{...Re("source"),...Re("altsource"),...Re("poster"),...Re("embed"),...tt(ue,Be)}},qt=ue=>{const se={...ue,source:{value:Sn(ue,"source").getOr("")},altsource:{value:Sn(ue,"altsource").getOr("")},poster:{value:Sn(ue,"poster").getOr("")}};return un(["width","height"],Be=>{Sn(ue,Be).each(Re=>{const Xt=se.dimensions||{};Xt[Be]=Re,se.dimensions=Xt})}),se},en=ue=>se=>{const Be=se&&se.msg?"Media embed handler error: "+se.msg:"Media embed handler threw unknown error.";ue.notificationManager.open({type:"error",text:Be})},Bn=ue=>{const se=ue.selection.getNode(),Be=rn(se)?ue.serializer.serialize(se,{selection:!0}):"";return{embed:Be,...dn(Be,ue.schema)}},Yt=(ue,se)=>Be=>{if(Rt(Be.url)&&Be.url.trim().length>0){const Re=Be.html,yn={...dn(Re,se.schema),source:Be.url,embed:Re};ue.setData(qt(yn))}},Ns=(ue,se)=>{const Be=ue.dom.select("*[data-mce-object]");for(let Re=0;Re<se.length;Re++)for(let Xt=Be.length-1;Xt>=0;Xt--)se[Re]===Be[Xt]&&Be.splice(Xt,1);ue.selection.select(Be[0])},ga=(ue,se)=>{const Be=ue.dom.select("*[data-mce-object]");ue.insertContent(se),Ns(ue,Be),ue.nodeChanged()},rr=(ue,se,Be)=>{var Re;se.embed=Hr((Re=se.embed)!==null&&Re!==void 0?Re:"",se,!1,Be.schema),se.embed&&(ue.source===se.source||ur(se.source))?ga(Be,se.embed):Wr(Be,se).then(Xt=>{ga(Be,Xt.html)}).catch(en(Be))},xs=ue=>{const se=Bn(ue),Be=dt(se),Re=qt(se),Xt=(Cr,fr)=>{const qs=Ye(fr.getData(),"source");Cr.source!==qs.source&&(Yt(Cl,ue)({url:qs.source,html:""}),Wr(ue,qs).then(Yt(Cl,ue)).catch(en(ue)))},yn=Cr=>{var fr;const qs=Ye(Cr.getData()),Ts=dn((fr=qs.embed)!==null&&fr!==void 0?fr:"",ue.schema);Cr.setData(qt(Ts))},no=(Cr,fr)=>{const qs=Ye(Cr.getData(),fr),Ts=cs(ue,qs);Cr.setData(qt({...qs,embed:Ts}))},jo=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],Yn=Vo(ue)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],uo={title:"General",name:"general",items:Qt([jo,Yn])},Fo={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},wr=[];Pe(ue)&&wr.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),fe(ue)&&wr.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const mr={title:"Advanced",name:"advanced",items:wr},Wc=[uo,Fo];wr.length>0&&Wc.push(mr);const bo={type:"tabpanel",tabs:Wc},Cl=ue.windowManager.open({title:"Insert/Edit Media",size:"normal",body:bo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Cr=>{const fr=Ye(Cr.getData());rr(Be.get(),fr,ue),Cr.close()},onChange:(Cr,fr)=>{switch(fr.name){case"source":Xt(Be.get(),Cr);break;case"embed":yn(Cr);break;case"dimensions":case"altsource":case"poster":no(Cr,fr.name);break}Be.set(Ye(Cr.getData()))},initialData:Re})},Mr=ue=>({showDialog:()=>{xs(ue)}}),ht=ue=>{const se=()=>{xs(ue)};ue.addCommand("mceMedia",se)},so=(ue,se,Be)=>se===""||ue.length>=se.length&&ue.substr(Be,Be+se.length)===se,ha=(ue,se)=>so(ue,se,0);var ar=tinymce.util.Tools.resolve("tinymce.Env");const Uc=ue=>{const se=ue.name;return se==="iframe"||se==="video"||se==="audio"},Ka=(ue,se,Be,Re=null)=>{const Xt=ue.attr(Be);return Zt(Xt)?Xt:qe(se,Be)?null:Re},Qo=(ue,se,Be)=>{const Re=se.name==="img"||ue.name==="video",Xt=Re?"300":null,yn=ue.name==="audio"?"30":"150",no=Re?yn:null;se.attr({width:Ka(ue,Be,"width",Xt),height:Ka(ue,Be,"height",no)})},Ya=(ue,se,Be,Re)=>{const Xt=Bo(ue.schema).parse(Re,{context:se});for(;Xt.firstChild;)Be.append(Xt.firstChild)},pa=(ue,se)=>{const Be=se.name,Re=new po("img",1);return _n(ue,se,Re),Qo(se,Re,{}),Re.attr({style:se.attr("style"),src:ar.transparentSrc,"data-mce-object":Be,class:"mce-object mce-object-"+Be}),Re},Wo=(ue,se)=>{var Be;const Re=se.name,Xt=new po("span",1);Xt.attr({contentEditable:"false",style:se.attr("style"),"data-mce-object":Re,class:"mce-preview-object mce-object-"+Re}),_n(ue,se,Xt);const yn=ue.dom.parseStyle((Be=se.attr("style"))!==null&&Be!==void 0?Be:""),no=new po(Re,1);if(Qo(se,no,yn),no.attr({src:se.attr("src"),style:se.attr("style"),class:se.attr("class")}),Re==="iframe")no.attr({allowfullscreen:se.attr("allowfullscreen"),frameborder:"0"});else{un(["controls","crossorigin","currentTime","loop","muted","poster","preload"],pe=>{no.attr(pe,se.attr(pe))});const uo=Xt.attr("data-mce-html");Zt(uo)&&Ya(ue,Re,no,unescape(uo))}const jo=new po("span",1);return jo.attr("class","mce-shim"),Xt.append(no),Xt.append(jo),Xt},_n=(ue,se,Be)=>{var Re;const Xt=(Re=se.attributes)!==null&&Re!==void 0?Re:[];let yn=Xt.length;for(;yn--;){const uo=Xt[yn].name;let pe=Xt[yn].value;uo!=="width"&&uo!=="height"&&uo!=="style"&&!ha(uo,"data-mce-")&&((uo==="data"||uo==="src")&&(pe=ue.convertURL(pe,uo)),Be.attr("data-mce-p-"+uo,pe))}const no=Xo({inner:!0},ue.schema),jo=new po("div",1);un(se.children(),uo=>jo.append(uo));const Yn=no.serialize(jo);Yn&&(Be.attr("data-mce-html",escape(Yn)),Be.empty())},Zr=ue=>{const se=ue.attr("class");return Rt(se)&&/\btiny-pageembed\b/.test(se)},Oa=ue=>{let se=ue;for(;se=se.parent;)if(se.attr("data-ephox-embed-iri")||Zr(se))return!0;return!1},Xa=ue=>se=>{let Be=se.length,Re;for(;Be--;)Re=se[Be],Re.parent&&(Re.parent.attr("data-mce-object")||(Uc(Re)&&ft(ue)?Oa(Re)||Re.replace(Wo(ue,Re)):Oa(Re)||Re.replace(pa(ue,Re))))},Ja=(ue,se,Be)=>{const Re=ue.options.get,Xt=Re("xss_sanitization"),yn=Mn(ue);return Bo(ue.schema,{sanitize:Xt,validate:yn}).parse(Be,{context:se})},Is=ue=>{ue.on("PreInit",()=>{const{schema:se,serializer:Be,parser:Re}=ue,Xt=se.getBoolAttrs();un("webkitallowfullscreen mozallowfullscreen".split(" "),yn=>{Xt[yn]={}}),ot({embed:["wmode"]},(yn,no)=>{const jo=se.getElementRule(no);jo&&un(yn,Yn=>{jo.attributes[Yn]={},jo.attributesOrder.push(Yn)})}),Re.addNodeFilter("iframe,video,audio,object,embed,script",Xa(ue)),Be.addAttributeFilter("data-mce-object",(yn,no)=>{var jo;let Yn=yn.length;for(;Yn--;){const uo=yn[Yn];if(!uo.parent)continue;const pe=uo.attr(no),Fo=new po(pe,1);if(pe!=="audio"&&pe!=="script"){const bo=uo.attr("class");bo&&bo.indexOf("mce-preview-object")!==-1&&uo.firstChild?Fo.attr({width:uo.firstChild.attr("width"),height:uo.firstChild.attr("height")}):Fo.attr({width:uo.attr("width"),height:uo.attr("height")})}Fo.attr({style:uo.attr("style")});const wr=(jo=uo.attributes)!==null&&jo!==void 0?jo:[];let mr=wr.length;for(;mr--;){const bo=wr[mr].name;bo.indexOf("data-mce-p-")===0&&Fo.attr(bo.substr(11),wr[mr].value)}pe==="script"&&Fo.attr("type","text/javascript");const Wc=uo.attr("data-mce-html");if(Wc){const bo=Ja(ue,pe,unescape(Wc));un(bo.children(),Cl=>Fo.append(Cl))}uo.replace(Fo)}})}),ue.on("SetContent",()=>{const se=ue.dom;un(se.select("span.mce-preview-object"),Be=>{se.select("span.mce-shim",Be).length===0&&se.add(Be,"span",{class:"mce-shim"})})})},dr=ue=>{ue.on("ResolveName",se=>{let Be;se.target.nodeType===1&&(Be=se.target.getAttribute("data-mce-object"))&&(se.name=Be)})},ys=ue=>{const se=()=>ue.execCommand("mceMedia");ue.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:se,onSetup:Be=>{const Re=ue.selection;return Be.setActive(rn(Re.getNode())),Re.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Be.setActive).unbind}}),ue.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:se})};var yr=()=>{ct.add("media",ue=>(Xe(ue),ht(ue),ys(ue),dr(ue),Is(ue),Ea(ue),Mr(ue)))};yr()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager"),En=tinymce.util.Tools.resolve("tinymce.Env");const sn=dt=>Ht=>Ht.options.get(dt),pt=dt=>{const Ht=dt.options.register;Ht("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Ht("pagebreak_split_block",{processor:"boolean",default:!1})},Rt=sn("pagebreak_separator"),Jt=sn("pagebreak_split_block"),Hn="mce-pagebreak",_t=dt=>{const Ht=`<img src="${En.transparentSrc}" class="${Hn}" data-mce-resize="false" data-mce-placeholder />`;return dt?`<p>${Ht}</p>`:Ht},Zt=dt=>{const Ht=Rt(dt),it=()=>Jt(dt),ot=new RegExp(Ht.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,Sn=>"\\"+Sn),"gi");dt.on("BeforeSetContent",Sn=>{Sn.content=Sn.content.replace(ot,_t(it()))}),dt.on("PreInit",()=>{dt.serializer.addNodeFilter("img",Sn=>{let qe=Sn.length,G,Xe;for(;qe--;)if(G=Sn[qe],Xe=G.attr("class"),Xe&&Xe.indexOf(Hn)!==-1){const Nt=G.parent;if(Nt&&dt.schema.getBlockElements()[Nt.name]&&it()){Nt.type=3,Nt.value=Ht,Nt.raw=!0,G.remove();continue}G.type=3,G.value=Ht,G.raw=!0}})})},Wn=dt=>{dt.addCommand("mcePageBreak",()=>{dt.insertContent(_t(Jt(dt)))})},vn=dt=>{dt.on("ResolveName",Ht=>{Ht.target.nodeName==="IMG"&&dt.dom.hasClass(Ht.target,Hn)&&(Ht.name="pagebreak")})},un=dt=>{const Ht=()=>dt.execCommand("mcePageBreak");dt.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Ht}),dt.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Ht})};var Qt=()=>{ct.add("pagebreak",dt=>{pt(dt),Wn(dt),un(dt),Zt(dt),vn(dt)})};Qt()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager"),En=tinymce.util.Tools.resolve("tinymce.Env"),sn=tinymce.util.Tools.resolve("tinymce.util.Tools");const pt=dt=>Ht=>Ht.options.get(dt),Rt=pt("content_style"),Jt=pt("content_css_cors"),Hn=pt("body_class"),_t=pt("body_id"),Zt=dt=>{var Ht;let it="";const ot=dt.dom.encode,Sn=(Ht=Rt(dt))!==null&&Ht!==void 0?Ht:"";it+='<base href="'+ot(dt.documentBaseURI.getURI())+'">';const qe=Jt(dt)?' crossorigin="anonymous"':"";sn.each(dt.contentCSS,Bt=>{it+='<link type="text/css" rel="stylesheet" href="'+ot(dt.documentBaseURI.toAbsolute(Bt))+'"'+qe+">"}),Sn&&(it+='<style type="text/css">'+Sn+"</style>");const G=_t(dt),Xe=Hn(dt),at='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(En.os.isMacOS()||En.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",q=dt.getBody().dir,ft=q?' dir="'+ot(q)+'"':"";return"<!DOCTYPE html><html><head>"+it+'</head><body id="'+ot(G)+'" class="mce-content-body '+ot(Xe)+'"'+ft+">"+dt.getContent()+at+"</body></html>"},Wn=dt=>{const Ht=Zt(dt);dt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Ht}}).focus("close")},vn=dt=>{dt.addCommand("mcePreview",()=>{Wn(dt)})},un=dt=>{const Ht=()=>dt.execCommand("mcePreview");dt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Ht}),dt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Ht})};var Qt=()=>{ct.add("preview",dt=>{vn(dt),un(dt)})};Qt()})();(function(){var ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const En=(C,S,F)=>{var W;return F(C,S.prototype)?!0:((W=C.constructor)===null||W===void 0?void 0:W.name)===S.name},sn=C=>{const S=typeof C;return C===null?"null":S==="object"&&Array.isArray(C)?"array":S==="object"&&En(C,String,(F,W)=>W.isPrototypeOf(F))?"string":S},pt=C=>S=>sn(S)===C,Rt=C=>S=>typeof S===C,Jt=C=>S=>C===S,Hn=pt("string"),_t=pt("array"),Zt=Rt("boolean"),Wn=Jt(void 0),vn=C=>C==null,un=C=>!vn(C),Qt=Rt("function"),dt=Rt("number"),Ht=()=>{},it=(C,S)=>F=>C(S(F)),ot=C=>()=>C,Sn=C=>C,qe=(C,S)=>C===S;function G(C,...S){return(...F)=>{const W=S.concat(F);return C.apply(null,W)}}const Xe=C=>{C()},Nt=ot(!1),at=ot(!0);class q{constructor(S,F){this.tag=S,this.value=F}static some(S){return new q(!0,S)}static none(){return q.singletonNone}fold(S,F){return this.tag?F(this.value):S()}isSome(){return this.tag}isNone(){return!this.tag}map(S){return this.tag?q.some(S(this.value)):q.none()}bind(S){return this.tag?S(this.value):q.none()}exists(S){return this.tag&&S(this.value)}forall(S){return!this.tag||S(this.value)}filter(S){return!this.tag||S(this.value)?this:q.none()}getOr(S){return this.tag?this.value:S}or(S){return this.tag?this:S}getOrThunk(S){return this.tag?this.value:S()}orThunk(S){return this.tag?this:S()}getOrDie(S){if(this.tag)return this.value;throw new Error(S??"Called getOrDie on None")}static from(S){return un(S)?q.some(S):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(S){this.tag&&S(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const ft=Object.keys,Mn=Object.hasOwnProperty,Bt=(C,S)=>{const F=ft(C);for(let W=0,me=F.length;W<me;W++){const Ie=F[W],bt=C[Ie];S(bt,Ie)}},Pe=C=>(S,F)=>{C[F]=S},fe=(C,S,F,W)=>{Bt(C,(me,Ie)=>{(S(me,Ie)?F:W)(me,Ie)})},Vo=(C,S)=>{const F={};return fe(C,S,Pe(F),Ht),F},Zn=(C,S)=>{const F=[];return Bt(C,(W,me)=>{F.push(S(W,me))}),F},jt=C=>Zn(C,Sn),O=C=>ft(C).length,Eo=(C,S)=>nt(C,S)?q.from(C[S]):q.none(),nt=(C,S)=>Mn.call(C,S),No=(C,S)=>nt(C,S)&&C[S]!==void 0&&C[S]!==null,dn=Array.prototype.indexOf,je=Array.prototype.push,po=(C,S)=>dn.call(C,S),Xo=(C,S)=>po(C,S)>-1,Bo=(C,S)=>{for(let F=0,W=C.length;F<W;F++){const me=C[F];if(S(me,F))return!0}return!1},Ps=(C,S)=>{const F=[];for(let W=0;W<C;W++)F.push(S(W));return F},_e=(C,S)=>{const F=C.length,W=new Array(F);for(let me=0;me<F;me++){const Ie=C[me];W[me]=S(Ie,me)}return W},gt=(C,S)=>{for(let F=0,W=C.length;F<W;F++){const me=C[F];S(me,F)}},H=(C,S)=>{for(let F=C.length-1;F>=0;F--){const W=C[F];S(W,F)}},Hr=(C,S)=>{const F=[],W=[];for(let me=0,Ie=C.length;me<Ie;me++){const bt=C[me];(S(bt,me)?F:W).push(bt)}return{pass:F,fail:W}},Fn=(C,S)=>{const F=[];for(let W=0,me=C.length;W<me;W++){const Ie=C[W];S(Ie,W)&&F.push(Ie)}return F},ms=(C,S,F)=>(H(C,(W,me)=>{F=S(F,W,me)}),F),In=(C,S,F)=>(gt(C,(W,me)=>{F=S(F,W,me)}),F),js=(C,S,F)=>{for(let W=0,me=C.length;W<me;W++){const Ie=C[W];if(S(Ie,W))return q.some(Ie);if(F(Ie,W))break}return q.none()},Tt=(C,S)=>js(C,S,Nt),$t=C=>{const S=[];for(let F=0,W=C.length;F<W;++F){if(!_t(C[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+C);je.apply(S,C[F])}return S},Vt=(C,S)=>$t(_e(C,S)),De=(C,S)=>{for(let F=0,W=C.length;F<W;++F){const me=C[F];if(S(me,F)!==!0)return!1}return!0},Gs=(C,S)=>{const F={};for(let W=0,me=C.length;W<me;W++){const Ie=C[W];F[String(Ie)]=S(Ie,W)}return F},cs=(C,S)=>S>=0&&S<C.length?q.some(C[S]):q.none(),rn=C=>cs(C,0),Ea=C=>cs(C,C.length-1),zo=(C,S)=>{for(let F=0;F<C.length;F++){const W=S(C[F],F);if(W.isSome())return W}return q.none()},_a=8,ls=9,Ms=11,Wr=1,ur=3,Jo=(C,S)=>{const W=(S||document).createElement("div");if(W.innerHTML=C,!W.hasChildNodes()||W.childNodes.length>1){const me="HTML does not have a single root node";throw console.error(me,C),new Error(me)}return Ye(W.childNodes[0])},Uo=(C,S)=>{const W=(S||document).createElement(C);return Ye(W)},tt=(C,S)=>{const W=(S||document).createTextNode(C);return Ye(W)},Ye=C=>{if(C==null)throw new Error("Node cannot be null or undefined");return{dom:C}},en={fromHtml:Jo,fromTag:Uo,fromText:tt,fromDom:Ye,fromPoint:(C,S,F)=>q.from(C.dom.elementFromPoint(S,F)).map(Ye)},Bn=(C,S)=>{const F=C.dom;if(F.nodeType!==Wr)return!1;{const W=F;if(W.matches!==void 0)return W.matches(S);if(W.msMatchesSelector!==void 0)return W.msMatchesSelector(S);if(W.webkitMatchesSelector!==void 0)return W.webkitMatchesSelector(S);if(W.mozMatchesSelector!==void 0)return W.mozMatchesSelector(S);throw new Error("Browser lacks native selectors")}},Yt=C=>C.nodeType!==Wr&&C.nodeType!==ls&&C.nodeType!==Ms||C.childElementCount===0,Ns=(C,S)=>{const F=S===void 0?document:S.dom;return Yt(F)?[]:_e(F.querySelectorAll(C),en.fromDom)},ga=(C,S)=>{const F=S===void 0?document:S.dom;return Yt(F)?q.none():q.from(F.querySelector(C)).map(en.fromDom)},rr=(C,S)=>C.dom===S.dom,xs=Bn;typeof window<"u"||Function("return this;")();const Mr=C=>C.dom.nodeName.toLowerCase(),ht=C=>C.dom.nodeType,so=C=>S=>ht(S)===C,ha=C=>ht(C)===_a||Mr(C)==="#comment",ar=so(Wr),Uc=so(ur),Ka=so(ls),Qo=so(Ms),Ya=C=>S=>ar(S)&&Mr(S)===C,pa=C=>en.fromDom(C.dom.ownerDocument),Wo=C=>Ka(C)?C:pa(C),_n=C=>q.from(C.dom.parentNode).map(en.fromDom),Zr=(C,S)=>{const F=Qt(S)?S:Nt;let W=C.dom;const me=[];for(;W.parentNode!==null&&W.parentNode!==void 0;){const Ie=W.parentNode,bt=en.fromDom(Ie);if(me.push(bt),F(bt)===!0)break;W=Ie}return me},Oa=C=>q.from(C.dom.previousSibling).map(en.fromDom),Xa=C=>q.from(C.dom.nextSibling).map(en.fromDom),Ja=C=>_e(C.dom.childNodes,en.fromDom),Is=(C,S)=>{const F=C.dom.childNodes;return q.from(F[S]).map(en.fromDom)},dr=C=>Is(C,0),ys=C=>Qo(C)&&un(C.dom.host),ue=Qt(Element.prototype.attachShadow)&&Qt(Node.prototype.getRootNode)?C=>en.fromDom(C.dom.getRootNode()):Wo,se=C=>{const S=ue(C);return ys(S)?q.some(S):q.none()},Be=C=>en.fromDom(C.dom.host),Re=C=>{const S=Uc(C)?C.dom.parentNode:C.dom;if(S==null||S.ownerDocument===null)return!1;const F=S.ownerDocument;return se(en.fromDom(S)).fold(()=>F.body.contains(S),it(Re,Be))};var Xt=(C,S,F,W,me)=>C(F,W)?q.some(F):Qt(me)&&me(F)?q.none():S(F,W,me);const yn=(C,S,F)=>{let W=C.dom;const me=Qt(F)?F:Nt;for(;W.parentNode;){W=W.parentNode;const Ie=en.fromDom(W);if(S(Ie))return q.some(Ie);if(me(Ie))break}return q.none()},no=(C,S,F)=>Xt((me,Ie)=>Ie(me),yn,C,S,F),jo=(C,S)=>{const F=me=>S(en.fromDom(me));return Tt(C.dom.childNodes,F).map(en.fromDom)},Yn=(C,S,F)=>yn(C,W=>Bn(W,S),F),uo=(C,S)=>jo(C,F=>Bn(F,S)),pe=(C,S)=>ga(S,C),Fo=(C,S,F)=>Xt((me,Ie)=>Bn(me,Ie),Yn,C,S,F),wr=C=>Fo(C,"[contenteditable]"),mr=(C,S=!1)=>Re(C)?C.dom.isContentEditable:wr(C).fold(ot(S),F=>Wc(F)==="true"),Wc=C=>C.dom.contentEditable,bo=C=>C.nodeName.toLowerCase(),Cl=C=>en.fromDom(C.getBody()),Cr=C=>S=>rr(S,Cl(C)),fr=C=>C?C.replace(/px$/,""):"",qs=C=>/^\d+(\.\d+)?$/.test(C)?C+"px":C,Ts=C=>en.fromDom(C.selection.getStart()),fs=C=>en.fromDom(C.selection.getEnd()),Zc=C=>no(C,Ya("table")).forall(mr),Qa=(C,S)=>Fn(Ja(C),S),hc=(C,S)=>{let F=[];return gt(Ja(C),W=>{S(W)&&(F=F.concat([W])),F=F.concat(hc(W,S))}),F},ol=(C,S)=>Qa(C,F=>Bn(F,S)),sl=(C,S)=>Ns(S,C),Lo=(C,S,F)=>{if(Hn(F)||Zt(F)||dt(F))C.setAttribute(S,F+"");else throw console.error("Invalid call to Attribute.set. Key ",S,":: Value ",F,":: Element ",C),new Error("Attribute value was not simple")},ba=(C,S,F)=>{Lo(C.dom,S,F)},Ac=(C,S)=>{const F=C.dom;Bt(S,(W,me)=>{Lo(F,me,W)})},pc=(C,S)=>{const F=C.dom.getAttribute(S);return F===null?void 0:F},Aa=(C,S)=>q.from(pc(C,S)),Sr=(C,S)=>{C.dom.removeAttribute(S)},_s=C=>In(C.dom.attributes,(S,F)=>(S[F.name]=F.value,S),{}),au=(C,S,F=qe)=>C.exists(W=>F(W,S)),Kl=C=>{const S=[],F=W=>{S.push(W)};for(let W=0;W<C.length;W++)C[W].each(F);return S},es=(C,S,F)=>C.isSome()&&S.isSome()?q.some(F(C.getOrDie(),S.getOrDie())):q.none(),sa=C=>C.bind(Sn),va=(C,S)=>C?q.some(S):q.none(),Ks=(C,S)=>C.substring(S),Yl=(C,S,F)=>S===""||C.length>=S.length&&C.substr(F,F+S.length)===S,ec=(C,S)=>ra(C,S)?Ks(C,S.length):C,ra=(C,S)=>Yl(C,S,0),vi=(C=>S=>S.replace(C,""))(/^\s+|\s+$/g),Sl=C=>C.length>0,yi=C=>!Sl(C),ya=(C,S=10)=>{const F=parseInt(C,S);return isNaN(F)?q.none():q.some(F)},Dc=C=>{const S=parseFloat(C);return isNaN(S)?q.none():q.some(S)},Xl=C=>C.style!==void 0&&Qt(C.style.getPropertyValue),jc=(C,S,F)=>{if(!Hn(F))throw console.error("Invalid call to CSS.set. Property ",S,":: Value ",F,":: Element ",C),new Error("CSS value must be a string: "+F);Xl(C)&&C.style.setProperty(S,F)},Jl=(C,S)=>{Xl(C)&&C.style.removeProperty(S)},Z=(C,S,F)=>{const W=C.dom;jc(W,S,F)},le=(C,S)=>{const F=C.dom,me=window.getComputedStyle(F).getPropertyValue(S);return me===""&&!Re(C)?be(F,S):me},be=(C,S)=>Xl(C)?C.style.getPropertyValue(S):"",$e=(C,S)=>{const F=C.dom,W=be(F,S);return q.from(W).filter(me=>me.length>0)},rt=(C,S)=>{const F=C.dom;Jl(F,S),au(Aa(C,"style").map(vi),"")&&Sr(C,"style")},wn=(C,S,F=0)=>Aa(C,S).map(W=>parseInt(W,10)).getOr(F),os=(C,S)=>xr(C,S,at),xr=(C,S,F)=>Vt(Ja(C),W=>Bn(W,S)?F(W)?[W]:[]:xr(W,S,F)),wo=["tfoot","thead","tbody","colgroup"],Tr=C=>Xo(wo,C),$o=(C,S)=>({rows:C,columns:S}),Ws=(C,S,F)=>({element:C,rowspan:S,colspan:F}),Rc=(C,S,F,W,me,Ie)=>({element:C,rowspan:S,colspan:F,row:W,column:me,isLocked:Ie}),vc=(C,S,F)=>({element:C,cells:S,section:F}),Vn=(C,S,F,W)=>({startRow:C,startCol:S,finishRow:F,finishCol:W}),Io=(C,S,F)=>({element:C,colspan:S,column:F}),jr=(C,S)=>({element:C,columns:S}),$=(C,S,F=Nt)=>{if(F(S))return q.none();if(Xo(C,Mr(S)))return q.some(S);const W=me=>Bn(me,"table")||F(me);return Yn(S,C.join(","),W)},K=(C,S)=>$(["td","th"],C,S),ne=C=>os(C,"th,td"),Ae=C=>Bn(C,"colgroup")?ol(C,"col"):Vt(Kt(C),S=>ol(S,"col")),Pt=(C,S)=>Fo(C,"table",S),Xn=C=>os(C,"tr"),Kt=C=>Pt(C).fold(ot([]),S=>ol(S,"colgroup")),Nr=(C,S)=>_e(C,F=>{if(Mr(F)==="colgroup"){const W=_e(Ae(F),me=>{const Ie=wn(me,"span",1);return Ws(me,1,Ie)});return vc(F,W,"colgroup")}else{const W=_e(ne(F),me=>{const Ie=wn(me,"rowspan",1),bt=wn(me,"colspan",1);return Ws(me,Ie,bt)});return vc(F,W,S(F))}}),Gr=C=>_n(C).map(S=>{const F=Mr(S);return Tr(F)?F:"tbody"}).getOr("tbody"),Qe=C=>{const S=Xn(C),W=[...Kt(C),...S];return Nr(W,Gr)},Br="data-snooker-locked-cols",Ys=C=>Aa(C,Br).bind(S=>q.from(S.match(/\d+/g))).map(S=>Gs(S,at)),qr=(C,S)=>C+","+S,Cd=(C,S,F)=>q.from(C.access[qr(S,F)]),mo=(C,S,F)=>{const W=Y(C,me=>F(S,me.element));return W.length>0?q.some(W[0]):q.none()},Y=(C,S)=>{const F=Vt(C.all,W=>W.cells);return Fn(F,S)},oe=C=>{const S={};let F=0;return gt(C.cells,W=>{const me=W.colspan;Ps(me,Ie=>{const bt=F+Ie;S[bt]=Io(W.element,me,bt)}),F+=me}),S},Se=C=>{const S={},F=[],me=rn(C).map(gl=>gl.element).bind(Pt).bind(Ys).getOr({});let Ie=0,bt=0,Gt=0;const{pass:qn,fail:Kn}=Hr(C,gl=>gl.section==="colgroup");gt(Kn,gl=>{const sc=[];gt(gl.cells,Zu=>{let oi=0;for(;S[qr(Gt,oi)]!==void 0;)oi++;const ym=No(me,oi.toString()),og=Rc(Zu.element,Zu.rowspan,Zu.colspan,Gt,oi,ym);for(let si=0;si<Zu.colspan;si++)for(let wm=0;wm<Zu.rowspan;wm++){const dh=Gt+wm,mh=oi+si,uf=qr(dh,mh);S[uf]=og,bt=Math.max(bt,mh+1)}sc.push(og)}),Ie++,F.push(vc(gl.element,sc,gl.section)),Gt++});const{columns:ts,colgroups:ks}=Ea(qn).map(gl=>{const sc=oe(gl);return{colgroups:[jr(gl.element,jt(sc))],columns:sc}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:$o(Ie,bt),access:S,all:F,columns:ts,colgroups:ks}},Bs={fromTable:C=>{const S=Qe(C);return Se(S)},generate:Se,getAt:Cd,findItem:mo,filterItems:Y,justCells:C=>Vt(C.all,S=>S.cells),justColumns:C=>jt(C.columns),hasColumns:C=>ft(C.columns).length>0,getColumnAt:(C,S)=>q.from(C.columns[S])};var aa=tinymce.util.Tools.resolve("tinymce.util.Tools");const ws=(C,S,F)=>{const W=C.select("td,th",S);let me;for(let Ie=0;Ie<W.length;Ie++){const bt=C.getStyle(W[Ie],F);if(Wn(me)&&(me=bt),me!==bt)return""}return me},yc=(C,S,F)=>{aa.each("left center right".split(" "),W=>{W!==F&&C.formatter.remove("align"+W,{},S)}),F&&C.formatter.apply("align"+F,{},S)},Gc=(C,S,F)=>{aa.each("top middle bottom".split(" "),W=>{W!==F&&C.formatter.remove("valign"+W,{},S)}),F&&C.formatter.apply("valign"+F,{},S)},hs=(C,S,F)=>{C.dispatch("TableModified",{...F,table:S})},ca=(C,S)=>Dc(C).getOr(S),Xs=(C,S,F)=>ca(le(C,S),F),Pl=(C,S,F,W)=>{const me=Xs(C,`padding-${F}`,0),Ie=Xs(C,`padding-${W}`,0),bt=Xs(C,`border-${F}-width`,0),Gt=Xs(C,`border-${W}-width`,0);return S-me-Ie-bt-Gt},Ii=(C,S)=>{const F=C.dom,W=F.getBoundingClientRect().width||F.offsetWidth;return S==="border-box"?W:Pl(C,W,"left","right")},wc=C=>Ii(C,"content-box");var Il=tinymce.util.Tools.resolve("tinymce.Env");const Sd="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",wi=Ps(5,C=>{const S=`${C+1}px`;return{title:S,value:S}}),rl=_e(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],C=>({title:C,value:C.toLowerCase()})),Vr="100%",tc=C=>{var S;const F=C.dom,W=(S=F.getParent(C.selection.getStart(),F.isBlock))!==null&&S!==void 0?S:C.getBody();return wc(en.fromDom(W))+"px"},Mc=(C,S)=>ef(C)||!$r(C)?S:Fu(C)?{...S,width:tc(C)}:{...S,width:Vr},al=(C,S)=>ef(C)||$r(C)?S:Fu(C)?{...S,width:tc(C)}:{...S,width:Vr},La=C=>S=>S.options.get(C),kr=C=>{const S=C.options.register;S("table_border_widths",{processor:"object[]",default:wi}),S("table_border_styles",{processor:"object[]",default:rl}),S("table_cell_advtab",{processor:"boolean",default:!0}),S("table_row_advtab",{processor:"boolean",default:!0}),S("table_advtab",{processor:"boolean",default:!0}),S("table_appearance_options",{processor:"boolean",default:!0}),S("table_grid",{processor:"boolean",default:!Il.deviceType.isTouch()}),S("table_cell_class_list",{processor:"object[]",default:[]}),S("table_row_class_list",{processor:"object[]",default:[]}),S("table_class_list",{processor:"object[]",default:[]}),S("table_toolbar",{processor:"string",default:Sd}),S("table_background_color_map",{processor:"object[]",default:[]}),S("table_border_color_map",{processor:"object[]",default:[]})},qc=La("table_sizing_mode"),um=La("table_border_widths"),cu=La("table_border_styles"),lu=La("table_cell_advtab"),Qm=La("table_row_advtab"),xl=La("table_advtab"),iu=La("table_appearance_options"),xd=La("table_grid"),$r=La("table_style_by_css"),dm=La("table_cell_class_list"),Pu=La("table_row_class_list"),Iu=La("table_class_list"),Td=La("table_toolbar"),kd=La("table_background_color_map"),Ed=La("table_border_color_map"),Fu=C=>qc(C)==="fixed",ef=C=>qc(C)==="responsive",tf=C=>{const S=C.options,F=S.get("table_default_styles");return S.isSet("table_default_styles")?F:Mc(C,F)},uu=C=>{const S=C.options,F=S.get("table_default_attributes");return S.isSet("table_default_attributes")?F:al(C,F)},Ep=(C,S)=>S.column>=C.startCol&&S.column+S.colspan-1<=C.finishCol&&S.row>=C.startRow&&S.row+S.rowspan-1<=C.finishRow,re=(C,S)=>{let F=!0;const W=G(Ep,S);for(let me=S.startRow;me<=S.finishRow;me++)for(let Ie=S.startCol;Ie<=S.finishCol;Ie++)F=F&&Bs.getAt(C,me,Ie).exists(W);return F?q.some(S):q.none()},_d=(C,S)=>Vn(Math.min(C.row,S.row),Math.min(C.column,S.column),Math.max(C.row+C.rowspan-1,S.row+S.rowspan-1),Math.max(C.column+C.colspan-1,S.column+S.colspan-1)),Nc=(C,S,F)=>{const W=Bs.findItem(C,S,rr),me=Bs.findItem(C,F,rr);return W.bind(Ie=>me.map(bt=>_d(Ie,bt)))},Gf=(C,S,F)=>Nc(C,S,F).bind(W=>re(C,W)),_p=(C,S,F)=>{const W=Op(C);return Gf(W,S,F)},Op=Bs.fromTable,ss=(C,S)=>{_n(C).each(W=>{W.dom.insertBefore(S.dom,C.dom)})},Fl=(C,S)=>{Xa(C).fold(()=>{_n(C).each(me=>{cl(me,S)})},W=>{ss(W,S)})},Cc=(C,S)=>{dr(C).fold(()=>{cl(C,S)},W=>{C.dom.insertBefore(S.dom,W.dom)})},cl=(C,S)=>{C.dom.appendChild(S.dom)},Qg=(C,S)=>{ss(C,S),cl(S,C)},Fi=(C,S)=>{gt(S,(F,W)=>{const me=W===0?C:S[W-1];Fl(me,F)})},Tl=(C,S)=>{gt(S,F=>{cl(C,F)})},mm=C=>{const S=C.dom;S.parentNode!==null&&S.parentNode.removeChild(S)},qf=C=>{const S=Ja(C);S.length>0&&Fi(C,S),mm(C)},Kc=((C,S)=>{const F=Ie=>{if(!C(Ie))throw new Error("Can only get "+S+" value of a "+S+" node");return W(Ie).getOr("")},W=Ie=>C(Ie)?q.from(Ie.dom.nodeValue):q.none();return{get:F,getOption:W,set:(Ie,bt)=>{if(!C(Ie))throw new Error("Can only set raw "+S+" value of a "+S+" node");Ie.dom.nodeValue=bt}}})(Uc,"text"),Od=C=>Kc.get(C),th=(C,S)=>Kc.set(C,S);var ll=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Da=()=>{const C=Kn=>en.fromDom(Kn.dom.cloneNode(!1)),S=Kn=>Wo(Kn).dom,F=Kn=>ar(Kn)?Mr(Kn)==="body"?!0:Xo(ll,Mr(Kn)):!1,W=Kn=>ar(Kn)?Xo(["br","img","hr","input"],Mr(Kn)):!1,me=Kn=>ar(Kn)&&pc(Kn,"contenteditable")==="false",Ie=(Kn,ts)=>Kn.dom.compareDocumentPosition(ts.dom),bt=(Kn,ts)=>{const ks=_s(Kn);Ac(ts,ks)},Gt=Kn=>{const ts=Mr(Kn);return Xo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ts)},qn=Kn=>ar(Kn)?Aa(Kn,"lang"):q.none();return{up:ot({selector:Yn,closest:Fo,predicate:yn,all:Zr}),down:ot({selector:sl,predicate:hc}),styles:ot({get:le,getRaw:$e,set:Z,remove:rt}),attrs:ot({get:pc,set:ba,remove:Sr,copyTo:bt}),insert:ot({before:ss,after:Fl,afterAll:Fi,append:cl,appendAll:Tl,prepend:Cc,wrap:Qg}),remove:ot({unwrap:qf,remove:mm}),create:ot({nu:en.fromTag,clone:C,text:en.fromText}),query:ot({comparePosition:Ie,prevSibling:Oa,nextSibling:Xa}),property:ot({children:Ja,name:Mr,parent:_n,document:S,isText:Uc,isComment:ha,isElement:ar,isSpecial:Gt,getLanguage:qn,getText:Od,setText:th,isBoundary:F,isEmptyTag:W,isNonEditable:me}),eq:rr,is:xs}};const Ad=(C,S,F,W)=>{const me=F[0],Ie=F.slice(1);return W(C,S,me,Ie)},Dd=(C,S,F)=>F.length>0?Ad(C,S,F,Ll):q.none(),Ll=(C,S,F,W)=>{const me=S(C,F);return ms(W,(Ie,bt)=>{const Gt=S(C,bt);return Bc(C,Ie,Gt)},me)},Bc=(C,S,F)=>S.bind(W=>F.filter(G(C.eq,W))),nf=Dd,of=Da(),sf=(C,S)=>nf(of,(F,W)=>C(W),S),rf=C=>Yn(C,"table"),Ql=(C,S)=>{const F=sl(C,S);return F.length>0?q.some(F):q.none()},fm=(C,S,F)=>pe(C,S).bind(W=>pe(C,F).bind(me=>sf(rf,[W,me]).map(Ie=>({first:W,last:me,table:Ie})))),nh=(C,S)=>Ql(C,S),Y0=(C,S,F)=>fm(C,S,F).bind(W=>{const me=qn=>rr(C,qn),Ie="thead,tfoot,tbody,table",bt=Yn(W.first,Ie,me),Gt=Yn(W.last,Ie,me);return bt.bind(qn=>Gt.bind(Kn=>rr(qn,Kn)?_p(W.table,W.first,W.last):q.none()))}),oh=C=>_e(C,en.fromDom),gm="data-mce-selected",Kf="td["+gm+"],th["+gm+"]",Li="data-mce-first-selected",Yf="td["+Li+"],th["+Li+"]",Zs="data-mce-last-selected",E="td["+Zs+"],th["+Zs+"]",M={selected:gm,selectedSelector:Kf,firstSelected:Li,firstSelectedSelector:Yf,lastSelected:Zs,lastSelectedSelector:E},z=C=>Pt(C).bind(S=>nh(S,M.firstSelectedSelector)).fold(ot(C),S=>S[0]),ie=C=>(S,F)=>{const W=Mr(S),me=W==="col"||W==="colgroup"?z(S):S;return Fo(me,C,F)},de=ie("th,td,caption"),xt=ie("th,td"),On=C=>oh(C.model.table.getSelectedCells()),jn=(C,S)=>{const F=xt(C),W=F.bind(me=>Pt(me)).map(me=>Xn(me));return es(F,W,(me,Ie)=>Fn(Ie,bt=>Bo(oh(bt.dom.cells),Gt=>pc(Gt,S)==="1"||rr(Gt,me)))).getOr([])},fo=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],St=C=>({value:hm(C)}),gs=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,wa=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,kl=C=>gs.test(C)||wa.test(C),hm=C=>ec(C,"#").toUpperCase(),Xf=C=>kl(C)?q.some({value:hm(C)}):q.none(),Ci=C=>{const S=C.toString(16);return(S.length===1?"0"+S:S).toUpperCase()},El=C=>{const S=Ci(C.red)+Ci(C.green)+Ci(C.blue);return St(S)},$c=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Hl=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ha=(C,S,F,W)=>({red:C,green:S,blue:F,alpha:W}),Eb=(C,S,F,W)=>{const me=parseInt(C,10),Ie=parseInt(S,10),bt=parseInt(F,10),Gt=parseFloat(W);return Ha(me,Ie,bt,Gt)},is=C=>{if(C==="transparent")return q.some(Ha(0,0,0,0));const S=$c.exec(C);if(S!==null)return q.some(Eb(S[1],S[2],S[3],"1"));const F=Hl.exec(C);return F!==null?q.some(Eb(F[1],F[2],F[3],F[4])):q.none()},Lu=C=>Xf(C).orThunk(()=>is(C).map(El)).getOrThunk(()=>{const S=document.createElement("canvas");S.height=1,S.width=1;const F=S.getContext("2d");F.clearRect(0,0,S.width,S.height),F.fillStyle="#FFFFFF",F.fillStyle=C,F.fillRect(0,0,1,1);const W=F.getImageData(0,0,1,1).data,me=W[0],Ie=W[1],bt=W[2],Gt=W[3];return El(Ha(me,Ie,bt,Gt))}),Rd=C=>is(C).map(El).map(S=>"#"+S.value).getOr(C),Pr=C=>{let S=C;return{get:()=>S,set:me=>{S=me}}},_b=C=>{const S=Pr(q.none()),F=()=>S.get().each(C);return{clear:()=>{F(),S.set(q.none())},isSet:()=>S.get().isSome(),get:()=>S.get(),set:Gt=>{F(),S.set(q.some(Gt))}}},X0=()=>_b(C=>C.unbind()),Hu=(C,S,F)=>W=>{const me=X0(),Ie=yi(F),bt=()=>{const Gt=On(C),qn=Kn=>C.formatter.match(S,{value:F},Kn.dom,Ie);Ie?(W.setActive(!Bo(Gt,qn)),me.set(C.formatter.formatChanged(S,Kn=>W.setActive(!Kn),!0))):(W.setActive(De(Gt,qn)),me.set(C.formatter.formatChanged(S,W.setActive,!1,{value:F})))};return C.initialized?bt():C.on("init",bt),me.clear},$s=C=>No(C,"menu"),Ls=C=>_e(C,S=>{const F=S.text||S.title||"";return $s(S)?{text:F,items:Ls(S.menu)}:{text:F,value:S.value}}),la=(C,S,F,W)=>_e(S,me=>{const Ie=me.text||me.title;return $s(me)?{type:"nestedmenuitem",text:Ie,getSubmenuItems:()=>la(C,me.menu,F,W)}:{text:Ie,type:"togglemenuitem",onAction:()=>W(me.value),onSetup:Hu(C,F,me.value)}}),Md=(C,S)=>F=>{C.execCommand("mceTableApplyCellStyle",!1,{[S]:F})},Nd=C=>Vt(C,S=>$s(S)?[{...S,menu:Nd(S.menu)}]:Sl(S.value)?[S]:[]),pm=(C,S,F,W)=>me=>me(la(C,S,F,W)),Bd=(C,S,F)=>{const W=_e(S,me=>({text:me.title,value:"#"+Lu(me.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:W.length>0?W:void 0,allowCustomColors:!1},onAction:me=>{const Ie=me.value==="remove"?"":me.value;C.execCommand("mceTableApplyCellStyle",!1,{[F]:Ie})}}]},Co=C=>()=>{const F=C.queryCommandValue("mceTableRowType")==="header"?"body":"header";C.execCommand("mceTableRowType",!1,{type:F})},sh=C=>()=>{const F=C.queryCommandValue("mceTableColType")==="th"?"td":"th";C.execCommand("mceTableColType",!1,{type:F})},Ap=C=>{const S=Ls(dm(C));return S.length>0?q.some({name:"class",type:"listbox",label:"Class",items:S}):q.none()},J0=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:fo}],Q0=C=>J0.concat(Ap(C).toArray()),Jf=(C,S)=>{const W=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Ls(cu(C)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:S==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(W):W}},Qf={normal:(C,S)=>{const F=C.dom;return{setAttrib:(bt,Gt)=>{F.setAttrib(S,bt,Gt)},setStyle:(bt,Gt)=>{F.setStyle(S,bt,Gt)},setFormat:(bt,Gt)=>{Gt===""?C.formatter.remove(bt,{value:null},S,!0):C.formatter.apply(bt,{value:Gt},S)}}}},Si=Ya("th"),Ab=(C,S)=>C&&S?"sectionCells":C?"section":"cells",rh=C=>{const S=C.section==="thead",F=au(Db(C.cells),"th");return C.section==="tfoot"?{type:"footer"}:S||F?{type:"header",subType:Ab(S,F)}:{type:"body"}},Db=C=>{const S=Fn(C,F=>Si(F.element));return S.length===0?q.some("td"):S.length===C.length?q.some("th"):q.none()},Hi=C=>{const S=_e(C,me=>rh(me).type),F=Xo(S,"header"),W=Xo(S,"footer");if(!F&&!W)return q.some("body");{const me=Xo(S,"body");return F&&!me&&!W?q.some("header"):!F&&!me&&W?q.some("footer"):q.none()}},Dp=C=>{let S=!1,F;return(...W)=>(S||(S=!0,F=C.apply(null,W)),F)},Vi=(C,S)=>zo(C.all,F=>Tt(F.cells,W=>rr(S,W.element))),af=(C,S,F)=>{const W=_e(S.selection,Ie=>K(Ie).bind(bt=>Vi(C,bt)).filter(F)),me=Kl(W);return va(me.length>0,me)},Rb=(C,S)=>S.mergable,ah=(C,S)=>S.unmergable,Rp=(C,S)=>af(C,S,at),Mp=(C,S)=>Vi(C,S).exists(F=>!F.isLocked),nc=(C,S)=>De(S,F=>Mp(C,F)),Np=(C,S)=>Rb(C,S).filter(F=>nc(C,F.cells)),ia=(C,S)=>ah(C,S).filter(F=>nc(C,F));({...{generate:C=>{if(!_t(C))throw new Error("cases must be an array");if(C.length===0)throw new Error("there must be at least one case");const S=[],F={};return gt(C,(W,me)=>{const Ie=ft(W);if(Ie.length!==1)throw new Error("one and only one name per case");const bt=Ie[0],Gt=W[bt];if(F[bt]!==void 0)throw new Error("duplicate key detected:"+bt);if(bt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!_t(Gt))throw new Error("case arguments must be an array");S.push(bt),F[bt]=(...qn)=>{const Kn=qn.length;if(Kn!==Gt.length)throw new Error("Wrong number of arguments to case "+bt+". Expected "+Gt.length+" ("+Gt+"), got "+Kn);return{fold:(...ks)=>{if(ks.length!==C.length)throw new Error("Wrong number of arguments to fold. Expected "+C.length+", got "+ks.length);return ks[me].apply(null,qn)},match:ks=>{const cr=ft(ks);if(S.length!==cr.length)throw new Error("Wrong number of arguments to match. Expected: "+S.join(",")+`
Actual: `+cr.join(","));if(!De(S,sc=>Xo(cr,sc)))throw new Error("Not all branches were specified when using match. Specified: "+cr.join(", ")+`
Required: `+S.join(", "));return ks[bt].apply(null,qn)},log:ks=>{console.log(ks,{constructors:S,constructor:bt,params:qn})}}}}),F}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const ei=(C,S)=>{const F=Bs.fromTable(C);return Rp(F,S).bind(me=>{const Ie=me[me.length-1],bt=me[0].row,Gt=Ie.row+Ie.rowspan,qn=F.all.slice(bt,Gt);return Hi(qn)}).getOr("")},Vu=C=>ra(C,"rgb")?Rd(C):C,Bp=C=>{const S=en.fromDom(C);return{borderwidth:$e(S,"border-width").getOr(""),borderstyle:$e(S,"border-style").getOr(""),bordercolor:$e(S,"border-color").map(Vu).getOr(""),backgroundcolor:$e(S,"background-color").map(Vu).getOr("")}},$p=C=>{const S=C[0],F=C.slice(1);return gt(F,W=>{gt(ft(S),me=>{Bt(W,(Ie,bt)=>{const Gt=S[me];Gt!==""&&me===bt&&Gt!==Ie&&(S[me]="")})})}),S},oc=(C,S,F,W)=>Tt(C,me=>!Wn(F.formatter.matchNode(W,S+me))).getOr(""),zu=G(oc,["left","center","right"],"align"),xi=G(oc,["top","middle","bottom"],"valign"),Va=(C,S)=>{const F=tf(C),W=uu(C),me=()=>({borderstyle:Eo(F,"border-style").getOr(""),bordercolor:Vu(Eo(F,"border-color").getOr("")),backgroundcolor:Vu(Eo(F,"background-color").getOr(""))}),Ie={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},bt=()=>{const ts=F["border-width"];return $r(C)&&ts?{border:ts}:Eo(W,"border").fold(()=>({}),ks=>({border:ks}))},Gt=S?me():{},qn=()=>{const ts=Eo(F,"border-spacing").or(Eo(W,"cellspacing")).fold(()=>({}),cr=>({cellspacing:cr})),ks=Eo(F,"border-padding").or(Eo(W,"cellpadding")).fold(()=>({}),cr=>({cellpadding:cr}));return{...ts,...ks}};return{...Ie,...F,...W,...Gt,...bt(),...qn()}},bm=C=>Pt(en.fromDom(C)).map(S=>{const F={selection:oh(C.cells)};return ei(S,F)}).getOr(""),mt=(C,S,F)=>{const W=(Gt,qn)=>{const Kn=$e(en.fromDom(qn),"border-width");return $r(C)&&Kn.isSome()?Kn.getOr(""):Gt.getAttrib(qn,"border")||ws(C.dom,qn,"border-width")||ws(C.dom,qn,"border")||""},me=C.dom,Ie=$r(C)?me.getStyle(S,"border-spacing")||me.getAttrib(S,"cellspacing"):me.getAttrib(S,"cellspacing")||me.getStyle(S,"border-spacing"),bt=$r(C)?ws(me,S,"padding")||me.getAttrib(S,"cellpadding"):me.getAttrib(S,"cellpadding")||ws(me,S,"padding");return{width:me.getStyle(S,"width")||me.getAttrib(S,"width"),height:me.getStyle(S,"height")||me.getAttrib(S,"height"),cellspacing:Ie??"",cellpadding:bt??"",border:W(me,S),caption:!!me.select("caption",S)[0],class:me.getAttrib(S,"class",""),align:zu(C,S),...F?Bp(S):{}}},Pp=(C,S,F)=>{const W=C.dom;return{height:W.getStyle(S,"height")||W.getAttrib(S,"height"),class:W.getAttrib(S,"class",""),type:bm(S),align:zu(C,S),...F?Bp(S):{}}},ey=(C,S,F,W)=>{const me=C.dom,Ie=W.getOr(S),bt=(Gt,qn)=>me.getStyle(Gt,qn)||me.getAttrib(Gt,qn);return{width:bt(Ie,"width"),height:bt(S,"height"),scope:me.getAttrib(S,"scope"),celltype:bo(S),class:me.getAttrib(S,"class",""),halign:zu(C,S),valign:xi(C,S),...F?Bp(S):{}}},Uu=(C,S)=>{const F=Bs.fromTable(C),W=Bs.justCells(F),me=Fn(W,Ie=>Bo(S,bt=>rr(Ie.element,bt)));return _e(me,Ie=>({element:Ie.element.dom,column:Bs.getColumnAt(F,Ie.column).map(bt=>bt.element.dom)}))},Ui=(C,S,F,W)=>{W("scope")&&C.setAttrib("scope",F.scope),W("class")&&C.setAttrib("class",F.class),W("height")&&C.setStyle("height",qs(F.height)),W("width")&&S.setStyle("width",qs(F.width))},ch=(C,S,F)=>{F("backgroundcolor")&&C.setFormat("tablecellbackgroundcolor",S.backgroundcolor),F("bordercolor")&&C.setFormat("tablecellbordercolor",S.bordercolor),F("borderstyle")&&C.setFormat("tablecellborderstyle",S.borderstyle),F("borderwidth")&&C.setFormat("tablecellborderwidth",qs(S.borderwidth))},gr=(C,S,F,W)=>{const me=S.length===1;gt(S,Ie=>{const bt=Ie.element,Gt=me?at:W,qn=Qf.normal(C,bt),Kn=Ie.column.map(ts=>Qf.normal(C,ts)).getOr(qn);Ui(qn,Kn,F,Gt),lu(C)&&ch(qn,F,Gt),W("halign")&&yc(C,bt,F.halign),W("valign")&&Gc(C,bt,F.valign)})},cf=(C,S)=>{C.execCommand("mceTableCellType",!1,{type:S.celltype,no_events:!0})},Wi=(C,S,F,W)=>{const me=Vo(W,(Ie,bt)=>F[bt]!==Ie);O(me)>0&&S.length>=1&&Pt(S[0]).each(Ie=>{const bt=Uu(Ie,S),Gt=O(Vo(me,(Kn,ts)=>ts!=="scope"&&ts!=="celltype"))>0,qn=nt(me,"celltype");(Gt||nt(me,"scope"))&&gr(C,bt,W,G(nt,me)),qn&&cf(C,W),hs(C,Ie.dom,{structure:qn,style:Gt})})},oo=(C,S,F,W)=>{const me=W.getData();W.close(),C.undoManager.transact(()=>{Wi(C,S,F,me),C.focus()})},Vl=(C,S)=>{const F=Pt(S[0]).map(W=>_e(Uu(W,S),me=>ey(C,me.element,lu(C),me.column)));return $p(F.getOrDie())},ul=C=>{const S=On(C);if(S.length===0)return;const F=Vl(C,S),W={type:"tabpanel",tabs:[{title:"General",name:"general",items:Q0(C)},Jf(C,"cell")]},me={type:"panel",items:[{type:"grid",columns:2,items:Q0(C)}]};C.windowManager.open({title:"Cell Properties",size:"normal",body:lu(C)?W:me,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:F,onSubmit:G(oo,C,S,F)})},_l=C=>{const S=Ls(Pu(C));return S.length>0?q.some({name:"class",type:"listbox",label:"Class",items:S}):q.none()},dl=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],ti=C=>dl.concat(_l(C).toArray()),ps=(C,S,F)=>{F("class")&&C.setAttrib("class",S.class),F("height")&&C.setStyle("height",qs(S.height))},Pc=(C,S,F)=>{F("backgroundcolor")&&C.setStyle("background-color",S.backgroundcolor),F("bordercolor")&&C.setStyle("border-color",S.bordercolor),F("borderstyle")&&C.setStyle("border-style",S.borderstyle)},lh=(C,S,F,W)=>{const Ie=S.length===1?at:W;gt(S,bt=>{const Gt=Qf.normal(C,bt);ps(Gt,F,Ie),Qm(C)&&Pc(Gt,F,Ie),W("align")&&yc(C,bt,F.align)})},Je=(C,S)=>{C.execCommand("mceTableRowType",!1,{type:S.type,no_events:!0})},ml=(C,S,F,W)=>{const me=Vo(W,(Ie,bt)=>F[bt]!==Ie);if(O(me)>0){const Ie=nt(me,"type"),bt=Ie?O(me)>1:!0;bt&&lh(C,S,W,G(nt,me)),Ie&&Je(C,W),Pt(en.fromDom(S[0])).each(Gt=>hs(C,Gt.dom,{structure:Ie,style:bt}))}},eg=(C,S,F,W)=>{const me=W.getData();W.close(),C.undoManager.transact(()=>{ml(C,S,F,me),C.focus()})},Qr=C=>{const S=jn(Ts(C),M.selected);if(S.length===0)return;const F=_e(S,bt=>Pp(C,bt.dom,Qm(C))),W=$p(F),me={type:"tabpanel",tabs:[{title:"General",name:"general",items:ti(C)},Jf(C,"row")]},Ie={type:"panel",items:[{type:"grid",columns:2,items:ti(C)}]};C.windowManager.open({title:"Row Properties",size:"normal",body:Qm(C)?me:Ie,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:W,onSubmit:G(eg,C,_e(S,bt=>bt.dom),W)})},du=(C,S,F)=>{const W=F?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],me=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ie=iu(C)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],bt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Gt=S.length>0?[{type:"listbox",name:"class",label:"Class",items:S}]:[];return W.concat(me).concat(Ie).concat(bt).concat(Gt)},Ip=(C,S,F,W)=>{if(S.tagName==="TD"||S.tagName==="TH")Hn(F)&&un(W)?C.setStyle(S,F,W):C.setStyles(S,F);else if(S.children)for(let me=0;me<S.children.length;me++)Ip(C,S.children[me],F,W)},Ti=(C,S,F)=>{const W=C.dom,me={},Ie={};if(Wn(F.class)||(me.class=F.class),Ie.height=qs(F.height),$r(C)?Ie.width=qs(F.width):W.getAttrib(S,"width")&&(me.width=fr(F.width)),$r(C)?(Ie["border-width"]=qs(F.border),Ie["border-spacing"]=qs(F.cellspacing)):(me.border=F.border,me.cellpadding=F.cellpadding,me.cellspacing=F.cellspacing),$r(C)&&S.children)for(let bt=0;bt<S.children.length;bt++)Ip(W,S.children[bt],{"border-width":qs(F.border),padding:qs(F.cellpadding)}),xl(C)&&Ip(W,S.children[bt],{"border-color":F.bordercolor});if(xl(C)){const bt=F;Ie["background-color"]=bt.backgroundcolor,Ie["border-color"]=bt.bordercolor,Ie["border-style"]=bt.borderstyle}me.style=W.serializeStyle({...tf(C),...Ie}),W.setAttribs(S,{...uu(C),...me})},ty=(C,S,F,W)=>{const me=C.dom,Ie=W.getData(),bt=Vo(Ie,(Gt,qn)=>F[qn]!==Gt);W.close(),Ie.class===""&&delete Ie.class,C.undoManager.transact(()=>{if(!S){const Gt=ya(Ie.cols).getOr(1),qn=ya(Ie.rows).getOr(1);C.execCommand("mceInsertTable",!1,{rows:qn,columns:Gt}),S=xt(Ts(C),Cr(C)).bind(Kn=>Pt(Kn,Cr(C))).map(Kn=>Kn.dom).getOrDie()}if(O(bt)>0){Ti(C,S,Ie);const Gt=me.select("caption",S)[0];(Gt&&!Ie.caption||!Gt&&Ie.caption)&&C.execCommand("mceTableToggleCaption"),yc(C,S,Ie.align)}if(C.focus(),C.addVisual(),O(bt)>0){const Gt=nt(bt,"caption"),qn=Gt?O(bt)>1:!0;hs(C,S,{structure:Gt,style:qn})}})},Wu=(C,S)=>{const F=C.dom;let W,me=Va(C,xl(C));S?(me.cols="1",me.rows="1",xl(C)&&(me.borderstyle="",me.bordercolor="",me.backgroundcolor="")):(W=F.getParent(C.selection.getStart(),"table",C.getBody()),W?me=mt(C,W,xl(C)):xl(C)&&(me.borderstyle="",me.bordercolor="",me.backgroundcolor=""));const Ie=Ls(Iu(C));Ie.length>0&&me.class&&(me.class=me.class.replace(/\s*mce\-item\-table\s*/g,""));const bt={type:"grid",columns:2,items:du(C,Ie,S)},Gt=()=>({type:"panel",items:[bt]}),qn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[bt]},Jf(C,"table")]}),Kn=xl(C)?qn():Gt();C.windowManager.open({title:"Table Properties",size:"normal",body:Kn,onSubmit:G(ty,C,W,me),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:me})},Mb=C=>{const S=F=>{Zc(Ts(C))&&F()};Bt({mceTableProps:G(Wu,C,!1),mceTableRowProps:G(Qr,C),mceTableCellProps:G(ul,C),mceInsertTableDialog:G(Wu,C,!0)},(F,W)=>C.addCommand(W,()=>S(F)))},Ol=(C,S)=>uo(C,S).isSome(),rs=Sn,mu=C=>{const S=(W,me)=>Aa(W,me).exists(Ie=>parseInt(Ie,10)>1),F=W=>S(W,"rowspan")||S(W,"colspan");return C.length>0&&De(C,F)?q.some(C):q.none()},tg=(C,S,F)=>S.length<=1?q.none():Y0(C,F.firstSelectedSelector,F.lastSelectedSelector).map(W=>({bounds:W,cells:S})),ea=C=>({element:C,mergable:q.none(),unmergable:q.none(),selection:[C]}),fl=(C,S,F)=>({element:F,mergable:tg(S,C,M),unmergable:mu(C),selection:rs(C)}),vm=C=>{const S=Pr(q.none()),F=Pr([]);let W=q.none();const me=Ya("caption"),Ie=Oo=>W.forall(Hs=>!Hs[Oo]),bt=()=>de(Ts(C),Cr(C)),Gt=()=>de(fs(C),Cr(C)),qn=()=>bt().bind(Oo=>sa(es(Pt(Oo),Gt().bind(Pt),(Hs,Yc)=>rr(Hs,Yc)?me(Oo)?q.some(ea(Oo)):q.some(fl(On(C),Hs,Oo)):q.none()))),Kn=Oo=>Pt(Oo.element).map(Yc=>{const As=Bs.fromTable(Yc),fh=Rp(As,Oo).getOr([]),Cm=In(fh,(Sm,ki)=>(ki.isLocked&&(Sm.onAny=!0,ki.column===0?Sm.onFirst=!0:ki.column+ki.colspan>=As.grid.columns&&(Sm.onLast=!0)),Sm),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Np(As,Oo).isSome(),unmergeable:ia(As,Oo).isSome(),locked:Cm}}),ts=()=>{S.set(Dp(qn)()),W=S.get().bind(Kn),gt(F.get(),Xe)},ks=Oo=>(Oo(),F.set(F.get().concat([Oo])),()=>{F.set(Fn(F.get(),Hs=>Hs!==Oo))}),cr=(Oo,Hs)=>ks(()=>S.get().fold(()=>{Oo.setEnabled(!1)},Yc=>{Oo.setEnabled(!Hs(Yc))})),gl=(Oo,Hs,Yc)=>ks(()=>S.get().fold(()=>{Oo.setEnabled(!1),Oo.setActive(!1)},As=>{Oo.setEnabled(!Hs(As)),Oo.setActive(Yc(As))})),sc=Oo=>W.exists(Hs=>Hs.locked[Oo]),Zu=Oo=>cr(Oo,Hs=>!1),oi=Oo=>cr(Oo,Hs=>me(Hs.element)),ym=Oo=>Hs=>cr(Hs,Yc=>me(Yc.element)||sc(Oo)),og=Oo=>Hs=>cr(Hs,Yc=>me(Yc.element)||Oo().isNone()),si=(Oo,Hs)=>Yc=>cr(Yc,As=>me(As.element)||Oo().isNone()||sc(Hs)),wm=Oo=>cr(Oo,Hs=>Ie("mergeable")),dh=Oo=>cr(Oo,Hs=>Ie("unmergeable")),mh=Oo=>gl(Oo,Nt,Hs=>Pt(Hs.element,Cr(C)).exists(As=>Ol(As,"caption"))),uf=(Oo,Hs)=>Yc=>gl(Yc,As=>me(As.element),()=>C.queryCommandValue(Oo)===Hs),Ra=uf("mceTableRowType","header"),fu=uf("mceTableColType","th");return C.on("NodeChange ExecCommand TableSelectorChange",ts),{onSetupTable:Zu,onSetupCellOrRow:oi,onSetupColumn:ym,onSetupPasteable:og,onSetupPasteableColumn:si,onSetupMergeable:wm,onSetupUnmergeable:dh,resetTargets:ts,onSetupTableWithCaption:mh,onSetupTableRowHeaders:Ra,onSetupTableColumnHeaders:fu,targets:S.get}};var ng=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const za="x-tinymce/dom-table-",ih=za+"rows",xe=za+"columns",Ic=C=>{var S;const F=(S=ng.read())!==null&&S!==void 0?S:[];return zo(F,W=>q.from(W.getType(C)))},lf=()=>Ic(ih),Sc=()=>Ic(xe),ni=(C,S)=>{C.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:Gt=>Gt("inserttable | cell row column | advtablesort | tableprops deletetable")});const F=Gt=>()=>C.execCommand(Gt),W=(Gt,qn)=>{C.queryCommandSupported(qn.command)&&C.ui.registry.addButton(Gt,{...qn,onAction:Qt(qn.onAction)?qn.onAction:F(qn.command)})},me=(Gt,qn)=>{C.queryCommandSupported(qn.command)&&C.ui.registry.addToggleButton(Gt,{...qn,onAction:Qt(qn.onAction)?qn.onAction:F(qn.command)})};W("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:S.onSetupTable}),W("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:S.onSetupTable}),W("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:S.onSetupCellOrRow}),W("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:S.onSetupMergeable}),W("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:S.onSetupUnmergeable}),W("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:S.onSetupCellOrRow}),W("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:S.onSetupCellOrRow}),W("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:S.onSetupCellOrRow}),W("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:S.onSetupCellOrRow}),W("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:S.onSetupColumn("onFirst")}),W("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:S.onSetupColumn("onLast")}),W("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:S.onSetupColumn("onAny")}),W("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:S.onSetupCellOrRow}),W("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:S.onSetupCellOrRow}),W("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:S.onSetupPasteable(lf)}),W("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:S.onSetupPasteable(lf)}),W("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:S.onSetupColumn("onAny")}),W("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:S.onSetupColumn("onAny")}),W("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:S.onSetupPasteableColumn(Sc,"onFirst")}),W("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:S.onSetupPasteableColumn(Sc,"onLast")}),W("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const Ie=Nd(Iu(C));Ie.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:pm(C,Ie,"tableclass",Gt=>C.execCommand("mceTableToggleClass",!1,Gt)),onSetup:S.onSetupTable});const bt=Nd(dm(C));bt.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:pm(C,bt,"tablecellclass",Gt=>C.execCommand("mceTableCellToggleClass",!1,Gt)),onSetup:S.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:pm(C,fo,"tablecellverticalalign",Md(C,"vertical-align")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:pm(C,um(C),"tablecellborderwidth",Md(C,"border-width")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:pm(C,cu(C),"tablecellborderstyle",Md(C,"border-style")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Gt=>Gt(Bd(C,kd(C),"background-color")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Gt=>Gt(Bd(C,Ed(C),"border-color")),onSetup:S.onSetupCellOrRow})),me("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),me("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Co(C),onSetup:S.onSetupTableRowHeaders}),me("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:sh(C),onSetup:S.onSetupTableColumnHeaders})},Fc=C=>{const S=W=>C.dom.is(W,"table")&&C.getBody().contains(W),F=Td(C);F.length>0&&C.ui.registry.addContextToolbar("table",{predicate:S,items:F,scope:"node",position:"node"})},Ca=(C,S)=>{const F=ks=>()=>C.execCommand(ks),W=(ks,cr)=>C.queryCommandSupported(cr.command)?(C.ui.registry.addMenuItem(ks,{...cr,onAction:Qt(cr.onAction)?cr.onAction:F(cr.command)}),!0):!1,me=(ks,cr)=>{C.queryCommandSupported(cr.command)&&C.ui.registry.addToggleMenuItem(ks,{...cr,onAction:Qt(cr.onAction)?cr.onAction:F(cr.command)})},Ie=ks=>{C.execCommand("mceInsertTable",!1,{rows:ks.numRows,columns:ks.numColumns})},bt=[W("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:S.onSetupCellOrRow}),W("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:S.onSetupCellOrRow}),W("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:S.onSetupCellOrRow}),W("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:S.onSetupCellOrRow}),W("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:S.onSetupCellOrRow}),W("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:S.onSetupCellOrRow}),W("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:S.onSetupPasteable(lf)}),W("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:S.onSetupPasteable(lf)})],Gt=[W("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:S.onSetupColumn("onFirst")}),W("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:S.onSetupColumn("onLast")}),W("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:S.onSetupColumn("onAny")}),W("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:S.onSetupColumn("onAny")}),W("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:S.onSetupColumn("onAny")}),W("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:S.onSetupPasteableColumn(Sc,"onFirst")}),W("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:S.onSetupPasteableColumn(Sc,"onLast")})],qn=[W("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:S.onSetupCellOrRow}),W("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:S.onSetupMergeable}),W("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:S.onSetupUnmergeable})];xd(C)?C.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ie}]}):C.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:F("mceInsertTableDialog")}),C.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:F("mceInsertTableDialog")}),W("tableprops",{text:"Table properties",onSetup:S.onSetupTable,command:"mceTableProps"}),W("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:S.onSetupTable,command:"mceTableDelete"}),Xo(bt,!0)&&C.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:ot("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),Xo(Gt,!0)&&C.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:ot("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),Xo(qn,!0)&&C.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:ot("tablecellprops tablemergecells tablesplitcells")}),C.ui.registry.addContextMenu("table",{update:()=>(S.resetTargets(),S.targets().fold(ot(""),ks=>Mr(ks.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Kn=Nd(Iu(C));Kn.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>la(C,Kn,"tableclass",ks=>C.execCommand("mceTableToggleClass",!1,ks)),onSetup:S.onSetupTable});const ts=Nd(dm(C));ts.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>la(C,ts,"tablecellclass",ks=>C.execCommand("mceTableCellToggleClass",!1,ks)),onSetup:S.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>la(C,fo,"tablecellverticalalign",Md(C,"vertical-align")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>la(C,um(C),"tablecellborderwidth",Md(C,"border-width")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>la(C,cu(C),"tablecellborderstyle",Md(C,"border-style")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Bd(C,kd(C),"background-color"),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Bd(C,Ed(C),"border-color"),onSetup:S.onSetupCellOrRow})),me("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),me("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Co(C),onSetup:S.onSetupTableRowHeaders}),me("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:sh(C),onSetup:S.onSetupTableRowHeaders})},ny=C=>{const S=vm(C);kr(C),Mb(C),Ca(C,S),ni(C,S),Fc(C)};var uh=()=>{ct.add("table",ny)};uh()})();(function(){const ct=Object.getPrototypeOf,En=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},sn=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&En(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},pt=t=>s=>sn(s)===t,Rt=t=>s=>typeof s===t,Jt=t=>s=>t===s,Hn=(t,s)=>Zt(t)&&En(t,s,(a,l)=>ct(a)===l),_t=pt("string"),Zt=pt("object"),Wn=t=>Hn(t,Object),vn=pt("array"),un=Jt(null),Qt=Rt("boolean"),dt=Jt(void 0),Ht=t=>t==null,it=t=>!Ht(t),ot=Rt("function"),Sn=Rt("number"),qe=(t,s)=>{if(vn(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},G=()=>{},Xe=t=>()=>t(),Nt=(t,s)=>(...a)=>t(s.apply(null,a)),at=(t,s)=>a=>t(s(a)),q=t=>()=>t,ft=t=>t,Mn=(t,s)=>t===s;function Bt(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const Pe=t=>s=>!t(s),fe=t=>()=>{throw new Error(t)},Vo=t=>t(),Zn=q(!1),jt=q(!0);class O{constructor(s,a){this.tag=s,this.value=a}static some(s){return new O(!0,s)}static none(){return O.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?O.some(s(this.value)):O.none()}bind(s){return this.tag?s(this.value):O.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:O.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return it(s)?O.some(s):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Eo=Array.prototype.slice,nt=Array.prototype.indexOf,No=Array.prototype.push,dn=(t,s)=>nt.call(t,s),je=(t,s)=>{const a=dn(t,s);return a===-1?O.none():O.some(a)},po=(t,s)=>dn(t,s)>-1,Xo=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return!0}return!1},Bo=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},Ps=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const d=Eo.call(t,l,l+s);a.push(d)}return a},_e=(t,s)=>{const a=t.length,l=new Array(a);for(let d=0;d<a;d++){const g=t[d];l[d]=s(g,d)}return l},gt=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];s(d,a)}},H=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},Hr=(t,s)=>{const a=[],l=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:l).push(p)}return{pass:a,fail:l}},Fn=(t,s)=>{const a=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&a.push(g)}return a},ms=(t,s,a)=>(H(t,(l,d)=>{a=s(a,l,d)}),a),In=(t,s,a)=>(gt(t,(l,d)=>{a=s(a,l,d)}),a),js=(t,s,a)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return O.some(g);if(a(g,l))break}return O.none()},Tt=(t,s)=>js(t,s,Zn),$t=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return O.some(a)}return O.none()},Vt=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!vn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);No.apply(s,t[a])}return s},De=(t,s)=>Vt(_e(t,s)),Gs=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},cs=t=>{const s=Eo.call(t,0);return s.reverse(),s},rn=(t,s)=>Fn(t,a=>!po(s,a)),Ea=(t,s)=>{const a={};for(let l=0,d=t.length;l<d;l++){const g=t[l];a[String(g)]=s(g,l)}return a},zo=t=>[t],_a=(t,s)=>{const a=Eo.call(t,0);return a.sort(s),a},ls=(t,s)=>s>=0&&s<t.length?O.some(t[s]):O.none(),Ms=t=>ls(t,0),Wr=t=>ls(t,t.length-1),ur=ot(Array.from)?Array.from:t=>Eo.call(t),Jo=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return O.none()},Uo=Object.keys,tt=Object.hasOwnProperty,Ye=(t,s)=>{const a=Uo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];s(p,g)}},qt=(t,s)=>en(t,(a,l)=>({k:l,v:s(a,l)})),en=(t,s)=>{const a={};return Ye(t,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},Bn=t=>(s,a)=>{t[a]=s},Yt=(t,s,a,l)=>{Ye(t,(d,g)=>{(s(d,g)?a:l)(d,g)})},Ns=(t,s)=>{const a={},l={};return Yt(t,s,Bn(a),Bn(l)),{t:a,f:l}},ga=(t,s)=>{const a={};return Yt(t,s,Bn(a),G),a},rr=(t,s)=>{const a=[];return Ye(t,(l,d)=>{a.push(s(l,d))}),a},xs=(t,s)=>{const a=Uo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];if(s(p,g,t))return O.some(p)}return O.none()},Mr=t=>rr(t,ft),ht=(t,s)=>so(t,s)?O.from(t[s]):O.none(),so=(t,s)=>tt.call(t,s),ha=(t,s)=>so(t,s)&&t[s]!==void 0&&t[s]!==null,ar=(t,s,a=Mn)=>t.exists(l=>a(l,s)),Uc=(t,s,a=Mn)=>Ya(t,s,a).getOr(t.isNone()&&s.isNone()),Ka=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},Qo=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return O.none()}return O.some(s)},Ya=(t,s,a)=>t.isSome()&&s.isSome()?O.some(a(t.getOrDie(),s.getOrDie())):O.none(),pa=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?O.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):O.none(),Wo=(t,s)=>t!=null?O.some(s(t)):O.none(),_n=(t,s)=>t?O.some(s):O.none(),Zr=(t,s)=>t+s,Oa=(t,s)=>t.substring(s),Xa=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Ja=(t,s)=>ys(t,s)?Oa(t,s.length):t,Is=(t,s)=>yr(t,s)?t:Zr(t,s),dr=(t,s,a=0,l)=>{const d=t.indexOf(s,a);return d!==-1?dt(l)?!0:d+s.length<=l:!1},ys=(t,s)=>Xa(t,s,0),yr=(t,s)=>Xa(t,s,t.length-s.length),se=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Be=t=>t.length>0,Re=t=>!Be(t),Xt=t=>t.style!==void 0&&ot(t.style.getPropertyValue),yn=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Yn(l.childNodes[0])},no=(t,s)=>{const l=(s||document).createElement(t);return Yn(l)},jo=(t,s)=>{const l=(s||document).createTextNode(t);return Yn(l)},Yn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},pe={fromHtml:yn,fromTag:no,fromText:jo,fromDom:Yn,fromPoint:(t,s,a)=>O.from(t.dom.elementFromPoint(s,a)).map(Yn)},Fo=typeof window<"u"?window:Function("return this;")(),wr=(t,s)=>{let a=s??Fo;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},mr=(t,s)=>{const a=t.split(".");return wr(a,s)},Wc=(t,s)=>mr(t,s),bo=(t,s)=>{const a=Wc(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Cl=Object.getPrototypeOf,Cr=t=>bo("HTMLElement",t),fr=t=>{const s=mr("ownerDocument.defaultView",t);return Zt(t)&&(Cr(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Cl(t).constructor.name))},qs=9,Ts=11,fs=1,Zc=3,Qa=t=>t.dom.nodeName.toLowerCase(),hc=t=>t.dom.nodeType,ol=t=>s=>hc(s)===t,sl=t=>Lo(t)&&fr(t.dom),Lo=ol(fs),ba=ol(Zc),Ac=ol(qs),pc=ol(Ts),Aa=t=>s=>Lo(s)&&Qa(s)===t,Sr=(t,s)=>{const a=t.dom;if(a.nodeType!==fs)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},_s=t=>t.nodeType!==fs&&t.nodeType!==qs&&t.nodeType!==Ts||t.childElementCount===0,au=(t,s)=>{const a=s===void 0?document:s.dom;return _s(a)?[]:_e(a.querySelectorAll(t),pe.fromDom)},Kl=(t,s)=>{const a=s===void 0?document:s.dom;return _s(a)?O.none():O.from(a.querySelector(t)).map(pe.fromDom)},es=(t,s)=>t.dom===s.dom,sa=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},va=t=>pe.fromDom(t.dom.ownerDocument),Ks=t=>Ac(t)?t:va(t),Yl=t=>pe.fromDom(Ks(t).dom.documentElement),ec=t=>pe.fromDom(Ks(t).dom.defaultView),ra=t=>O.from(t.dom.parentNode).map(pe.fromDom),bc=t=>O.from(t.dom.parentElement).map(pe.fromDom),vi=(t,s)=>{const a=ot(s)?s:Zn;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,p=pe.fromDom(g);if(d.push(p),a(p)===!0)break;l=g}return d},Sl=t=>O.from(t.dom.offsetParent).map(pe.fromDom),yi=t=>O.from(t.dom.nextSibling).map(pe.fromDom),ya=t=>_e(t.dom.childNodes,pe.fromDom),Dc=(t,s)=>{const a=t.dom.childNodes;return O.from(a[s]).map(pe.fromDom)},Xl=t=>Dc(t,0),jc=(t,s)=>({element:t,offset:s}),Jl=(t,s)=>{const a=ya(t);return a.length>0&&s<a.length?jc(a[s],0):jc(t,s)},Z=t=>pc(t)&&it(t.dom.host),le=ot(Element.prototype.attachShadow)&&ot(Node.prototype.getRootNode),be=q(le),$e=le?t=>pe.fromDom(t.dom.getRootNode()):Ks,rt=t=>Z(t)?t:pe.fromDom(Ks(t).dom.body),wn=t=>os(t).isSome(),os=t=>{const s=$e(t);return Z(s)?O.some(s):O.none()},xr=t=>pe.fromDom(t.dom.host),wo=t=>{if(be()&&it(t.target)){const s=pe.fromDom(t.target);if(Lo(s)&&Tr(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Ms(a)}}return O.from(t.target)},Tr=t=>it(t.dom.shadowRoot),$o=t=>{const s=ba(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return os(pe.fromDom(s)).fold(()=>a.body.contains(s),at($o,xr))},Ws=()=>Rc(pe.fromDom(document)),Rc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return pe.fromDom(s)},vc=(t,s,a)=>{if(_t(a)||Qt(a)||Sn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Vn=(t,s,a)=>{vc(t.dom,s,a)},Io=(t,s)=>{const a=t.dom;Ye(s,(l,d)=>{vc(a,d,l)})},jr=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},$=(t,s)=>O.from(jr(t,s)),K=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ne=(t,s)=>{t.dom.removeAttribute(s)},Ae=t=>In(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Pt=(t,s,a)=>{if(!_t(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Xt(t)&&t.style.setProperty(s,a)},Xn=(t,s)=>{Xt(t)&&t.style.removeProperty(s)},Kt=(t,s,a)=>{const l=t.dom;Pt(l,s,a)},Nr=(t,s)=>{const a=t.dom;Ye(s,(l,d)=>{Pt(a,d,l)})},Gr=(t,s)=>{const a=t.dom;Ye(s,(l,d)=>{l.fold(()=>{Xn(a,d)},g=>{Pt(a,d,g)})})},Qe=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!$o(t)?Br(a,s):d},Br=(t,s)=>Xt(t)?t.style.getPropertyValue(s):"",Ys=(t,s)=>{const a=t.dom,l=Br(a,s);return O.from(l).filter(d=>d.length>0)},qr=t=>{const s={},a=t.dom;if(Xt(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},Cd=(t,s,a)=>{const l=pe.fromTag(t);return Kt(l,s,a),Ys(l,s).isSome()},mo=(t,s)=>{const a=t.dom;Xn(a,s),ar($(t,"style").map(se),"")&&ne(t,"style")},Y=t=>t.dom.offsetWidth,oe=(t,s)=>{const a=(y,x)=>{if(!Sn(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const _=y.dom;Xt(_)&&(_.style[t]=x+"px")},l=y=>{const x=s(y);if(x<=0||x===null){const _=Qe(y,t);return parseFloat(_)||0}return x},d=l,g=(y,x)=>In(x,(_,D)=>{const B=Qe(y,D),I=B===void 0?0:parseInt(B,10);return isNaN(I)?_:_+I},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(y,x,_)=>{const D=g(y,_);return x>D?x-D:0}}},Se=oe("height",t=>{const s=t.dom;return $o(t)?s.getBoundingClientRect().height:s.offsetHeight}),Le=t=>Se.get(t),tn=t=>Se.getOuter(t),_o=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Se.max(t,s,a);Kt(t,"max-height",l+"px")},Fs=(t,s)=>({left:t,top:s,translate:(l,d)=>Fs(t+l,s+d)}),vo=Fs,Bs=t=>{const s=t.getBoundingClientRect();return vo(s.left,s.top)},aa=(t,s)=>t!==void 0?t:s!==void 0?s:0,ws=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===t.dom)return vo(a.offsetLeft,a.offsetTop);const g=aa(l==null?void 0:l.pageYOffset,d.scrollTop),p=aa(l==null?void 0:l.pageXOffset,d.scrollLeft),y=aa(d.clientTop,a.clientTop),x=aa(d.clientLeft,a.clientLeft);return yc(t).translate(p-x,g-y)},yc=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?vo(l.offsetLeft,l.offsetTop):$o(t)?Bs(s):vo(0,0)},Gc=oe("width",t=>t.dom.offsetWidth),hs=(t,s)=>Gc.set(t,s),ca=t=>Gc.get(t),Xs=t=>Gc.getOuter(t),Pl=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Gc.max(t,s,a);Kt(t,"max-width",l+"px")},Ii=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},Os=(t,s,a,l)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),y=p||l("(pointer:coarse)"),x=d||!g&&p&&l("(min-device-width:768px)"),_=g||p&&!x,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,B=!_&&!x&&!D;return{isiPad:q(d),isiPhone:q(g),isTablet:q(x),isPhone:q(_),isTouch:q(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(D),isDesktop:q(B)}},wc=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},Il=(t,s)=>{const a=wc(t,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return rl(l(1),l(2))},Sd=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?wi():Il(t,a)},wi=()=>rl(0,0),rl=(t,s)=>({major:t,minor:s}),Vr={nu:rl,detect:Sd,unknown:wi},tc=(t,s)=>Jo(s.brands,a=>{const l=a.brand.toLowerCase();return Tt(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Vr.nu(parseInt(a.version,10),0)}))}),Mc=(t,s)=>{const a=String(s).toLowerCase();return Tt(t,l=>l.search(a))},al=(t,s)=>Mc(t,s).map(a=>{const l=Vr.detect(a.versionRegexes,s);return{current:a.name,version:l}}),La=(t,s)=>Mc(t,s).map(a=>{const l=Vr.detect(a.versionRegexes,s);return{current:a.name,version:l}}),kr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qc=t=>s=>dr(s,t),um=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>dr(t,"edge/")&&dr(t,"chrome")&&dr(t,"safari")&&dr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kr],search:t=>dr(t,"chrome")&&!dr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>dr(t,"msie")||dr(t,"trident")},{name:"Opera",versionRegexes:[kr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qc("firefox")},{name:"Safari",versionRegexes:[kr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(dr(t,"safari")||dr(t,"mobile/"))&&dr(t,"applewebkit")}],cu=[{name:"Windows",search:qc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>dr(t,"iphone")||dr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:qc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qc("linux"),versionRegexes:[]},{name:"Solaris",search:qc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],lu={browsers:q(um),oses:q(cu)},Qm="Edge",xl="Chromium",iu="IE",xd="Opera",$r="Firefox",dm="Safari",Pu=()=>Iu({current:void 0,version:Vr.unknown()}),Iu=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(Qm),isChromium:l(xl),isIE:l(iu),isOpera:l(xd),isFirefox:l($r),isSafari:l(dm)}},Td={unknown:Pu,nu:Iu,edge:q(Qm),chromium:q(xl),ie:q(iu),opera:q(xd),firefox:q($r),safari:q(dm)},kd="Windows",Ed="iOS",Fu="Android",ef="Linux",tf="macOS",uu="Solaris",Ep="FreeBSD",re="ChromeOS",_d=()=>Nc({current:void 0,version:Vr.unknown()}),Nc=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(kd),isiOS:l(Ed),isAndroid:l(Fu),isMacOS:l(tf),isLinux:l(ef),isSolaris:l(uu),isFreeBSD:l(Ep),isChromeOS:l(re)}},Gf={unknown:_d,nu:Nc,windows:q(kd),ios:q(Ed),android:q(Fu),linux:q(ef),macos:q(tf),solaris:q(uu),freebsd:q(Ep),chromeos:q(re)},Op={detect:(t,s,a)=>{const l=lu.browsers(),d=lu.oses(),g=s.bind(x=>tc(l,x)).orThunk(()=>al(l,t)).fold(Td.unknown,Td.nu),p=La(d,t).fold(Gf.unknown,Gf.nu),y=Os(p,g,t,a);return{browser:g,os:p,deviceType:y}}},ss=t=>window.matchMedia(t).matches;let Fl=Ii(()=>Op.detect(navigator.userAgent,O.from(navigator.userAgentData),ss));const Cc=()=>Fl(),cl=(t,s,a,l,d,g,p)=>({target:t,x:s,y:a,stop:l,prevent:d,kill:g,raw:p}),Qg=t=>{const s=pe.fromDom(wo(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Nt(l,a);return cl(s,t.clientX,t.clientY,a,l,d,t)},Fi=(t,s)=>a=>{t(a)&&s(Qg(a))},Tl=(t,s,a,l,d)=>{const g=Fi(a,l);return t.dom.addEventListener(s,g,d),{unbind:Bt(eh,t,s,g,d)}},mm=(t,s,a,l)=>Tl(t,s,a,l,!1),qf=(t,s,a,l)=>Tl(t,s,a,l,!0),eh=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},Kc=(t,s)=>{ra(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},Od=(t,s)=>{yi(t).fold(()=>{ra(t).each(d=>{ll(d,s)})},l=>{Kc(l,s)})},th=(t,s)=>{Xl(t).fold(()=>{ll(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},ll=(t,s)=>{t.dom.appendChild(s.dom)},Da=(t,s,a)=>{Dc(t,a).fold(()=>{ll(t,s)},l=>{Kc(l,s)})},Ad=(t,s)=>{gt(s,a=>{ll(t,a)})},Dd=t=>{t.dom.textContent="",gt(ya(t),s=>{Ll(s)})},Ll=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Bc=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return vo(a,l)},nf=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},of=t=>{const s=t===void 0?window:t;return Cc().browser.isFirefox()?O.none():O.from(s.visualViewport)},sf=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),rf=t=>{const s=t===void 0?window:t,a=s.document,l=Bc(pe.fromDom(a));return of(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return sf(l.left,l.top,g,p)},d=>sf(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},Ql=()=>pe.fromDom(document),fm=(t,s)=>t.view(s).fold(q([]),l=>{const d=t.owner(l),g=fm(t,d);return[l].concat(g)}),nh=(t,s)=>{const a=s.owner(t),l=fm(s,a);return O.some(l)};var gm=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?O.none():O.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(pe.fromDom)},owner:t=>va(t)});const Kf=t=>{const s=Ql(),a=Bc(s);return nh(t,gm).fold(Bt(ws,t),d=>{const g=yc(t),p=ms(d,(y,x)=>{const _=yc(x);return{left:y.left+_.left,top:y.top+_.top}},{left:0,top:0});return vo(p.left+g.left+a.left,p.top+g.top+a.top)})},Li=(t,s,a)=>({point:t,width:s,height:a}),Yf=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),Zs=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),E=t=>{const s=ws(t),a=Xs(t),l=tn(t);return Zs(s.left,s.top,a,l)},M=t=>{const s=Kf(t),a=Xs(t),l=tn(t);return Zs(s.left,s.top,a,l)},z=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,y=g-l;return Zs(a,l,p,y)},ie=(t,s)=>In(s,(a,l)=>z(a,l),t),de=()=>rf(window);var xt=tinymce.util.Tools.resolve("tinymce.ThemeManager");const On=t=>{const s=g=>g(t),a=q(t),l=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:jt,isError:Zn,map:g=>St.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>O.some(t)};return d},jn=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:Zn,isError:jt,map:s,mapError:l=>St.error(l(t)),bind:s,exists:Zn,forall:jt,getOr:ft,or:ft,getOrThunk:Vo,orThunk:Vo,getOrDie:fe(String(t)),each:G,toOptional:O.none};return a},St={value:On,error:jn,fromOption:(t,s)=>t.fold(()=>jn(s),On)};var gs;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(gs||(gs={}));const wa=(t,s,a)=>t.stype===gs.Error?s(t.serror):a(t.svalue),kl=t=>{const s=[],a=[];return gt(t,l=>{wa(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},hm=(t,s)=>t.stype===gs.Error?{stype:gs.Error,serror:s(t.serror)}:t,Xf=(t,s)=>t.stype===gs.Value?{stype:gs.Value,svalue:s(t.svalue)}:t,Ci=(t,s)=>t.stype===gs.Value?s(t.svalue):t,El=(t,s)=>t.stype===gs.Error?s(t.serror):t,$c=t=>({stype:gs.Value,svalue:t}),Hl=t=>({stype:gs.Error,serror:t}),is={fromResult:t=>t.fold(Hl,$c),toResult:t=>wa(t,St.error,St.value),svalue:$c,partition:kl,serror:Hl,bind:Ci,bindError:El,map:Xf,mapError:hm,fold:wa},Lu=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),Rd=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Pr=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},_b=(t,s)=>s,X0=(t,s)=>Wn(t)&&Wn(s)?$s(t,s):s,Hu=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)so(d,g)&&(a[g]=t(a[g],d[g]))}return a},$s=Hu(X0),Ls=Hu(_b),la=()=>({tag:"required",process:{}}),Md=t=>({tag:"defaultedThunk",process:t}),Nd=t=>Md(q(t)),pm=()=>({tag:"option",process:{}}),Bd=t=>({tag:"mergeWithThunk",process:t}),Co=t=>Bd(q(t)),sh=(t,s)=>t.length>0?is.svalue($s(s,Ls.apply(void 0,t))):is.svalue(s),Ap=t=>Nt(is.serror,Vt)(t),Jf={consolidateObj:(t,s)=>{const a=is.partition(t);return a.errors.length>0?Ap(a.errors):sh(a.values,s)},consolidateArr:t=>{const s=is.partition(t);return s.errors.length>0?Ap(s.errors):is.svalue(s.values)}},Ob=t=>Zt(t)&&Uo(t).length>100?" removed due to size":JSON.stringify(t,null,2),Qf=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):t;return _e(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Si=(t,s)=>is.serror([{path:t,getErrorInfo:s}]),Ab=(t,s,a)=>Si(t,()=>'Could not find valid *required* value for "'+s+'" in '+Ob(a)),rh=(t,s)=>Si(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Db=(t,s,a)=>Si(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Ob(s)),Hi=(t,s)=>Si(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Dp=(t,s)=>Si(t,q(s)),Vi=t=>{const s=(l,d)=>is.bindError(t(d),g=>Dp(l,g)),a=q("val");return{extract:s,toString:a}},af=Vi(is.svalue),Rb=(t,s,a,l)=>ht(s,a).fold(()=>Ab(t,a,s),l),ah=(t,s,a,l)=>{const d=ht(t,s).getOrThunk(()=>a(t));return l(d)},Rp=(t,s,a)=>a(ht(t,s)),Mp=(t,s,a,l)=>{const d=ht(t,s).map(g=>g===!0?a(t):g);return l(d)},nc=(t,s,a,l,d)=>{const g=y=>d.extract(s.concat([l]),y),p=y=>y.fold(()=>is.svalue(O.none()),x=>{const _=d.extract(s.concat([l]),x);return is.map(_,O.some)});switch(t.tag){case"required":return Rb(s,a,l,g);case"defaultedThunk":return ah(a,l,t.process,g);case"option":return Rp(a,l,p);case"defaultedOptionThunk":return Mp(a,l,t.process,p);case"mergeWithThunk":return ah(a,l,q({}),y=>{const x=$s(t.process(a),y);return g(x)})}},Np=(t,s,a)=>{const l={},d=[];for(const g of a)Pr(g,(p,y,x,_)=>{const D=nc(x,t,s,p,_);is.fold(D,B=>{d.push(...B)},B=>{l[y]=B})},(p,y)=>{l[p]=y(s)});return d.length>0?is.serror(d):is.svalue(l)},ia=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),$d=t=>Uo(ga(t,it)),il=t=>{const s=ze(t),a=ms(t,(d,g)=>Pr(g,p=>$s(d,{[p]:!0}),q(d)),{});return{extract:(d,g)=>{const p=Qt(g)?[]:$d(g),y=Fn(p,x=>!ha(a,x));return y.length===0?s.extract(d,g):Hi(d,y)},toString:s.toString}},ze=t=>({extract:(l,d)=>Np(l,d,t),toString:()=>`obj{
`+_e(t,d=>Pr(d,(g,p,y,x)=>g+" -> "+x.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),zi=t=>({extract:(l,d)=>{const g=_e(d,(p,y)=>t.extract(l.concat(["["+y+"]"]),p));return Jf.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),ei=(t,s)=>{const a=s!==void 0?s:ft;return{extract:(g,p)=>{const y=[];for(const x of t){const _=x.extract(g,p);if(_.stype===gs.Value)return{stype:gs.Value,svalue:a(_.svalue)};y.push(_)}return Jf.consolidateArr(y)},toString:()=>"oneOf("+_e(t,g=>g.toString()).join(", ")+")"}},Vu=(t,s)=>{const a=(g,p)=>zi(Vi(t)).extract(g,p);return{extract:(g,p)=>{const y=Uo(p),x=a(g,y);return is.bind(x,_=>{const D=_e(_,B=>Lu(B,B,la(),s));return ze(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},Bp=(t,s)=>{const a=Ii(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},$p=Nt(zi,ze),oc=q(af),zu=(t,s)=>Vi(a=>{const l=typeof a;return t(a)?is.svalue(a):is.serror(`Expected type: ${s} but got: ${l}`)}),xi=zu(Sn,"number"),Va=zu(_t,"string"),bm=zu(Qt,"boolean"),mt=zu(ot,"function"),Pp=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Pp(t[s]));default:return!1}},ey=Vi(t=>Pp(t)?is.svalue(t):is.serror("Expected value to be acceptable for sending via postMessage")),Uu=(t,s,a,l)=>ht(a,l).fold(()=>Db(t,a,l),g=>g.extract(t.concat(["branch: "+l]),s)),Ui=(t,s)=>({extract:(d,g)=>ht(g,t).fold(()=>rh(d,t),y=>Uu(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+Uo(s)}),ch=()=>zi(af),gr=t=>Vi(s=>t(s).fold(is.serror,is.svalue)),cf=(t,s)=>Vu(a=>is.fromResult(t(a)),s),Wi=(t,s,a)=>{const l=s.extract([t],a);return is.mapError(l,d=>({input:a,errors:d}))},oo=(t,s,a)=>is.toResult(Wi(t,s,a)),Vl=t=>t.fold(s=>{throw new Error(_l(s))},ft),ul=(t,s,a)=>Vl(oo(t,s,a)),_l=t=>`Errors: 
`+Qf(t.errors).join(`
`)+`

Input object: `+Ob(t.input),dl=(t,s)=>Ui(t,qt(s,ze)),ti=(t,s)=>Bp(t,s),ps=Lu,Pc=Rd,lh=t=>gr(s=>po(t,s)?St.value(s):St.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Je=t=>ps(t,t,la(),oc()),ml=(t,s)=>ps(t,t,la(),s),eg=t=>ml(t,xi),Qr=t=>ml(t,Va),du=(t,s)=>ps(t,t,la(),lh(s)),Ip=t=>ml(t,bm),Ti=t=>ml(t,mt),ty=(t,s)=>ps(t,t,pm(),Vi(a=>is.serror("The field: "+t+" is forbidden. "+s))),Wu=(t,s)=>ps(t,t,la(),ze(s)),Mb=(t,s)=>ps(t,t,la(),$p(s)),Ol=(t,s)=>ps(t,t,la(),zi(s)),rs=t=>ps(t,t,pm(),oc()),mu=(t,s)=>ps(t,t,pm(),s),tg=t=>mu(t,xi),ea=t=>mu(t,Va),fl=(t,s)=>mu(t,lh(s)),vm=t=>mu(t,mt),ng=(t,s)=>mu(t,zi(s)),za=(t,s)=>mu(t,ze(s)),ih=(t,s)=>mu(t,il(s)),xe=(t,s)=>ps(t,t,Nd(s),oc()),Ic=(t,s,a)=>ps(t,t,Nd(s),a),lf=(t,s)=>Ic(t,s,xi),Sc=(t,s)=>Ic(t,s,Va),ni=(t,s,a)=>Ic(t,s,lh(a)),Fc=(t,s)=>Ic(t,s,bm),Ca=(t,s)=>Ic(t,s,mt),ny=(t,s)=>Ic(t,s,ey),uh=(t,s,a)=>Ic(t,s,zi(a)),C=(t,s,a)=>Ic(t,s,ze(a)),S=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},W={generate:t=>{if(!vn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return gt(t,(l,d)=>{const g=Uo(l);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],y=l[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!vn(y))throw new Error("case arguments must be an array");s.push(p),a[p]=(...x)=>{const _=x.length;if(_!==y.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+y.length+" ("+y+"), got "+_);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,x)},match:B=>{const I=Uo(B);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!Gs(s,X=>po(I,X)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return B[p].apply(null,x)},log:B=>{console.log(B,{constructors:s,constructor:p,params:x})}}}}),a}};W.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const me=t=>{const s=[],a=[];return gt(t,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Ie=(t,s)=>{const a={};return Ye(t,(l,d)=>{po(s,d)||(a[d]=l)}),a},bt=(t,s)=>({[t]:s}),Gt=t=>{const s={};return gt(t,a=>{s[a.key]=a.value}),s},qn=(t,s)=>Ie(t,s),Kn=(t,s)=>bt(t,s),ts=t=>Gt(t),ks=(t,s)=>t.length===0?St.value(s):St.value($s(s,Ls.apply(void 0,t))),cr=t=>St.error(Vt(t)),gl=(t,s)=>{const a=me(t);return a.errors.length>0?cr(a.errors):ks(a.values,s)},sc=t=>ot(t)?t:Zn,Zu=(t,s,a)=>{let l=t.dom;const d=sc(a);for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l),p=s(g);if(p.isSome())return p;if(d(g))break}return O.none()},oi=(t,s,a)=>{const l=s(t),d=sc(a);return l.orThunk(()=>d(t)?O.none():Zu(t,s,d))},ym=(t,s)=>es(t.element,s.event.target),og={can:jt,abort:Zn,run:G},si=t=>{if(!ha(t,"can")&&!ha(t,"abort")&&!ha(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...og,...t}},wm=(t,s)=>(...a)=>In(t,(l,d)=>l&&s(d).apply(void 0,a),!0),dh=(t,s)=>(...a)=>In(t,(l,d)=>l||s(d).apply(void 0,a),!1),mh=t=>ot(t)?{can:jt,abort:Zn,run:t}:t,uf=t=>{const s=wm(t,d=>d.can),a=dh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{gt(t,g=>{g.run.apply(void 0,d)})}}},Ra=q,fu=Ra("touchstart"),Oo=Ra("touchmove"),Hs=Ra("touchend"),Yc=Ra("touchcancel"),As=Ra("mousedown"),fh=Ra("mousemove"),Cm=Ra("mouseout"),Sm=Ra("mouseup"),ki=Ra("mouseover"),df=Ra("focusin"),Nb=Ra("focusout"),ri=Ra("keydown"),mf=Ra("keyup"),Pd=Ra("input"),gu=Ra("change"),Zi=Ra("click"),Fp=Ra("transitioncancel"),gh=Ra("transitionend"),o2=Ra("transitionstart"),Yk=Ra("selectstart"),zr=t=>q("alloy."+t),Xk={tap:zr("tap")},Id=zr("focus"),oy=zr("blur.post"),sy=zr("paste.post"),Ir=zr("receive"),hl=zr("execute"),hh=zr("focus.item"),sg=Xk.tap,s2=zr("longpress"),ph=zr("sandbox.close"),Lp=zr("typeahead.cancel"),Bb=zr("system.init"),Jk=zr("system.touchmove"),ry=zr("system.touchend"),Hp=zr("system.scroll"),rg=zr("system.resize"),Fd=zr("system.attached"),ju=zr("system.detached"),xm=zr("system.dismissRequested"),$b=zr("system.repositionRequested"),ff=zr("focusmanager.shifted"),ay=zr("slotcontainer.visibility"),r2=zr("system.external.element.scroll"),cy=zr("change.tab"),a2=zr("dismiss.tab"),ly=zr("highlight"),Pb=zr("dehighlight"),Go=(t,s)=>{bh(t,t.element,s,{})},xn=(t,s,a)=>{bh(t,t.element,s,a)},Ld=t=>{Go(t,hl())},Vp=(t,s,a)=>{bh(t,s,a,{})},bh=(t,s,a,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(a,s,d)},Qk=(t,s,a,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(a,s,d)},Ib=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},Js=t=>ts(t),iy=(t,s)=>({key:t,value:si({abort:s})}),c2=(t,s)=>({key:t,value:si({can:s})}),l2=t=>({key:t,value:si({run:(s,a)=>{a.event.prevent()}})}),et=(t,s)=>({key:t,value:si({run:s})}),zp=(t,s,a)=>({key:t,value:si({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),eE=t=>s=>et(t,s),Hd=t=>s=>({key:t,value:si({run:(a,l)=>{ym(a,l)&&s(a,l)}})}),Fb=(t,s)=>et(t,(a,l)=>{a.getSystem().getByUid(s).each(d=>{Ib(d,d.element,t,l)})}),vh=(t,s,a)=>{const l=s.partUids[a];return Fb(t,l)},Up=(t,s)=>et(t,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>oi(d.target,y=>a.getSystem().getByDom(y).toOptional(),Zn).getOr(a));s(a,g,l)}),ag=t=>et(t,(s,a)=>{a.cut()}),Tm=t=>et(t,(s,a)=>{a.stop()}),yh=(t,s)=>Hd(t)(s),Fr=Hd(Fd()),Al=Hd(ju()),wh=Hd(Bb()),Vd=eE(hl()),tE=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,ya(pe.fromDom(l))},Lb=t=>t.dom.innerHTML,km=(t,s)=>{const l=va(t).dom,d=pe.fromDom(l.createDocumentFragment()),g=tE(s,l);Ad(d,g),Dd(t),ll(t,d)},c3=t=>{const s=pe.fromTag("div"),a=pe.fromDom(t.dom.cloneNode(!0));return ll(s,a),Lb(s)},i2=(t,s)=>pe.fromDom(t.dom.cloneNode(s)),Dl=t=>i2(t,!1),Hb=t=>{if(Z(t))return"#shadow-root";{const s=Dl(t);return c3(s)}},Gu=t=>Hb(t),nE=(t,s,a)=>es(s,t.element)&&!es(s,a),Ch=Js([c2(Id(),(t,s)=>{const a=s.event,l=a.originator,d=a.target;return nE(t,l,d)?(console.warn(Id()+` did not get interpreted by the desired target. 
Originator: `+Gu(l)+`
Target: `+Gu(d)+`
Check the `+Id()+" event handlers"),!1):!0})]);var pl=Object.freeze({__proto__:null,events:Ch});let gf=0;const nn=t=>{const a=new Date().getTime(),l=Math.floor(Math.random()*1e9);return gf++,t+"_"+l+gf+String(a)},u2=q("alloy-id-"),Lc=q("data-alloy-id"),d2=u2(),uy=Lc(),oE=(t,s)=>{const a=nn(d2+t);return Wp(s,a),a},Wp=(t,s)=>{Object.defineProperty(t.dom,uy,{value:s,writable:!0})},ai=t=>{const s=Lo(t)?t.dom[uy]:null;return O.from(s)},Em=t=>nn(t),m2=ft,cg=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Gu(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:q("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Zn}},sE=cg(),f2=(t,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),p=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Sh(p.slice(0,1).concat(p.slice(3)))}),t},Sh=t=>_e(t,s=>yr(s,"/*")?s.substring(0,s.length-2):s),lg=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Sh(g)}),t},Vb=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Sh(g.slice(1))}),t},ig=nn("alloy-premade"),zb=t=>(Object.defineProperty(t.element.dom,ig,{value:t.uid,writable:!0}),Kn(ig,t)),Zp=t=>so(t.dom,ig),Ub=t=>ht(t,ig),hf=t=>Vb((s,...a)=>t(s.getApis(),s,...a),t),qu={init:()=>rc({readState:q("No State required")})},rc=t=>t,jp=(t,s)=>{const a=_e(s,d=>za(d.name(),[Je("config"),xe("state",qu)])),l=oo("component.behaviours",ze(a),t.behaviours).fold(d=>{throw new Error(_l(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},ft);return{list:s,data:qt(l,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return q(g)})}},g2=t=>t.list,Wb=t=>t.data,dy=(t,s)=>{const a={};return Ye(t,(l,d)=>{Ye(l,(g,p)=>{const y=ht(a,p).getOr([]);a[p]=y.concat([s(d,g)])})}),a},ci=t=>({classes:dt(t.classes)?[]:t.classes,attributes:dt(t.attributes)?{}:t.attributes,styles:dt(t.styles)?{}:t.styles}),rE=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),zd=(t,s,a,l)=>{const d={...s};gt(a,D=>{d[D.name()]=D.exhibit(t,l)});const g=dy(d,(D,B)=>({name:D,modification:B})),p=D=>ms(D,(B,I)=>({...I.modification,...B}),{}),y=ms(g.classes,(D,B)=>B.modification.concat(D),[]),x=p(g.attributes),_=p(g.styles);return ci({classes:y,attributes:x,styles:_})},xh=(t,s,a,l)=>{try{const d=_a(a,(g,p)=>{const y=g[s],x=p[s],_=l.indexOf(y),D=l.indexOf(x);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(l,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(l,null,2));return _<D?-1:D<_?1:0});return St.value(d)}catch(d){return St.error([d])}},h2=(t,s)=>({handler:t,purpose:s}),p2=(t,s)=>({cHandler:t,purpose:s}),aE=(t,s)=>p2(Bt.apply(void 0,[t.handler].concat(s)),t.purpose),Vs=t=>t.cHandler,cE=(t,s)=>({name:t,handler:s}),lE=(t,s)=>{const a={};return gt(t,l=>{a[l.name()]=l.handlers(s)}),a},b2=(t,s,a)=>{const l={...a,...lE(s,t)};return dy(l,cE)},Zb=(t,s,a,l)=>{const d=b2(t,a,l);return jb(d,s)},v2=t=>{const s=mh(t);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},ji=(t,s)=>St.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(_e(s,a=>a.name),null,2)]),xc=(t,s,a)=>{const l=s[a];return l?xh("Event: "+a,"name",t,l).map(d=>{const g=_e(d,p=>p.handler);return uf(g)}):ji(a,t)},jb=(t,s)=>{const a=rr(t,(l,d)=>(l.length===1?St.value(l[0].handler):xc(l,s,d)).map(p=>{const y=v2(p),x=l.length>1?Fn(s[d],_=>Xo(l,D=>D.name===_)).join(" > "):l[0].name;return Kn(d,h2(y,x))}));return gl(a,{})},_m="alloy.base.behaviour",ug=ze([ps("dom","dom",la(),ze([Je("tag"),xe("styles",{}),xe("classes",[]),xe("attributes",{}),rs("value"),rs("innerHtml")])),Je("components"),Je("uid"),xe("events",{}),xe("apis",{}),ps("eventOrder","eventOrder",Co({[hl()]:["disabling",_m,"toggling","typeaheadevents"],[Id()]:[_m,"focusing","keying"],[Bb()]:[_m,"disabling","toggling","representing"],[Pd()]:[_m,"representing","streaming","invalidating"],[ju()]:[_m,"representing","item-events","tooltipping"],[As()]:["focusing",_m,"item-type-events"],[fu()]:["focusing",_m,"item-type-events"],[ki()]:["item-type-events","tooltipping"],[Ir()]:["receiving","reflecting","tooltipping"]}),oc()),rs("domModification")]),ac=t=>oo("custom.definition",ug,t),y2=t=>({...t.dom,uid:t.uid,domChildren:_e(t.components,s=>s.element)}),w2=t=>t.domModification.fold(()=>ci({}),ci),l3=t=>t.events,C2=(t,s)=>{const a=jr(t,s);return a===void 0||a===""?[]:a.split(" ")},pf=(t,s,a)=>{const d=C2(t,s).concat([a]);return Vn(t,s,d.join(" ")),!0},bf=(t,s,a)=>{const l=Fn(C2(t,s),d=>d!==a);return l.length>0?Vn(t,s,l.join(" ")):ne(t,s),!1},Gb=t=>t.dom.classList!==void 0,S2=t=>C2(t,"class"),Ku=(t,s)=>pf(t,"class",s),Rl=(t,s)=>bf(t,"class",s),Ma=(t,s)=>{Gb(t)?t.dom.classList.add(s):Ku(t,s)},x2=t=>{(Gb(t)?t.dom.classList:S2(t)).length===0&&ne(t,"class")},Qs=(t,s)=>{Gb(t)?t.dom.classList.remove(s):Rl(t,s),x2(t)},Xc=(t,s)=>Gb(t)&&t.dom.classList.contains(s),hu=(t,s)=>{gt(s,a=>{Ma(t,a)})},Jc=(t,s)=>{gt(s,a=>{Qs(t,a)})},Om=(t,s)=>Gs(s,a=>Xc(t,a)),Gp=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},vf=t=>Gb(t)?Gp(t):S2(t),Ei=t=>t.dom.value,Gi=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},my=(t,s,a)=>Dc(t,s).map(d=>{if(a.exists(p=>!es(p,d))){const p=a.map(Qa).getOr("span"),y=pe.fromTag(p);return Kc(d,y),y}else return d}),qp=(t,s,a)=>{a.fold(()=>ll(t,s),l=>{es(l,s)||(Kc(l,s),Ll(l))})},T2=(t,s,a)=>{const l=_e(s,a),d=ya(t);return gt(d.slice(l.length),Ll),l},fy=(t,s,a,l)=>{const d=Dc(t,s),g=l(a,d),p=my(t,s,d);return qp(t,g.element,p),g},k2=(t,s,a)=>T2(t,s,(l,d)=>fy(t,d,l,a)),Th=(t,s)=>T2(t,s,(a,l)=>{const d=Dc(t,l);return qp(t,a,d),a}),E2=(t,s)=>{const a=Uo(t),l=Uo(s),d=rn(l,a),g=Ns(t,(p,y)=>!so(s,y)||p!==s[y]).t;return{toRemove:d,toSet:g}},iE=(t,s)=>{const{class:a,style:l,...d}=Ae(s),{toSet:g,toRemove:p}=E2(t.attributes,d),y=()=>{gt(p,Ue=>ne(s,Ue)),Io(s,g)},x=qr(s),{toSet:_,toRemove:D}=E2(t.styles,x),B=()=>{gt(D,Ue=>mo(s,Ue)),Nr(s,_)},I=vf(s),V=rn(I,t.classes),X=rn(t.classes,I),ce=()=>{hu(s,X),Jc(s,V)},Te=Ue=>{km(s,Ue)},ye=()=>{const Ue=t.domChildren;Th(s,Ue)},he=()=>{const Ue=s,Ze=t.value.getOrUndefined();Ze!==Ei(Ue)&&Gi(Ue,Ze??"")};return y(),ce(),B(),t.innerHtml.fold(ye,Te),he(),s},uE=t=>{const s=pe.fromTag(t.tag);Io(s,t.attributes),hu(s,t.classes),Nr(s,t.styles),t.innerHtml.each(l=>km(s,l));const a=t.domChildren;return Ad(s,a),t.value.each(l=>{Gi(s,l)}),s},gy=(t,s)=>{try{const a=iE(t,s);return O.some(a)}catch{return O.none()}},_2=t=>t.innerHtml.isSome()&&t.domChildren.length>0,O2=(t,s)=>{const a=d=>Qa(d)===t.tag&&!_2(t)&&!Zp(d),l=s.filter(a).bind(d=>gy(t,d)).getOrThunk(()=>uE(t));return Wp(l,t.uid),l},A2=t=>{const s=ht(t,"behaviours").getOr({});return De(Uo(s),a=>{const l=s[a];return it(l)?[l.me]:[]})},D2=(t,s)=>jp(t,s),yf=t=>{const s=A2(t);return D2(t,s)},R2=(t,s,a)=>{const l=y2(t),d=w2(t),g={"alloy.base.modification":d},p=s.length>0?zd(a,g,s,l):d;return rE(l,p)},M2=(t,s,a)=>{const l={"alloy.base.behaviour":l3(t)};return Zb(a,t.eventOrder,s,l).getOrDie()},dE=(t,s)=>{const a=()=>Ue,l=S(sE),d=Vl(ac(t)),g=yf(t),p=g2(g),y=Wb(g),x=R2(d,p,y),_=O2(x,s),D=M2(d,p,y),B=S(d.components),I=Ze=>{l.set(Ze)},V=()=>{l.set(cg(a))},X=()=>{const Ze=ya(_),kt=De(Ze,st=>l.get().getByDom(st).fold(()=>[],zo));B.set(kt)},ce=Ze=>{const kt=y;return(ot(kt[Ze.name()])?kt[Ze.name()]:()=>{throw new Error("Could not find "+Ze.name()+" in "+JSON.stringify(t,null,2))})()},Te=Ze=>ot(y[Ze.name()]),ye=()=>d.apis,he=Ze=>y[Ze]().map(kt=>kt.state.readState()).getOr("not enabled"),Ue={uid:t.uid,getSystem:l.get,config:ce,hasConfigured:Te,spec:t,readState:he,getApis:ye,connect:I,disconnect:V,element:_,syncComponents:X,components:B.get,events:D};return Ue},N2=(t,s)=>{const a=ht(t,"components").getOr([]);return s.fold(()=>_e(a,cc),l=>_e(a,(d,g)=>Kp(d,Dc(l,g))))},dg=(t,s)=>{const{events:a,...l}=m2(t),d=N2(l,s),g={...l,events:{...pl,...a},components:d};return St.value(dE(g,s))},Er=t=>{const s=pe.fromText(t);return Am({element:s})},Am=t=>{const s=ul("external.component",il([Je("element"),rs("uid")]),t),a=S(cg()),l=y=>{a.set(y)},d=()=>{a.set(cg(()=>p))},g=s.uid.getOrThunk(()=>Em("external"));Wp(s.element,g);const p={uid:g,getSystem:a.get,config:O.none,hasConfigured:Zn,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:q("No state"),syncComponents:G,components:q([]),events:{}};return zb(p)},B2=Em,mE=t=>so(t,"uid"),Kp=(t,s)=>Ub(t).getOrThunk(()=>{const a=mE(t)?t:{uid:B2(""),...t};return dg(a,s).getOrDie()}),cc=t=>Kp(t,O.none()),zl=zb;var hy=(t,s,a,l,d)=>t(a,l)?O.some(a):ot(d)&&d(a)?O.none():s(a,l,d);const qb=(t,s,a)=>{let l=t.dom;const d=ot(a)?a:Zn;for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l);if(s(g))return O.some(g);if(d(g))break}return O.none()},Kb=(t,s,a)=>hy((d,g)=>g(d),qb,t,s,a),fE=(t,s)=>{const a=d=>s(pe.fromDom(d));return Tt(t.dom.childNodes,a).map(pe.fromDom)},$2=(t,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=pe.fromDom(l.childNodes[d]);if(s(g))return O.some(g);const p=a(l.childNodes[d]);if(p.isSome())return p}return O.none()};return a(t.dom)},Yp=(t,s,a)=>Kb(t,s,a).isSome(),Ul=(t,s,a)=>qb(t,l=>Sr(l,s),a),P2=(t,s)=>fE(t,a=>Sr(a,s)),_r=(t,s)=>Kl(s,t),Yu=(t,s,a)=>hy((d,g)=>Sr(d,g),Ul,t,s,a),Ud="aria-controls",gE=t=>Kb(t,a=>{if(!Lo(a))return!1;const l=jr(a,"id");return l!==void 0&&l.indexOf(Ud)>-1}).bind(a=>{const l=jr(a,"id"),d=$e(a);return _r(d,`[${Ud}="${l}"]`)}),py=()=>{const t=nn(Ud);return{id:t,link:l=>{Vn(l,Ud,t)},unlink:l=>{ne(l,Ud)}}},I2=(t,s)=>gE(s).exists(a=>wf(t,a)),wf=(t,s)=>Yp(s,a=>es(a,t.element),Zn)||I2(t,s),F2="unknown";var Wd;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Wd||(Wd={}));const by=S({}),Xp=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();po(["mousemove","mouseover","mouseout",Bb()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:_e(a,g=>po(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Gu(g.target)+")":g.outcome)})}}},vy=(t,s,a)=>{switch(ht(by.get(),t).orThunk(()=>{const d=Uo(by.get());return Jo(d,g=>t.indexOf(g)>-1?O.some(by.get()[g]):O.none())}).getOr(Wd.NORMAL)){case Wd.NORMAL:return a(L2());case Wd.LOGGING:{const d=Xp(t,s),g=a(d);return d.write(),g}case Wd.STOP:return!0}},Yb=["alloy/data/Fields","alloy/debugging/Debugging"],Jp=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Tt(s,a=>a.indexOf("alloy")>0&&!Xo(Yb,l=>a.indexOf(l)>-1)).getOr(F2)}else return F2},yy={logEventCut:G,logEventStopped:G,logNoParent:G,logEventNoHandlers:G,logEventResponse:G,write:G},Qp=(t,s,a)=>vy(t,s,a),L2=q(yy),Dm=q([Je("menu"),Je("selectedMenu")]),Xb=q([Je("item"),Je("selectedItem")]);q(ze(Xb().concat(Dm())));const H2=q(ze(Xb())),wy=Wu("initSize",[Je("numColumns"),Je("numRows")]),Cf=()=>ml("markers",H2()),Zd=()=>Wu("markers",[Je("backgroundMenu")].concat(Dm()).concat(Xb())),mg=t=>Wu("markers",_e(t,Je)),He=(t,s,a)=>(Jp(),ps(s,s,a,gr(l=>St.value((...d)=>l.apply(void 0,d))))),Ao=t=>He("onHandler",t,Nd(G)),Ur=t=>He("onKeyboardHandler",t,Nd(O.none)),fg=t=>He("onHandler",t,la()),e1=t=>He("onKeyboardHandler",t,la()),us=(t,s)=>Pc(t,q(s)),Cy=t=>Pc(t,ft),t1=q(wy),Ua=(t,s,a,l,d,g,p,y=!1)=>({x:t,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:y}),jd=W.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),hE=(t,s,a,l,d,g,p,y,x)=>t.fold(s,a,l,d,g,p,y,x),V2=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),z2=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),kh=jd.southeast,Eh=jd.southwest,Jb=jd.northeast,Sy=jd.northwest,Ml=jd.south,_h=jd.north,n1=jd.east,U2=jd.west,gg=(t,s,a,l)=>{const d=t+s;return d>l?a:d<a?l:d},_i=(t,s,a)=>Math.min(Math.max(t,s),a),xy=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Tc=(t,s)=>Ea(["left","right","top","bottom"],a=>ht(s,a).map(l=>xy(t,l))),W2=(t,s,a)=>{const l=(x,_)=>s[x].map(D=>{const B=x==="top"||x==="bottom",I=B?a.top:a.left,X=(x==="left"||x==="top"?Math.max:Math.min)(D,_)+I;return B?_i(X,t.y,t.bottom):_i(X,t.x,t.right)}).getOr(_),d=l("left",t.x),g=l("top",t.y),p=l("right",t.right),y=l("bottom",t.bottom);return Zs(d,g,p-d,y-g)},Rm="layout",Qb=t=>t.x,Ty=(t,s)=>t.x+t.width/2-s.width/2,Z2=(t,s)=>t.x+t.width-s.width,ky=(t,s)=>t.y-s.height,ev=t=>t.y+t.height,Ey=(t,s)=>t.y+t.height/2-s.height/2,pE=t=>t.x+t.width,_y=(t,s)=>t.x-s.width,kc=(t,s,a)=>Ua(Qb(t),ev(t),a.southeast(),kh(),"southeast",Tc(t,{left:1,top:3}),Rm),Na=(t,s,a)=>Ua(Z2(t,s),ev(t),a.southwest(),Eh(),"southwest",Tc(t,{right:0,top:3}),Rm),li=(t,s,a)=>Ua(Qb(t),ky(t,s),a.northeast(),Jb(),"northeast",Tc(t,{left:1,bottom:2}),Rm),Or=(t,s,a)=>Ua(Z2(t,s),ky(t,s),a.northwest(),Sy(),"northwest",Tc(t,{right:0,bottom:2}),Rm),qi=(t,s,a)=>Ua(Ty(t,s),ky(t,s),a.north(),_h(),"north",Tc(t,{bottom:2}),Rm),Ar=(t,s,a)=>Ua(Ty(t,s),ev(t),a.south(),Ml(),"south",Tc(t,{top:3}),Rm),Oy=(t,s,a)=>Ua(pE(t),Ey(t,s),a.east(),n1(),"east",Tc(t,{left:0}),Rm),Ay=(t,s,a)=>Ua(_y(t,s),Ey(t,s),a.west(),U2(),"west",Tc(t,{right:1}),Rm),j2=()=>[kc,Na,li,Or,Ar,qi,Oy,Ay],tv=()=>[Na,kc,Or,li,Ar,qi,Oy,Ay],o1=()=>[li,Or,kc,Na,qi,Ar],nv=()=>[Or,li,Na,kc,qi,Ar],ov=()=>[kc,Na,li,Or,Ar,qi],s1=()=>[Na,kc,Or,li,Ar,qi],G2=(t,s)=>s.universal?t:Fn(t,a=>po(s.channels,a));var K2=Object.freeze({__proto__:null,events:t=>Js([et(Ir(),(s,a)=>{const l=t.channels,d=Uo(l),g=a,p=G2(d,g);gt(p,y=>{const x=l[y],_=x.schema,D=ul("channel["+y+`] data
Receiver: `+Gu(s.element),_,g.data);x.onReceive(s,D)})})])}),Dy=[ml("channels",cf(St.value,il([fg("onReceive"),xe("schema",oc())])))];const sv=(t,s,a)=>Vd(l=>{a(l,t,s)}),rv=(t,s,a)=>wh((l,d)=>{a(l,t,s)}),cn=(t,s,a,l,d,g)=>{const p=il(t),y=za(s,[ih("config",t)]);return X2(p,y,s,a,l,d,g)},Ry=(t,s,a,l,d,g)=>{const p=t,y=za(s,[mu("config",t)]);return X2(p,y,s,a,l,d,g)},Y2=(t,s,a)=>f2((d,...g)=>{const p=[d].concat(g);return d.config({name:q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},y=>{const x=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,y.config,y.state].concat(x))})},a,s),bE=t=>({key:t,value:void 0}),X2=(t,s,a,l,d,g,p)=>{const y=B=>ha(B,a)?B[a]():O.none(),x=qt(d,(B,I)=>Y2(a,B,I)),D={...qt(g,(B,I)=>lg(B,I)),...x,revoke:Bt(bE,a),config:B=>{const I=ul(a+"-config",t,B);return{key:a,value:{config:I,me:D,configAsRaw:Ii(()=>ul(a+"-config",t,B)),initialConfig:B,state:p}}},schema:q(s),exhibit:(B,I)=>Ya(y(B),ht(l,"exhibit"),(V,X)=>X(I,V.config,V.state)).getOrThunk(()=>ci({})),name:q(a),handlers:B=>y(B).map(I=>ht(l,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return D},vt=t=>ts(t),J2=il([Je("fields"),Je("name"),xe("active",{}),xe("apis",{}),xe("state",qu),xe("extra",{})]),Ec=t=>{const s=ul("Creating behaviour: "+t.name,J2,t);return cn(s.fields,s.name,s.active,s.apis,s.extra,s.state)},vE=il([Je("branchKey"),Je("branches"),Je("name"),xe("active",{}),xe("apis",{}),xe("state",qu),xe("extra",{})]),My=t=>{const s=ul("Creating behaviour: "+t.name,vE,t);return Ry(dl(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},yE=q(void 0),ua=Ec({fields:Dy,name:"receiving",active:K2});var wE=Object.freeze({__proto__:null,exhibit:(t,s)=>ci({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const pu=t=>t.dom.focus(),Ny=t=>t.dom.blur(),r1=t=>{const s=$e(t).dom;return t.dom===s.activeElement},Gd=(t=Ql())=>O.from(t.dom.activeElement).map(pe.fromDom),bu=t=>Gd($e(t)).filter(s=>t.dom.contains(s.dom)),cv=(t,s)=>{const a=$e(s),l=Gd(a).bind(g=>{const p=y=>es(g,y);return p(s)?O.some(s):$2(s,p)}),d=t(s);return l.each(g=>{Gd(a).filter(p=>es(p,g)).fold(()=>{pu(g)},G)}),d},vu=(t,s,a,l,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},Q2=t=>({...t,position:O.some(t.position)}),By=(t,s)=>{Gr(t,Q2(s))},lv=W.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Sf=(t,s,a,l,d,g)=>{const p=s.rect,y=p.x-a,x=p.y-l,_=p.width,D=p.height,B=d-(y+_),I=g-(x+D),V=O.some(y),X=O.some(x),ce=O.some(B),Te=O.some(I),ye=O.none();return hE(s.direction,()=>vu(t,V,X,ye,ye),()=>vu(t,ye,X,ce,ye),()=>vu(t,V,ye,ye,Te),()=>vu(t,ye,ye,ce,Te),()=>vu(t,V,X,ye,ye),()=>vu(t,V,ye,ye,Te),()=>vu(t,V,X,ye,ye),()=>vu(t,ye,X,ce,ye))},eS=(t,s)=>t.fold(()=>{const a=s.rect;return vu("absolute",O.some(a.x),O.some(a.y),O.none(),O.none())},(a,l,d,g)=>Sf("absolute",s,a,l,d,g),(a,l,d,g)=>Sf("fixed",s,a,l,d,g)),$y=(t,s)=>{const a=Bt(Kf,s),l=t.fold(a,a,()=>{const p=Bc();return Kf(s).translate(-p.left,-p.top)}),d=Xs(s),g=tn(s);return Zs(l.left,l.top,d,g)},CE=(t,s)=>s.fold(()=>t.fold(de,de,Zs),a=>t.fold(q(a),q(a),()=>{const l=iv(t,a.x,a.y);return Zs(l.left,l.top,a.width,a.height)})),iv=(t,s,a)=>{const l=vo(s,a),d=()=>{const g=Bc();return l.translate(-g.left,-g.top)};return t.fold(q(l),q(l),d)},a1=(t,s,a,l)=>t.fold(s,a,l);lv.none;const _c=lv.relative,tS=lv.fixed,Oh=(t,s)=>({anchorBox:t,origin:s}),nS=(t,s)=>Oh(t,s),uv="data-alloy-placement",oS=(t,s)=>{Vn(t,uv,s)},sS=t=>$(t,uv),SE=t=>ne(t,uv),Ah=W.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),xE=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y,right:x,bottom:_,width:D,height:B}=t,I=p>=a&&p<=d,V=y>=l&&y<=g,X=I&&V,ce=x<=d&&x>=a,Te=_<=g&&_>=l,ye=ce&&Te,he=Math.min(D,p>=a?d-p:x-a),Ue=Math.min(B,y>=l?g-y:_-l);return{originInBounds:X,sizeInBounds:ye,visibleW:he,visibleH:Ue}},rS=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y,width:x,height:_}=t,D=Math.max(a,d-x),B=Math.max(l,g-_),I=_i(p,a,D),V=_i(y,l,B),X=Math.min(I+x,d)-I,ce=Math.min(V+_,g)-V;return Zs(I,V,X,ce)},dv=(t,s,a)=>{const l=q(s.bottom-a.y),d=q(a.bottom-s.y),g=V2(t,d,d,l),p=q(s.right-a.x),y=q(a.right-s.x);return{maxWidth:z2(t,y,y,p),maxHeight:g}},aS=(t,s,a,l)=>{const d=t.bubble,g=d.offset,p=W2(l,t.restriction,g),y=t.x+g.left,x=t.y+g.top,_=Zs(y,x,s,a),{originInBounds:D,sizeInBounds:B,visibleW:I,visibleH:V}=xE(_,p),X=D&&B,ce=X?_:rS(_,p),Te=ce.width>0&&ce.height>0,{maxWidth:ye,maxHeight:he}=dv(t.direction,ce,l),Ue={rect:ce,maxHeight:he,maxWidth:ye,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:x};return X||t.alwaysFit?Ah.fit(Ue):Ah.nofit(Ue,I,V,Te)},hg=(t,s,a,l,d,g)=>{const p=l.width,y=l.height,x=(D,B,I,V,X)=>{const ce=D(a,l,d,t,g),Te=aS(ce,p,y,g);return Te.fold(q(Te),(ye,he,Ue,Ze)=>(X===Ze?Ue>V||he>I:!X&&Ze)?Te:Ah.nofit(B,I,V,X))};return In(s,(D,B)=>{const I=Bt(x,B);return D.fold(q(D),I)},Ah.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:kh(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(ft,ft)},c1=t=>{const s=S(O.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(O.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{a(),s.set(O.some(y))}}},Dh=()=>c1(t=>t.destroy()),Xu=()=>c1(t=>t.unbind()),Cs=()=>{const t=c1(G);return{...t,on:a=>t.get().each(a)}},cS=jt,bl=(t,s,a)=>mm(t,s,cS,a),Py=(t,s,a)=>qf(t,s,cS,a),lS=Qg,iS=["top","bottom","right","left"],pg="data-alloy-transition-timer",TE=(t,s)=>Om(t,s.classes),uS=(t,s,a)=>a.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),dS=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return xs(s,(l,d)=>{const g=t[d].map(a),p=l.map(a);return!Uc(g,p)}).isSome()},kE=t=>{const s=g=>{const y=Qe(t,g).split(/\s*,\s*/);return Fn(y,Be)},a=g=>{if(_t(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return yr(g,"ms")?p:p*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return In(d,(g,p,y)=>{const x=a(l[y])+a(p);return Math.max(g,x)},0)},EE=(t,s)=>{const a=Xu(),l=Xu();let d;const g=_=>{var D;const B=(D=_.raw.pseudoElement)!==null&&D!==void 0?D:"";return es(_.target,t)&&Re(B)&&po(iS,_.raw.propertyName)},p=_=>{if(Ht(_)||g(_)){a.clear(),l.clear();const D=_==null?void 0:_.raw.type;(Ht(D)||D===gh())&&(clearTimeout(d),ne(t,pg),Jc(t,s.classes))}},y=bl(t,o2(),_=>{g(_)&&(y.unbind(),a.set(bl(t,gh(),p)),l.set(bl(t,Fp(),p)))}),x=kE(t);requestAnimationFrame(()=>{d=setTimeout(p,x+17),Vn(t,pg,d)})},_E=(t,s)=>{hu(t,s.classes),$(t,pg).each(a=>{clearTimeout(parseInt(a,10)),ne(t,pg)}),EE(t,s)},mS=(t,s,a,l,d,g)=>{const p=uS(l,d,g);if(p||TE(t,l)){Kt(t,"position",a.position);const y=$y(s,t),x=eS(s,{...d,rect:y}),_=Ea(iS,D=>x[D]);dS(a,_)&&(Gr(t,_),p&&_E(t,l),Y(t))}else Jc(t,l.classes)},Rh=t=>({width:Xs(t),height:tn(t)}),l1=(t,s,a,l)=>{mo(s,"max-height"),mo(s,"max-width");const d=Rh(s);return hg(s,l.preference,t,d,a,l.bounds)},i3=(t,s)=>{const a=s.classes;Jc(t,a.off),hu(t,a.on)},bg=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},OE=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},AE=(t,s,a)=>{const l=eS(a.origin,s);a.transition.each(d=>{mS(t,a.origin,l,d,s,a.lastPlacement)}),By(t,l)},fS=(t,s)=>{oS(t,s.placement)},gS=(t,s)=>{_o(t,Math.floor(s))},hS=q((t,s)=>{gS(t,s),Nr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),vg=q((t,s)=>{gS(t,s)}),pS=(t,s,a)=>t[s]===void 0?a:t[s],DE=(t,s,a,l,d,g,p,y)=>{const x=pS(p,"maxHeightFunction",hS()),_=pS(p,"maxWidthFunction",G),D=t.anchorBox,B=t.origin,I={bounds:CE(B,g),origin:B,preference:l,maxHeightFunction:x,maxWidthFunction:_,lastPlacement:d,transition:y};return RE(D,s,a,I)},RE=(t,s,a,l)=>{const d=l1(t,s,a,l);return AE(s,d,l),fS(s,d),i3(s,d),bg(s,d,l),OE(s,d,l),{layout:d.layout,placement:d.placement}},ME=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Mh=(t,s,a,l=1)=>{const d=t*l,g=s*l,p=x=>ht(a,x).getOr([]),y=(x,_,D)=>{const B=rn(ME,D);return{offset:vo(x,_),classesOn:De(D,p),classesOff:De(B,p)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},yg=()=>Mh(0,0,{}),mv=ft,fv=(t,s)=>a=>bS(a)==="rtl"?s:t,bS=t=>Qe(t,"direction")==="rtl"?"rtl":"ltr";var qd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(qd||(qd={}));const gv="data-alloy-vertical-dir",vS=t=>Yp(t,s=>Lo(s)&&jr(s,"data-alloy-vertical-dir")===qd.BottomToTop),Ju=()=>za("layouts",[Je("onLtr"),Je("onRtl"),rs("onBottomLtr"),rs("onBottomRtl")]),xf=(t,s,a,l,d,g,p)=>{const y=p.map(vS).getOr(!1),x=s.layouts.map(V=>V.onLtr(t)),_=s.layouts.map(V=>V.onRtl(t)),D=y?s.layouts.bind(V=>V.onBottomLtr.map(X=>X(t))).or(x).getOr(d):x.getOr(a),B=y?s.layouts.bind(V=>V.onBottomRtl.map(X=>X(t))).or(_).getOr(g):_.getOr(l);return fv(D,B)(t)},Iy=(t,s,a)=>{const l=s.hotspot,d=$y(a,l.element),g=xf(t.element,s,ov(),s1(),o1(),nv(),O.some(s.hotspot.element));return O.some(mv({anchorBox:d,bubble:s.bubble.getOr(yg()),overrides:s.overrides,layouts:g}))};var yS=[Je("hotspot"),rs("bubble"),xe("overrides",{}),Ju(),us("placement",Iy)];const NE=(t,s,a)=>{const l=iv(a,s.x,s.y),d=Zs(l.left,l.top,s.width,s.height),g=xf(t.element,s,j2(),tv(),j2(),tv(),O.none());return O.some(mv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var wS=[Je("x"),Je("y"),xe("height",0),xe("width",0),xe("bubble",yg()),xe("overrides",{}),Ju(),us("placement",NE)];const CS=W.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),BE=t=>t.fold(ft,(s,a,l)=>s.translate(-a,-l)),$E=t=>t.fold(ft,ft),SS=t=>In(t,(s,a)=>s.translate(a.left,a.top),vo(0,0)),hv=t=>{const s=_e(t,BE);return SS(s)},xS=t=>{const s=_e(t,$E);return SS(s)},PE=CS.screen,IE=CS.absolute,FE=(t,s,a)=>{const l=ec(a.root).dom,d=g=>{const p=va(g),y=va(t.element);return es(p,y)};return O.from(l.frameElement).map(pe.fromDom).filter(d).map(ws)},Fy=(t,s,a)=>{const l=va(t.element),d=Bc(l),g=FE(t,s,a).getOr(d);return IE(g,d.left,d.top)},TS=(t,s,a,l)=>{const d=PE(vo(t,s));return O.some(Li(d,a,l))},kS=(t,s,a,l,d)=>t.map(g=>{const p=[s,g.point],y=a1(l,()=>xS(p),()=>xS(p),()=>hv(p)),x=Yf(y.left,y.top,g.width,g.height),_=a.showAbove?o1():ov(),D=a.showAbove?nv():s1(),B=xf(d,a,_,D,_,D,O.none());return mv({anchorBox:x,bubble:a.bubble.getOr(yg()),overrides:a.overrides,layouts:B})}),ES=(t,s,a)=>{const l=Fy(t,a,s);return s.node.filter($o).bind(d=>{const g=d.dom.getBoundingClientRect(),p=TS(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return kS(p,l,s,a,y)})};var _S=[Je("node"),Je("root"),rs("bubble"),Ju(),xe("overrides",{}),xe("showAbove",!1),us("placement",ES)];const i1="\uFEFF",Ly="Â ",u1={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},pv=W.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Vy=(t,s,a,l)=>t.fold(s,a,l),OS=t=>t.fold(ft,ft,ft),AS=pv.before,Tf=pv.on,LE=pv.after,DS={before:AS,on:Tf,after:LE,cata:Vy,getStart:OS},d1=W.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),HE=t=>d1.exact(t.start,t.soffset,t.finish,t.foffset),bv=t=>t.match({domRange:s=>pe.fromDom(s.startContainer),relative:(s,a)=>DS.getStart(s),exact:(s,a,l,d)=>s}),VE=d1.domRange,zE=d1.relative,RS=d1.exact,wg=t=>{const s=bv(t);return ec(s)},m1=u1.create,f1={domRange:VE,relative:zE,exact:RS,exactFromRange:HE,getWin:wg,range:m1},zy=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},UE=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},Uy=(t,s,a)=>{const l=t.document.createRange();return zy(l,s),UE(l,a),l},Qc=(t,s,a,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},MS=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Nh=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?O.some(a).map(MS):O.none()},WE=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?O.some(s).map(MS):O.none()},g1=W.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Cg=(t,s,a)=>s(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset),Sg=(t,s)=>s.match({domRange:a=>({ltr:q(a),rtl:O.none}),relative:(a,l)=>({ltr:Ii(()=>Uy(t,a,l)),rtl:Ii(()=>O.some(Uy(t,l,a)))}),exact:(a,l,d,g)=>({ltr:Ii(()=>Qc(t,a,l,d,g)),rtl:Ii(()=>O.some(Qc(t,d,g,a,l)))})}),vv=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>g1.rtl(pe.fromDom(d.endContainer),d.endOffset,pe.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Cg(t,g1.ltr,a)):Cg(t,g1.ltr,a)},Bh=(t,s)=>{const a=Sg(t,s);return vv(t,a)},yv=(t,s)=>Bh(t,s).match({ltr:(l,d,g,p)=>{const y=t.document.createRange();return y.setStart(l.dom,d),y.setEnd(g.dom,p),y},rtl:(l,d,g,p)=>{const y=t.document.createRange();return y.setStart(g.dom,p),y.setEnd(l.dom,d),y}});g1.ltr,g1.rtl;const kf=(t,s,a)=>Fn(vi(t,a),s),da=(t,s)=>au(s,t),xg=(t,s,a,l)=>{const g=va(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,l),g},Wy=(t,s,a,l)=>{const d=xg(t,s,a,l),g=es(t,a)&&s===l;return d.collapsed&&!g},ZE=t=>O.from(t.getSelection()),Zy=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return O.some(u1.create(pe.fromDom(s.startContainer),s.startOffset,pe.fromDom(a.endContainer),a.endOffset))}else return O.none()},$h=t=>{if(t.anchorNode===null||t.focusNode===null)return Zy(t);{const s=pe.fromDom(t.anchorNode),a=pe.fromDom(t.focusNode);return Wy(s,t.anchorOffset,a,t.focusOffset)?O.some(u1.create(s,t.anchorOffset,a,t.focusOffset)):Zy(t)}},Tg=t=>ZE(t).filter(s=>s.rangeCount>0).bind($h),jy=(t,s)=>{const a=yv(t,s);return Nh(a)},Ph=(t,s)=>{const a=yv(t,s);return WE(a)},h1=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?O.from(g.dom.nodeValue):O.none();return{get:a,getOption:l,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(ba,"text"),NS=t=>h1.get(t),Mm=(t,s)=>({element:t,offset:s}),wv=(t,s)=>{const a=ya(t);if(a.length===0)return Mm(t,s);if(s<a.length)return Mm(a[s],0);{const l=a[a.length-1],d=ba(l)?NS(l).length:ya(l).length;return Mm(l,d)}},Wa=(t,s)=>ba(t)?Mm(t,s):wv(t,s),BS=(t,s)=>s.getSelection.getOrThunk(()=>()=>Tg(t))().map(l=>{const d=Wa(l.start,l.soffset),g=Wa(l.finish,l.foffset);return f1.range(d.element,d.offset,g.element,g.offset)}),yu=(t,s,a)=>{const l=ec(s.root).dom,d=Fy(t,a,s),g=BS(l,s).bind(x=>Ph(l,f1.exactFromRange(x)).orThunk(()=>{const D=pe.fromText(i1);Kc(x.start,D);const B=jy(l,f1.exact(D,0,D,1));return Ll(D),B}).bind(D=>TS(D.left,D.top,D.width,D.height))),y=BS(l,s).bind(x=>Lo(x.start)?O.some(x.start):bc(x.start)).getOr(t.element);return kS(g,d,s,a,y)};var qy=[rs("getSelection"),Je("root"),rs("bubble"),Ju(),xe("overrides",{}),xe("showAbove",!1),us("placement",yu)];const Qu="link-layout",ed=t=>t.x+t.width,Ky=(t,s)=>t.x-s.width,Ih=(t,s)=>t.y-s.height+t.height,jE=t=>t.y,$S=(t,s,a)=>Ua(ed(t),jE(t),a.southeast(),kh(),"southeast",Tc(t,{left:0,top:2}),Qu),Cv=(t,s,a)=>Ua(Ky(t,s),jE(t),a.southwest(),Eh(),"southwest",Tc(t,{right:1,top:2}),Qu),Sv=(t,s,a)=>Ua(ed(t),Ih(t,s),a.northeast(),Jb(),"northeast",Tc(t,{left:0,bottom:3}),Qu),xv=(t,s,a)=>Ua(Ky(t,s),Ih(t,s),a.northwest(),Sy(),"northwest",Tc(t,{right:1,bottom:3}),Qu),td=()=>[$S,Cv,Sv,xv],Yy=()=>[Cv,$S,xv,Sv],GE=(t,s,a)=>{const l=$y(a,s.item.element),d=xf(t.element,s,td(),Yy(),td(),Yy(),O.none());return O.some(mv({anchorBox:l,bubble:yg(),overrides:s.overrides,layouts:d}))};var PS=[Je("item"),Ju(),xe("overrides",{}),us("placement",GE)],Xy=dl("type",{selection:qy,node:_S,hotspot:yS,submenu:PS,makeshift:wS});const Jy=[Ol("classes",Va),ni("mode","all",["all","layout","placement"])],Tv=[xe("useFixed",Zn),rs("getBounds")],IS=[ml("anchor",Xy),za("transition",Jy)],Oi=()=>{const t=document.documentElement;return tS(0,0,t.clientWidth,t.clientHeight)},kv=t=>{const s=ws(t.element),a=t.element.dom.getBoundingClientRect();return _c(s.left,s.top,a.width,a.height)},FS=(t,s,a,l,d,g)=>{const p=nS(s.anchorBox,t);return DE(p,l.element,s.bubble,s.layouts,d,a,s.overrides,g)},Fh=(t,s,a,l,d)=>{const g=O.none();el(t,s,a,l,d,g)},el=(t,s,a,l,d,g)=>{const p=ul("placement.info",ze(IS),d),y=p.anchor,x=l.element,_=a.get(l.uid);cv(()=>{Kt(x,"position","fixed");const D=Ys(x,"visibility");Kt(x,"visibility","hidden");const B=s.useFixed()?Oi():kv(t);y.placement(t,y,B).each(I=>{const V=g.orThunk(()=>s.getBounds.map(Vo)),X=FS(B,I,V,l,_,p.transition);a.set(l.uid,X)}),D.fold(()=>{mo(x,"visibility")},I=>{Kt(x,"visibility",I)}),Ys(x,"left").isNone()&&Ys(x,"top").isNone()&&Ys(x,"right").isNone()&&Ys(x,"bottom").isNone()&&ar(Ys(x,"position"),"fixed")&&mo(x,"position")},x)};var Nm=Object.freeze({__proto__:null,position:Fh,positionWithinBounds:el,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const d=l.element;gt(["position","left","right","top","bottom"],g=>mo(d,g)),SE(d),a.clear(l.uid)}}),Nl=Object.freeze({__proto__:null,init:()=>{let t={};return rc({readState:()=>t,clear:d=>{it(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>ht(t,d)})}});const Ba=Ec({fields:Tv,name:"positioning",active:wE,apis:Nm,state:Nl}),Qy=t=>t.getSystem().isConnected(),p1=t=>{Go(t,ju());const s=t.components();gt(s,p1)},kg=t=>{const s=t.components();gt(s,kg),Go(t,Fd())},b1=(t,s)=>{t.getSystem().addToWorld(s),$o(t.element)&&kg(s)},Ev=t=>{p1(t),t.getSystem().removeFromWorld(t)},v1=(t,s)=>{ll(t.element,s.element)},LS=t=>{gt(t.components(),s=>Ll(s.element)),Dd(t.element),t.syncComponents()},KE=(t,s,a)=>{const l=t.components();LS(t);const d=a(s),g=rn(l,d);gt(g,p=>{p1(p),t.getSystem().removeFromWorld(p)}),gt(d,p=>{Qy(p)?v1(t,p):(t.getSystem().addToWorld(p),v1(t,p),$o(t.element)&&kg(p))}),t.syncComponents()},YE=(t,s,a)=>{const l=t.components(),d=De(s,y=>Ub(y).toArray());gt(l,y=>{po(d,y)||Ev(y)});const g=a(s),p=rn(l,g);gt(p,y=>{Qy(y)&&Ev(y)}),gt(g,y=>{Qy(y)||b1(t,y)}),t.syncComponents()},Kd=(t,s)=>{y1(t,s,ll)},y1=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),$o(t.element)&&kg(s),t.syncComponents()},_v=t=>{p1(t),Ll(t.element),t.getSystem().removeFromWorld(t)},Yd=t=>{const s=ra(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());_v(t),s.each(a=>{a.syncComponents()})},Ov=t=>{const s=t.components();gt(s,_v),Dd(t.element),t.syncComponents()},Av=(t,s)=>{ew(t,s,ll)},Eg=(t,s)=>{ew(t,s,Od)},ew=(t,s,a)=>{a(t,s.element);const l=ya(s.element);gt(l,d=>{s.getByDom(d).each(kg)})},HS=t=>{const s=ya(t.element);gt(s,a=>{t.getByDom(a).each(p1)}),Ll(t.element)},tw=(t,s,a,l)=>{a.get().each(p=>{Ov(t)});const d=s.getAttachPoint(t);Kd(d,t);const g=t.getSystem().build(l);return Kd(t,g),a.set(g),g},Ef=(t,s,a,l)=>{const d=tw(t,s,a,l);return s.onOpen(t,d),d},XE=(t,s,a,l)=>a.get().map(()=>tw(t,s,a,l)),lc=(t,s,a,l,d)=>{Dv(t,s),Ef(t,s,a,l),d(),Rv(t,s)},JE=(t,s,a)=>{a.get().each(l=>{Ov(t),Yd(t),s.onClose(t,l),a.clear()})},Lh=(t,s,a)=>a.isOpen(),Hh=(t,s,a,l)=>Lh(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,l)),VS=(t,s,a)=>a.get(),QE=(t,s,a,l)=>{Ys(t.element,s).fold(()=>{ne(t.element,a)},d=>{Vn(t.element,a,d)}),Kt(t.element,s,l)},e_=(t,s,a)=>{$(t.element,a).fold(()=>mo(t.element,s),l=>Kt(t.element,s,l))},Dv=(t,s,a)=>{const l=s.getAttachPoint(t);Kt(t.element,"position",Ba.getMode(l)),QE(t,"visibility",s.cloakVisibilityAttr,"hidden")},t_=t=>Xo(["top","left","right","bottom"],s=>Ys(t,s).isSome()),Rv=(t,s,a)=>{t_(t.element)||mo(t.element,"position"),e_(t,"visibility",s.cloakVisibilityAttr)};var n_=Object.freeze({__proto__:null,cloak:Dv,decloak:Rv,open:Ef,openWhileCloaked:lc,close:JE,isOpen:Lh,isPartOf:Hh,getState:VS,setContent:XE}),Mv=Object.freeze({__proto__:null,events:(t,s)=>Js([et(ph(),(a,l)=>{JE(a,t,s)})])}),o_=[Ao("onOpen"),Ao("onClose"),Je("isPartOf"),Je("getAttachPoint"),xe("cloakVisibilityAttr","data-precloak-visibility")],w1=Object.freeze({__proto__:null,init:()=>{const t=Cs(),s=q("not-implemented");return rc({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Po=Ec({fields:o_,name:"sandboxing",active:Mv,apis:n_,state:w1}),Bm=q("dismiss.popups"),Vh=q("reposition.popups"),ow=q("mouse.released"),US=il([xe("isExtraPart",Zn),za("fireEventInstead",[xe("event",xm())])]),$m=t=>{const s=ul("Dismissal",US,t);return{[Bm()]:{schema:il([Je("target")]),onReceive:(a,l)=>{Po.isOpen(a)&&(Po.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Po.close(a),g=>Go(a,g.event)))}}}},zh=il([za("fireEventInstead",[xe("event",$b())]),Ti("doReposition")]),sw=t=>{const s=ul("Reposition",zh,t);return{[Vh()]:{onReceive:a=>{Po.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>Go(a,l.event))}}}},rw=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Nv=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var S1=Object.freeze({__proto__:null,onLoad:rw,onUnload:Nv,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),jS=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Fr((l,d)=>{rw(l,t,s)}),Al((l,d)=>{Nv(l,t,s)})]:[rv(t,s,rw)];return Js(a)}});const Uh=()=>{const t=S(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return rc({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},$v=()=>rc({readState:G}),_g=()=>{const t=S({}),s=S({});return rc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>ht(t.get(),p).orThunk(()=>ht(s.get(),p)),update:p=>{const y=t.get(),x=s.get(),_={},D={};gt(p,B=>{_[B.value]=B,ht(B,"meta").each(I=>{ht(I,"text").each(V=>{D[V]=B})})}),t.set({...y,..._}),s.set({...x,...D})},clear:()=>{t.set({}),s.set({})}})};var x1=Object.freeze({__proto__:null,memory:Uh,dataset:_g,manual:$v,init:t=>t.store.manager.state(t)});const Og=(t,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(t,l),s.onSetValue(t,l)},GS=(t,s,a)=>{const l=s.store,d=l.getDataKey(t);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},aw=(t,s,a)=>{s.store.initialValue.each(d=>{Og(t,s,a,d)})},Wh=(t,s,a)=>{a.clear()};var cw=[rs("initialValue"),Je("getFallbackEntry"),Je("getDataKey"),Je("setValue"),us("manager",{setValue:Og,getValue:GS,onLoad:aw,onUnload:Wh,state:_g})];const Pv=(t,s,a)=>s.store.getValue(t),s_=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},qS=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var Of=[Je("getValue"),xe("setValue",G),rs("initialValue"),us("manager",{setValue:s_,getValue:Pv,onLoad:qS,onUnload:G,state:qu.init})];const lw=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},iw=(t,s,a)=>a.get(),Iv=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},KS=(t,s,a)=>{a.clear()};var Pm=[rs("initialValue"),us("manager",{setValue:lw,getValue:iw,onLoad:Iv,onUnload:KS,state:Uh})],uw=[Ic("store",{mode:"memory"},dl("mode",{memory:Pm,manual:Of,dataset:cw})),Ao("onSetValue"),xe("resetOnDom",!1)];const zt=Ec({fields:uw,name:"representing",active:jS,apis:S1,extra:{setValueFrom:(t,s)=>{const a=zt.getValue(s);zt.setValue(t,a)}},state:x1}),ic=(t,s)=>C(t,{},_e(s,a=>ty(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Pc("dump",ft)])),Ki=t=>t.dump,$a=(t,s)=>({...vt(s),...t.dump}),Cu={field:ic,augment:$a,get:Ki},Ai="placeholder",Sa=W.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),dw=t=>so(t,"uiType"),Zh=(t,s,a,l)=>t.exists(d=>d!==a.owner)?Sa.single(!0,q(a)):ht(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Uo(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),Ag=(t,s,a,l)=>dw(a)&&a.uiType===Ai?Zh(t,s,a,l):Sa.single(!1,q(a)),T1=(t,s,a,l)=>Ag(t,s,a,l).fold((g,p)=>{const y=dw(a)?p(s,a.config,a.validated):p(s),x=ht(y,"components").getOr([]),_=De(x,D=>T1(t,s,D,l));return[{...y,components:_}]},(g,p)=>{if(dw(a)){const y=p(s,a.config,a.validated);return a.validated.preprocess.getOr(ft)(y)}else return p(s)}),YS=(t,s,a,l)=>De(a,d=>T1(t,s,d,l)),XS=(t,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,y)=>p,(p,y)=>p);return{name:q(t),required:g,used:l,replace:d}},JS=(t,s,a,l)=>{const d=qt(l,(p,y)=>XS(y,p)),g=YS(t,s,a,d);return Ye(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Fv=Sa.single,mw=Sa.multiple,QS=q(Ai),k1=W.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),E1=xe("factory",{sketch:ft}),_1=xe("schema",[]),O1=Je("name"),Lv=ps("pname","pname",Md(t=>"<alloy."+nn(t.name)+">"),oc()),Hv=Pc("schema",()=>[rs("preprocess")]),Dg=xe("defaults",q({})),ui=xe("overrides",q({})),A1=ze([E1,_1,O1,Lv,Dg,ui]),ex=ze([E1,_1,O1,Dg,ui]),fw=ze([E1,_1,O1,Lv,Dg,ui]),r_=ze([E1,Hv,O1,Je("unit"),Lv,Dg,ui]),tx=t=>t.fold(O.some,O.none,O.some,O.some),D1=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},a_=t=>t.fold(ft,ft,ft,ft),R1=(t,s)=>a=>{const l=ul("Converting part type",s,a);return t(l)},uc=R1(k1.required,A1),Su=R1(k1.external,ex),Di=R1(k1.optional,fw),Af=R1(k1.group,r_),xu=q("entirety");var c_=Object.freeze({__proto__:null,required:uc,external:Su,optional:Di,group:Af,asNamedPart:tx,name:D1,asCommon:a_,original:xu});const gw=(t,s,a,l)=>$s(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),hw=(t,s,a)=>{const l={},d={};return gt(a,g=>{g.fold(p=>{l[p.pname]=Fv(!0,(y,x,_)=>p.factory.sketch(gw(y,p,x,_)))},p=>{const y=s.parts[p.name];d[p.name]=q(p.factory.sketch(gw(s,p,y[xu()]),y))},p=>{l[p.pname]=Fv(!1,(y,x,_)=>p.factory.sketch(gw(y,p,x,_)))},p=>{l[p.pname]=mw(!0,(y,x,_)=>{const D=y[p.name];return _e(D,B=>p.factory.sketch($s(p.defaults(y,B,_),B,p.overrides(y,B))))})})}),{internals:q(l),externals:q(d)}},pw=(t,s)=>{const a={};return gt(s,l=>{tx(l).each(d=>{const g=l_(t,d.pname);a[d.name]=p=>{const y=ul("Part: "+d.name+" in "+t,ze(d.schema),p);return{...g,config:p,validated:y}}})}),a},l_=(t,s)=>({uiType:QS(),owner:t,name:s}),bw=(t,s,a)=>({uiType:QS(),owner:t,name:s,config:a,validated:{}}),i_=t=>De(t,s=>s.fold(O.none,O.some,O.none,O.none).map(a=>Wu(a.name,a.schema.concat([Cy(xu())]))).toArray()),u_=t=>_e(t,D1),vw=(t,s,a)=>hw(t,s,a),yw=(t,s,a)=>JS(O.some(t),s,s.components,a),zs=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},nd=(t,s,a)=>zs(t,s,a).getOrDie("Could not find part: "+a),ww=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return gt(a,p=>{l[p]=q(g.getByUid(d[p]))}),l},Cw=(t,s)=>{const a=t.getSystem();return qt(s.partUids,(l,d)=>q(a.getByUid(l)))},nx=t=>Uo(t.partUids),Vv=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return gt(a,p=>{l[p]=q(g.getByUid(d[p]).getOrDie())}),l},ox=(t,s)=>{const a=u_(s);return ts(_e(a,l=>({key:l,value:t+"-"+l})))},zv=t=>ps("partUids","partUids",Bd(s=>ox(s.uid,t)),oc());var sx=Object.freeze({__proto__:null,generate:pw,generateOne:bw,schemas:i_,names:u_,substitutes:vw,components:yw,defaultUids:ox,defaultUidsSchema:zv,getAllParts:Cw,getAllPartNames:nx,getPart:zs,getPartOrDie:nd,getParts:ww,getPartsOrDie:Vv});const d_=(t,s)=>(t.length>0?[Wu("parts",t)]:[]).concat([Je("uid"),xe("dom",{}),xe("components",[]),Cy("originalSpec"),xe("debug.sketcher",{})]).concat(s),rx=(t,s,a,l,d)=>{const g=d_(l,d);return ul(t+" [SpecSchema]",il(g.concat(s)),a)},m_=(t,s,a,l)=>{const d=on(l),g=rx(t,s,d,[],[]);return a(g,d)},Sw=(t,s,a,l,d)=>{const g=on(d),p=i_(a),y=zv(a),x=rx(t,s,g,p,[y]),_=vw(t,x,a),D=yw(t,x,_.internals());return l(x,D,g,_.externals())},ax=t=>so(t,"uid"),on=t=>ax(t)?t:{...t,uid:Em("uid")},od=t=>t.uid!==void 0,xw=il([Je("name"),Je("factory"),Je("configFields"),xe("apis",{}),xe("extraApis",{})]),cx=il([Je("name"),Je("factory"),Je("configFields"),Je("partFields"),xe("apis",{}),xe("extraApis",{})]),Kr=t=>{const s=ul("Sketcher for "+t.name,xw,t),a=g=>m_(s.name,s.configFields,s.factory,g),l=qt(s.apis,hf),d=qt(s.extraApis,(g,p)=>lg(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...l,...d}},ma=t=>{const s=ul("Sketcher for "+t.name,cx,t),a=p=>Sw(s.name,s.configFields,s.partFields,s.factory,p),l=pw(s.name,s.partFields),d=qt(s.apis,hf),g=qt(s.extraApis,(p,y)=>lg(p,y));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...d,...g}},jh=t=>Aa("input")(t)&&jr(t,"type")!=="radio"||Aa("textarea")(t);var f_=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const g_=[Je("find")],So=Ec({fields:g_,name:"composing",apis:f_}),Tw=["input","button","textarea","select"],Gh=(t,s,a)=>{(s.disabled()?Ew:_w)(t,s)},Uv=(t,s)=>s.useNative===!0&&po(Tw,Qa(t.element)),h_=t=>K(t.element,"disabled"),p_=t=>{Vn(t.element,"disabled","disabled")},kw=t=>{ne(t.element,"disabled")},u3=t=>jr(t.element,"aria-disabled")==="true",lx=t=>{Vn(t.element,"aria-disabled","true")},b_=t=>{Vn(t.element,"aria-disabled","false")},Ew=(t,s,a)=>{s.disableClass.each(d=>{Ma(t.element,d)}),(Uv(t,s)?p_:lx)(t),s.onDisabled(t)},_w=(t,s,a)=>{s.disableClass.each(d=>{Qs(t.element,d)}),(Uv(t,s)?kw:b_)(t),s.onEnabled(t)},ix=(t,s)=>Uv(t,s)?h_(t):u3(t);var dx=Object.freeze({__proto__:null,enable:_w,disable:Ew,isDisabled:ix,onLoad:Gh,set:(t,s,a,l)=>{(l?Ew:_w)(t,s)}}),y_=Object.freeze({__proto__:null,exhibit:(t,s)=>ci({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Js([iy(hl(),(a,l)=>ix(a,t)),rv(t,s,Gh)])}),d3=[Ca("disabled",Zn),xe("useNative",!0),rs("disableClass"),Ao("onDisabled"),Ao("onEnabled")];const Dn=Ec({fields:d3,name:"disabling",active:y_,apis:dx}),Wv=(t,s,a,l)=>{const d=da(t.element,"."+s.highlightClass);gt(d,g=>{Xo(l,y=>es(y.element,g))||(Qs(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),Go(y,Pb())}))})},m3=(t,s,a)=>Wv(t,s,a,[]),w_=(t,s,a,l)=>{Df(t,s,a,l)&&(Qs(l.element,s.highlightClass),s.onDehighlight(t,l),Go(l,Pb()))},N1=(t,s,a,l)=>{Wv(t,s,a,[l]),Df(t,s,a,l)||(Ma(l.element,s.highlightClass),s.onHighlight(t,l),Go(l,ly()))},f3=(t,s,a)=>{Gv(t,s).each(l=>{N1(t,s,a,l)})},Zv=(t,s,a)=>{Aw(t,s).each(l=>{N1(t,s,a,l)})},C_=(t,s,a,l)=>{Ow(t,s,a,l).fold(d=>{throw d},d=>{N1(t,s,a,d)})},S_=(t,s,a,l)=>{const d=$1(t,s);Tt(d,l).each(p=>{N1(t,s,a,p)})},Df=(t,s,a,l)=>Xc(l.element,s.highlightClass),jv=(t,s,a)=>_r(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Ow=(t,s,a,l)=>{const d=da(t.element,"."+s.itemClass);return O.from(d[l]).fold(()=>St.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},Gv=(t,s,a)=>_r(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Aw=(t,s,a)=>{const l=da(t.element,"."+s.itemClass);return(l.length>0?O.some(l[l.length-1]):O.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},B1=(t,s,a,l)=>{const d=da(t.element,"."+s.itemClass);return $t(d,p=>Xc(p,s.highlightClass)).bind(p=>{const y=gg(p,l,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},x_=(t,s,a)=>B1(t,s,a,-1),T_=(t,s,a)=>B1(t,s,a,1),$1=(t,s,a)=>{const l=da(t.element,"."+s.itemClass);return Ka(_e(l,d=>t.getSystem().getByDom(d).toOptional()))};var qv=Object.freeze({__proto__:null,dehighlightAll:m3,dehighlight:w_,highlight:N1,highlightFirst:f3,highlightLast:Zv,highlightAt:C_,highlightBy:S_,isHighlighted:Df,getHighlighted:jv,getFirst:Gv,getLast:Aw,getPrevious:x_,getNext:T_,getCandidates:$1}),k_=[Je("highlightClass"),Je("itemClass"),Ao("onHighlight"),Ao("onDehighlight")];const qo=Ec({fields:k_,name:"highlighting",apis:qv}),E_=[8],Xd=[9],Tu=[13],Kv=[27],di=[32],qh=[37],Kh=[38],Rg=[39],Im=[40],Dw=(t,s,a)=>{const l=cs(t.slice(0,s)),d=cs(t.slice(s+1));return Tt(l.concat(d),a)},Mg=(t,s,a)=>{const l=cs(t.slice(0,s));return Tt(l,a)},N5=(t,s,a)=>{const l=t.slice(0,s),d=t.slice(s+1);return Tt(d.concat(l),a)},g3=(t,s,a)=>{const l=t.slice(s+1);return Tt(l,a)},Ho=t=>s=>{const a=s.raw;return po(t,a.which)},Yi=t=>s=>Gs(t,a=>a(s)),Ng=t=>t.raw.shiftKey===!0,__=t=>t.raw.ctrlKey===!0,Yv=Pe(Ng),Zo=(t,s)=>({matches:t,classification:s}),Rw=(t,s)=>Tt(t,l=>l.matches(s)).map(l=>l.classification),mx=(t,s,a)=>{s.exists(d=>a.exists(g=>es(g,d)))||xn(t,ff(),{prevFocus:s,newFocus:a})},P1=()=>{const t=a=>bu(a.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().triggerFocus(l,a.element);const g=t(a);mx(a,d,g)}}},O_=()=>{const t=a=>qo.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().getByDom(l).fold(G,p=>{qo.highlight(a,p)});const g=t(a);mx(a,d,g)}}};var Yh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Yh||(Yh={}));const Bg=(t,s,a,l,d)=>{const g=()=>t.concat([xe("focusManager",P1()),Ic("focusInside","onFocus",gr(_=>po(["onFocus","onEnterOrSpace","onApi"],_)?St.value(_):St.error("Invalid value for focusInside"))),us("handler",x),us("state",s),us("sendFocusIn",d)]),p=(_,D,B,I,V)=>{const X=B(_,D,I,V);return Rw(X,D.event).bind(ce=>ce(_,D,I,V))},x={schema:g,processKey:p,toEvents:(_,D)=>{const B=_.focusInside!==Yh.OnFocusMode?O.none():d(_).map(X=>et(Id(),(ce,Te)=>{X(ce,_,D),Te.stop()})),I=(X,ce)=>{const Te=Ho(di.concat(Tu))(ce.event);_.focusInside===Yh.OnEnterOrSpaceMode&&Te&&ym(X,ce)&&d(_).each(ye=>{ye(X,_,D),ce.stop()})},V=[et(ri(),(X,ce)=>{p(X,ce,a,_,D).fold(()=>{I(X,ce)},Te=>{ce.stop()})}),et(mf(),(X,ce)=>{p(X,ce,l,_,D).each(Te=>{ce.stop()})})];return Js(B.toArray().concat(V))}};return x},Mw=t=>{const s=[rs("onEscape"),rs("onEnter"),xe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),xe("firstTabstop",0),xe("useTabstopAt",jt),rs("visibilitySelector")].concat([t]),a=(ce,Te)=>{const ye=ce.visibilitySelector.bind(he=>Yu(Te,he)).getOr(Te);return Le(ye)>0},l=(ce,Te)=>{const ye=da(ce.element,Te.selector),he=Fn(ye,Ue=>a(Te,Ue));return O.from(he[Te.firstTabstop])},d=(ce,Te)=>Te.focusManager.get(ce).bind(ye=>Yu(ye,Te.selector)),g=(ce,Te)=>a(ce,Te)&&ce.useTabstopAt(Te),p=(ce,Te,ye)=>{l(ce,Te).each(he=>{Te.focusManager.set(ce,he)})},y=(ce,Te,ye,he,Ue)=>Ue(Te,ye,Ze=>g(he,Ze)).fold(()=>he.cyclic?O.some(!0):O.none(),Ze=>(he.focusManager.set(ce,Ze),O.some(!0))),x=(ce,Te,ye,he)=>{const Ue=da(ce.element,ye.selector);return d(ce,ye).bind(Ze=>$t(Ue,Bt(es,Ze)).bind(st=>y(ce,Ue,st,ye,he)))},_=(ce,Te,ye)=>{const he=ye.cyclic?Dw:Mg;return x(ce,Te,ye,he)},D=(ce,Te,ye)=>{const he=ye.cyclic?N5:g3;return x(ce,Te,ye,he)},B=(ce,Te,ye)=>ye.onEnter.bind(he=>he(ce,Te)),I=(ce,Te,ye)=>ye.onEscape.bind(he=>he(ce,Te)),V=q([Zo(Yi([Ng,Ho(Xd)]),_),Zo(Ho(Xd),D),Zo(Yi([Yv,Ho(Tu)]),B)]),X=q([Zo(Ho(Kv),I)]);return Bg(s,qu.init,V,X,()=>O.some(p))};var i=Mw(Pc("cyclic",Zn)),m=Mw(Pc("cyclic",jt));const h=(t,s,a)=>(Vp(t,a,hl()),O.some(!0)),v=(t,s,a)=>jh(a)&&Ho(di)(s.event)?O.none():h(t,s,a),T=(t,s)=>O.some(!0),A=[xe("execute",v),xe("useSpace",!1),xe("useEnter",!0),xe("useControlEnter",!1),xe("useDown",!1)],P=(t,s,a)=>a.execute(t,s,t.element),U=(t,s,a,l)=>{const d=a.useSpace&&!jh(t.element)?di:[],g=a.useEnter?Tu:[],p=a.useDown?Im:[],y=d.concat(g).concat(p);return[Zo(Ho(y),P)].concat(a.useControlEnter?[Zo(Yi([__,Ho(Tu)]),P)]:[])},J=(t,s,a,l)=>a.useSpace&&!jh(t.element)?[Zo(Ho(di),T)]:[];var ae=Bg(A,qu.init,U,J,()=>O.none());const Ce=()=>{const t=Cs();return rc({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var It=Object.freeze({__proto__:null,flatgrid:Ce,init:t=>t.state(t)});const Et=t=>(s,a,l,d)=>{const g=t(s.element);return an(g,s,a,l,d)},Ge=(t,s)=>{const a=fv(t,s);return Et(a)},At=(t,s)=>{const a=fv(s,t);return Et(a)},We=t=>(s,a,l,d)=>an(t,s,a,l,d),an=(t,s,a,l,d)=>l.focusManager.get(s).bind(p=>t(s.element,p,l,d)).map(p=>(l.focusManager.set(s,p),!0)),Ln=We,to=We,er=We,dc=t=>t.offsetWidth<=0&&t.offsetHeight<=0,ta=t=>!dc(t.dom),Wl=(t,s)=>$t(t,s).map(a=>({index:a,candidates:t})),Rf=(t,s,a)=>{const l=p=>es(p,s),d=da(t,a),g=Fn(d,ta);return Wl(g,l)},Xv=(t,s)=>$t(t,a=>es(s,a)),Nw=(t,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(p=>{const y=p.row*a+p.column;return y>=0&&y<t.length?O.some(t[y]):O.none()})},Jv=(t,s,a,l,d)=>Nw(t,s,l,(g,p)=>{const x=g===a-1?t.length-g*l:l,_=gg(p,d,0,x-1);return O.some({row:g,column:_})}),Ds=(t,s,a,l,d)=>Nw(t,s,l,(g,p)=>{const y=gg(g,d,0,a-1),_=y===a-1?t.length-y*l:l,D=_i(p,0,_-1);return O.some({row:y,column:D})}),Bl=(t,s,a,l)=>Jv(t,s,a,l,1),$l=(t,s,a,l)=>Jv(t,s,a,l,-1),Ri=(t,s,a,l)=>Ds(t,s,a,l,-1),mi=(t,s,a,l)=>Ds(t,s,a,l,1),Xh=[Je("selector"),xe("execute",v),Ur("onEscape"),xe("captureTab",!1),t1()],Zl=(t,s,a)=>{_r(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Qv=(t,s)=>s.focusManager.get(t).bind(a=>Yu(a,s.selector)),I1=(t,s,a,l)=>Qv(t,a).bind(d=>a.execute(t,s,d)),Xi=t=>(s,a,l,d)=>Rf(s,a,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),hr=(t,s,a)=>a.captureTab?O.some(!0):O.none(),A_=(t,s,a)=>a.onEscape(t,s),fx=Xi($l),gx=Xi(Bl),D_=Xi(Ri),R_=Xi(mi),Mf=q([Zo(Ho(qh),Ge(fx,gx)),Zo(Ho(Rg),At(fx,gx)),Zo(Ho(Kh),Ln(D_)),Zo(Ho(Im),to(R_)),Zo(Yi([Ng,Ho(Xd)]),hr),Zo(Yi([Yv,Ho(Xd)]),hr),Zo(Ho(di.concat(Tu)),I1)]),Bw=q([Zo(Ho(Kv),A_),Zo(Ho(di),T)]);var F1=Bg(Xh,Ce,Mf,Bw,()=>O.some(Zl));const hx=(t,s,a,l,d)=>{const g=y=>Qa(y)==="button"&&jr(y,"disabled")==="disabled",p=(y,x,_)=>d(y,x,l,0,_.length-1,_[x],D=>g(_[D])?p(y,D,_):O.from(_[D]));return Rf(t,a,s).bind(y=>{const x=y.index,_=y.candidates;return p(x,x,_)})},$w=(t,s,a,l)=>hx(t,s,a,l,(d,g,p,y,x,_,D)=>{const B=_i(g+p,y,x);return B===d?O.from(_):D(B)}),e0=(t,s,a,l)=>hx(t,s,a,l,(d,g,p,y,x,_,D)=>{const B=gg(g,p,y,x);return B===d?O.none():D(B)}),B5=[Je("selector"),xe("getInitial",O.none),xe("execute",v),Ur("onEscape"),xe("executeOnMove",!1),xe("allowVertical",!0),xe("allowHorizontal",!0),xe("cycles",!0)],$5=(t,s)=>s.focusManager.get(t).bind(a=>Yu(a,s.selector)),M_=(t,s,a)=>$5(t,a).bind(l=>a.execute(t,s,l)),P5=(t,s,a)=>{s.getInitial(t).orThunk(()=>_r(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},h3=(t,s,a)=>(a.cycles?e0:$w)(t,a.selector,s,-1),p3=(t,s,a)=>(a.cycles?e0:$w)(t,a.selector,s,1),N_=t=>(s,a,l,d)=>t(s,a,l,d).bind(()=>l.executeOnMove?M_(s,a,l):O.some(!0)),B_=(t,s,a)=>a.onEscape(t,s),I5=(t,s,a,l)=>{const d=[...a.allowHorizontal?qh:[]].concat(a.allowVertical?Kh:[]),g=[...a.allowHorizontal?Rg:[]].concat(a.allowVertical?Im:[]);return[Zo(Ho(d),N_(Ge(h3,p3))),Zo(Ho(g),N_(At(h3,p3))),Zo(Ho(Tu),M_),Zo(Ho(di),M_)]},F5=q([Zo(Ho(di),T),Zo(Ho(Kv),B_)]);var L5=Bg(B5,qu.init,I5,F5,()=>O.some(P5));const px=(t,s,a)=>O.from(t[s]).bind(l=>O.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),Jh=(t,s,a,l)=>{const g=t[s].length,p=gg(a,l,0,g-1);return px(t,s,p)},b3=(t,s,a,l)=>{const d=gg(a,l,0,t.length-1),g=t[d].length,p=_i(s,0,g-1);return px(t,d,p)},v3=(t,s,a,l)=>{const g=t[s].length,p=_i(a+l,0,g-1);return px(t,s,p)},bx=(t,s,a,l)=>{const d=_i(a+l,0,t.length-1),g=t[d].length,p=_i(s,0,g-1);return px(t,d,p)},H5=(t,s,a)=>Jh(t,s,a,1),y3=(t,s,a)=>Jh(t,s,a,-1),w3=(t,s,a)=>b3(t,a,s,-1),C3=(t,s,a)=>b3(t,a,s,1),S3=(t,s,a)=>v3(t,s,a,-1),V5=(t,s,a)=>v3(t,s,a,1),z5=(t,s,a)=>bx(t,a,s,-1),U5=(t,s,a)=>bx(t,a,s,1),$_=[Wu("selectors",[Je("row"),Je("cell")]),xe("cycles",!0),xe("previousSelector",O.none),xe("execute",v)],W5=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return _r(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},Z5=(t,s,a)=>bu(t.element).bind(l=>a.execute(t,s,l)),j5=(t,s)=>_e(t,a=>da(a,s.selectors.cell)),vx=(t,s)=>(a,l,d)=>{const g=d.cycles?t:s;return Yu(l,d.selectors.row).bind(p=>{const y=da(p,d.selectors.cell);return Xv(y,l).bind(x=>{const _=da(a,d.selectors.row);return Xv(_,p).bind(D=>{const B=j5(_,d);return g(B,D,x).map(I=>I.cell)})})})},P_=vx(y3,S3),x3=vx(H5,V5),G5=vx(w3,z5),q5=vx(C3,U5),T3=q([Zo(Ho(qh),Ge(P_,x3)),Zo(Ho(Rg),At(P_,x3)),Zo(Ho(Kh),Ln(G5)),Zo(Ho(Im),to(q5)),Zo(Ho(di.concat(Tu)),Z5)]),K5=q([Zo(Ho(di),T)]);var Y5=Bg($_,qu.init,T3,K5,()=>O.some(W5));const k3=[Je("selector"),xe("execute",v),xe("moveOnTab",!1)],E3=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),X5=(t,s,a)=>{_r(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Pw=(t,s,a)=>e0(t,a.selector,s,-1),_3=(t,s,a)=>e0(t,a.selector,s,1),O3=(t,s,a,l)=>a.moveOnTab?er(Pw)(t,s,a,l):O.none(),Mi=(t,s,a,l)=>a.moveOnTab?er(_3)(t,s,a,l):O.none(),J5=q([Zo(Ho(Kh),er(Pw)),Zo(Ho(Im),er(_3)),Zo(Yi([Ng,Ho(Xd)]),O3),Zo(Yi([Yv,Ho(Xd)]),Mi),Zo(Ho(Tu),E3),Zo(Ho(di),E3)]),A3=q([Zo(Ho(di),T)]);var Q5=Bg(k3,qu.init,J5,A3,()=>O.some(X5));const eF=[Ur("onSpace"),Ur("onEnter"),Ur("onShiftEnter"),Ur("onLeft"),Ur("onRight"),Ur("onTab"),Ur("onShiftTab"),Ur("onUp"),Ur("onDown"),Ur("onEscape"),xe("stopSpaceKeyup",!1),rs("focusIn")],D3=(t,s,a)=>[Zo(Ho(di),a.onSpace),Zo(Yi([Yv,Ho(Tu)]),a.onEnter),Zo(Yi([Ng,Ho(Tu)]),a.onShiftEnter),Zo(Yi([Ng,Ho(Xd)]),a.onShiftTab),Zo(Yi([Yv,Ho(Xd)]),a.onTab),Zo(Ho(Kh),a.onUp),Zo(Ho(Im),a.onDown),Zo(Ho(qh),a.onLeft),Zo(Ho(Rg),a.onRight),Zo(Ho(di),a.onSpace)],tF=(t,s,a)=>[...a.stopSpaceKeyup?[Zo(Ho(di),T)]:[],Zo(Ho(Kv),a.onEscape)];var R3=Bg(eF,qu.init,D3,tF,t=>t.focusIn);const M3=i.schema(),nF=m.schema(),oF=L5.schema(),sF=F1.schema(),rF=Y5.schema(),N3=ae.schema(),B3=Q5.schema(),Qh=R3.schema();var $3=Object.freeze({__proto__:null,acyclic:M3,cyclic:nF,flow:oF,flatgrid:sF,matrix:rF,execution:N3,menu:B3,special:Qh});const P3=t=>ha(t,"setGridSize"),Cn=My({branchKey:"mode",branches:$3,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,d)=>{P3(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:It}),I3=(t,s)=>{cv(()=>{KE(t,s,()=>_e(s,t.getSystem().build))},t.element)},F3=(t,s)=>{cv(()=>{YE(t,s,()=>k2(t.element,s,t.getSystem().buildOrPatch))},t.element)},aF=(t,s,a,l)=>{Ev(s);const d=fy(t.element,a,l,t.getSystem().buildOrPatch);b1(t,d),t.syncComponents()},I_=(t,s,a)=>{const l=t.getSystem().build(a);y1(t,l,s)},L3=(t,s,a,l)=>{Yd(s),I_(t,(d,g)=>Da(d,g,a),l)},F_=(t,s,a,l)=>(s.reuseDom?F3:I3)(t,l),L_=(t,s,a,l)=>{I_(t,ll,l)},cF=(t,s,a,l)=>{I_(t,th,l)},ep=(t,s,a,l)=>{const d=Iw(t);Tt(d,p=>es(l.element,p.element)).each(Yd)},Iw=(t,s)=>t.components(),H_=(t,s,a,l,d)=>{const g=Iw(t);return O.from(g[l]).map(p=>(d.fold(()=>Yd(p),y=>{(s.reuseDom?aF:L3)(t,p,l,y)}),p))};var lF=Object.freeze({__proto__:null,append:L_,prepend:cF,remove:ep,replaceAt:H_,replaceBy:(t,s,a,l,d)=>{const g=Iw(t);return $t(g,l).bind(p=>H_(t,s,a,p,d))},set:F_,contents:Iw});const zn=Ec({fields:[Fc("reuseDom",!0)],name:"replacing",apis:lF}),Fw=(t,s)=>{const a=Js(s);return Ec({fields:[Je("enabled")],name:t,active:{events:q(a)}})},ro=(t,s)=>{const a=Fw(t,s);return{key:t,value:{config:{},me:a,configAsRaw:q({}),initialConfig:{},state:qu}}},V_=(t,s)=>{s.ignore||(pu(t.element),s.onFocus(t))};var iF=Object.freeze({__proto__:null,focus:V_,blur:(t,s)=>{s.ignore||Ny(t.element)},isFocused:t=>r1(t.element)}),$g=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return ci(a)},events:t=>Js([et(Id(),(s,a)=>{V_(s,t),a.stop()})].concat(t.stopMousedown?[et(As(),(s,a)=>{a.event.prevent()})]:[]))}),z_=[Ao("onFocus"),xe("stopMousedown",!1),xe("ignore",!1)];const $n=Ec({fields:z_,name:"focusing",active:$g,apis:iF}),H3=t=>({init:()=>{const a=S(t);return{get:()=>a.get(),set:y=>a.set(y),clear:()=>a.set(t),readState:()=>a.get()}}}),V3=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},U_=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?Ma(t.element,l):Qs(t.element,l)})},t0=(t,s,a,l)=>{const d=a.get();a.set(l),U_(t,s,a),V3(t,s,a),d!==l&&s.onToggled(t,l)},z3=(t,s,a)=>{t0(t,s,a,!a.get())},dF=(t,s,a)=>{t0(t,s,a,!0)},mF=(t,s,a)=>{t0(t,s,a,!1)},yx=(t,s,a)=>a.get(),wx=(t,s,a)=>{t0(t,s,a,s.selected)};var W_=Object.freeze({__proto__:null,onLoad:wx,toggle:z3,isOn:yx,on:dF,off:mF,set:t0}),U3=Object.freeze({__proto__:null,exhibit:()=>ci({}),events:(t,s)=>{const a=sv(t,s,z3),l=rv(t,s,wx);return Js(Vt([t.toggleOnExecute?[a]:[],[l]]))}});const W3=(t,s,a)=>{Vn(t.element,"aria-pressed",a),s.syncWithExpanded&&G3(t,s,a)},Z3=(t,s,a)=>{Vn(t.element,"aria-selected",a)},j3=(t,s,a)=>{Vn(t.element,"aria-checked",a)},G3=(t,s,a)=>{Vn(t.element,"aria-expanded",a)};var Z_=[xe("selected",!1),rs("toggleClass"),xe("toggleOnExecute",!0),Ao("onToggled"),Ic("aria",{mode:"none"},dl("mode",{pressed:[xe("syncWithExpanded",!1),us("update",W3)],checked:[us("update",j3)],expanded:[us("update",G3)],selected:[us("update",Z3)],none:[us("update",G)]}))];const go=Ec({fields:Z_,name:"toggling",active:U3,apis:W_,state:H3(!1)}),q3=()=>{const t=(s,a)=>{a.stop(),Ld(s)};return[et(Zi(),t),et(sg(),t),ag(fu()),ag(As())]},Cx=t=>{const s=a=>Vd((l,d)=>{a(l),d.stop()});return Js(Vt([t.map(s).toArray(),q3()]))},K3="alloy.item-hover",j_="alloy.item-focus",Y3="alloy.item-toggled",X3=t=>{(bu(t.element).isNone()||$n.isFocused(t))&&($n.isFocused(t)||$n.focus(t),xn(t,K3,{item:t}))},J3=t=>{xn(t,j_,{item:t})},Lw=(t,s)=>{xn(t,Y3,{item:t,state:s})},Q3=q(K3),Hw=q(j_),G_=q(Y3),eR=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),tR=t=>({aria:{mode:"checked"},...ga(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{ot(t.onToggled)&&t.onToggled(s,a),Lw(s,a)}}),fF=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:eR(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Cu.augment(t.itemBehaviours,[t.toggling.fold(go.revoke,s=>go.config(tR(s))),$n.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{J3(s)}}),Cn.config({mode:"execution"}),zt.config({store:{mode:"memory",initialValue:t.data}}),ro("item-type-events",[...q3(),et(ki(),X3),et(hh(),$n.focus)])]),components:t.components,eventOrder:t.eventOrder}),gF=[Je("data"),Je("components"),Je("dom"),xe("hasSubmenu",!1),rs("toggling"),Cu.field("itemBehaviours",[go,$n,Cn,zt]),xe("ignoreFocus",!1),xe("domModification",{}),us("builder",fF),xe("eventOrder",{})],nR=t=>({dom:t.dom,components:t.components,events:Js([Tm(hh())])}),hF=[Je("dom"),Je("components"),us("builder",nR)],Sx=q("item-widget"),q_=q([uc({name:"widget",overrides:t=>({behaviours:vt([zt.config({store:{mode:"manual",getValue:s=>t.data,setValue:G}})])})})]),pF=t=>{const s=vw(Sx(),t,q_()),a=yw(Sx(),t,s.internals()),l=g=>zs(g,t,"widget").map(p=>(Cn.focusIn(p),p)),d=(g,p)=>jh(p.event.target)?O.none():(()=>(t.autofocus&&p.setSource(g.element),O.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Js([Vd((g,p)=>{l(g).each(y=>{p.stop()})}),et(ki(),X3),et(hh(),(g,p)=>{t.autofocus?l(g):$n.focus(g)})]),behaviours:Cu.augment(t.widgetBehaviours,[zt.config({store:{mode:"memory",initialValue:t.data}}),$n.config({ignore:t.ignoreFocus,onFocus:g=>{J3(g)}}),Cn.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:yE(),onLeft:d,onRight:d,onEscape:(g,p)=>!$n.isFocused(g)&&!t.autofocus?($n.focus(g),O.some(!0)):(t.autofocus&&p.setSource(g.element),O.none())})])}},oR=[Je("uid"),Je("data"),Je("components"),Je("dom"),xe("autofocus",!1),xe("ignoreFocus",!1),Cu.field("widgetBehaviours",[zt,$n,Cn]),xe("domModification",{}),zv(q_()),us("builder",pF)],xx=dl("type",{widget:oR,item:gF,separator:hF}),K_=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),Y_=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),bF=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),vF=q([Af({factory:{sketch:t=>{const s=ul("menu.spec item",xx,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>so(s,"uid")?s:{...s,uid:Em("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),yF=q([Je("value"),Je("items"),Je("dom"),Je("components"),xe("eventOrder",{}),ic("menuBehaviours",[qo,zt,So,Cn]),Ic("movement",{mode:"menu",moveOnTab:!0},dl("mode",{grid:[t1(),us("config",K_)],matrix:[us("config",Y_),Je("rowSelector"),xe("previousSelector",O.none)],menu:[xe("moveOnTab",!0),us("config",bF)]})),Cf(),xe("fakeFocus",!1),xe("focusManager",P1()),Ao("onHighlight"),Ao("onDehighlight")]),sR=q("alloy.menu-focus"),rR=(t,s)=>{const a=da(t.element,'[role="menuitemradio"][aria-checked="true"]');gt(a,l=>{es(l,s.element)||t.getSystem().getByDom(l).each(d=>{go.off(d)})})},aR=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:$a(t.menuBehaviours,[qo.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),zt.config({store:{mode:"memory",initialValue:t.value}}),So.config({find:O.some}),Cn.config(t.movement.config(t,t.movement))]),events:Js([et(Hw(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(y=>{qo.highlight(d,y),g.stop(),xn(d,sR(),{menu:d,item:y})})}),et(Q3(),(d,g)=>{const p=g.event.item;qo.highlight(d,p)}),et(G_(),(d,g)=>{const{item:p,state:y}=g.event;y&&jr(p.element,"role")==="menuitemradio"&&rR(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),V1=ma({name:"Menu",configFields:yF(),partFields:vF(),factory:aR}),wF=t=>en(t,(s,a)=>({k:s,v:a})),cR=(t,s,a,l)=>ht(a,l).bind(d=>ht(t,d).bind(g=>{const p=cR(t,s,a,g);return O.some([g].concat(p))})).getOr([]),CF=(t,s)=>{const a={};Ye(t,(p,y)=>{gt(p,x=>{a[x]=y})});const l=s,d=wF(s),g=qt(d,(p,y)=>[y].concat(cR(a,l,d,y)));return qt(a,p=>ht(g,p).getOr([p]))},SF=()=>{const t=S({}),s=S({}),a=S({}),l=Cs(),d=S({}),g=()=>{t.set({}),s.set({}),a.set({}),l.clear()},p=()=>l.get().isNone(),y=(kt,st)=>{s.set({...s.get(),[kt]:{type:"prepared",menu:st}})},x=(kt,st,Dt,hn)=>{l.set(kt),t.set(Dt),s.set(st),d.set(hn);const Ro=CF(hn,Dt);a.set(Ro)},_=kt=>xs(t.get(),(st,Dt)=>st===kt),D=(kt,st,Dt)=>ce(kt).bind(hn=>_(kt).bind(Ro=>st(Ro).map(pn=>({triggeredMenu:hn,triggeringItem:pn,triggeringPath:Dt})))),B=(kt,st)=>{const Dt=Fn(ye(kt).toArray(),hn=>ce(hn).isSome());return ht(a.get(),kt).bind(hn=>{const Ro=cs(Dt.concat(hn)),pn=De(Ro,(xo,Qn)=>D(xo,st,Ro.slice(0,Qn+1)).fold(()=>ar(l.get(),xo)?[]:[O.none()],To=>[O.some(To)]));return Qo(pn)})},I=kt=>ht(t.get(),kt).map(st=>{const Dt=ht(a.get(),kt).getOr([]);return[st].concat(Dt)}),V=kt=>ht(a.get(),kt).bind(st=>st.length>1?O.some(st.slice(1)):O.none()),X=kt=>ht(a.get(),kt),ce=kt=>Te(kt).bind(lR),Te=kt=>ht(s.get(),kt),ye=kt=>ht(t.get(),kt);return{setMenuBuilt:y,setContents:x,expand:I,refresh:X,collapse:V,lookupMenu:Te,lookupItem:ye,otherMenus:kt=>{const st=d.get();return rn(Uo(st),kt)},getPrimary:()=>l.get().bind(ce),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:B}},lR=t=>t.type==="prepared"?O.some(t.menu):O.none(),X_={init:SF,extractPreparedMenu:lR},iR=nn("tiered-menu-item-highlight"),uR=nn("tiered-menu-item-dehighlight");var fi;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(fi||(fi={}));const xF=(t,s)=>{const a=Cs(),l=(Mt,fn,Wt)=>qt(Wt,(Pn,ao)=>{const Mo=()=>V1.sketch({...Pn,value:ao,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ka,as)=>{xn(ka,iR,{menuComp:ka,itemComp:as})},onDehighlight:(ka,as)=>{xn(ka,uR,{menuComp:ka,itemComp:as})},focusManager:t.fakeFocus?O_():P1()});return ao===fn?{type:"prepared",menu:Mt.getSystem().build(Mo())}:{type:"notbuilt",nbMenu:Mo}}),d=X_.init(),g=Mt=>{const fn=l(Mt,t.data.primary,t.data.menus),Wt=x();return d.setContents(t.data.primary,fn,t.data.expansions,Wt),d.getPrimary()},p=Mt=>zt.getValue(Mt).value,y=(Mt,fn,Wt)=>Jo(fn,Pn=>{if(!Pn.getSystem().isConnected())return O.none();const ao=qo.getCandidates(Pn);return Tt(ao,Mo=>p(Mo)===Wt)}),x=Mt=>qt(t.data.menus,(fn,Wt)=>De(fn.items,Pn=>Pn.type==="separator"?[]:[Pn.data.value])),_=qo.highlight,D=(Mt,fn)=>{_(Mt,fn),qo.getHighlighted(fn).orThunk(()=>qo.getFirst(fn)).each(Wt=>{t.fakeFocus?qo.highlight(fn,Wt):Vp(Mt,Wt.element,hh())})},B=(Mt,fn)=>Ka(_e(fn,Wt=>Mt.lookupMenu(Wt).bind(Pn=>Pn.type==="prepared"?O.some(Pn.menu):O.none()))),I=(Mt,fn,Wt)=>{const Pn=B(fn,fn.otherMenus(Wt));gt(Pn,ao=>{Jc(ao.element,[t.markers.backgroundMenu]),t.stayInDom||zn.remove(Mt,ao)})},V=Mt=>a.get().getOrThunk(()=>{const fn={},Wt=da(Mt.element,`.${t.markers.item}`),Pn=Fn(Wt,ao=>jr(ao,"aria-haspopup")==="true");return gt(Pn,ao=>{Mt.getSystem().getByDom(ao).each(Mo=>{const ka=p(Mo);fn[ka]=Mo})}),a.set(fn),fn}),X=(Mt,fn)=>{const Wt=V(Mt);Ye(Wt,(Pn,ao)=>{const Mo=po(fn,ao);Vn(Pn.element,"aria-expanded",Mo)})},ce=(Mt,fn,Wt)=>O.from(Wt[0]).bind(Pn=>fn.lookupMenu(Pn).bind(ao=>{if(ao.type==="notbuilt")return O.none();{const Mo=ao.menu,ka=B(fn,Wt.slice(1));return gt(ka,as=>{Ma(as.element,t.markers.backgroundMenu)}),$o(Mo.element)||zn.append(Mt,zl(Mo)),Jc(Mo.element,[t.markers.backgroundMenu]),D(Mt,Mo),I(Mt,fn,Wt),O.some(Mo)}}));let Te;(function(Mt){Mt[Mt.HighlightSubmenu=0]="HighlightSubmenu",Mt[Mt.HighlightParent=1]="HighlightParent"})(Te||(Te={}));const ye=(Mt,fn,Wt)=>{if(Wt.type==="notbuilt"){const Pn=Mt.getSystem().build(Wt.nbMenu());return d.setMenuBuilt(fn,Pn),Pn}else return Wt.menu},he=(Mt,fn,Wt=Te.HighlightSubmenu)=>{if(fn.hasConfigured(Dn)&&Dn.isDisabled(fn))return O.some(fn);{const Pn=p(fn);return d.expand(Pn).bind(ao=>(X(Mt,ao),O.from(ao[0]).bind(Mo=>d.lookupMenu(Mo).bind(ka=>{const as=ye(Mt,Mo,ka);return $o(as.element)||zn.append(Mt,zl(as)),t.onOpenSubmenu(Mt,fn,as,cs(ao)),Wt===Te.HighlightSubmenu?(qo.highlightFirst(as),ce(Mt,d,ao)):(qo.dehighlightAll(as),O.some(fn))}))))}},Ue=(Mt,fn)=>{const Wt=p(fn);return d.collapse(Wt).bind(Pn=>(X(Mt,Pn),ce(Mt,d,Pn).map(ao=>(t.onCollapseMenu(Mt,fn,ao),ao))))},Ze=(Mt,fn)=>{const Wt=p(fn);return d.refresh(Wt).bind(Pn=>(X(Mt,Pn),ce(Mt,d,Pn)))},kt=(Mt,fn)=>jh(fn.element)?O.none():he(Mt,fn,Te.HighlightSubmenu),st=(Mt,fn)=>jh(fn.element)?O.none():Ue(Mt,fn),Dt=(Mt,fn)=>Ue(Mt,fn).orThunk(()=>t.onEscape(Mt,fn).map(()=>Mt)),hn=Mt=>(fn,Wt)=>Yu(Wt.getSource(),`.${t.markers.item}`).bind(Pn=>fn.getSystem().getByDom(Pn).toOptional().bind(ao=>Mt(fn,ao).map(jt))),Ro=Js([et(sR(),(Mt,fn)=>{const Wt=fn.event.item;d.lookupItem(p(Wt)).each(()=>{const Pn=fn.event.menu;qo.highlight(Mt,Pn);const ao=p(fn.event.item);d.refresh(ao).each(Mo=>I(Mt,d,Mo))})}),Vd((Mt,fn)=>{const Wt=fn.event.target;Mt.getSystem().getByDom(Wt).each(Pn=>{p(Pn).indexOf("collapse-item")===0&&Ue(Mt,Pn),he(Mt,Pn,Te.HighlightSubmenu).fold(()=>{t.onExecute(Mt,Pn)},G)})}),Fr((Mt,fn)=>{g(Mt).each(Wt=>{zn.append(Mt,zl(Wt)),t.onOpenMenu(Mt,Wt),t.highlightOnOpen===fi.HighlightMenuAndItem?D(Mt,Wt):t.highlightOnOpen===fi.HighlightJustMenu&&_(Mt,Wt)})}),et(iR,(Mt,fn)=>{t.onHighlightItem(Mt,fn.event.menuComp,fn.event.itemComp)}),et(uR,(Mt,fn)=>{t.onDehighlightItem(Mt,fn.event.menuComp,fn.event.itemComp)}),...t.navigateOnHover?[et(Q3(),(Mt,fn)=>{const Wt=fn.event.item;Ze(Mt,Wt),he(Mt,Wt,Te.HighlightParent),t.onHover(Mt,Wt)})]:[]]),pn=Mt=>qo.getHighlighted(Mt).bind(qo.getHighlighted),xo=Mt=>{pn(Mt).each(fn=>{Ue(Mt,fn)})},Qn=Mt=>{d.getPrimary().each(fn=>{D(Mt,fn)})},To=Mt=>O.from(Mt.components()[0]).filter(fn=>jr(fn.element,"role")==="menu"),Ss={collapseMenu:xo,highlightPrimary:Qn,repositionMenus:Mt=>{d.getPrimary().bind(Wt=>pn(Mt).bind(Pn=>{const ao=p(Pn),Mo=Mr(d.getMenus()),ka=Ka(_e(Mo,X_.extractPreparedMenu));return d.getTriggeringPath(ao,as=>y(Mt,ka,as))}).map(Pn=>({primary:Wt,triggeringPath:Pn}))).fold(()=>{To(Mt).each(Wt=>{t.onRepositionMenu(Mt,Wt,[])})},({primary:Wt,triggeringPath:Pn})=>{t.onRepositionMenu(Mt,Wt,Pn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:$a(t.tmenuBehaviours,[Cn.config({mode:"special",onRight:hn(kt),onLeft:hn(st),onEscape:hn(Dt),focusIn:(Mt,fn)=>{d.getPrimary().each(Wt=>{Vp(Mt,Wt.element,hh())})}}),qo.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),So.config({find:Mt=>qo.getHighlighted(Mt)}),zn.config({})]),eventOrder:t.eventOrder,apis:Ss,events:Ro}},TF=q("collapse-item"),z1=(t,s,a)=>({primary:t,menus:s,expansions:a}),kF=(t,s)=>({primary:t,menus:Kn(t,s),expansions:{}}),EF=t=>({value:nn(TF()),meta:{text:t}}),sd=Kr({name:"TieredMenu",configFields:[e1("onExecute"),e1("onEscape"),fg("onOpenMenu"),fg("onOpenSubmenu"),Ao("onRepositionMenu"),Ao("onCollapseMenu"),xe("highlightOnOpen",fi.HighlightMenuAndItem),Wu("data",[Je("primary"),Je("menus"),Je("expansions")]),xe("fakeFocus",!1),Ao("onHighlightItem"),Ao("onDehighlightItem"),Ao("onHover"),Zd(),Je("dom"),xe("navigateOnHover",!0),xe("stayInDom",!1),ic("tmenuBehaviours",[Cn,qo,So,zn]),xe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:xF,extraApis:{tieredData:z1,singleData:kF,collapseItem:EF}}),_F=(t,s,a,l,d)=>{const g=()=>t.lazySink(s),p=l.type==="horizontal"?{layouts:{onLtr:()=>ov(),onRtl:()=>s1()}}:{},y=_=>_.length===2,x=_=>y(_)?p:{};return sd.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Po.close(s),t.onEscape.map(_=>_(s)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(_,D)=>{Ba.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(_,D,B,I)=>{const V=g().getOrDie();Ba.position(V,B,{anchor:{type:"submenu",item:D,...x(I)}})},onRepositionMenu:(_,D,B)=>{const I=g().getOrDie();Ba.positionWithinBounds(I,D,a,d()),gt(B,V=>{const X=x(V.triggeringPath);Ba.position(I,V.triggeredMenu,{anchor:{type:"submenu",item:V.triggeringItem,...X}})})}})},OF=(t,s)=>{const a=(I,V)=>t.getRelated(I).exists(ce=>wf(ce,V)),l=(I,V)=>{Po.setContent(I,V)},d=(I,V,X)=>{const ce=O.none;g(I,V,X,ce)},g=(I,V,X,ce)=>{const Te=t.lazySink(I).getOrDie();Po.openWhileCloaked(I,V,()=>Ba.positionWithinBounds(Te,I,X,ce())),zt.setValue(I,O.some({mode:"position",config:X,getBounds:ce}))},p=(I,V,X)=>{y(I,V,X,O.none)},y=(I,V,X,ce)=>{const Te=_F(t,I,V,X,ce);Po.open(I,Te),zt.setValue(I,O.some({mode:"menu",menu:Te}))},x=I=>{Po.isOpen(I)&&(zt.setValue(I,O.none()),Po.close(I))},_=I=>Po.getState(I),D=I=>{Po.isOpen(I)&&zt.getValue(I).each(V=>{switch(V.mode){case"menu":Po.getState(I).each(sd.repositionMenus);break;case"position":const X=t.lazySink(I).getOrDie();Ba.positionWithinBounds(X,I,V.config,V.getBounds());break}})},B={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:y,hide:x,getContent:_,reposition:D,isOpen:Po.isOpen};return{uid:t.uid,dom:t.dom,behaviours:$a(t.inlineBehaviours,[Po.config({isPartOf:(I,V,X)=>wf(V,X)||a(I,X),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),zt.config({store:{mode:"memory",initialValue:O.none()}}),ua.config({channels:{...$m({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...sw({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:B}},pr=Kr({name:"InlineView",configFields:[Je("lazySink"),Ao("onShow"),Ao("onHide"),vm("onEscape"),ic("inlineBehaviours",[Po,zt,ua]),za("fireDismissalEventInstead",[xe("event",xm())]),za("fireRepositionEventInstead",[xe("event",$b())]),xe("getRelated",O.none),xe("isExtraPart",Zn),xe("eventOrder",O.none)],factory:OF,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,d)=>{t.showWithinBounds(s,a,l,d)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,d)=>{t.showMenuWithinBounds(s,a,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Tx=tinymce.util.Tools.resolve("tinymce.util.Delay");const Dr=Kr({name:"Button",factory:t=>{const s=Cx(t.action),a=t.dom.tag,l=g=>ht(t.dom,"attributes").bind(p=>ht(p,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),p=l("role").map(y=>({role:y})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Cu.augment(t.buttonBehaviours,[$n.config({}),Cn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[xe("uid",void 0),Je("dom"),xe("components",[]),Cu.field("buttonBehaviours",[$n,Cn]),rs("action"),rs("role"),xe("eventOrder",{})]}),bs=t=>{const s=od(t)&&ha(t,"uid")?t.uid:Em("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var ku=tinymce.util.Tools.resolve("tinymce.util.I18n");const dR={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},mR="temporary-placeholder",Vw=t=>()=>ht(t,mR).getOr("!not found!"),J_=(t,s)=>{const a=t.toLowerCase();if(ku.isRtl()){const l=Is(a,"-rtl");return so(s,l)?l:a}else return a},fR=(t,s)=>ht(s,J_(t,s)),gR=(t,s)=>{const a=s();return fR(t,a).getOrThunk(Vw(a))},kx=(t,s,a)=>{const l=s();return fR(t,l).or(a).getOrThunk(Vw(l))},Q_=t=>ku.isRtl()?so(dR,t):!1,eO=()=>ro("add-focusable",[Fr(t=>{P2(t.element,"svg").each(s=>Vn(s,"focusable","false"))})]),tO=(t,s,a,l)=>{var d,g;const p=Q_(s)?["tox-icon--flip"]:[],y=ht(a,J_(s,a)).or(l).getOrThunk(Vw(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:y},behaviours:vt([...(g=t.behaviours)!==null&&g!==void 0?g:[],eO()])}},rd=(t,s,a,l=O.none())=>tO(s,t,a(),l),AF=(t,s,a)=>{const l=a(),d=Tt(t,g=>so(l,J_(g,l)));return tO(s,d.getOr(mR),l,O.none())},nO={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},zw=Kr({name:"Notification",factory:t=>{const s=bs({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:vt([zn.config({})])}),a=V=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${V}%`}}}),l=V=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${V}%`}}),d=bs({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:vt([zn.config({})])}),y={updateProgress:(V,X)=>{V.getSystem().isConnected()&&d.getOpt(V).each(ce=>{zn.set(ce,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(X)]},l(X)])})},updateText:(V,X)=>{if(V.getSystem().isConnected()){const ce=s.get(V);zn.set(ce,[Er(X)])}}},x=Vt([t.icon.toArray(),t.level.toArray(),t.level.bind(V=>O.from(nO[V])).toArray()]),_=bs(Dr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[rd("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:V=>{t.onAction(V)}})),D=AF(x,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),B={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:vt([zn.config({})])},I=[D,B];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(V=>["tox-notification","tox-notification--in",`tox-notification--${V}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:vt([$n.config({}),ro("notification-events",[et(df(),V=>{_.getOpt(V).each($n.focus)})])]),components:I.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[_.asSpec()]:[]),apis:y}},configFields:[rs("level"),Je("progress"),rs("icon"),Je("onAction"),Je("text"),Je("iconProvider"),Je("translationProvider"),Fc("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var DF=(t,s,a)=>{const l=s.backstage.shared,d=()=>{const x=E(pe.fromDom(t.getContentAreaContainer())),_=de(),D=_i(_.x,x.x,x.right),B=_i(_.y,x.y,x.bottom),I=Math.max(x.right,_.right),V=Math.max(x.bottom,_.bottom);return O.some(Zs(D,B,I-D,V-B))};return{open:(x,_)=>{const D=()=>{_(),pr.hide(I)},B=cc(zw.sketch({text:x.text,level:po(["success","error","warning","warn","info"],x.type)?x.type:void 0,progress:x.progressBar===!0,icon:x.icon,closeButton:x.closeButton,onAction:D,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),I=cc(pr.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{},...l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(I),Sn(x.timeout)&&x.timeout>0&&Tx.setEditorTimeout(t,()=>{D()},x.timeout);const X={close:D,reposition:()=>{const ce=zl(B),Te={maxHeightFunction:vg()},ye=t.notificationManager.getNotifications();if(ye[0]===X){const he={...l.anchors.banner(),overrides:Te};pr.showWithinBounds(I,ce,{anchor:he},d)}else je(ye,X).each(he=>{const Ue=ye[he-1].getEl(),Ze={type:"node",root:Ws(),node:O.some(pe.fromDom(Ue)),overrides:Te,layouts:{onRtl:()=>[Ar],onLtr:()=>[Ar]}};pr.showWithinBounds(I,ce,{anchor:Ze},d)})},text:ce=>{zw.updateText(B,ce)},settings:x,getEl:()=>B.element.dom,progressBar:{value:ce=>{zw.updateProgress(B,ce)}}};return X},close:x=>{x.close()},getArgs:x=>x.settings}},Pg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ex=tinymce.util.Tools.resolve("tinymce.EditorManager"),U1=tinymce.util.Tools.resolve("tinymce.Env"),Eu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Eu||(Eu={}));var Uw;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Uw||(Uw={}));const tr=t=>s=>s.options.get(t),Ww=t=>s=>O.from(t(s)),hR=t=>{const s=U1.deviceType.isPhone(),a=U1.deviceType.isTablet()||s,l=t.options.register,d=p=>_t(p)||p===!1,g=p=>_t(p)||Sn(p);l("skin",{processor:p=>_t(p)||p===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:Pg.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:p=>_t(p)||Qt(p),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:p=>Qt(p)||_t(p)||vn(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Bo(9,p=>{l("toolbar"+(p+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Uw.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:p=>p==="both"||Qt(p),default:!U1.deviceType.isTouch()}),l("sidebar_show",{processor:"string"})},_x=tr("readonly"),Ox=tr("height"),Ax=tr("width"),Zw=Ww(tr("min_width")),oO=Ww(tr("min_height")),jw=Ww(tr("max_width")),sO=Ww(tr("max_height")),pR=Ww(tr("style_formats")),bR=tr("style_formats_merge"),rO=tr("style_formats_autohide"),vR=tr("content_langs"),yR=tr("removed_menuitems"),tp=tr("toolbar_mode"),aO=tr("toolbar_groups"),Dx=tr("toolbar_location"),RF=tr("fixed_toolbar_container"),cO=tr("fixed_toolbar_container_target"),wR=tr("toolbar_persist"),CR=tr("toolbar_sticky_offset"),SR=tr("menubar"),Rx=tr("toolbar"),xR=tr("file_picker_callback"),lO=tr("file_picker_validator_handler"),Mx=tr("font_size_input_default_unit"),TR=tr("file_picker_types"),Gw=tr("typeahead_urls"),kR=tr("anchor_top"),ER=tr("anchor_bottom"),_R=tr("draggable_modal"),OR=tr("statusbar"),AR=tr("elementpath"),DR=tr("branding"),iO=tr("resize"),RR=tr("paste_as_text"),MR=tr("sidebar_show"),Nx=tr("promotion"),Ig=t=>t.options.get("skin")===!1,Bx=t=>t.options.get("menubar")!==!1,NR=t=>{const s=t.options.get("skin_url");if(Ig(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return Ex.baseURL+"/skins/ui/"+a}},$x=t=>t.options.get("line_height_formats").split(" "),Px=t=>{const s=Rx(t),a=_t(s),l=vn(s)&&s.length>0;return!qw(t)&&(l||a||s===!0)},Ix=t=>{const s=Bo(9,l=>t.options.get("toolbar"+(l+1))),a=Fn(s,_t);return _n(a.length>0,a)},qw=t=>Ix(t).fold(()=>{const s=Rx(t);return qe(s,_t)&&s.length>0},jt),Fx=t=>Dx(t)===Uw.bottom,uO=t=>{var s;if(!t.inline)return O.none();const a=(s=RF(t))!==null&&s!==void 0?s:"";if(a.length>0)return _r(Ws(),a);const l=cO(t);return it(l)?O.some(pe.fromDom(l)):O.none()},np=t=>t.inline&&uO(t).isSome(),dO=t=>uO(t).getOrThunk(()=>rt($e(pe.fromDom(t.getElement())))),Lx=t=>t.inline&&!Bx(t)&&!Px(t)&&!qw(t),Kw=t=>(t.options.get("toolbar_sticky")||t.inline)&&!np(t)&&!Lx(t),Jd=t=>!np(t)&&t.options.get("ui_mode")==="split",BR=t=>{const s=t.options.get("menu");return qt(s,a=>({...a,items:a.items}))};var MF=Object.freeze({__proto__:null,get ToolbarMode(){return Eu},get ToolbarLocation(){return Uw},register:hR,getSkinUrl:NR,isReadOnly:_x,isSkinDisabled:Ig,getHeightOption:Ox,getWidthOption:Ax,getMinWidthOption:Zw,getMinHeightOption:oO,getMaxWidthOption:jw,getMaxHeightOption:sO,getUserStyleFormats:pR,shouldMergeStyleFormats:bR,shouldAutoHideStyleFormats:rO,getLineHeightFormats:$x,getContentLanguages:vR,getRemovedMenuItems:yR,isMenubarEnabled:Bx,isMultipleToolbars:qw,isToolbarEnabled:Px,isToolbarPersist:wR,getMultipleToolbarsOption:Ix,getUiContainer:dO,useFixedContainer:np,isSplitUiMode:Jd,getToolbarMode:tp,isDraggableModal:_R,isDistractionFree:Lx,isStickyToolbar:Kw,getStickyToolbarOffset:CR,getToolbarLocation:Dx,isToolbarLocationBottom:Fx,getToolbarGroups:aO,getMenus:BR,getMenubar:SR,getToolbar:Rx,getFilePickerCallback:xR,getFilePickerTypes:TR,useTypeaheadUrls:Gw,getAnchorTop:kR,getAnchorBottom:ER,getFilePickerValidatorHandler:lO,getFontSizeInputDefaultUnit:Mx,useStatusBar:OR,useElementPath:AR,promotionEnabled:Nx,useBranding:DR,getResize:iO,getPasteAsText:RR,getSidebarShow:MR});const Hx="[data-mce-autocompleter]",Vx=t=>Yu(t,Hx),NF=t=>_r(t,Hx),$F={setup:(t,s)=>{const a=(d,g)=>{xn(d,ri(),{raw:g})},l=()=>t.getMenu().bind(qo.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(Ld),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(qo.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&Vx(pe.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var mO;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(mO||(mO={}));var ad=mO;const fO="tox-menu-nav__js",zx="tox-collection__item",gO="tox-swatch",PF={normal:fO,color:gO},$R="tox-collection__item--enabled",IF="tox-collection__group-heading",PR="tox-collection__item-icon",hO="tox-collection__item-label",FF="tox-collection__item-accessory",IR="tox-collection__item-caret",LF="tox-collection__item-checkmark",Yw="tox-collection__item--active",Ux="tox-collection__item-container",HF="tox-collection__item-container--column",FR="tox-collection__item-container--row",VF="tox-collection__item-container--align-right",LR="tox-collection__item-container--align-left",zF="tox-collection__item-container--valign-top",UF="tox-collection__item-container--valign-middle",WF="tox-collection__item-container--valign-bottom",HR=t=>ht(PF,t).getOr(fO),ZF=t=>t==="color"?"tox-swatches":"tox-menu",pO=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:ZF(t),tieredMenu:"tox-tiered-menu"}),Fg=t=>{const s=pO(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:HR(t)}},jF=(t,s,a)=>{const l=pO(a);return{tag:"div",classes:Vt([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},GF=[V1.parts.items({})],Wx=(t,s,a)=>{const l=pO(a);return{dom:{tag:"div",classes:Vt([[l.tieredMenu]])},markers:Fg(a)}},VR=q([rs("data"),xe("inputAttributes",{}),xe("inputStyles",{}),xe("tag","input"),xe("inputClasses",[]),Ao("onSetValue"),xe("styles",{}),xe("eventOrder",{}),ic("inputBehaviours",[zt,$n]),xe("selectOnFocus",!0)]),zR=t=>vt([$n.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=Ei(a);a.dom.setSelectionRange(0,l.length)}:G})]),qF=t=>({...zR(t),...$a(t.inputBehaviours,[zt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Ei(s.element),setValue:(s,a)=>{Ei(s.element)!==a&&Gi(s.element,a)}},onSetValue:t.onSetValue})])}),UR=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),KF=(t,s)=>({uid:t.uid,dom:UR(t),components:[],behaviours:qF(t),eventOrder:t.eventOrder}),W1=Kr({name:"Input",configFields:VR(),factory:KF}),WR=nn("refetch-trigger-event"),ZR=nn("redirect-menu-item-interaction"),jR="tox-menu__searcher",Z1=t=>_r(t.element,`.${jR}`).bind(s=>t.getSystem().getByDom(s).toOptional()),GR=Z1,bO=(t,s)=>{zt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},qR=t=>{const s=zt.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},YF=(t,s)=>{$(s.element,"id").each(a=>Vn(t.element,"aria-activedescendant",a))},XF=t=>{const s=(d,g)=>(g.cut(),O.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return xn(d,ZR,p),O.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[zx]},components:[W1.sketch({inputClasses:[jR,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:vt([ro(l,[et(Pd(),d=>{Go(d,WR)}),et(ri(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Cn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Cn.name()]}})]}},Zx="tox-collection--results__js",KR=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:nn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},jx=(t,s)=>a=>{const l=Ps(a,s);return _e(l,d=>({dom:t,components:d}))},JF=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[V1.parts.items({preprocess:t!=="auto"?jx({tag:"div",classes:["tox-swatches__row"]},t):ft})]}]}),vO=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[V1.parts.items({preprocess:jx({tag:"div",classes:["tox-collection__group"]},t)})]}),Gx=(t,s)=>{const a=[];let l=[];return gt(t,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(so(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),_e(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},qx=(t,s,a)=>V1.parts.items({preprocess:l=>{const d=_e(l,a);return t!=="auto"&&t>1?jx({tag:"div",classes:["tox-collection__group"]},t)(d):Gx(d,(g,p)=>s[p].type==="separator")}}),Kx=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[qx(t,s,ft)]}),Yx=(t,s,a=!0)=>{const l=nn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Zx].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[qx(t,s,KR)]}},YR=(t,s,a)=>{const l=nn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[XF({i18n:ku.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Zx],attributes:{id:l}},components:[qx(t,s,KR)]}]}},Nf=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[V1.parts.items({preprocess:a=>Gx(a,(l,d)=>t[d].type==="separator")})]}),n0=t=>Xo(t,s=>"icon"in s&&s.icon!==void 0),Lg=t=>(console.error(_l(t)),console.log(t),O.none()),QF=(t,s,a,l,d)=>{const g=Nf(a);return{value:t,dom:g.dom,components:g.components,items:a}},yO=(t,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?Kx(l,a):d.searchMode.searchMode==="search-with-field"?YR(l,a,d.searchMode):Yx(l,a);if(d.menuType==="color"){const p=JF(l);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const p=Kx(l,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const p=vO(l);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:jF(s,l,d.menuType),components:GF,items:a}},xa=Qr("type"),op=Qr("name"),wO=Qr("label"),Hg=Qr("text"),CO=Qr("title"),Xx=Qr("icon"),j1=Qr("value"),eL=Ti("fetch"),SO=Ti("getSubmenuItems"),sp=Ti("onAction"),tL=Ti("onItemAction"),rp=Ca("onSetup",()=>G),XR=ea("name"),ap=ea("text"),Qd=ea("icon"),Jx=ea("tooltip"),xO=ea("label"),nL=ea("shortcut"),JR=vm("select"),Xw=Fc("active",!1),oL=Fc("borderless",!1),cd=Fc("enabled",!0),Jw=Fc("primary",!1),o0=t=>xe("columns",t),Qx=xe("meta",{}),TO=Ca("onAction",G),G1=t=>Sc("type",t),eT=t=>ps("name","name",Md(()=>nn(`${t}-name`)),Va),sL=t=>ps("value","value",Md(()=>nn(`${t}-value`)),oc()),QR=ze([xa,ap]),eM=t=>oo("separatormenuitem",QR,t),tM=ze([G1("autocompleteitem"),Xw,cd,Qx,j1,ap,Qd]),nM=t=>oo("Autocompleter.Separator",QR,t),oM=t=>oo("Autocompleter.Item",tM,t),Qw=[cd,Jx,Qd,ap,rp],rL=ze([xa,sp].concat(Qw)),kO=t=>oo("toolbarbutton",rL,t),eC=[Xw].concat(Qw),EO=ze(eC.concat([xa,sp])),_O=t=>oo("ToggleButton",EO,t),OO=[Ca("predicate",Zn),ni("scope","node",["node","editor"]),ni("position","selection",["node","selection","line"])],sM=Qw.concat([G1("contextformbutton"),Jw,sp,Pc("original",ft)]),aL=eC.concat([G1("contextformbutton"),Jw,sp,Pc("original",ft)]),AO=Qw.concat([G1("contextformbutton")]),cL=eC.concat([G1("contextformtogglebutton")]),rM=dl("type",{contextformbutton:sM,contextformtogglebutton:aL}),aM=ze([G1("contextform"),Ca("initValue",q("")),xO,Ol("commands",rM),mu("launch",dl("type",{contextformbutton:AO,contextformtogglebutton:cL}))].concat(OO)),q1=t=>oo("ContextForm",aM,t),lL=ze([G1("contexttoolbar"),Qr("items")].concat(OO)),DO=t=>oo("ContextToolbar",lL,t),tT=[xa,Qr("src"),ea("alt"),uh("classes",[],Va)],iL=ze(tT),cM=[xa,Hg,XR,uh("classes",["tox-collection__item-label"],Va)],lM=ze(cM),RO=ia(()=>Ui("type",{cardimage:iL,cardtext:lM,cardcontainer:MO})),MO=ze([xa,Sc("direction","horizontal"),Sc("align","left"),Sc("valign","middle"),Ol("items",RO)]),K1=[cd,ap,nL,sL("menuitem"),Qx],uL=ze([xa,xO,Ol("items",RO),rp,TO].concat(K1)),iM=t=>oo("cardmenuitem",uL,t),uM=ze([xa,Xw,Qd].concat(K1)),dM=t=>oo("choicemenuitem",uM,t),NO=[xa,Qr("fancytype"),TO],dL=[xe("initData",{})].concat(NO),mM=[vm("select"),C("initData",{},[Fc("allowCustomColors",!0),Sc("storageKey","default"),ng("colors",oc())])].concat(NO),tC=dl("fancytype",{inserttable:dL,colorswatch:mM}),mL=t=>oo("fancymenuitem",tC,t),fL=ze([xa,rp,TO,Qd].concat(K1)),gL=t=>oo("menuitem",fL,t),fM=ze([xa,SO,rp,Qd].concat(K1)),gM=t=>oo("nestedmenuitem",fM,t),hL=ze([xa,Qd,Xw,rp,sp].concat(K1)),pL=t=>oo("togglemenuitem",hL,t),BO=(t,s,a)=>{const l=da(t.element,"."+a);if(l.length>0){const d=$t(l,g=>{const p=g.dom.getBoundingClientRect().top,y=l[0].dom.getBoundingClientRect().top;return Math.abs(p-y)>s}).getOr(l.length);return O.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return O.none()},hM=(t,s)=>vt([ro(t,s)]),cp={namedEvents:hM,unnamedEvents:t=>hM(nn("unnamed-events"),t)},pM=nn("tooltip.exclusive"),s0=nn("tooltip.show"),r0=nn("tooltip.hide"),$O=(t,s,a)=>{t.getSystem().broadcastOn([pM],{})};var bM=Object.freeze({__proto__:null,hideAllExclusive:$O,setComponents:(t,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&zn.set(d,l)})}}),vM=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Yd(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},l=d=>{if(!s.isShowing()){$O(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Js(t.mode==="normal"?[et(ki(),y=>{Go(d,s0)}),et(Cm(),y=>{Go(d,r0)})]:[]),behaviours:vt([zn.config({})])});s.setTooltip(p),Kd(g,p),t.onShow(d,p),Ba.position(g,p,{anchor:t.anchor(d)})}};return Js(Vt([[et(s0,d=>{s.resetTimer(()=>{l(d)},t.delay)}),et(r0,d=>{s.resetTimer(()=>{a(d)},t.delay)}),et(Ir(),(d,g)=>{const p=g;p.universal||po(p.channels,pM)&&a(d)}),Al(d=>{a(d)})],t.mode==="normal"?[et(df(),d=>{Go(d,s0)}),et(oy(),d=>{Go(d,r0)}),et(ki(),d=>{Go(d,s0)}),et(Cm(),d=>{Go(d,r0)})]:[et(ly(),(d,g)=>{Go(d,s0)}),et(Pb(),d=>{Go(d,r0)})]]))}}),yM=[Je("lazySink"),Je("tooltipDom"),xe("exclusive",!0),xe("tooltipComponents",[]),xe("delay",300),ni("mode","normal",["normal","follow-highlight"]),xe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:q([Ar,qi,kc,li,Na,Or]),onRtl:q([Ar,qi,kc,li,Na,Or])}})),Ao("onHide"),Ao("onShow")],vL=Object.freeze({__proto__:null,init:()=>{const t=Cs(),s=Cs(),a=()=>{t.on(clearTimeout)},l=(g,p)=>{a(),t.set(setTimeout(g,p))},d=q("not-implemented");return rc({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:l,readState:d})}});const wM=Ec({fields:yM,name:"tooltipping",active:vM,state:vL,apis:bM}),yL=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),PO="silver.readonly",CM=ze([Ip("readonly")]),nT=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&gt(d,g=>{g.broadcastOn([Bm()],{target:l})}),gt(d,g=>{g.broadcastOn([PO],{readonly:s})})},SM=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&nT(s,!0)}),t.on("SwitchMode",()=>nT(s,t.mode.isReadOnly())),_x(t)&&t.mode.set("readonly")},mc=()=>ua.config({channels:{[PO]:{schema:CM,onReceive:(t,s)=>{Dn.set(t,s.readonly)}}}}),_u={item:t=>Dn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Dn.config({disabled:t}),splitButton:t=>Dn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Dn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},nC=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},Y1=(t,s)=>Fr(a=>{nC(t,a)(d=>{const g=t.onSetup(d);ot(g)&&s.set(g)})}),X1=(t,s)=>Al(a=>nC(t,a)(s.get())),xM=(t,s)=>Vd((a,l)=>{nC(t,a)(t.onAction),!t.triggersSubmenu&&s===ad.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Go(a,ph()),l.stop())}),wL={[hl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},a0=Ka,J1=(t,s,a,l)=>{const d=S(G);return{type:"item",dom:s.dom,components:a0(s.optComponents),data:t.data,eventOrder:wL,hasSubmenu:t.triggersSubmenu,itemBehaviours:vt([ro("item-events",[xM(t,a),Y1(t,d),X1(t,d)]),_u.item(()=>!t.enabled||l.isDisabled()),mc(),zn.config({})].concat(t.itemBehaviours))}},Q1=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),TM=t=>{const s=U1.os.isMacOS()||U1.os.isiOS(),d=s?{alt:"â¥",ctrl:"â",shift:"â§",meta:"â",access:"ââ¥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=_e(g,y=>{const x=y.toLowerCase().trim();return so(d,x)?d[x]:y});return s?p.join(""):p.join("+")},IO=(t,s,a=[PR])=>rd(t,{tag:"div",classes:a},s),kM=t=>({dom:{tag:"div",classes:[hO]},components:[Er(ku.translate(t))]}),EM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),CL=(t,s)=>({dom:{tag:"div",classes:[hO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Er(ku.translate(s))]}]}),SL=t=>({dom:{tag:"div",classes:[FF]},components:[Er(TM(t))]}),lp=t=>IO("checkmark",t,[LF]),FO=t=>IO("chevron-right",t,[IR]),xL=t=>IO("chevron-down",t,[IR]),oT=(t,s)=>{const a=t.direction==="vertical"?HF:FR,l=t.align==="left"?LR:VF;return{dom:{tag:"div",classes:[Ux,a,l,(()=>{switch(t.valign){case"top":return zF;case"middle":return UF;case"bottom":return WF}})()]},components:s}},Fm=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),TL=(t,s,a)=>{const l="custom",d="remove",g=t.ariaLabel,p=t.value,y=t.iconContent.map(_=>kx(_,s.icons,a));return{dom:(()=>{const _=gO,D=y.getOr(""),I={tag:"div",attributes:g.map(V=>({title:s.translate(V)})).getOr({}),classes:[_]};return p===l?{...I,tag:"button",classes:[...I.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...I,classes:[...I.classes,"tox-swatch--remove"],innerHtml:D}:it(p)?{...I,attributes:{...I.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:I})(),optComponents:[]}},_M=t=>{const s=t.map(a=>({attributes:{title:ku.translate(a)}})).getOr({});return{tag:"div",classes:[fO,zx],...s}},kL=(t,s,a,l)=>{const d={tag:"div",classes:[PR]},g=I=>rd(I,d,s.icons,l),p=()=>O.some({dom:d}),y=a?t.iconContent.map(g).orThunk(p):O.none(),x=t.checkMark,_=O.from(t.meta).fold(()=>kM,I=>so(I,"style")?Bt(CL,I.style):kM),D=t.htmlContent.fold(()=>t.textContent.map(_),I=>O.some(EM(I,[hO])));return{dom:_M(t.ariaLabel),optComponents:[y,D,t.shortcutContent.map(SL),x,t.caret]}},eb=(t,s,a,l=O.none())=>t.presets==="color"?TL(t,s,l):kL(t,s,a,l),OM=(t,s)=>ht(t,"tooltipWorker").map(a=>[wM.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:vg}}),mode:"follow-highlight",onShow:(l,d)=>{a(g=>{wM.setComponents(l,[Am({element:pe.fromDom(g)})])})}})]).getOr([]),EL=t=>Pg.DOM.encode(t),LO=(t,s)=>{const a=ku.translate(t),l=EL(a);if(s.length>0){const d=new RegExp(yL(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},_L=(t,s,a,l,d,g,p,y=!0)=>{const x=eb({presets:l,textContent:O.none(),htmlContent:a?t.text.map(_=>LO(_,s)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},p.providers,y,t.icon);return J1({data:Q1(t),enabled:t.enabled,getApi:q({}),onAction:_=>d(t.value,t.meta),onSetup:q(G),triggersSubmenu:!1,itemBehaviours:OM(t.meta,p)},x,g,p.providers)},AM=(t,s)=>_e(t,a=>{switch(a.type){case"cardcontainer":return oT(a,AM(a.items,s));case"cardimage":return Fm(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>po(s.cardText.highlightOn,g))?O.from(s.cardText.matchText).getOr(""):"";return EM(LO(a.text,d),a.classes)}}),OL=(t,s,a,l)=>{const d=p=>({isEnabled:()=>!Dn.isDisabled(p),setEnabled:y=>{Dn.set(p,!y),gt(da(p.element,"*"),x=>{p.getSystem().getByDom(x).each(_=>{_.hasConfigured(Dn)&&Dn.set(_,!y)})})}}),g={dom:_M(t.label),optComponents:[O.some({dom:{tag:"div",classes:[Ux,FR]},components:AM(t.items,l)})]};return J1({data:Q1({text:O.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(l.itemBehaviours).getOr([])},g,s,a.providers)},Ji=(t,s,a,l,d,g,p,y=!0)=>{const x=D=>({setActive:B=>{go.set(D,B)},isActive:()=>go.isOn(D),isEnabled:()=>!Dn.isDisabled(D),setEnabled:B=>Dn.set(D,!B)}),_=eb({presets:a,textContent:s?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:O.none(),checkMark:s?O.some(lp(p.icons)):O.none(),caret:O.none(),value:t.value},p,y);return $s(J1({data:Q1(t),enabled:t.enabled,getApi:x,onAction:D=>l(t.value),onSetup:D=>(D.setActive(d),G),triggersSubmenu:!1,itemBehaviours:[]},_,g,p),{toggling:{toggleClass:$R,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Lm=pw(Sx(),q_()),DM=t=>({value:RM(t)}),HO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,oC=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,sT=t=>HO.test(t)||oC.test(t),RM=t=>Ja(t,"#").toUpperCase(),AL=t=>sT(t)?O.some({value:RM(t)}):O.none(),sC=t=>({value:t.value.replace(HO,(a,l,d,g)=>l+l+d+d+g+g)}),rT=t=>{const s=sC(t),a=oC.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},VO=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},em=t=>{const s=VO(t.red)+VO(t.green)+VO(t.blue);return DM(s)},MM=Math.min,NM=Math.max,jl=Math.round,zO=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Hm=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ip=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),Rs=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},up=t=>{let s,a,l;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=NM(0,MM(g,1)),p=NM(0,MM(p,1)),g===0)return s=a=l=jl(255*p),ip(s,a,l,1);const y=d/60,x=p*g,_=x*(1-Math.abs(y%2-1)),D=p-x;switch(Math.floor(y)){case 0:s=x,a=_,l=0;break;case 1:s=_,a=x,l=0;break;case 2:s=0,a=x,l=_;break;case 3:s=0,a=_,l=x;break;case 4:s=_,a=0,l=x;break;case 5:s=x,a=0,l=_;break;default:s=a=l=0}return s=jl(255*(s+D)),a=jl(255*(a+D)),l=jl(255*(l+D)),ip(s,a,l,1)},dp=t=>{const s=rT(t),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return ip(a,l,d,1)},UO=(t,s,a,l)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),y=parseFloat(l);return ip(d,g,p,y)},rC=t=>{if(t==="transparent")return O.some(ip(0,0,0,0));const s=zO.exec(t);if(s!==null)return O.some(UO(s[1],s[2],s[3],"1"));const a=Hm.exec(t);return a!==null?O.some(UO(a[1],a[2],a[3],a[4])):O.none()},aT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,BM=ip(255,0,0,1),WO=t=>{t.dispatch("SkinLoaded")},DL=(t,s)=>{t.dispatch("SkinLoadError",s)},$M=t=>{t.dispatch("ResizeEditor")},cT=(t,s)=>{t.dispatch("ResizeContent",s)},ZO=(t,s)=>{t.dispatch("ScrollContent",s)},jO=(t,s)=>{t.dispatch("TextColorChange",s)},lT=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},RL=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),ML=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var tb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const PM={},NL=(t,s=10)=>{const a=tb.getItem(t),l=_t(a)?JSON.parse(a):[],g=(_=>s-_.length<0?_.slice(0,s):_)(l),p=_=>{je(g,_).each(y),g.unshift(_),g.length>s&&g.pop(),tb.setItem(t,JSON.stringify(g))},y=_=>{g.splice(_,1)};return{add:p,state:()=>g.slice(0)}},IM=t=>ht(PM,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=tb.getItem(s);if(Ht(a)){const d=tb.getItem("tinymce-custom-colors");tb.setItem(s,it(d)?d:"[]")}const l=NL(s,10);return PM[t]=l,l}),BL=t=>_e(IM(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),FM=(t,s)=>{IM(t).add(s)},aC=(t,s,a)=>({hue:t,saturation:s,value:a}),GO=t=>{let s=0,a=0,l=0;const d=t.red/255,g=t.green/255,p=t.blue/255,y=Math.min(d,Math.min(g,p)),x=Math.max(d,Math.max(g,p));if(y===x)return l=y,aC(0,0,l*100);const _=d===y?g-p:p===y?d-g:p-d;return s=d===y?3:p===y?1:5,s=60*(s-_/(x-y)),a=(x-y)/x,l=x,aC(Math.round(s),Math.round(a*100),Math.round(l*100))},LM=t=>GO(dp(t)),HM=t=>em(up(t)),VM=t=>AL(t).orThunk(()=>rC(t).map(em)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],p=l[2],y=l[3];return em(ip(d,g,p,y))}),qO="forecolor",KO="hilitecolor",YO=5,zM=t=>Math.max(YO,Math.ceil(Math.sqrt(t))),UM=(t,s)=>{const a=zM(s),l=Vm("color_cols")(t);return YO===a?l:a},$L=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+VM(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Vm=t=>s=>s.options.get(t),ld="#000000",PL=t=>{const s=t.options.register,a=l=>qe(l,_t)?{value:$L(l),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:zM(c0(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:UM(t,c0(t,qO).length)}),s("color_cols_background",{processor:"number",default:UM(t,c0(t,KO).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:ld}),s("color_default_background",{processor:"string",default:ld})},XO=(t,s)=>s===qO?Vm("color_cols_foreground")(t):s===KO?Vm("color_cols_background")(t):Vm("color_cols")(t),JO=(t,s)=>{const a=XO(t,s);return a>0?a:YO},QO=Vm("custom_colors"),c0=(t,s)=>s===qO&&t.options.isSet("color_map_foreground")?Vm("color_map_foreground")(t):s===KO&&t.options.isSet("color_map_background")?Vm("color_map_background")(t):Vm("color_map")(t),WM=Vm("color_default_foreground"),ZM=Vm("color_default_background"),IL="rgba(0, 0, 0, 0)",FL=t=>rC(t).exists(s=>s.alpha!==0),LL=t=>oi(t,s=>{if(Lo(s)){const a=Qe(s,"background-color");return _n(FL(a),a)}else return O.none()}).getOr(IL),jM=(t,s)=>{const a=pe.fromDom(t.selection.getStart()),l=s==="hilitecolor"?LL(a):Qe(a,"color");return rC(l).map(d=>"#"+em(d).value)},GM=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},qM=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},KM=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{GM(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{qM(t,s)})},YM=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},eA=(t,s,a,l)=>{a==="custom"?iT(t)(g=>{g.each(p=>{FM(s,p),t.execCommand("mceApplyTextcolor",s,p),l(p)})},jM(t,s).getOr(ld)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},XM=(t,s,a)=>t.concat(BL(s).concat(YM(a))),nb=(t,s,a)=>l=>{l(XM(t,s,a))},tA=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},nA=(t,s)=>a=>{const l=jM(t,s);return ar(l,a.toUpperCase())},oA=(t,s,a,l,d)=>{t.ui.registry.addSplitButton(s,{tooltip:l,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:nA(t,a),columns:JO(t,a),fetch:nb(c0(t,a),a,QO(t)),onAction:g=>{eA(t,a,d.get(),G)},onItemAction:(g,p)=>{eA(t,a,p,y=>{d.set(y),jO(t,{name:s,color:y})})},onSetup:g=>{tA(g,s,d.get());const p=y=>{y.name===s&&tA(g,y.name,y.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},sA=(t,s,a,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(tA(g,s,d.get()),G),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:nA(t,a),initData:{storageKey:a},onAction:g=>{eA(t,a,g.value,p=>{d.set(p),jO(t,{name:s,color:p})})}}]})},iT=t=>(s,a)=>{let l=!1;const d=y=>{const _=y.getData().colorpicker;l?(s(O.from(_)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(y,x)=>{x.name==="hex-valid"&&(l=x.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:G,onCancel:()=>{s(O.none())}})},rA=t=>{KM(t);const s=WM(t),a=ZM(t),l=S(s),d=S(a);oA(t,"forecolor","forecolor","Text color",l),oA(t,"backcolor","hilitecolor","Background color",d),sA(t,"forecolor","forecolor","Text color",l),sA(t,"backcolor","hilitecolor","Background color",d)},cC=(t,s,a,l,d,g,p,y)=>{const x=n0(s),D=JM(s,a,l,d!=="color"?"normal":"color",g,p,y);return yO(t,x,D,l,{menuType:d})},JM=(t,s,a,l,d,g,p)=>Ka(_e(t,y=>y.type==="choiceitem"?dM(y).fold(Lg,x=>O.some(Ji(x,a===1,l,s,g(x.value),d,p,n0(t)))):O.none())),uT=(t,s)=>{const a=Fg(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?_r(d.element,"[aria-checked=true]"):O.none()}},QM=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${gO}`:`.${zx}`}},HL=(t,s)=>{const a=VL(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...cC(nn("menu-value"),a,y=>{t.onAction({value:y})},l,d,ad.CLOSE_ON_EXECUTE,t.select.getOr(Zn),s.shared.providers),markers:Fg(d),movement:uT(l,d)};return{type:"widget",data:{value:nn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Lm.widget(V1.sketch(p))]}},VL=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>XM(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(YM(a)))},eN=nn("cell-over"),aA=nn("cell-execute"),tN=(t,s,a)=>{const l=p=>xn(p,eN,{row:t,col:s}),d=p=>xn(p,aA,{row:t,col:s}),g=(p,y)=>{y.stop(),d(p)};return cc({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:vt([ro("insert-table-picker-cell",[et(ki(),$n.focus),et(hl(),d),et(Zi(),g),et(sg(),g)]),go.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),$n.config({onFocus:l})])})},nN=(t,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(tN(d,p,t));l.push(g)}return l},zL=(t,s,a,l,d)=>{for(let g=0;g<l;g++)for(let p=0;p<d;p++)go.set(t[g][p],g<=s&&p<=a)},UL=t=>De(t,s=>_e(s,zl)),oN=(t,s)=>Er(`${s}x${t}`),WL={inserttable:t=>{const l=nn("size-label"),d=nN(l,10,10),g=oN(0,0),p=bs({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:l}},components:[g],behaviours:vt([zn.config({})])});return{type:"widget",data:{value:nn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Lm.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:UL(d).concat(p.asSpec()),behaviours:vt([ro("insert-table-picker",[Fr(y=>{zn.set(p.get(y),[g])}),Up(eN,(y,x,_)=>{const{row:D,col:B}=_.event;zL(d,D,B,10,10),zn.set(p.get(y),[oN(D+1,B+1)])}),Up(aA,(y,x,_)=>{const{row:D,col:B}=_.event;t.onAction({numRows:D+1,numColumns:B+1}),Go(y,ph())})]),Cn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:HL},ZL=(t,s)=>ht(WL,t.fancytype).map(a=>a(t,s)),jL=(t,s,a,l=!0,d=!1)=>{const g=d?xL(a.icons):FO(a.icons),p=x=>({isEnabled:()=>!Dn.isDisabled(x),setEnabled:_=>Dn.set(x,!_),setIconFill:(_,D)=>{_r(x.element,`svg path[id="${_}"], rect[id="${_}"]`).each(B=>{Vn(B,"fill",D)})}}),y=eb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(g),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return J1({data:Q1(t),getApi:p,enabled:t.enabled,onAction:G,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,a)},GL=(t,s,a,l=!0)=>{const d=p=>({isEnabled:()=>!Dn.isDisabled(p),setEnabled:y=>Dn.set(p,!y)}),g=eb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return J1({data:Q1(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},qL=t=>({type:"separator",dom:{tag:"div",classes:[zx,IF]},components:t.text.map(Er).toArray()}),KL=(t,s,a,l=!0)=>{const d=p=>({setActive:y=>{go.set(p,y)},isActive:()=>go.isOn(p),isEnabled:()=>!Dn.isDisabled(p),setEnabled:y=>Dn.set(p,!y)}),g=eb({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(lp(a.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return $s(J1({data:Q1(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:$R,toggleOnExecute:!1,selected:t.active}})},YL=_L,cA=qL,XL=GL,JL=jL,QL=KL,e6=ZL,t6=OL;var o6=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),s6=[ml("others",cf(St.value,oc()))],r6=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(Uo(g.others).length===0)throw new Error("Cannot find any known coupled components");return ht(t,p)},a=(g,p,y)=>s(p,y).getOrThunk(()=>{const _=ht(p.others,y).getOrDie("No information found for coupled component: "+y)(g),D=g.getSystem().build(_);return t[y]=D,D}),l=(g,p,y)=>s(p,y).orThunk(()=>(ht(p.others,y).getOrDie("No information found for coupled component: "+y),O.none())),d=q({});return rc({readState:d,getExisting:l,getOrCreate:a})}});const na=Ec({fields:s6,name:"coupling",apis:o6,state:r6}),iA=t=>{let s=O.none(),a=[];const l=_=>iA(D=>{d(B=>{D(_(B))})}),d=_=>{p()?x(_):a.push(_)},g=_=>{p()||(s=O.some(_),y(a),a=[])},p=()=>s.isSome(),y=_=>{gt(_,x)},x=_=>{s.each(D=>{setTimeout(()=>{_(D)},0)})};return t(g),{get:d,map:l,isReady:p}},rN={nu:iA,pure:t=>iA(s=>{s(t)})},aN=t=>{setTimeout(()=>{throw t},0)},l0=t=>{const s=x=>{t().then(x,aN)};return{map:x=>l0(()=>t().then(x)),bind:x=>l0(()=>t().then(_=>x(_).toPromise())),anonBind:x=>l0(()=>t().then(()=>x.toPromise())),toLazy:()=>rN.nu(s),toCached:()=>{let x=null;return l0(()=>(x===null&&(x=t()),x))},toPromise:t,get:s}},vl={nu:t=>l0(()=>new Promise(t)),pure:t=>l0(()=>Promise.resolve(t))},cN=q("sink"),lN=q(Di({name:cN(),overrides:q({dom:{tag:"div"},behaviours:vt([Ba.config({useFixed:jt})]),events:Js([ag(ri()),ag(As()),ag(Zi())])})})),iN=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},c6=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},l6=(t,s,a,l,d,g,p)=>{const y=c6(t,s,l),x=fT(l,t);return y.map(_=>_.bind(D=>O.from(sd.sketch({...g.menu(),uid:Em(""),data:D,highlightOnOpen:p,onOpenMenu:(B,I)=>{const V=x().getOrDie();Ba.position(V,I,{anchor:a}),Po.decloak(d)},onOpenSubmenu:(B,I,V)=>{const X=x().getOrDie();Ba.position(X,V,{anchor:{type:"submenu",item:I}}),Po.decloak(d)},onRepositionMenu:(B,I,V)=>{const X=x().getOrDie();Ba.position(X,I,{anchor:a}),gt(V,ce=>{Ba.position(X,ce.triggeredMenu,{anchor:{type:"submenu",item:ce.triggeringItem}})})},onEscape:()=>($n.focus(l),Po.close(d),O.some(!0))}))))},dT=(t,s,a,l,d,g,p)=>{const y=iN(t,a);return l6(t,s,y,a,l,d,p).map(_=>(_.fold(()=>{Po.isOpen(l)&&Po.close(l)},D=>{Po.cloak(l),Po.open(l,D),g(l)}),l))},i6=(t,s,a,l,d,g,p)=>(Po.close(l),vl.pure(l)),uA=(t,s,a,l,d,g)=>{const p=na.getCoupled(a,"sandbox");return(Po.isOpen(p)?i6:dT)(t,s,a,p,l,d,g)},mT=(t,s,a)=>{const l=So.getCurrent(s).getOr(s),d=ca(t.element);a?Kt(l.element,"min-width",d+"px"):hs(l.element,d)},fT=(t,s)=>t.getSystem().getByUid(s.uid+"-"+cN()).map(a=>()=>St.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>St.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),gT=t=>{Po.getState(t).each(s=>{sd.repositionMenus(s)})},hT=(t,s,a)=>{const l=py(),d=(y,x)=>{const _=iN(t,s);l.link(s.element),t.matchWidth&&mT(_.hotspot,x,t.useMinWidth),t.onOpen(_,y,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(y,x)},g=(y,x)=>{l.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(y,x)},p=fT(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:Cu.augment(t.sandboxBehaviours,[zt.config({store:{mode:"memory",initialValue:s}}),Po.config({onOpen:d,onClose:g,isPartOf:(y,x,_)=>wf(x,_)||wf(s,_),getAttachPoint:()=>p().getOrDie()}),So.config({find:y=>Po.getState(y).bind(x=>So.getCurrent(x))}),ua.config({channels:{...$m({isExtraPart:Zn}),...sw({doReposition:gT})}})])}},uN=t=>{const s=na.getCoupled(t,"sandbox");gT(s)},dA=()=>[xe("sandboxClasses",[]),Cu.field("sandboxBehaviours",[So,ua,Po,zt])],mA=q([Je("dom"),Je("fetch"),Ao("onOpen"),Ur("onExecute"),xe("getHotspot",O.some),xe("getAnchorOverrides",q({})),Ju(),ic("dropdownBehaviours",[go,na,Cn,$n]),Je("toggleClass"),xe("eventOrder",{}),rs("lazySink"),xe("matchWidth",!1),xe("useMinWidth",!1),rs("role")].concat(dA())),fA=q([Su({schema:[Zd(),xe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),lN()]),pT=(t,s,a,l)=>{const d=D=>ht(t.dom,"attributes").bind(B=>ht(B,D)),g=D=>{Po.getState(D).each(B=>{sd.highlightPrimary(B)})},p=(D,B,I)=>uA(t,ft,D,l,B,I),y=D=>{p(D,g,fi.HighlightMenuAndItem).get(G)},x={expand:D=>{go.isOn(D)||p(D,G,fi.HighlightNone).get(G)},open:D=>{go.isOn(D)||p(D,G,fi.HighlightMenuAndItem).get(G)},refetch:D=>na.getExistingCoupled(D,"sandbox").fold(()=>p(D,G,fi.HighlightMenuAndItem).map(G),I=>dT(t,ft,D,I,l,G,fi.HighlightMenuAndItem).map(G)),isOpen:go.isOn,close:D=>{go.isOn(D)&&p(D,G,fi.HighlightMenuAndItem).get(G)},repositionMenus:D=>{go.isOn(D)&&uN(D)}},_=(D,B)=>(Ld(D),O.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:$a(t.dropdownBehaviours,[go.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),na.config({others:{sandbox:D=>hT(t,D,{onOpen:()=>go.on(D),onClose:()=>go.off(D)})}}),Cn.config({mode:"special",onSpace:_,onEnter:_,onDown:(D,B)=>{if(Ou.isOpen(D)){const I=na.getCoupled(D,"sandbox");g(I)}else Ou.open(D);return O.some(!0)},onEscape:(D,B)=>Ou.isOpen(D)?(Ou.close(D),O.some(!0)):O.none()}),$n.config({})]),events:Cx(O.some(y)),eventOrder:{...t.eventOrder,[hl()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Ou=ma({name:"Dropdown",configFields:mA(),partFields:fA(),factory:pT,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),u6=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},d6=t=>{const s=zt.getValue(t),a=Z1(t).map(qR);Ou.refetch(s).get(()=>{const l=na.getCoupled(s,"sandbox");a.each(d=>Z1(l).each(g=>bO(g,d)))})},m6=(t,s)=>{f6(t).each(a=>{Qk(t,a.element,s.event.eventType,s.event.interactionEvent)})},f6=t=>Po.getState(t).bind(qo.getHighlighted).bind(qo.getHighlighted),g6=t=>Xc(t.element,Zx)?O.some(t.element):_r(t.element,"."+Zx),dN=(t,s,a)=>{GR(t).each(l=>{YF(l,a),g6(s).each(g=>{$(g,"id").each(p=>Vn(l.element,"aria-controls",p))})}),Vn(a.element,"aria-selected","true")},h6=(t,s,a)=>{Vn(a.element,"aria-selected","false")},p6=t=>{GR(t).each(s=>$n.focus(s))},b6=t=>na.getExistingCoupled(t,"sandbox").bind(Z1).map(qR).map(a=>a.fetchPattern).getOr("");var bT;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(bT||(bT={}));const v6=(t,s,a,l,d)=>{const g=a.shared.providers,p=y=>d?{...y,shortcut:O.none(),icon:y.text.isSome()?O.none():y.icon}:y;switch(t.type){case"menuitem":return gL(t).fold(Lg,y=>O.some(XL(p(y),s,g,l)));case"nestedmenuitem":return gM(t).fold(Lg,y=>O.some(JL(p(y),s,g,l,d)));case"togglemenuitem":return pL(t).fold(Lg,y=>O.some(QL(p(y),s,g,l)));case"separator":return eM(t).fold(Lg,y=>O.some(cA(y)));case"fancymenuitem":return mL(t).fold(Lg,y=>e6(y,a));default:return console.error("Unknown item in general menu",t),O.none()}},y6=(t,s,a,l,d,g,p)=>{const y=l===1,x=!y||n0(t);return Ka(_e(t,_=>{switch(_.type){case"separator":return nM(_).fold(Lg,D=>O.some(cA(D)));case"cardmenuitem":return iM(_).fold(Lg,D=>O.some(t6({...D,onAction:B=>{D.onAction(B),a(D.value,D.meta)}},d,g,{itemBehaviours:OM(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return oM(_).fold(Lg,D=>O.some(YL(D,s,y,"normal",a,d,g,x)))}}))},mN=(t,s,a,l,d,g)=>{const p=n0(s),y=Ka(_e(s,D=>{const B=V=>d?!so(V,"text"):p,I=V=>v6(V,a,l,B(V),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?I({...D,enabled:!1}):I(D)})),x=u6(g);return(d?QF:yO)(t,p,y,1,x)},vT=t=>sd.singleData(t.value,t),w6=(t,s,a,l)=>{const d=uT(s,l),g=Fg(l);return{data:vT({...t,movement:d,menuBehaviours:cp.unnamedEvents(s!=="auto"?[]:[Fr((p,y)=>{BO(p,4,g.item).each(({numColumns:x,numRows:_})=>{Cn.setGridSize(p,_,x)})})])}),menu:{markers:Fg(l),fakeFocus:a===bT.ContentFocus}}},C6=(t,s)=>Vx(pe.fromDom(s.startContainer)).map(a=>{const l=t.createRng();return l.selectNode(a.dom),l}),S6={register:(t,s)=>{const a=S(!1),l=S(!1),d=cc(pr.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:vt([ro("dismissAutocompleter",[et(xm(),()=>_())])]),lazySink:s.getSink})),g=()=>pr.isOpen(d),p=l.get,y=()=>{g()&&pr.hide(d)},x=()=>pr.getContent(d).bind(X=>ls(X.components(),0)),_=()=>t.execCommand("mceAutocompleterClose"),D=X=>{const ce=Jo(X,Te=>O.from(Te.columns)).getOr(1);return De(X,Te=>{const ye=Te.items;return y6(ye,Te.matchText,(he,Ue)=>{const Ze=t.selection.getRng();C6(t.dom,Ze).each(kt=>{const st={hide:()=>_(),reload:Dt=>{y(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Dt})}};a.set(!0),Te.onAction(st,kt,he,Ue),a.set(!1)})},ce,ad.BUBBLE_TO_SANDBOX,s,Te.highlightOn)})},B=(X,ce)=>{NF(pe.fromDom(t.getBody())).each(Te=>{const ye=Jo(X,he=>O.from(he.columns)).getOr(1);pr.showMenuAt(d,{anchor:{type:"node",root:pe.fromDom(t.getBody()),node:O.from(Te)}},w6(yO("autocompleter-value",!0,ce,ye,{menuType:"normal"}),ye,bT.ContentFocus,"normal"))}),x().each(qo.highlightFirst)},I=X=>{const ce=D(X);ce.length>0?B(X,ce):y()};t.on("AutocompleterStart",({lookupData:X})=>{l.set(!0),a.set(!1),I(X)}),t.on("AutocompleterUpdate",({lookupData:X})=>I(X)),t.on("AutocompleterEnd",()=>{y(),l.set(!1),a.set(!1)});const V={cancelIfNecessary:_,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:x};$F.setup(V,t)}},x6=["visible","hidden"],gA=t=>{if(sl(t)){const s=Qe(t,"overflow");return se(s).length>0&&!po(x6,s)}else return!1},Za=t=>{const s=kf(t,gA);return Ms(s).map(a=>({element:a,others:s.slice(1)}))},lC=(t,s)=>Jd(t)?Za(s):O.none(),yT=t=>{const s=[..._e(t.others,E),de()];return ie(E(t.element),s)},iC=(t,s,a)=>Yu(t,s,a).isSome(),fN=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},gN=5,T6=400,hN=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?O.none():O.some(s.touches[0])},k6=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>gN||l>gN},E6=t=>{const s=Cs(),a=S(!1),l=fN(_=>{t.triggerEvent(s2(),_),a.set(!0)},T6),d=_=>(hN(_).each(D=>{l.cancel();const B={x:D.clientX,y:D.clientY,target:_.target};l.schedule(_),a.set(!1),s.set(B)}),O.none()),g=_=>(l.cancel(),hN(_).each(D=>{s.on(B=>{k6(D,B)&&s.clear()})}),O.none()),p=_=>{l.cancel();const D=B=>es(B.target,_.target);return s.get().filter(D).map(B=>a.get()?(_.prevent(),!1):t.triggerEvent(sg(),_))},y=ts([{key:fu(),value:d},{key:Oo(),value:g},{key:Hs(),value:p}]);return{fireIfReady:(_,D)=>ht(y,D).bind(B=>B(_))}},_6=t=>t.raw.which===E_[0]&&!po(["input","textarea"],Qa(t.target))&&!iC(t.target,'[contenteditable="true"]'),O6=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=E6(a),g=_e(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),V=>bl(t,V,X=>{d.fireIfReady(X,V).each(Te=>{Te&&X.kill()}),a.triggerEvent(V,X)&&X.kill()})),p=Cs(),y=bl(t,"paste",V=>{d.fireIfReady(V,"paste").each(ce=>{ce&&V.kill()}),a.triggerEvent("paste",V)&&V.kill(),p.set(setTimeout(()=>{a.triggerEvent(sy(),V)},0))}),x=bl(t,"keydown",V=>{a.triggerEvent("keydown",V)?V.kill():a.stopBackspace&&_6(V)&&V.prevent()}),_=bl(t,"focusin",V=>{a.triggerEvent("focusin",V)&&V.kill()}),D=Cs(),B=bl(t,"focusout",V=>{a.triggerEvent("focusout",V)&&V.kill(),D.set(setTimeout(()=>{a.triggerEvent(oy(),V)},0))});return{unbind:()=>{gt(g,V=>{V.unbind()}),x.unbind(),_.unbind(),B.unbind(),y.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},pN=(t,s)=>{const a=ht(t,"target").getOr(s);return S(a)},A6=(t,s)=>{const a=S(!1),l=S(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},D6=t=>{const s=S(!1);return{stop:()=>{s.set(!0)},cut:G,isStopped:s.get,isCut:Zn,event:t,setSource:fe("Cannot set source of a broadcasted event"),getSource:fe("Cannot get source of a broadcasted event")}},uC=W.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),bN=(t,s,a,l,d,g)=>{const p=t(s,l),y=A6(a,d);return p.fold(()=>(g.logEventNoHandlers(s,l),uC.complete()),x=>{const _=x.descHandler;return Vs(_)(y),y.isStopped()?(g.logEventStopped(s,x.element,_.purpose),uC.stopped()):y.isCut()?(g.logEventCut(s,x.element,_.purpose),uC.complete()):ra(x.element).fold(()=>(g.logNoParent(s,x.element,_.purpose),uC.complete()),B=>(g.logEventResponse(s,x.element,_.purpose),uC.resume(B)))})},vN=(t,s,a,l,d,g)=>bN(t,s,a,l,d,g).fold(jt,p=>vN(t,s,a,p,d,g),Zn),R6=(t,s,a,l,d)=>{const g=pN(a,l);return bN(t,s,a,l,g,d)},M6=(t,s,a)=>{const l=D6(s);return gt(t,d=>{const g=d.descHandler;Vs(g)(l)}),l.isStopped()},N6=(t,s,a,l)=>yN(t,s,a,a.target,l),yN=(t,s,a,l,d)=>{const g=pN(a,l);return vN(t,s,a,l,g,d)},B6=(t,s)=>({element:t,descHandler:s}),$6=(t,s)=>({id:t,descHandler:s}),P6=()=>{const t={},s=(p,y,x)=>{Ye(x,(_,D)=>{const B=t[D]!==void 0?t[D]:{};B[y]=aE(_,p),t[D]=B})},a=(p,y)=>ai(y).bind(x=>ht(p,x)).map(x=>B6(y,x));return{registerId:s,unregisterId:p=>{Ye(t,(y,x)=>{so(y,p)&&delete y[p]})},filterByType:p=>ht(t,p).map(y=>rr(y,(x,_)=>$6(_,x))).getOr([]),find:(p,y,x)=>ht(t,y).bind(_=>oi(x,D=>a(_,D),p))}},I6=()=>{const t=P6(),s={},a=_=>{const D=_.element;return ai(D).getOrThunk(()=>oE("uid-",_.element))},l=(_,D)=>{const B=s[D];if(B===_)g(_);else throw new Error('The tagId "'+D+'" is already used by: '+Gu(B.element)+`
Cannot use it for: `+Gu(_.element)+`
The conflicting element is`+($o(B.element)?" ":" not ")+"already in the DOM")},d=_=>{const D=a(_);ha(s,D)&&l(_,D);const B=[_];t.registerId(B,D,_.events),s[D]=_},g=_=>{ai(_.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(_,D,B)=>t.find(_,D,B),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>ht(s,_)}},zm=Kr({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Ki(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[xe("components",[]),ic("containerBehaviours",[]),xe("events",{}),xe("domModification",{}),xe("eventOrder",{})]}),hA=t=>{const s=ye=>ra(t.element).fold(jt,he=>es(ye,he)),a=I6(),l=(ye,he)=>a.find(s,ye,he),d=O6(t.element,{triggerEvent:(ye,he)=>Qp(ye,he.target,Ue=>N6(l,ye,he,Ue))}),g={debugInfo:q("real"),triggerEvent:(ye,he,Ue)=>{Qp(ye,he,Ze=>yN(l,ye,Ue,he,Ze))},triggerFocus:(ye,he)=>{ai(ye).fold(()=>{pu(ye)},Ue=>{Qp(Id(),ye,Ze=>(R6(l,Id(),{originator:he,kill:G,prevent:G,target:ye},ye,Ze),!1))})},triggerEscape:(ye,he)=>{g.triggerEvent("keydown",ye.element,he.event)},getByUid:ye=>ce(ye),getByDom:ye=>Te(ye),build:cc,buildOrPatch:Kp,addToGui:ye=>{x(ye)},removeFromGui:ye=>{_(ye)},addToWorld:ye=>{p(ye)},removeFromWorld:ye=>{y(ye)},broadcast:ye=>{I(ye)},broadcastOn:(ye,he)=>{V(ye,he)},broadcastEvent:(ye,he)=>{X(ye,he)},isConnected:jt},p=ye=>{ye.connect(g),ba(ye.element)||(a.register(ye),gt(ye.components(),p),g.triggerEvent(Bb(),ye.element,{target:ye.element}))},y=ye=>{ba(ye.element)||(gt(ye.components(),y),a.unregister(ye)),ye.disconnect()},x=ye=>{Kd(t,ye)},_=ye=>{Yd(ye)},D=()=>{d.unbind(),Ll(t.element)},B=ye=>{const he=a.filter(Ir());gt(he,Ue=>{const Ze=Ue.descHandler;Vs(Ze)(ye)})},I=ye=>{B({universal:!0,data:ye})},V=(ye,he)=>{B({universal:!1,channels:ye,data:he})},X=(ye,he)=>{const Ue=a.filter(ye);return M6(Ue,he)},ce=ye=>a.getById(ye).fold(()=>St.error(new Error('Could not find component with uid: "'+ye+'" in system.')),St.value),Te=ye=>{const he=ai(ye).getOr("not found");return ce(he)};return p(t),{root:t,element:t.element,destroy:D,add:x,remove:_,getByUid:ce,getByDom:Te,addToWorld:p,removeFromWorld:y,broadcast:I,broadcastOn:V,broadcastEvent:X}},L6=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:_e(t.items,s.interpreter)}),wN=q([xe("prefix","form-field"),ic("fieldBehaviours",[So,zt])]),H6=q([Di({schema:[Je("dom")],name:"label"}),Di({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Je("text")],name:"aria-descriptor"}),uc({factory:{sketch:t=>{const s=qn(t,["factory"]);return t.factory.sketch(s)}},schema:[Je("factory")],name:"field"})]),V6=(t,s,a,l)=>{const d=$a(t.fieldBehaviours,[So.config({find:y=>zs(y,t,"field")}),zt.config({store:{mode:"manual",getValue:y=>So.getCurrent(y).bind(zt.getValue),setValue:(y,x)=>{So.getCurrent(y).each(_=>{zt.setValue(_,x)})}}})]),g=Js([Fr((y,x)=>{const _=ww(y,t,["label","field","aria-descriptor"]);_.field().each(D=>{const B=nn(t.prefix);_.label().each(I=>{Vn(I.element,"for",B),Vn(D.element,"id",B)}),_["aria-descriptor"]().each(I=>{const V=nn(t.prefix);Vn(I.element,"id",V),Vn(D.element,"aria-describedby",V)})})})]),p={getField:y=>zs(y,t,"field"),getLabel:y=>zs(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},ds=ma({name:"FormField",configFields:wN(),partFields:H6(),factory:V6,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var U6=Object.freeze({__proto__:null,exhibit:(t,s)=>ci({attributes:ts([{key:s.tabAttr,value:"true"}])})}),W6=[xe("tabAttr","data-alloy-tabstop")];const Yr=Ec({fields:W6,name:"tabstopping",active:U6});var Z6=tinymce.util.Tools.resolve("tinymce.html.Entities");const i0=(t,s,a,l)=>{const d=CN(t,s,a,l);return ds.sketch(d)},j6=(t,s)=>i0(t,s,[],[]),CN=(t,s,a,l)=>({dom:pA(a),components:t.toArray().concat([s]),fieldBehaviours:vt(l)}),G6=()=>pA([]),pA=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),mp=(t,s)=>ds.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Er(s.translate(t))]}),Qi=nn("form-component-change"),dC=nn("form-close"),ob=nn("form-cancel"),Bf=nn("form-action"),mC=nn("form-submit"),bA=nn("form-block"),vA=nn("form-unblock"),SN=nn("form-tabchange"),xN=nn("form-resize"),q6=(t,s,a)=>{const l=t.label.map(B=>mp(B,s)),d=B=>(I,V)=>{Yu(V.event.target,"[data-collection-item-value]").each(X=>{B(I,V,X,jr(X,"data-collection-item-value"))})},g=(B,I)=>{const V=_e(I,Te=>{const ye=ku.translate(Te.text),he=t.columns===1?`<div class="tox-collection__item-label">${ye}</div>`:"",Ue=`<div class="tox-collection__item-icon">${Te.icon}</div>`,Ze={_:" "," - ":" ","-":" "},kt=ye.replace(/\_| \- |\-/g,Dt=>Ze[Dt]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${Z6.encodeAllRaw(Te.value)}" title="${kt}" aria-label="${kt}">${Ue}${he}</div>`}),X=t.columns!=="auto"&&t.columns>1?Ps(V,t.columns):[V],ce=_e(X,Te=>`<div class="tox-collection__group">${Te.join("")}</div>`);km(B.element,ce.join(""))},p=d((B,I,V,X)=>{I.stop(),s.isDisabled()||xn(B,Bf,{name:t.name,value:X})}),y=[et(ki(),d((B,I,V)=>{pu(V)})),et(Zi(),p),et(sg(),p),et(df(),d((B,I,V)=>{_r(B.element,"."+Yw).each(X=>{Qs(X,Yw)}),Ma(V,Yw)})),et(Nb(),d(B=>{_r(B.element,"."+Yw).each(I=>{Qs(I,Yw)})})),Vd(d((B,I,V,X)=>{xn(B,Bf,{name:t.name,value:X})}))],x=(B,I)=>_e(da(B.element,".tox-collection__item"),I),_=ds.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ft},behaviours:vt([Dn.config({disabled:s.isDisabled,onDisabled:B=>{x(B,I=>{Ma(I,"tox-collection__item--state-disabled"),Vn(I,"aria-disabled",!0)})},onEnabled:B=>{x(B,I=>{Qs(I,"tox-collection__item--state-disabled"),ne(I,"aria-disabled")})}}),mc(),zn.config({}),zt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(B,I)=>{g(B,I),t.columns==="auto"&&BO(B,5,"tox-collection__item").each(({numRows:V,numColumns:X})=>{Cn.setGridSize(B,V,X)}),Go(B,xN)}}),Yr.config({}),Cn.config(QM(t.columns,"normal")),ro("collection-events",y)]),eventOrder:{[hl()]:["disabling","alloy.base.behaviour","collection-events"]}});return i0(l,_,["tox-form__group--collection"],[])},K6=["input","textarea"],yA=t=>{const s=Qa(t);return po(K6,s)},TN=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Qs(a,s.invalidClass),s.notify.each(l=>{yA(t.element)&&Vn(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{km(d,l.validHtml)}),l.onValid(t)})},kN=(t,s,a,l)=>{const d=s.getRoot(t).getOr(t.element);Ma(d,s.invalidClass),s.notify.each(g=>{yA(t.element)&&Vn(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{km(p,l)}),g.onInvalid(t,l)})},EN=(t,s,a)=>s.validator.fold(()=>vl.pure(St.value(!0)),l=>l.validate(t)),wA=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),EN(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(kN(t,s,a,d),St.error(d)),d=>(TN(t,s),St.value(d))):St.error("No longer in system")));var CA=Object.freeze({__proto__:null,markValid:TN,markInvalid:kN,query:EN,run:wA,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Xc(a,s.invalidClass)}}),Y6=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Js([et(a.onEvent,l=>{wA(l,t,s).get(ft)})].concat(a.validateOnLoad?[Fr(l=>{wA(l,t,s).get(G)})]:[]))).getOr({})}),X6=[Je("invalidClass"),xe("getRoot",O.none),za("notify",[xe("aria","alert"),xe("getContainer",O.none),xe("validHtml",""),Ao("onValid"),Ao("onInvalid"),Ao("onValidate")]),za("validator",[Je("validate"),xe("onEvent","input"),xe("validateOnLoad",!0)])];const Um=Ec({fields:X6,name:"invalidating",active:Y6,apis:CA,extra:{validation:t=>s=>{const a=zt.getValue(s);return vl.pure(t(a))}}});var Q6=Object.freeze({__proto__:null,events:()=>Js([iy(Yk(),jt)]),exhibit:()=>ci({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const u0=Ec({fields:[],name:"unselecting",active:Q6}),e8=(t,s)=>Ou.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:vt([_u.button(s.providers.isDisabled),mc(),u0.config({}),Yr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>vl.nu(l=>t.fetch(l)).map(l=>O.from(vT($s(cC(nn("menu-value"),l,d=>{t.onItemAction(a,d)},t.columns,t.presets,ad.CLOSE_ON_EXECUTE,Zn,s.providers),{movement:uT(t.columns,t.presets)})))),parts:{menu:Wx(!1,1,t.presets)}}),_N=nn("color-input-change"),ON=nn("color-swatch-change"),AN=nn("color-picker-cancel"),t8=(t,s,a,l)=>{const d=ds.parts.field({factory:W1,inputClasses:["tox-textfield"],data:l,onSetValue:_=>Um.run(_).get(G),inputBehaviours:vt([Dn.config({disabled:s.providers.isDisabled}),mc(),Yr.config({}),Um.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>bc(_.element),notify:{onValid:_=>{const D=zt.getValue(_);xn(_,_N,{color:D})}},validator:{validateOnLoad:!1,validate:_=>{const D=zt.getValue(_);if(D.length===0)return vl.pure(St.value(!0));{const B=pe.fromTag("span");Kt(B,"background-color",D);const I=Ys(B,"background-color").fold(()=>St.error("blah"),V=>St.value(D));return vl.pure(I)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>mp(_,s.providers)),p=(_,D)=>{xn(_,ON,{value:D})},y=(_,D)=>{x.getOpt(_).each(B=>{D==="custom"?a.colorPicker(I=>{I.fold(()=>Go(B,AN),V=>{p(B,V),FM(t.storageKey,V)})},"#ffffff"):D==="remove"?p(B,""):p(B,D)})},x=bs(e8({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Na,kc,Ar],onLtr:()=>[kc,Na,Ar]},components:[],fetch:nb(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:y},s));return ds.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:vt([ro("form-field-events",[et(_N,(_,D)=>{x.getOpt(_).each(B=>{Kt(B.element,"background-color",D.event.color)}),xn(_,Qi,{name:t.name})}),et(ON,(_,D)=>{ds.getField(_).each(B=>{zt.setValue(B,D.event.value),So.getCurrent(_).each($n.focus)})}),et(AN,(_,D)=>{ds.getField(_).each(B=>{So.getCurrent(_).each($n.focus)})})])])})},n8=Di({schema:[Je("dom")],name:"label"}),Wm=t=>Di({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:Js([zp(fu(),(d,g,p)=>l(d,p),[s]),zp(As(),(d,g,p)=>l(d,p),[s]),zp(fh(),(d,g,p)=>{p.mouseIsDown.get()&&l(d,p)},[s])])}))}),o8=Wm("top-left"),wT=Wm("top"),s8=Wm("top-right"),r8=Wm("right"),a8=Wm("bottom-right"),c8=Wm("bottom"),VW=Wm("bottom-left"),CT=Wm("left"),d0=uc({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Js([vh(fu(),t,"spectrum"),vh(Oo(),t,"spectrum"),vh(Hs(),t,"spectrum"),vh(As(),t,"spectrum"),vh(fh(),t,"spectrum"),vh(Sm(),t,"spectrum")])})}),DN=uc({schema:[Pc("mouseIsDown",()=>S(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:vt([Cn.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),$n.config({})]),events:Js([et(fu(),l),et(Oo(),l),et(As(),l),et(fh(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var RN=[n8,CT,r8,wT,c8,o8,s8,VW,a8,d0,DN];const fC=q("slider.change.value"),l8=t=>t.type.indexOf("touch")!==-1,SA=t=>{const s=t.event.raw;if(l8(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?O.some(a.touches[0]).map(l=>vo(l.clientX,l.clientY)):O.none()}else{const a=s;return a.clientX!==void 0?O.some(a).map(l=>vo(l.clientX,l.clientY)):O.none()}},i8="top",u8="right",d8="bottom",m8="left",sb=t=>t.model.minX,rb=t=>t.model.minY,ST=t=>t.model.minX-1,gC=t=>t.model.minY-1,tm=t=>t.model.maxX,id=t=>t.model.maxY,xT=t=>t.model.maxX+1,hC=t=>t.model.maxY+1,xA=(t,s,a)=>s(t)-a(t),m0=t=>xA(t,tm,sb),TA=t=>xA(t,id,rb),f0=t=>m0(t)/2,g0=t=>TA(t)/2,h0=t=>t.stepSize,MN=t=>t.snapToGrid,NN=t=>t.snapStart,BN=t=>t.rounded,TT=(t,s)=>t[s+"-edge"]!==void 0,$N=t=>TT(t,m8),pC=t=>TT(t,u8),PN=t=>TT(t,i8),IN=t=>TT(t,d8),zg=t=>t.model.value.get(),Ug=(t,s)=>({x:t,y:s}),nm=(t,s)=>{xn(t,fC(),{value:s})},f8=(t,s)=>{nm(t,Ug(ST(s),gC(s)))},g8=(t,s)=>{nm(t,gC(s))},FN=(t,s)=>{nm(t,Ug(f0(s),gC(s)))},h8=(t,s)=>{nm(t,Ug(xT(s),gC(s)))},p8=(t,s)=>{nm(t,xT(s))},b8=(t,s)=>{nm(t,Ug(xT(s),g0(s)))},v8=(t,s)=>{nm(t,Ug(xT(s),hC(s)))},y8=(t,s)=>{nm(t,hC(s))},LN=(t,s)=>{nm(t,Ug(f0(s),hC(s)))},HN=(t,s)=>{nm(t,Ug(ST(s),hC(s)))},w8=(t,s)=>{nm(t,ST(s))},C8=(t,s)=>{nm(t,Ug(ST(s),g0(s)))},kA=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),kT=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),ab=(t,s,a)=>Math.max(s,Math.min(a,t)),S8=(t,s,a,l,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/l)*l;return ab(s+p,s-1,a+1)},g=>{const p=(t-g)%l,y=Math.round(p/l),x=Math.floor((t-g)/l),_=Math.floor((a-g)/l),D=Math.min(_,x+y),B=g+D*l;return Math.max(g,B)}),x8=(t,s,a)=>Math.min(a,Math.max(t,s))-s,VN=t=>{const{min:s,max:a,range:l,value:d,step:g,snap:p,snapStart:y,rounded:x,hasMinEdge:_,hasMaxEdge:D,minBound:B,maxBound:I,screenRange:V}=t,X=_?s-1:s,ce=D?a+1:a;if(d<B)return X;if(d>I)return ce;{const Te=x8(d,B,I),ye=ab(Te/V*l+s,X,ce);return p&&ye>=s&&ye<=a?S8(ye,s,a,g,y):x?Math.round(ye):ye}},bC=t=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:y,maxOffset:x,centerMinEdge:_,centerMaxEdge:D}=t;return d<s?g?0:_:d>a?p?y:D:(d-s)/l*x},eu="top",ET="right",EA="bottom",_A="left",T8="width",k8="height",$f=t=>t.element.dom.getBoundingClientRect(),ud=(t,s)=>t[s],vC=t=>{const s=$f(t);return ud(s,_A)},zN=t=>{const s=$f(t);return ud(s,ET)},_T=t=>{const s=$f(t);return ud(s,eu)},OA=t=>{const s=$f(t);return ud(s,EA)},UN=t=>{const s=$f(t);return ud(s,T8)},AA=t=>{const s=$f(t);return ud(s,k8)},DA=(t,s,a)=>(t+s)/2-a,RA=(t,s)=>{const a=$f(t),l=$f(s),d=ud(a,_A),g=ud(a,ET),p=ud(l,_A);return DA(d,g,p)},WN=(t,s)=>{const a=$f(t),l=$f(s),d=ud(a,eu),g=ud(a,EA),p=ud(l,eu);return DA(d,g,p)},OT=(t,s)=>{xn(t,fC(),{value:s})},MA=(t,s,a)=>{const l={min:sb(s),max:tm(s),range:m0(s),value:a,step:h0(s),snap:MN(s),snapStart:NN(s),rounded:BN(s),hasMinEdge:$N(s),hasMaxEdge:pC(s),minBound:vC(t),maxBound:zN(t),screenRange:UN(t)};return VN(l)},E8=(t,s,a)=>{const l=MA(t,s,a);return OT(t,l),l},_8=(t,s)=>{const a=sb(s);OT(t,a)},O8=(t,s)=>{const a=tm(s);OT(t,a)},NA=(t,s,a)=>{const d=(t>0?kT:kA)(zg(a),sb(a),tm(a),h0(a));return OT(s,d),O.some(d)},ZN=t=>(s,a)=>NA(t,s,a).map(jt),jN=t=>SA(t).map(a=>a.left),A8=(t,s,a,l,d)=>{const p=UN(t),y=l.bind(D=>O.some(RA(D,t))).getOr(0),x=d.bind(D=>O.some(RA(D,t))).getOr(p),_={min:sb(s),max:tm(s),range:m0(s),value:a,hasMinEdge:$N(s),hasMaxEdge:pC(s),minBound:vC(t),minOffset:0,maxBound:zN(t),maxOffset:p,centerMinEdge:y,centerMaxEdge:x};return bC(_)},BA=(t,s,a,l,d,g)=>{const p=A8(s,g,a,l,d);return vC(s)-vC(t)+p},D8=(t,s,a,l)=>{const d=zg(a),g=BA(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),a),p=ca(s.element)/2;Kt(s.element,"left",g-p+"px")},R8=ZN(-1),M8=ZN(1),N8=O.none,B8=O.none,GN={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(p8),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(w8)};var qN=Object.freeze({__proto__:null,setValueFrom:E8,setToMin:_8,setToMax:O8,findValueOfOffset:MA,getValueFromEvent:jN,findPositionOfValue:BA,setPositionFromValue:D8,onLeft:R8,onRight:M8,onUp:N8,onDown:B8,edgeActions:GN});const AT=(t,s)=>{xn(t,fC(),{value:s})},$A=(t,s,a)=>{const l={min:rb(s),max:id(s),range:TA(s),value:a,step:h0(s),snap:MN(s),snapStart:NN(s),rounded:BN(s),hasMinEdge:PN(s),hasMaxEdge:IN(s),minBound:_T(t),maxBound:OA(t),screenRange:AA(t)};return VN(l)},$8=(t,s,a)=>{const l=$A(t,s,a);return AT(t,l),l},P8=(t,s)=>{const a=rb(s);AT(t,a)},I8=(t,s)=>{const a=id(s);AT(t,a)},KN=(t,s,a)=>{const d=(t>0?kT:kA)(zg(a),rb(a),id(a),h0(a));return AT(s,d),O.some(d)},PA=t=>(s,a)=>KN(t,s,a).map(jt),YN=t=>SA(t).map(a=>a.top),IA=(t,s,a,l,d)=>{const p=AA(t),y=l.bind(D=>O.some(WN(D,t))).getOr(0),x=d.bind(D=>O.some(WN(D,t))).getOr(p),_={min:rb(s),max:id(s),range:TA(s),value:a,hasMinEdge:PN(s),hasMaxEdge:IN(s),minBound:_T(t),minOffset:0,maxBound:OA(t),maxOffset:p,centerMinEdge:y,centerMaxEdge:x};return bC(_)},FA=(t,s,a,l,d,g)=>{const p=IA(s,g,a,l,d);return _T(s)-_T(t)+p},XN=(t,s,a,l)=>{const d=zg(a),g=FA(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),a),p=Le(s.element)/2;Kt(s.element,"top",g-p+"px")},F8=O.none,L8=O.none,H8=PA(-1),V8=PA(1),LA={"top-left":O.none(),top:O.some(g8),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(y8),"bottom-left":O.none(),left:O.none()};var Wg=Object.freeze({__proto__:null,setValueFrom:$8,setToMin:P8,setToMax:I8,findValueOfOffset:$A,getValueFromEvent:YN,findPositionOfValue:FA,setPositionFromValue:XN,onLeft:F8,onRight:L8,onUp:H8,onDown:V8,edgeActions:LA});const DT=(t,s)=>{xn(t,fC(),{value:s})},fp=(t,s)=>({x:t,y:s}),z8=(t,s,a)=>{const l=MA(t,s,a.left),d=$A(t,s,a.top),g=fp(l,d);return DT(t,g),g},HA=(t,s,a,l)=>{const d=t>0?kT:kA,g=s?zg(l).x:d(zg(l).x,sb(l),tm(l),h0(l)),p=s?d(zg(l).y,rb(l),id(l),h0(l)):zg(l).y;return DT(a,fp(g,p)),O.some(g)},RT=(t,s)=>(a,l)=>HA(t,s,a,l).map(jt),U8=(t,s)=>{const a=sb(s),l=rb(s);DT(t,fp(a,l))},W8=(t,s)=>{const a=tm(s),l=id(s);DT(t,fp(a,l))},JN=t=>SA(t),Z8=(t,s,a,l)=>{const d=zg(a),g=BA(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),a),p=FA(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),a),y=ca(s.element)/2,x=Le(s.element)/2;Kt(s.element,"left",g-y+"px"),Kt(s.element,"top",p-x+"px")},VA=RT(-1,!1),zA=RT(1,!1),UA=RT(-1,!0),j8=RT(1,!0),Au={"top-left":O.some(f8),top:O.some(FN),"top-right":O.some(h8),right:O.some(b8),"bottom-right":O.some(v8),bottom:O.some(LN),"bottom-left":O.some(HN),left:O.some(C8)};var G8=Object.freeze({__proto__:null,setValueFrom:z8,setToMin:U8,setToMax:W8,getValueFromEvent:JN,setPositionFromValue:Z8,onLeft:VA,onRight:zA,onUp:UA,onDown:j8,edgeActions:Au});const q8=[xe("stepSize",1),xe("onChange",G),xe("onChoose",G),xe("onInit",G),xe("onDragStart",G),xe("onDragEnd",G),xe("snapToGrid",!1),xe("rounded",!0),rs("snapStart"),ml("model",dl("mode",{x:[xe("minX",0),xe("maxX",100),Pc("value",t=>S(t.mode.minX)),Je("getInitialValue"),us("manager",qN)],y:[xe("minY",0),xe("maxY",100),Pc("value",t=>S(t.mode.minY)),Je("getInitialValue"),us("manager",Wg)],xy:[xe("minX",0),xe("maxX",100),xe("minY",0),xe("maxY",100),Pc("value",t=>S({x:t.mode.minX,y:t.mode.minY})),Je("getInitialValue"),us("manager",G8)]})),ic("sliderBehaviours",[Cn,zt]),Pc("mouseIsDown",()=>S(!1))],dd=ma({name:"Slider",configFields:q8,partFields:RN,factory:(t,s,a,l)=>{const d=Ze=>nd(Ze,t,"thumb"),g=Ze=>nd(Ze,t,"spectrum"),p=Ze=>zs(Ze,t,"left-edge"),y=Ze=>zs(Ze,t,"right-edge"),x=Ze=>zs(Ze,t,"top-edge"),_=Ze=>zs(Ze,t,"bottom-edge"),D=t.model,B=D.manager,I=(Ze,kt)=>{B.setPositionFromValue(Ze,kt,t,{getLeftEdge:p,getRightEdge:y,getTopEdge:x,getBottomEdge:_,getSpectrum:g})},V=(Ze,kt)=>{D.value.set(kt);const st=d(Ze);I(Ze,st)},X=(Ze,kt)=>{V(Ze,kt);const st=d(Ze);return t.onChange(Ze,st,kt),O.some(!0)},ce=Ze=>{B.setToMin(Ze,t)},Te=Ze=>{B.setToMax(Ze,t)},ye=Ze=>{const kt=()=>{zs(Ze,t,"thumb").each(Dt=>{const hn=D.value.get();t.onChoose(Ze,Dt,hn)})},st=t.mouseIsDown.get();t.mouseIsDown.set(!1),st&&kt()},he=(Ze,kt)=>{kt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ze,d(Ze))},Ue=(Ze,kt)=>{kt.stop(),t.onDragEnd(Ze,d(Ze)),ye(Ze)};return{uid:t.uid,dom:t.dom,components:s,behaviours:$a(t.sliderBehaviours,[Cn.config({mode:"special",focusIn:Ze=>zs(Ze,t,"spectrum").map(Cn.focusIn).map(jt)}),zt.config({store:{mode:"manual",getValue:Ze=>D.value.get(),setValue:V}}),ua.config({channels:{[ow()]:{onReceive:ye}}})]),events:Js([et(fC(),(Ze,kt)=>{X(Ze,kt.event.value)}),Fr((Ze,kt)=>{const st=D.getInitialValue();D.value.set(st);const Dt=d(Ze);I(Ze,Dt);const hn=g(Ze);t.onInit(Ze,Dt,hn,D.value.get())}),et(fu(),he),et(Hs(),Ue),et(As(),he),et(Sm(),Ue)]),apis:{resetToMin:ce,resetToMax:Te,setValue:V,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),WA=nn("rgb-hex-update"),QN=nn("slider-update"),eB=nn("palette-update"),Y8=(t,s)=>{const a=dd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=dd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return dd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:q(0)},components:[a,l],sliderBehaviours:vt([$n.config({})]),onChange:(d,g,p)=>{xn(d,QN,{value:p})}})},tB="form",X8=[ic("formBehaviours",[zt])],nB=t=>"<alloy.field."+t+">",oB=t=>{const s=(()=>{const g=[];return{field:(y,x)=>(g.push(y),bw(tB,nB(y),x)),record:q(g)}})(),a=t(s),l=s.record(),d=_e(l,g=>uc({name:g,pname:nB(g)}));return Sw(tB,X8,d,Q8,a)},J8=(t,s)=>t.fold(()=>St.error(s),St.value),Q8=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:$a(t.formBehaviours,[zt.config({store:{mode:"manual",getValue:a=>{const l=Cw(a,t);return qt(l,(d,g)=>d().bind(p=>{const y=So.getCurrent(p);return J8(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Gu(p.element)))}).map(zt.getValue))},setValue:(a,l)=>{Ye(l,(d,g)=>{zs(a,t,g).each(p=>{So.getCurrent(p).each(y=>{zt.setValue(y,d)})})})}}})]),apis:{getField:(a,l)=>zs(a,t,l).bind(So.getCurrent)}}),p0={getField:hf((t,s,a)=>t.getField(s,a)),sketch:oB},ZA=nn("valid-input"),MT=nn("invalid-input"),sB=nn("validating-input"),yC="colorcustom.rgb.",b0=(t,s,a,l)=>{const d=(I,V)=>Um.config({invalidClass:s("invalid"),notify:{onValidate:X=>{xn(X,sB,{type:I})},onValid:X=>{xn(X,ZA,{type:I,value:zt.getValue(X)})},onInvalid:X=>{xn(X,MT,{type:I,value:zt.getValue(X)})}},validator:{validate:X=>{const ce=zt.getValue(X),Te=V(ce)?St.value(!0):St.error(t("aria.input.invalid"));return vl.pure(Te)},validateOnLoad:!1}}),g=(I,V,X,ce,Te)=>{const ye=t(yC+"range"),he=ds.parts.label({dom:{tag:"label",attributes:{"aria-label":ce}},components:[Er(X)]}),Ue=ds.parts.field({data:Te,factory:W1,inputAttributes:{type:"text",...V==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:vt([d(V,I),Yr.config({})]),onSetValue:Dt=>{Um.isInvalid(Dt)&&Um.run(Dt).get(G)}}),Ze=[he,Ue],kt=V!=="hex"?[ds.parts["aria-descriptor"]({text:ye})]:[],st=Ze.concat(kt);return{dom:{tag:"div",attributes:{role:"presentation"}},components:st}},p=(I,V)=>{const X=em(V);return p0.getField(I,"hex").each(ce=>{$n.isFocused(ce)||zt.setValue(I,{hex:X.value})}),X},y=(I,V)=>{const X=V.red,ce=V.green,Te=V.blue;zt.setValue(I,{red:X,green:ce,blue:Te})},x=bs({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(I,V)=>{x.getOpt(I).each(X=>{Kt(X.element,"background-color","#"+V.value)})};return Kr({factory:()=>{const I={red:S(O.some(255)),green:S(O.some(255)),blue:S(O.some(255)),hex:S(O.some("ffffff"))},V=(Qn,To)=>{const Un=dp(To);y(Qn,Un),ye(Un)},X=Qn=>I[Qn].get(),ce=(Qn,To)=>{I[Qn].set(To)},Te=()=>X("red").bind(Qn=>X("green").bind(To=>X("blue").map(Un=>ip(Qn,To,Un,1)))),ye=Qn=>{const To=Qn.red,Un=Qn.green,Ss=Qn.blue;ce("red",O.some(To)),ce("green",O.some(Un)),ce("blue",O.some(Ss))},he=(Qn,To)=>{const Un=To.event;Un.type!=="hex"?ce(Un.type,O.none()):l(Qn)},Ue=(Qn,To)=>{a(Qn);const Un=DM(To);ce("hex",O.some(Un.value));const Ss=dp(Un);y(Qn,Ss),ye(Ss),xn(Qn,WA,{hex:Un}),_(Qn,Un)},Ze=(Qn,To,Un)=>{const Ss=parseInt(Un,10);ce(To,O.some(Ss)),Te().each(Mt=>{const fn=p(Qn,Mt);xn(Qn,WA,{hex:fn}),_(Qn,fn)})},kt=Qn=>Qn.type==="hex",st=(Qn,To)=>{const Un=To.event;kt(Un)?Ue(Qn,Un.value):Ze(Qn,Un.type,Un.value)},Dt=Qn=>({label:t(yC+Qn+".label"),description:t(yC+Qn+".description")}),hn=Dt("red"),Ro=Dt("green"),pn=Dt("blue"),xo=Dt("hex");return $s(p0.sketch(Qn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Qn.field("red",ds.sketch(g(Rs,"red",hn.label,hn.description,255))),Qn.field("green",ds.sketch(g(Rs,"green",Ro.label,Ro.description,255))),Qn.field("blue",ds.sketch(g(Rs,"blue",pn.label,pn.description,255))),Qn.field("hex",ds.sketch(g(sT,"hex",xo.label,xo.description,"ffffff"))),x.asSpec()],formBehaviours:vt([Um.config({invalidClass:s("form-invalid")}),ro("rgb-form-events",[et(ZA,st),et(MT,he),et(sB,he)])])})),{apis:{updateHex:(Qn,To)=>{zt.setValue(Qn,{hex:To.value}),V(Qn,To),_(Qn,To)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(I,V,X)=>{I.updateHex(V,X)}},extraApis:{}})},rB=(t,s)=>{const a=dd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=dd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,D)=>{const{width:B,height:I}=_,V=_.getContext("2d");if(V===null)return;V.fillStyle=D,V.fillRect(0,0,B,I);const X=V.createLinearGradient(0,0,B,0);X.addColorStop(0,"rgba(255,255,255,1)"),X.addColorStop(1,"rgba(255,255,255,0)"),V.fillStyle=X,V.fillRect(0,0,B,I);const ce=V.createLinearGradient(0,0,0,I);ce.addColorStop(0,"rgba(0,0,0,0)"),ce.addColorStop(1,"rgba(0,0,0,1)"),V.fillStyle=ce,V.fillRect(0,0,B,I)},g=(_,D)=>{const B=_.components()[0].element.dom,I=aC(D,100,100),V=up(I);d(B,aT(V))},p=(_,D)=>{const B=GO(dp(D));dd.setValue(_,{x:B.saturation,y:100-B.value})};return Kr({factory:_=>{const D=q({x:0,y:0}),B=(X,ce,Te)=>{xn(X,eB,{value:Te})},I=(X,ce,Te,ye)=>{d(Te.element.dom,aT(BM))},V=vt([So.config({find:O.some}),$n.config({})]);return dd.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,l],onChange:B,onInit:I,sliderBehaviours:V})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,D,B)=>{g(D,B)},setThumb:(_,D,B)=>{p(D,B)}},extraApis:{}})},aB=(t,s)=>{const a=d=>{const g=b0(t,s,d.onValidHex,d.onInvalidHex),p=rB(t,s),y=st=>(100-st)/100*360,x=st=>100-st/360*100,_={paletteRgba:S(BM),paletteHue:S(0)},D=bs(Y8(t,s)),B=bs(p.sketch({})),I=bs(g.sketch({})),V=(st,Dt,hn)=>{B.getOpt(st).each(Ro=>{p.setHue(Ro,hn)})},X=(st,Dt)=>{I.getOpt(st).each(hn=>{g.updateHex(hn,Dt)})},ce=(st,Dt,hn)=>{D.getOpt(st).each(Ro=>{dd.setValue(Ro,x(hn))})},Te=(st,Dt)=>{B.getOpt(st).each(hn=>{p.setThumb(hn,Dt)})},ye=(st,Dt)=>{const hn=dp(st);_.paletteRgba.set(hn),_.paletteHue.set(Dt)},he=(st,Dt,hn,Ro)=>{ye(Dt,hn),gt(Ro,pn=>{pn(st,Dt,hn)})},Ue=()=>{const st=[X];return(Dt,hn)=>{const Ro=hn.event.value,pn=_.paletteHue.get(),xo=aC(pn,Ro.x,100-Ro.y),Qn=HM(xo);he(Dt,Qn,pn,st)}},Ze=()=>{const st=[V,X];return(Dt,hn)=>{const Ro=y(hn.event.value),pn=_.paletteRgba.get(),xo=GO(pn),Qn=aC(Ro,xo.saturation,xo.value),To=HM(Qn);he(Dt,To,Ro,st)}},kt=()=>{const st=[V,ce,Te];return(Dt,hn)=>{const Ro=hn.event.hex,pn=LM(Ro);he(Dt,Ro,pn.hue,st)}};return{uid:d.uid,dom:d.dom,components:[B.asSpec(),D.asSpec(),I.asSpec()],behaviours:vt([ro("colour-picker-events",[et(WA,kt()),et(eB,Ue()),et(QN,Ze())]),So.config({find:st=>I.getOpt(st)}),Cn.config({mode:"acyclic"})])}};return Kr({name:"ColourPicker",configFields:[Je("dom"),xe("onValidHex",G),xe("onInvalidHex",G)],factory:a})},tu={self:()=>So.config({find:O.some}),memento:t=>So.config({find:t.getOpt}),childAt:t=>So.config({find:s=>Dc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},t7=ze([xe("preprocess",ft),xe("postprocess",ft)]),n7=(t,s)=>{const a=ul("RepresentingConfigs.memento processors",t7,s);return zt.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=zt.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),p=t.get(l);zt.setValue(p,g)}}})},jA=(t,s,a)=>zt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),NT=(t,s,a)=>jA(t,l=>s(l.element),(l,d)=>a(l.element,d)),Du={memento:n7,withElement:NT,withComp:jA,domValue:t=>NT(t,Ei,Gi),domHtml:t=>NT(t,Lb,km),memory:t=>zt.config({store:{mode:"memory",initialValue:t}})},s7={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},r7=t=>s=>t.translate(s7[s]),lB=(t,s,a)=>{const l=x=>"tox-"+x,d=aB(r7(s),l),g=x=>{xn(x,Bf,{name:"hex-valid",value:!0})},p=x=>{xn(x,Bf,{name:"hex-valid",value:!1})},y=bs(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[y.asSpec()],behaviours:vt([Du.withComp(a,x=>{const _=y.get(x);return So.getCurrent(_).bind(I=>zt.getValue(I).hex).map(I=>"#"+Ja(I,"#")).getOr("")},(x,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,B=O.from(D.exec(_)).bind(X=>ls(X,1)),I=y.get(x);So.getCurrent(I).fold(()=>{console.log("Can not find form")},X=>{zt.setValue(X,{hex:B.getOr("")}),p0.getField(X,"hex").each(ce=>{Go(ce,Pd())})})}),tu.self()])}};var a7=tinymce.util.Tools.resolve("tinymce.Resource");const c7=t=>so(t,"init"),l7=t=>{const s=Cs(),a=bs({dom:{tag:t.tag}}),l=Cs();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:vt([ro("custom-editor-events",[Fr(d=>{a.getOpt(d).each(g=>{(c7(t)?t.init(g.element.dom):a7.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{l.on(y=>{p.setValue(y)}),l.clear(),s.set(p)})})})]),Du.withComp(O.none(),()=>s.get().fold(()=>l.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>l.set(g),p=>p.setValue(g))}),tu.self()]),components:[a.asSpec()]}};var gp=tinymce.util.Tools.resolve("tinymce.util.Tools");const Pf=(t,s)=>{const a=gp.explode(s.getOption("images_file_types")),l=d=>Xo(a,g=>yr(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Fn(ur(t),l)},GA=(t,s,a)=>{const l=(I,V)=>{V.stop()},d=I=>(V,X)=>{gt(I,ce=>{ce(V,X)})},g=(I,V)=>{var X;if(!Dn.isDisabled(I)){const ce=V.event.raw;y(I,(X=ce.dataTransfer)===null||X===void 0?void 0:X.files)}},p=(I,V)=>{const X=V.event.raw.target;y(I,X.files)},y=(I,V)=>{V&&(zt.setValue(I,Pf(V,s)),xn(I,Qi,{name:t.name}))},x=bs({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:vt([ro("input-file-events",[ag(Zi()),ag(sg())])])}),_=I=>({uid:I.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:vt([Du.memory(a.getOr([])),tu.self(),Dn.config({}),go.config({toggleClass:"dragenter",toggleOnExecute:!1}),ro("dropzone-events",[et("dragenter",d([l,go.toggle])),et("dragleave",d([l,go.toggle])),et("dragover",l),et("drop",d([l,g])),et(gu(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Er(s.translate("Drop an image here"))]},Dr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Er(s.translate("Browse for an image")),x.asSpec()],action:V=>{x.get(V).element.dom.click()},buttonBehaviours:vt([Yr.config({}),_u.button(s.isDisabled),mc()])})]}]}),D=t.label.map(I=>mp(I,s)),B=ds.parts.field({factory:{sketch:_}});return i0(D,B,["tox-form__group--stretched"],[])},iB=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:_e(t.items,s.interpreter)}),v0=nn("alloy-fake-before-tabstop"),wC=nn("alloy-fake-after-tabstop"),uB=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:vt([$n.config({ignore:!0}),Yr.config({})])}),dB=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[uB([v0]),t,uB([wC])],behaviours:vt([tu.childAt(1)])}),mB=(t,s)=>{xn(t,ri(),{raw:{which:9,shiftKey:s}})},i7=(t,s)=>{const a=s.element;Xc(a,v0)?mB(t,!0):Xc(a,wC)&&mB(t,!1)},CC=t=>iC(t,["."+v0,"."+wC].join(","),Zn),u7=t=>{const s=S(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,l)=>{s.get()!==l&&Vn(a.element,"srcdoc",l),s.set(l)}}},d7=(t,s,a)=>{const l=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(B=>({title:B})).getOr({}),...a.map(B=>({srcdoc:B})).getOr({}),...l?{sandbox:"allow-scripts allow-same-origin"}:{}},y=u7(a),x=t.label.map(B=>mp(B,s)),_=B=>dB({uid:B.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:vt([Yr.config({}),$n.config({}),Du.withComp(a,y.getValue,y.setValue)])}),D=ds.parts.field({factory:{sketch:_}});return i0(x,D,["tox-form__group--stretched"],[])},fB=t=>new Promise((s,a)=>{const l=()=>{g(),s(t)},d=[bl(t,"load",l),bl(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>gt(d,p=>p.unbind());t.dom.complete&&l()}),m7=(t,s,a,l,d)=>{const g=a*d,p=l*d,y=Math.max(0,t/2-g/2),x=Math.max(0,s/2-p/2);return{left:y.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},If=(t,s,a)=>{const l=ca(t),d=Le(t);return Math.min(l/s,d/a,1)},BT=(t,s)=>{const a=S(s.getOr({url:""})),l=bs({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=bs({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(x,_)=>{const D={url:_.url};_.zoom.each(I=>D.zoom=I),_.cachedWidth.each(I=>D.cachedWidth=I),_.cachedHeight.each(I=>D.cachedHeight=I),a.set(D);const B=()=>{const{cachedWidth:I,cachedHeight:V,zoom:X}=D;if(!dt(I)&&!dt(V)){if(dt(X)){const Te=If(x.element,I,V);D.zoom=Te}const ce=m7(ca(x.element),Le(x.element),I,V,D.zoom);d.getOpt(x).each(Te=>{Nr(Te.element,ce)})}};l.getOpt(x).each(I=>{const V=I.element;_.url!==jr(V,"src")&&(Vn(V,"src",_.url),Qs(x.element,"tox-imagepreview__loaded")),B(),fB(V).then(X=>{x.getSystem().isConnected()&&(Ma(x.element,"tox-imagepreview__loaded"),D.cachedWidth=X.dom.naturalWidth,D.cachedHeight=X.dom.naturalHeight,B())})})},p={};t.height.each(x=>p.height=x);const y=s.map(x=>({url:x.url,zoom:O.from(x.zoom),cachedWidth:O.from(x.cachedWidth),cachedHeight:O.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:vt([tu.self(),Du.withComp(y,()=>a.get(),g)])}},f7=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[Er(s.providers.translate(t.label))]},l=_e(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...l],behaviours:vt([tu.self(),zn.config({}),Du.domHtml(O.none()),Cn.config({mode:"acyclic"})])}},gB=nn("toolbar.button.execute"),hB=t=>Vd((s,a)=>{nC(t,s)(l=>{xn(s,gB,{buttonApi:l}),t.onAction(l)})}),hp=nn("common-button-display-events"),$T={[hl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Fd()]:["toolbar-button-events",hp],[As()]:["focusing","alloy.base.behaviour",hp]},y0=t=>Kt(t.element,"width",Qe(t.element,"width")),w0=(t,s,a)=>rd(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),cb=(t,s)=>w0(t,s,[]),Zg=(t,s)=>w0(t,s,[zn.config({})]),qA=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Er(a.translate(t))],behaviours:vt([zn.config({})])}),md=nn("update-menu-text"),lb=nn("update-menu-icon"),KA=(t,s,a)=>{const l=S(G),d=t.text.map(I=>bs(qA(I,s,a.providers))),g=t.icon.map(I=>bs(Zg(I,a.providers.icons))),p=(I,V)=>{const X=zt.getValue(I);return $n.focus(X),xn(X,"keydown",{raw:V.event.raw}),Ou.close(X),O.some(!0)},y=t.role.fold(()=>({}),I=>({role:I})),x=t.tooltip.fold(()=>({}),I=>{const V=a.providers.translate(I);return{title:V,"aria-label":V}}),_=rd("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),D=nn("common-button-display-events");return bs(Ou.sketch({...t.uid?{uid:t.uid}:{},...y,dom:{tag:"button",classes:[s,`${s}--select`].concat(_e(t.classes,I=>`${s}--${I}`)),attributes:{...x}},components:a0([g.map(I=>I.asSpec()),d.map(I=>I.asSpec()),O.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(I,V,X)=>{t.searchable&&p6(X)},dropdownBehaviours:vt([...t.dropdownBehaviours,_u.button(()=>t.disabled||a.providers.isDisabled()),mc(),u0.config({}),zn.config({}),ro("dropdown-events",[Y1(t,l),X1(t,l)]),ro(D,[Fr((I,V)=>y0(I))]),ro("menubutton-update-display-text",[et(md,(I,V)=>{d.bind(X=>X.getOpt(I)).each(X=>{zn.set(X,[Er(a.providers.translate(V.event.text))])})}),et(lb,(I,V)=>{g.bind(X=>X.getOpt(I)).each(X=>{zn.set(X,[Zg(V.event.icon,a.providers.icons)])})})])]),eventOrder:$s($T,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Fd()]:["toolbar-button-events","dropdown-events",D]}),sandboxBehaviours:vt([Cn.config({mode:"special",onLeft:p,onRight:p}),ro("dropdown-sandbox-events",[et(WR,(I,V)=>{d6(I),V.stop()}),et(ZR,(I,V)=>{m6(I,V),V.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Wx(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:dN,onCollapseMenu:(I,V,X)=>{qo.getHighlighted(X).each(ce=>{dN(I,X,ce)})},onDehighlightItem:h6}},fetch:I=>vl.nu(Bt(t.fetch,I))})).asSpec()},g7=t=>_t(t),pB=t=>t.type==="separator",h7=t=>so(t,"getSubmenuItems"),p7={type:"separator"},bB=(t,s)=>{const a=In(t,(l,d)=>g7(d)?d===""?l:d==="|"?l.length>0&&!pB(l[l.length-1])?l.concat([p7]):l:so(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&pB(a[a.length-1])&&a.pop(),a},vB=(t,s)=>{const a=t.getSubmenuItems(),l=YA(a,s),d=$s(l.menus,{[t.value]:l.items}),g=$s(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},b7=t=>{const s=ht(t,"value").getOrThunk(()=>nn("generated-menu-item"));return $s({value:s},t)},YA=(t,s)=>{const a=bB(_t(t)?t.split(" "):t,s);return ms(a,(l,d)=>{if(h7(d)){const g=b7(d),p=vB(g,s);return{menus:$s(l.menus,p.menus),items:[p.item,...l.items],expansions:$s(l.expansions,p.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},v7=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),yB=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Ff=(t,s,a,l)=>{const d=nn("primary-menu"),g=YA(t,a.shared.providers.menuItems());if(g.items.length===0)return O.none();const p=v7(l),y=mN(d,g.items,s,a,l.isHorizontalMenu,p),x=yB(l),_=qt(g.menus,(B,I)=>mN(I,B,s,a,!1,x)),D=$s(_,Kn(d,y));return O.from(sd.tieredData(d,D,g.expansions))},XA=t=>!so(t,"items"),JA="data-value",wB=(t,s,a,l)=>_e(a,d=>XA(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===l,onAction:()=>{zt.setValue(t,d.value),xn(t,Qi,{name:s}),$n.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>wB(t,s,d.items,l)}),QA=(t,s)=>Jo(t,a=>XA(a)?_n(a.value===s,a):QA(a.items,s)),y7=(t,s,a)=>{const l=s.shared.providers,d=a.bind(x=>QA(t.items,x)).orThunk(()=>Ms(t.items).filter(XA)),g=t.label.map(x=>mp(x,l)),p=ds.parts.field({dom:{},factory:{sketch:x=>KA({uid:x.uid,text:d.map(_=>_.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(_,D)=>{const B=wB(_,t.name,t.items,zt.getValue(_));D(Ff(B,ad.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:O.none()}))},onSetup:q(G),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yr.config({}),Du.withComp(d.map(_=>_.value),_=>jr(_.element,JA),(_,D)=>{QA(t.items,D).each(B=>{Vn(_.element,JA,B.value),xn(_,md,{text:B.text})})})]},"tox-listbox",s.shared)}}),y={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return ds.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Vt([g.toArray(),[y]]),fieldBehaviours:vt([Dn.config({disabled:q(!t.enabled),onDisabled:x=>{ds.getField(x).each(Dn.disable)},onEnabled:x=>{ds.getField(x).each(Dn.enable)}})])})},w7=(t,s)=>({dom:{tag:"div",classes:t.classes},components:_e(t.items,s.shared.interpreter)}),CB=(t,s)=>{const a=_e(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>Kn("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:$a(t.selectBehaviours,[$n.config({}),zt.config({store:{mode:"manual",getValue:d=>Ei(d.element),setValue:(d,g)=>{const p=Ms(t.options);Tt(t.options,x=>x.value===g).isSome()?Gi(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(x=>Gi(d.element,x.value))},...l}})])}},C7=Kr({name:"HtmlSelect",configFields:[Je("options"),ic("selectBehaviours",[$n,zt]),xe("selectClasses",[]),xe("selectAttributes",{}),rs("data")],factory:CB}),SB=(t,s,a)=>{const l=_e(t.items,x=>({text:s.translate(x.text),value:x.value})),d=t.label.map(x=>mp(x,s)),g=ds.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:t.size},options:l,factory:C7,selectBehaviours:vt([Dn.config({disabled:()=>!t.enabled||s.isDisabled()}),Yr.config({}),ro("selectbox-change",[et(gu(),(x,_)=>{xn(x,Qi,{name:t.name})})])])}),p=t.size>1?O.none():O.some(rd("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:Vt([[g],p.toArray()])};return ds.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Vt([d.toArray(),[y]]),fieldBehaviours:vt([Dn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{ds.getField(x).each(Dn.disable)},onEnabled:x=>{ds.getField(x).each(Dn.enable)}}),mc()])})},e4=q([xe("field1Name","field1"),xe("field2Name","field2"),fg("onLockedChange"),mg(["lockClass"]),xe("locked",!1),Cu.field("coupledFieldBehaviours",[So,zt])]),jg=(t,s,a)=>zs(t,s,a).bind(So.getCurrent),PT=(t,s)=>uc({factory:ds,name:t,overrides:a=>({fieldBehaviours:vt([ro("coupled-input-behaviour",[et(Pd(),l=>{jg(l,a,s).each(d=>{zs(l,a,"lock").each(g=>{go.isOn(g)&&a.onLockedChange(l,d,g)})})})])])})}),xB=q([PT("field1","field2"),PT("field2","field1"),uc({factory:Dr,schema:[Je("dom")],name:"lock",overrides:t=>({buttonBehaviours:vt([go.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),TB=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Cu.augment(t.coupledFieldBehaviours,[So.config({find:O.some}),zt.config({store:{mode:"manual",getValue:d=>{const g=Vv(d,t,["field1","field2"]);return{[t.field1Name]:zt.getValue(g.field1()),[t.field2Name]:zt.getValue(g.field2())}},setValue:(d,g)=>{const p=Vv(d,t,["field1","field2"]);ha(g,t.field1Name)&&zt.setValue(p.field1(),g[t.field1Name]),ha(g,t.field2Name)&&zt.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>zs(d,t,"field1"),getField2:d=>zs(d,t,"field2"),getLock:d=>zs(d,t,"lock")}}),Bi=ma({name:"FormCoupledInputs",configFields:e4(),partFields:xB(),factory:TB,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),kB=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},C0=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),d=a[2];return St.value({value:l,unit:d})}else return St.error(t)},t4=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>so(a,d);return t.unit===s?O.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?O.some(t.value):O.some(t.value/a[t.unit]*a[s]):O.none()},IT=t=>O.none(),S7=(t,s)=>a=>t4(a,s).map(l=>({value:l*t,unit:s})),x7=(t,s)=>{const a=C0(t).toOptional(),l=C0(s).toOptional();return Ya(a,l,(d,g)=>t4(d,g.unit).map(p=>g.value/p).map(p=>S7(p,g.unit)).getOr(IT)).getOr(IT)},T7=(t,s)=>{let a=IT;const l=nn("ratio-event"),d=B=>rd(B,{tag:"span",classes:["tox-icon","tox-lock-icon__"+B]},s.icons),g=Bi.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:vt([Dn.config({disabled:()=>!t.enabled||s.isDisabled()}),mc(),Yr.config({})])}),p=B=>({dom:{tag:"div",classes:["tox-form__group"]},components:B}),y=B=>ds.parts.field({factory:W1,inputClasses:["tox-textfield"],inputBehaviours:vt([Dn.config({disabled:()=>!t.enabled||s.isDisabled()}),mc(),Yr.config({}),ro("size-input-events",[et(df(),(I,V)=>{xn(I,l,{isField1:B})}),et(gu(),(I,V)=>{xn(I,Qi,{name:t.name})})])]),selectOnFocus:!1}),x=B=>({dom:{tag:"label",classes:["tox-label"]},components:[Er(s.translate(B))]}),_=Bi.parts.field1(p([ds.parts.label(x("Width")),y(!0)])),D=Bi.parts.field2(p([ds.parts.label(x("Height")),y(!1)]));return Bi.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[_,D,p([x(Ly),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(B,I,V)=>{C0(zt.getValue(B)).each(X=>{a(X).each(ce=>{zt.setValue(I,kB(ce))})})},coupledFieldBehaviours:vt([Dn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:B=>{Bi.getField1(B).bind(ds.getField).each(Dn.disable),Bi.getField2(B).bind(ds.getField).each(Dn.disable),Bi.getLock(B).each(Dn.disable)},onEnabled:B=>{Bi.getField1(B).bind(ds.getField).each(Dn.enable),Bi.getField2(B).bind(ds.getField).each(Dn.enable),Bi.getLock(B).each(Dn.enable)}}),mc(),ro("size-input-events2",[et(l,(B,I)=>{const V=I.event.isField1,X=V?Bi.getField1(B):Bi.getField2(B),ce=V?Bi.getField2(B):Bi.getField1(B),Te=X.map(zt.getValue).getOr(""),ye=ce.map(zt.getValue).getOr("");a=x7(Te,ye)})])])})},k7=(t,s,a)=>{const l=dd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Er(s.translate(t.label))]}),d=dd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=dd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return dd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:vt([tu.self(),$n.config({})]),onChoose:(p,y,x)=>{xn(p,Qi,{name:t.name,value:x})}})},E7=(t,s)=>{const a=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),l=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:_e(y,a)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:_e(y,d)}),p=y=>({dom:{tag:"tbody"},components:_e(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),p(t.cells)],behaviours:vt([Yr.config({}),$n.config({})])}},n4=(t,s)=>{const a=t.label.map(V=>mp(V,s)),l=[Dn.config({disabled:()=>t.disabled||s.isDisabled()}),mc(),Cn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(Go(V,mC),O.some(!0))}),ro("textfield-change",[et(Pd(),(V,X)=>{xn(V,Qi,{name:t.name})}),et(sy(),(V,X)=>{xn(V,Qi,{name:t.name})})]),Yr.config({})],d=t.validation.map(V=>Um.config({getRoot:X=>bc(X.element),invalidClass:"tox-invalid",validator:{validate:X=>{const ce=zt.getValue(X),Te=V.validator(ce);return vl.pure(Te===!0?St.value(ce):St.error(Te))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(q({}),V=>({placeholder:s.translate(V)})),p=t.inputMode.fold(q({}),V=>({inputmode:V})),y={...g,...p},x=ds.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:vt(Vt([l,d])),selectOnFocus:!1,factory:W1}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,B=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),I=[Dn.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:V=>{ds.getField(V).each(Dn.disable)},onEnabled:V=>{ds.getField(V).each(Dn.enable)}}),mc()];return i0(a,_,B,I)},EB=(t,s,a)=>n4({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:a},s),_7=(t,s,a)=>n4({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:a},s),SC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Gg=t=>t.dimension.property,Lf=(t,s)=>t.dimension.getDimension(s),FT=(t,s)=>{const a=SC(t,s);Jc(a,[s.shrinkingClass,s.growingClass])},o4=(t,s)=>{Qs(t.element,s.openClass),Ma(t.element,s.closedClass),Kt(t.element,Gg(s),"0px"),Y(t.element)},LT=(t,s)=>{Qs(t.element,s.closedClass),Ma(t.element,s.openClass),mo(t.element,Gg(s))},s4=(t,s,a,l)=>{a.setCollapsed(),Kt(t.element,Gg(s),Lf(s,t.element)),FT(t,s),o4(t,s),s.onStartShrink(t),s.onShrunk(t)},O7=(t,s,a,l)=>{const d=l.getOrThunk(()=>Lf(s,t.element));a.setCollapsed(),Kt(t.element,Gg(s),d),Y(t.element);const g=SC(t,s);Qs(g,s.growingClass),Ma(g,s.shrinkingClass),o4(t,s),s.onStartShrink(t)},_B=(t,s,a)=>{const l=Lf(s,t.element);(l==="0px"?s4:O7)(t,s,a,O.some(l))},HT=(t,s,a)=>{const l=SC(t,s),d=Xc(l,s.shrinkingClass),g=Lf(s,t.element);LT(t,s);const p=Lf(s,t.element);(d?()=>{Kt(t.element,Gg(s),g),Y(t.element)}:()=>{o4(t,s)})(),Qs(l,s.shrinkingClass),Ma(l,s.growingClass),LT(t,s),Kt(t.element,Gg(s),p),a.setExpanded(),s.onStartGrow(t)},A7=(t,s,a)=>{if(a.isExpanded()){mo(t.element,Gg(s));const l=Lf(s,t.element);Kt(t.element,Gg(s),l)}},OB=(t,s,a)=>{a.isExpanded()||HT(t,s,a)},D7=(t,s,a)=>{a.isExpanded()&&_B(t,s,a)},R7=(t,s,a)=>{a.isExpanded()&&s4(t,s,a)},AB=(t,s,a)=>a.isExpanded(),DB=(t,s,a)=>a.isCollapsed(),RB=(t,s,a)=>{const l=SC(t,s);return Xc(l,s.growingClass)===!0},MB=(t,s,a)=>{const l=SC(t,s);return Xc(l,s.shrinkingClass)===!0};var N7=Object.freeze({__proto__:null,refresh:A7,grow:OB,shrink:D7,immediateShrink:R7,hasGrown:AB,hasShrunk:DB,isGrowing:RB,isShrinking:MB,isTransitioning:(t,s,a)=>RB(t,s)||MB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?_B:HT)(t,s,a)},disableTransitions:FT,immediateGrow:(t,s,a)=>{a.isExpanded()||(LT(t,s),Kt(t.element,Gg(s),Lf(s,t.element)),FT(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),$7=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return ci(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Kn(s.dimension.property,"0px")})},events:(t,s)=>Js([yh(gh(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(FT(a,t),s.isExpanded()&&mo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),P7=[Je("closedClass"),Je("openClass"),Je("shrinkingClass"),Je("growingClass"),rs("getAnimationRoot"),Ao("onShrunk"),Ao("onStartShrink"),Ao("onGrown"),Ao("onStartGrow"),xe("expanded",!1),ml("dimension",dl("property",{width:[us("property","width"),us("getDimension",t=>ca(t)+"px")],height:[us("property","height"),us("getDimension",t=>Le(t)+"px")]}))],I7=Object.freeze({__proto__:null,init:t=>{const s=S(t.expanded),a=()=>"expanded: "+s.get();return rc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Bt(s.set,!1),setExpanded:Bt(s.set,!0),readState:a})}});const nu=Ec({fields:P7,name:"sliding",active:$7,apis:N7,state:I7}),NB=t=>({isEnabled:()=>!Dn.isDisabled(t),setEnabled:s=>Dn.set(t,!s),setActive:s=>{const a=t.element;s?(Ma(a,"tox-tbtn--enabled"),Vn(a,"aria-pressed",!0)):(Qs(a,"tox-tbtn--enabled"),ne(a,"aria-pressed"))},isActive:()=>Xc(t.element,"tox-tbtn--enabled"),setText:s=>{xn(t,md,{text:s})},setIcon:s=>xn(t,lb,{icon:s})}),xC=(t,s,a,l,d=!0)=>KA({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(g,p)=>{const y={pattern:t.search.isSome()?b6(g):""};t.fetch(x=>{p(Ff(x,ad.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},y,NB(g))},onSetup:t.onSetup,getApi:NB,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Yr.config({})]:[]]},s,a.shared),F7=(t,s,a)=>{const l=g=>p=>{const y=!p.isActive();p.setActive(y),g.storage.set(y),a.shared.getSink().each(x=>{s().getOpt(x).each(_=>{pu(_.element),xn(_,Bf,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(_e(t,p=>{const y=p.text.fold(()=>({}),x=>({text:x}));return{type:p.type,active:!1,...y,onAction:l(p),onSetup:d(p)}}))}},VT=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Er(t)]}),BB=nn("leaf-label-event-id"),r4=({leaf:t,onLeafAction:s,visible:a,treeId:l,backstage:d})=>{const g=t.menu.map(y=>xC(y,"tox-mbtn",d,O.none(),a)),p=[VT(t.title)];return g.each(y=>p.push(y)),Dr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:y=>{s(t.id),y.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[ri()]:[BB,"keying"]},buttonBehaviours:vt([...a?[Yr.config({})]:[],go.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ua.config({channels:{[`update-active-item-${l}`]:{onReceive:(y,x)=>{(x.value===t.id?go.on:go.off)(y)}}}}),ro(BB,[et(ri(),(y,x)=>{const _=x.event.raw.code==="ArrowLeft",D=x.event.raw.code==="ArrowRight";_?(Ul(y.element,".tox-tree--directory").each(B=>{y.getSystem().getByDom(B).each(I=>{P2(B,".tox-tree--directory__label").each(V=>{I.getSystem().getByDom(V).each($n.focus)})})}),x.stop()):D&&x.stop()})])])})},L7=(t,s,a)=>rd(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),TC=(t,s)=>L7(t,s,[]),zT=nn("directory-label-event-id"),H7=({directory:t,visible:s,noChildren:a,backstage:l})=>{const d=t.menu.map(y=>xC(y,"tox-mbtn",l,O.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[TC("chevron-right",l.shared.providers.icons)]},VT(t.title)];d.each(y=>{g.push(y)});const p=y=>{Ul(y.element,".tox-tree--directory").each(x=>{y.getSystem().getByDom(x).each(_=>go.toggle(_))})};return Dr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[ri()]:[zT,"keying"]},buttonBehaviours:vt([...s?[Yr.config({})]:[],ro(zT,[et(ri(),(y,x)=>{const _=x.event.raw.code==="ArrowRight",D=x.event.raw.code==="ArrowLeft";_&&a&&x.stop(),(_||D)&&Ul(y.element,".tox-tree--directory").each(B=>{y.getSystem().getByDom(B).each(I=>{!go.isOn(I)&&_||go.isOn(I)&&D?(p(y),x.stop()):D&&!go.isOn(I)&&(Ul(I.element,".tox-tree--directory").each(V=>{P2(V,".tox-tree--directory__label").each(X=>{I.getSystem().getByDom(X).each($n.focus)})}),x.stop())})})})])])})},V7=({children:t,onLeafAction:s,visible:a,treeId:l,backstage:d})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(g=>g.type==="leaf"?r4({leaf:g,onLeafAction:s,visible:a,treeId:l,backstage:d}):kC({directory:g,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d})),behaviours:vt([nu.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking"}),zn.config({})])}),kC=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d})=>{const{children:g}=t,p=y=>g.map(x=>x.type==="leaf"?r4({leaf:x,onLeafAction:s,visible:y,treeId:l,backstage:d}):kC({directory:x,onLeafAction:s,labelTabstopping:y,treeId:l,backstage:d}));return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[H7({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),V7({children:g,onLeafAction:s,visible:!1,treeId:l,backstage:d})],behaviours:vt([go.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(y,x)=>{const _=y.components()[1],D=p(x);x?nu.grow(_):nu.shrink(_),zn.set(_,D)}})])}},z7=(t,s)=>{const a=t.onLeafAction.getOr(G),l=nn("tree-id"),d=t.items.map(g=>g.type==="leaf"?r4({leaf:g,onLeafAction:a,visible:!0,treeId:l,backstage:s}):kC({directory:g,onLeafAction:a,labelTabstopping:!0,treeId:l,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:d,behaviours:vt([Cn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1})])}};var PB=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return Js([et(t.event,l),Al(()=>s.cancel())].concat(t.cancelEvent.map(d=>[et(d,()=>s.cancel())]).getOr([])))}});const U7=(t,s)=>{let a=null;return{cancel:()=>{un(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{un(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},a4=(t,s)=>{let a=null;const l=()=>{un(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},c4=t=>{const s=S(null);return rc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var Z7=Object.freeze({__proto__:null,throttle:c4,init:t=>t.stream.streams.state(t)});const IB=(t,s)=>{const a=t.stream,l=a4(t.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var FB=[ml("stream",dl("mode",{throttle:[Je("delay"),xe("stopEvent",!0),us("streams",{setup:IB,state:c4})]})),xe("event","input"),rs("cancelEvent"),fg("onStream")];const l4=Ec({fields:FB,name:"streaming",active:PB,state:Z7}),EC=(t,s,a)=>{const l=zt.getValue(a);zt.setValue(s,l),u4(s)},i4=(t,s)=>{const a=t.element,l=Ei(a),d=a.dom;jr(a,"type")!=="number"&&s(d,l)},u4=t=>{i4(t,(s,a)=>s.setSelectionRange(a.length,a.length))},j7=(t,s)=>{i4(t,(a,l)=>a.setSelectionRange(s,l.length))},G7=(t,s,a)=>{if(t.selectsOver){const l=zt.getValue(s),d=t.getDisplayText(l),g=zt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?O.some(()=>{EC(t,s,a),j7(s,d.length)}):O.none()}else return O.none()},d4=q("alloy.typeahead.itemexecute"),LB=(t,s,a,l)=>{const d=(B,I,V)=>{t.previewing.set(!1);const X=na.getCoupled(B,"sandbox");if(Po.isOpen(X))So.getCurrent(X).each(ce=>{qo.getHighlighted(ce).fold(()=>{V(ce)},()=>{Ib(X,ce.element,"keydown",I)})});else{const ce=Te=>{So.getCurrent(Te).each(V)};dT(t,p(B),B,X,l,ce,fi.HighlightMenuAndItem).get(G)}},g=zR(t),p=B=>I=>I.map(V=>{const X=Mr(V.menus),ce=De(X,ye=>Fn(ye.items,he=>he.type==="item"));return zt.getState(B).update(_e(ce,ye=>ye.data)),V}),y=B=>So.getCurrent(B),x="typeaheadevents",_=[$n.config({}),zt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>Ei(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,I)=>{Gi(B.element,t.model.getDisplayText(I))},...t.initialData.map(B=>Kn("initialValue",B)).getOr({})}}),l4.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,I)=>{const V=na.getCoupled(B,"sandbox");if($n.isFocused(B)&&Ei(B.element).length>=t.minChars){const ce=y(V).bind(ye=>qo.getHighlighted(ye).map(zt.getValue));t.previewing.set(!0);const Te=ye=>{y(V).each(he=>{ce.fold(()=>{t.model.selectsOver&&qo.highlightFirst(he)},Ue=>{qo.highlightBy(he,Ze=>zt.getValue(Ze).value===Ue.value),qo.getHighlighted(he).orThunk(()=>(qo.highlightFirst(he),O.none()))})})};dT(t,p(B),B,V,l,Te,fi.HighlightJustMenu).get(G)}},cancelEvent:Lp()}),Cn.config({mode:"special",onDown:(B,I)=>(d(B,I,qo.highlightFirst),O.some(!0)),onEscape:B=>{const I=na.getCoupled(B,"sandbox");return Po.isOpen(I)?(Po.close(I),O.some(!0)):O.none()},onUp:(B,I)=>(d(B,I,qo.highlightLast),O.some(!0)),onEnter:B=>{const I=na.getCoupled(B,"sandbox"),V=Po.isOpen(I);if(V&&!t.previewing.get())return y(I).bind(X=>qo.getHighlighted(X)).map(X=>(xn(B,d4(),{item:X}),!0));{const X=zt.getValue(B);return Go(B,Lp()),t.onExecute(I,B,X),V&&Po.close(I),O.some(!0)}}}),go.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),na.config({others:{sandbox:B=>hT(t,B,{onOpen:()=>go.on(B),onClose:()=>go.off(B)})}}),ro(x,[Fr(B=>{t.lazyTypeaheadComp.set(O.some(B))}),Al(B=>{t.lazyTypeaheadComp.set(O.none())}),Vd(B=>{const I=G;uA(t,p(B),B,l,I,fi.HighlightMenuAndItem).get(G)}),et(d4(),(B,I)=>{const V=na.getCoupled(B,"sandbox");EC(t.model,B,I.event.item),Go(B,Lp()),t.onItemExecute(B,V,I.event.item,zt.getValue(B)),Po.close(V),u4(B)})].concat(t.dismissOnBlur?[et(oy(),B=>{const I=na.getCoupled(B,"sandbox");bu(I.element).isNone()&&Po.close(I)})]:[]))],D={[ju()]:[zt.name(),l4.name(),x],...t.eventOrder};return{uid:t.uid,dom:UR($s(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...$a(t.typeaheadBehaviours,_)},eventOrder:D}},q7=q([rs("lazySink"),Je("fetch"),xe("minChars",5),xe("responseTime",1e3),Ao("onOpen"),xe("getHotspot",O.some),xe("getAnchorOverrides",q({})),xe("layouts",O.none()),xe("eventOrder",{}),C("model",{},[xe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),xe("selectsOver",!0),xe("populateFromBrowse",!0)]),Ao("onSetValue"),Ur("onExecute"),Ao("onItemExecute"),xe("inputClasses",[]),xe("inputAttributes",{}),xe("inputStyles",{}),xe("matchWidth",!0),xe("useMinWidth",!1),xe("dismissOnBlur",!0),mg(["openClass"]),rs("initialData"),ic("typeaheadBehaviours",[$n,zt,l4,Cn,go,na]),Pc("lazyTypeaheadComp",()=>S(O.none)),Pc("previewing",()=>S(!0))].concat(VR()).concat(dA())),HB=q([Su({schema:[Zd()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{G7(t.model,d,l).fold(()=>{t.model.selectsOver?(qo.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&EC(t.model,d,l)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(xn(l,d4(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&EC(t.model,l,a)})}})})]),K7=ma({name:"Typeahead",configFields:q7(),partFields:HB(),factory:LB}),om=t=>({...t,toCached:()=>om(t.toCached()),bindFuture:x=>om(t.bind(_=>_.fold(D=>vl.pure(St.error(D)),D=>x(D)))),bindResult:x=>om(t.map(_=>_.bind(x))),mapResult:x=>om(t.map(_=>_.map(x))),mapError:x=>om(t.map(_=>_.mapError(x))),foldResult:(x,_)=>t.map(D=>D.fold(x,_)),withTimeout:(x,_)=>om(vl.nu(D=>{let B=!1;const I=setTimeout(()=>{B=!0,D(St.error(_()))},x);t.get(V=>{B||(clearTimeout(I),D(V))})}))}),UT=t=>om(vl.nu(t)),VB=t=>om(vl.pure(St.value(t))),zB={nu:UT,wrap:om,pure:VB,value:VB,error:t=>om(vl.pure(St.error(t))),fromResult:t=>om(vl.pure(t)),fromFuture:t=>om(t.map(St.value)),fromPromise:t=>UT(s=>{t.then(a=>{s(St.value(a))},a=>{s(St.error(a))})})},WT=(t,s,a=[],l,d,g)=>{const p=s.fold(()=>({}),_=>({action:_})),y={buttonBehaviours:vt([_u.button(()=>!t.enabled||g.isDisabled()),mc(),Yr.config({}),ro("button press",[l2("click"),l2("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},x=$s(y,{dom:l});return $s(x,{components:d})},UB=(t,s,a,l=[])=>{const d=t.tooltip.map(x=>({"aria-label":a.translate(x),title:a.translate(x)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(x=>cb(x,a.icons)),y=a0([p]);return WT(t,s,l,g,y,a)},m4=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},WB=(t,s,a,l=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(I=>cb(I,a.icons)),y=[p.getOrThunk(()=>Er(g))],x=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...m4(x),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return WT(t,s,l,B,y,a)},ZB=(t,s,a,l=[],d=[])=>{const g=WB(t,O.some(s),a,l,d);return Dr.sketch(g)},jB=(t,s)=>a=>{s==="custom"?xn(a,Bf,{name:t,value:{}}):s==="submit"?Go(a,mC):s==="cancel"?Go(a,ob):console.error("Unknown button type: ",s)},GB=(t,s)=>s==="menu",X7=(t,s)=>s==="custom"||s==="cancel"||s==="submit",J7=(t,s)=>s==="togglebutton",qB=(t,s)=>{var a,l,d;const g=O.from(t.icon).map(he=>Zg(he,s.icons)).map(bs),p=he=>{xn(he,Bf,{name:t.name,value:{setIcon:Ue=>{g.map(Ze=>Ze.getOpt(he).each(kt=>{zn.set(kt,[Zg(Ue,s.icons)])}))}}})},y={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:O.from(t.tooltip),icon:O.from(t.name),enabled:(l=t.enabled)!==null&&l!==void 0?l:!1,borderless:!1},x=y.tooltip.map(he=>({"aria-label":s.translate(he),title:s.translate(he)})).getOr({}),_=m4((d=t.buttonType)!==null&&d!==void 0?d:"secondary"),D=!!t.icon&&!!t.text,B={tag:"button",classes:[..._.concat(["tox-button--icon"]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:x},I=[],V=s.translate(t.text),X=Er(V),Te=[...a0([g.map(he=>he.asSpec())]),...D?[X]:[]],ye=WT(y,O.some(p),I,B,Te,s);return Dr.sketch(ye)},ZT=(t,s,a)=>{if(GB(t,s)){const l=()=>p,d=t,g={...t,type:"menubutton",search:O.none(),onSetup:y=>(y.setEnabled(t.enabled),G),fetch:F7(d.items,l,a)},p=bs(xC(g,"tox-tbtn",a,O.none()));return p.asSpec()}else if(X7(t,s)){const l=jB(t.name,s),d={...t,borderless:!1};return ZB(d,l,a.shared.providers,[])}else if(J7(t,s)){const l={...t,tooltip:t.tooltip,text:t.text.getOrUndefined(),buttonType:t.buttonType.getOrUndefined()};return qB(l,a.shared.providers)}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},Q7=(t,s)=>{const a=jB(t.name,"custom");return j6(O.none(),ds.parts.field({factory:Dr,...WB(t,O.some(a),s,[Du.memory(""),tu.self()])}))},eH={type:"separator"},KB=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:G}),f4=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:G}),tH=t=>_e(t,KB),YB=(t,s)=>Fn(s,a=>a.type===t),g4=(t,s)=>tH(YB(t,s)),XB=t=>g4("header",t.targets),jT=t=>g4("anchor",t.targets),nH=t=>O.from(t.anchorTop).map(s=>f4("<top>",s)).toArray(),oH=t=>O.from(t.anchorBottom).map(s=>f4("<bottom>",s)).toArray(),sH=t=>_e(t,s=>f4(s,s)),rH=t=>In(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(eH,a),[]),GT=(t,s)=>{const a=t.toLowerCase();return Fn(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,p=(d=l.value)!==null&&d!==void 0?d:"";return dr(g.toLowerCase(),a)||dr(p.toLowerCase(),a)})},JB=(t,s,a)=>{var l,d;const g=zt.getValue(s),p=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],x=>{const _=GT(p,sH(a.getHistory(t)));return t==="file"?rH([_,GT(p,XB(x)),GT(p,Vt([nH(x),jT(x),oH(x)]))]):_})},QB=nn("aria-invalid"),aH=(t,s,a,l)=>{const d=s.shared.providers,g=he=>{const Ue=zt.getValue(he);a.addToHistory(Ue.value,t.filetype)},p={...l.map(he=>({initialData:he})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":QB,type:"url"},minChars:0,responseTime:0,fetch:he=>{const Ue=JB(t.filetype,he,a),Ze=Ff(Ue,ad.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:O.none()});return vl.pure(Ze)},getHotspot:he=>X.getOpt(he),onSetValue:(he,Ue)=>{he.hasConfigured(Um)&&Um.run(he).get(G)},typeaheadBehaviours:vt([...a.getValidationHandler().map(he=>Um.config({getRoot:Ue=>bc(Ue.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ue,Ze)=>{D.getOpt(Ue).each(kt=>{Vn(kt.element,"title",d.translate(Ze))})}},validator:{validate:Ue=>{const Ze=zt.getValue(Ue);return zB.nu(kt=>{he({type:t.filetype,url:Ze.value},st=>{if(st.status==="invalid"){const Dt=St.error(st.message);kt(Dt)}else{const Dt=St.value(st.message);kt(Dt)}})})},validateOnLoad:!1}})).toArray(),Dn.config({disabled:()=>!t.enabled||d.isDisabled()}),Yr.config({}),ro("urlinput-events",[et(Pd(),he=>{const Ue=Ei(he.element),Ze=Ue.trim();Ze!==Ue&&Gi(he.element,Ze),t.filetype==="file"&&xn(he,Qi,{name:t.name})}),et(gu(),he=>{xn(he,Qi,{name:t.name}),g(he)}),et(sy(),he=>{xn(he,Qi,{name:t.name}),g(he)})])]),eventOrder:{[Pd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:he=>he.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Wx(!1,1,"normal")},onExecute:(he,Ue,Ze)=>{xn(Ue,mC,{})},onItemExecute:(he,Ue,Ze,kt)=>{g(he),xn(he,Qi,{name:t.name})}},y=ds.parts.field({...p,factory:K7}),x=t.label.map(he=>mp(he,d)),D=bs(((he,Ue,Ze=he,kt=he)=>rd(Ze,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+he],attributes:{title:d.translate(kt),"aria-live":"polite",...Ue.fold(()=>({}),st=>({id:st}))}},d.icons))("invalid",O.some(QB),"warning")),B=bs({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),I=a.getUrlPicker(t.filetype),V=nn("browser.url.event"),X=bs({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,B.asSpec()],behaviours:vt([Dn.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ce=bs(ZB({name:t.name,icon:O.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},he=>Go(he,V),d,[],["tox-browse-url"])),Te=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Vt([[X.asSpec()],I.map(()=>ce.asSpec()).toArray()])}),ye=he=>{So.getCurrent(he).each(Ue=>{const Ze=zt.getValue(Ue),kt={fieldname:t.name,...Ze};I.each(st=>{st(kt).get(Dt=>{zt.setValue(Ue,Dt),xn(he,Qi,{name:t.name})})})})};return ds.sketch({dom:G6(),components:x.toArray().concat([Te()]),fieldBehaviours:vt([Dn.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:he=>{ds.getField(he).each(Dn.disable),ce.getOpt(he).each(Dn.disable)},onEnabled:he=>{ds.getField(he).each(Dn.enable),ce.getOpt(he).each(Dn.enable)}}),mc(),ro("url-input-events",[et(V,ye)])])})},e$=(t,s)=>zm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:gR(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{xn(a,Bf,{name:"alert-banner",value:t.url})},buttonBehaviours:vt([eO()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),cH=(t,s)=>{t.dom.checked=s},lH=t=>t.dom.checked,lo=(t,s,a)=>{const l=x=>(x.element.dom.click(),O.some(!0)),d=ds.parts.field({factory:{sketch:ft},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:vt([tu.self(),Dn.config({disabled:()=>!t.enabled||s.isDisabled()}),Yr.config({}),$n.config({}),Du.withElement(a,lH,cH),Cn.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),ro("checkbox-events",[et(gu(),(x,_)=>{xn(x,Qi,{name:t.name})})])])}),g=ds.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Er(s.translate(t.label))],behaviours:vt([u0.config({})])}),p=x=>rd(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),y=bs({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return ds.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:vt([Dn.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:x=>{ds.getField(x).each(Dn.disable)},onEnabled:x=>{ds.getField(x).each(Dn.enable)}}),mc()])})},_C=t=>t.presets==="presentation"?zm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):zm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:vt([Yr.config({}),$n.config({})])}),ja=t=>(s,a,l,d)=>ht(a,"name").fold(()=>t(a,d,O.none()),g=>s.field(g,t(a,d,ht(l,g)))),t$=t=>(s,a,l,d)=>{const g=$s(a,{source:"dynamic"});return ja(t)(s,g,l,d)},n$={bar:ja((t,s)=>L6(t,s.shared)),collection:ja((t,s,a)=>q6(t,s.shared.providers,a)),alertbanner:ja((t,s)=>e$(t,s.shared.providers)),input:ja((t,s,a)=>EB(t,s.shared.providers,a)),textarea:ja((t,s,a)=>_7(t,s.shared.providers,a)),label:ja((t,s)=>f7(t,s.shared)),iframe:t$((t,s,a)=>d7(t,s.shared.providers,a)),button:ja((t,s)=>Q7(t,s.shared.providers)),checkbox:ja((t,s,a)=>lo(t,s.shared.providers,a)),colorinput:ja((t,s,a)=>t8(t,s.shared,s.colorinput,a)),colorpicker:ja((t,s,a)=>lB(t,s.shared.providers,a)),dropzone:ja((t,s,a)=>GA(t,s.shared.providers,a)),grid:ja((t,s)=>iB(t,s.shared)),listbox:ja((t,s,a)=>y7(t,s,a)),selectbox:ja((t,s,a)=>SB(t,s.shared.providers,a)),sizeinput:ja((t,s)=>T7(t,s.shared.providers)),slider:ja((t,s,a)=>k7(t,s.shared.providers,a)),urlinput:ja((t,s,a)=>aH(t,s,s.urlinput,a)),customeditor:ja(l7),htmlpanel:ja(_C),imagepreview:ja((t,s,a)=>BT(t,a)),table:ja((t,s)=>E7(t,s.shared.providers)),tree:ja((t,s)=>z7(t,s)),panel:ja((t,s)=>w7(t,s))},o$={field:(t,s)=>s,record:q([])},h4=(t,s,a,l)=>{const d=$s(l,{shared:{interpreter:g=>s$(t,g,a,d)}});return s$(t,s,a,d)},s$=(t,s,a,l)=>ht(n$,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,l)),S0=(t,s,a)=>s$(o$,t,s,a),pp="layout-inset",qT=t=>t.x,r$=(t,s)=>t.x+t.width/2-s.width/2,p4=(t,s)=>t.x+t.width-s.width,b4=t=>t.y,KT=(t,s)=>t.y+t.height-s.height,YT=(t,s)=>t.y+t.height/2-s.height/2,OC=(t,s,a)=>Ua(p4(t,s),KT(t,s),a.insetSouthwest(),Sy(),"southwest",Tc(t,{right:0,bottom:3}),pp),XT=(t,s,a)=>Ua(qT(t),KT(t,s),a.insetSoutheast(),Jb(),"southeast",Tc(t,{left:1,bottom:3}),pp),AC=(t,s,a)=>Ua(p4(t,s),b4(t),a.insetNorthwest(),Eh(),"northwest",Tc(t,{right:0,top:2}),pp),DC=(t,s,a)=>Ua(qT(t),b4(t),a.insetNortheast(),kh(),"northeast",Tc(t,{left:1,top:2}),pp),Hf=(t,s,a)=>Ua(r$(t,s),b4(t),a.insetNorth(),Ml(),"north",Tc(t,{top:2}),pp),RC=(t,s,a)=>Ua(r$(t,s),KT(t,s),a.insetSouth(),_h(),"south",Tc(t,{bottom:3}),pp),v4=(t,s,a)=>Ua(p4(t,s),YT(t,s),a.insetEast(),U2(),"east",Tc(t,{right:0}),pp),a$=(t,s,a)=>Ua(qT(t),YT(t,s),a.insetWest(),n1(),"west",Tc(t,{left:1}),pp),iH=t=>{switch(t){case"north":return Hf;case"northeast":return DC;case"northwest":return AC;case"south":return RC;case"southeast":return XT;case"southwest":return OC;case"east":return v4;case"west":return a$}},c$=(t,s,a,l,d)=>sS(l).map(iH).getOr(Hf)(t,s,a,l,d),uH=t=>{switch(t){case"north":return RC;case"northeast":return XT;case"northwest":return OC;case"south":return Hf;case"southeast":return DC;case"southwest":return AC;case"east":return a$;case"west":return v4}},dH=(t,s,a,l,d)=>sS(l).map(uH).getOr(Hf)(t,s,a,l,d),l$={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},mH=(t,s,a)=>{const d={maxHeightFunction:vg()},g=()=>({type:"node",root:rt($e(t())),node:O.from(t()),bubble:Mh(12,12,l$),layouts:{onRtl:()=>[DC],onLtr:()=>[AC]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:Mh(-12,12,l$),layouts:{onRtl:()=>[kc,Na,Ar],onLtr:()=>[Na,kc,Ar]},overrides:d});return()=>a()?g():p()},fH=(t,s,a)=>{const l=()=>({type:"node",root:rt($e(t())),node:O.from(t()),layouts:{onRtl:()=>[Hf],onLtr:()=>[Hf]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ar],onLtr:()=>[Ar]}});return()=>a()?l():d()},gH=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return O.some(f1.range(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset))}}),hH=t=>s=>({type:"node",root:t(),node:s}),pH=(t,s,a)=>{const l=np(t),d=()=>pe.fromDom(t.getBody()),g=()=>pe.fromDom(t.getContentAreaContainer()),p=()=>l||!a();return{inlineDialog:mH(g,s,p),banner:fH(g,s,p),cursor:gH(t,d),node:hH(d)}},i$=t=>(s,a)=>{iT(t)(s,a)},bH=t=>()=>QO(t),vH=t=>s=>c0(t,s),yH=t=>s=>JO(t,s),wH=t=>({colorPicker:i$(t),hasCustomColors:bH(t),getColors:vH(t),getColorCols:yH(t)}),CH=t=>()=>_R(t),SH=t=>({isDraggableModal:CH(t)}),u$=t=>{const s=S(Fx(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},d$=t=>ha(t,"items"),y4=t=>ha(t,"format"),m$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],f$=t=>so(t,"items"),g$=t=>so(t,"block"),h$=t=>so(t,"inline"),xH=t=>so(t,"selector"),w4=t=>In(t,(s,a)=>{if(f$(a)){const l=w4(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(h$(a)||g$(a)||xH(a)){const d=`custom-${_t(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),p$=(t,s)=>{const a=w4(s),l=d=>{gt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},b$=t=>pR(t).map(s=>{const a=p$(t,s);return bR(t)?m$.concat(a):a}).getOr(m$),v$=t=>{const s=Uo(t);return s.length===1&&po(s,"title")},y$=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),w$=(t,s,a,l)=>{const d=x=>y$(x,a,l),g=x=>{const _=y(x.items);return{...x,type:"submenu",getStyleItems:q(_)}},p=x=>{const _=_t(x.name)?x.name:nn(x.title),D=`custom-${_}`,B={...x,type:"formatter",format:D,isSelected:a(D),getStylePreview:l(D)};return t.formatter.register(_,B),B},y=x=>_e(x,_=>d$(_)?g(_):y4(_)?d(_):v$(_)?{..._,type:"separator"}:p(_));return y(s)},Zm=t=>{const s=y=>()=>t.formatter.match(y),a=y=>()=>{const x=t.formatter.get(y);return x!==void 0?O.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):O.none()},l=S([]),d=S([]),g=S(!1);return t.on("PreInit",y=>{const x=b$(t),_=w$(t,x,s,a);l.set(_)}),t.on("addStyleModifications",y=>{const x=w$(t,y.items,s,a);d.set(x),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:l.get(),x=d.get();return y.concat(x)}}},JT=t=>it(t)&&t.nodeType===1,QT=gp.trim,C$=t=>s=>!!(JT(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),C4=C$("true"),TH=C$("false"),ek=(t,s,a,l,d)=>({type:t,title:s,url:a,level:l,attach:d}),S$=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return C4(s)}return!1},S4=(t,s)=>_e(da(pe.fromDom(s),t),a=>a.dom),x$=t=>t.innerText||t.textContent,T$=t=>t.id?t.id:nn("h"),k$=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,x4=t=>k$(t)&&_$(t),E$=t=>t&&/^(H[1-6])$/.test(t.nodeName),_$=t=>S$(t)&&!TH(t),O$=t=>E$(t)&&_$(t),kH=t=>E$(t)?parseInt(t.nodeName.substr(1),10):0,EH=t=>{var s;const a=T$(t),l=()=>{t.id=a};return ek("header",(s=x$(t))!==null&&s!==void 0?s:"","#"+a,kH(t),l)},A$=t=>{const s=t.id||t.name,a=x$(t);return ek("anchor",a||"#"+s,"#"+s,0,G)},D$=t=>_e(Fn(t,O$),EH),_H=t=>_e(Fn(t,x4),A$),OH=t=>S4("h1,h2,h3,h4,h5,h6,a:not([href])",t),AH=t=>QT(t.title).length>0,R$={find:t=>{const s=OH(t);return Fn(D$(s).concat(_H(s)),AH)}},Ru="tinymce-url-history",tk=5,M$=t=>_t(t)&&/^https?/.test(t),DH=t=>vn(t)&&t.length<=tk&&Gs(t,M$),N$=t=>Zt(t)&&xs(t,s=>!DH(s)).isNone(),B$=()=>{const t=tb.getItem(Ru);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Ru+" was not valid JSON",a),{};throw a}return N$(s)?s:(console.log("Local storage "+Ru+" was not valid format",s),{})},RH=t=>{if(!N$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));tb.setItem(Ru,JSON.stringify(t))},$$=t=>{const s=B$();return ht(s,t).getOr([])},P$=(t,s)=>{if(!M$(t))return;const a=B$(),l=ht(a,s).getOr([]),d=Fn(l,g=>g!==t);a[s]=[t].concat(d).slice(0,tk),RH(a)},MH=t=>!!t,QW=t=>qt(gp.makeMap(t,/[, ]/),MH),Hc=t=>O.from(xR(t)),T4=t=>{const s=O.from(TR(t)).filter(MH).map(QW);return Hc(t).fold(Zn,a=>s.fold(jt,l=>Uo(l).length>0?l:!1))},NH=(t,s)=>{const a=T4(t);return Qt(a)?a?Hc(t):O.none():a[s]?Hc(t):O.none()},nk=(t,s)=>NH(t,s).map(a=>l=>vl.nu(d=>{const g=(y,x)=>{if(!_t(y))throw new Error("Expected value to be string");if(x!==void 0&&!Zt(x))throw new Error("Expected meta to be a object");d({value:y,meta:x})},p={filetype:s,fieldname:l.fieldname,...O.from(l.meta).getOr({})};a.call(t,g,l.value,p)})),I$=t=>O.from(t).filter(_t).getOrUndefined(),BH=t=>Gw(t)?O.some({targets:R$.find(t.getBody()),anchorTop:I$(kR(t)),anchorBottom:I$(ER(t))}):O.none(),$H=t=>O.from(lO(t)),PH=t=>({getHistory:$$,addToHistory:P$,getLinkInformation:()=>BH(t),getValidationHandler:()=>$H(t),getUrlPicker:s=>nk(t,s)}),IH=(t,s,a)=>{const l=S(!1),d=u$(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:ku.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=PH(s),y=Zm(s),x=wH(s),_=SH(s),D=()=>l.get(),B=ce=>l.set(ce),I={shared:{providers:g,anchors:pH(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:y,colorinput:x,dialog:_,isContextMenuOpen:D,setContextMenuState:B},V={...I,shared:{...I.shared,interpreter:ce=>S0(ce,{},V),getSink:t.popup}},X={...I,shared:{...I.shared,interpreter:ce=>S0(ce,{},X),getSink:t.dialog}};return{popup:V,dialog:X}},FH=(t,s,a)=>{const l=(st,Dt)=>{gt([s,...a],hn=>{hn.broadcastEvent(st,Dt)})},d=(st,Dt)=>{gt([s,...a],hn=>{hn.broadcastOn([st],Dt)})},g=st=>d(Bm(),{target:st.target}),p=Ql(),y=bl(p,"touchstart",g),x=bl(p,"touchmove",st=>l(Jk(),st)),_=bl(p,"touchend",st=>l(ry(),st)),D=bl(p,"mousedown",g),B=bl(p,"mouseup",st=>{st.raw.button===0&&d(ow(),{target:st.target})}),I=st=>d(Bm(),{target:pe.fromDom(st.target)}),V=st=>{st.button===0&&d(ow(),{target:pe.fromDom(st.target)})},X=()=>{gt(t.editorManager.get(),st=>{t!==st&&st.dispatch("DismissPopups",{relatedTarget:t})})},ce=st=>l(Hp(),lS(st)),Te=st=>{d(Vh(),{}),l(rg(),lS(st))},ye=$e(pe.fromDom(t.getElement())),he=Py(ye,"scroll",st=>{requestAnimationFrame(()=>{const Dt=t.getContainer();if(Dt!=null){const Ro=lC(t,s.element).map(pn=>[pn.element,...pn.others]).getOr([]);Xo(Ro,pn=>es(pn,st.target))&&(t.dispatch("ElementScroll",{target:st.target.dom}),l(r2(),st))}})}),Ue=()=>d(Vh(),{}),Ze=st=>{st.state&&d(Bm(),{target:pe.fromDom(t.getContainer())})},kt=st=>{d(Bm(),{target:pe.fromDom(st.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",I),t.on("tap",I),t.on("mouseup",V),t.on("mousedown",X),t.on("ScrollWindow",ce),t.on("ResizeWindow",Te),t.on("ResizeEditor",Ue),t.on("AfterProgressState",Ze),t.on("DismissPopups",kt)}),t.on("remove",()=>{t.off("click",I),t.off("tap",I),t.off("mouseup",V),t.off("mousedown",X),t.off("ScrollWindow",ce),t.off("ResizeWindow",Te),t.off("ResizeEditor",Ue),t.off("AfterProgressState",Ze),t.off("DismissPopups",kt),D.unbind(),y.unbind(),x.unbind(),_.unbind(),B.unbind(),he.unbind()}),t.on("detach",()=>{gt([s,...a],HS),gt([s,...a],st=>st.destroy())})},Oc=sx,Vf=c_,F$=q([xe("shell",!1),Je("makeItem"),xe("setupItem",G),Cu.field("listBehaviours",[zn])]),LH=Di({name:"items",overrides:()=>({behaviours:vt([zn.config({})])})}),L$=q([LH]),HH=q("CustomList"),H$=(t,s,a,l)=>{const d=(y,x)=>{p(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const D=zn.contents(_),B=x.length,I=B-D.length,V=I>0?Bo(I,()=>t.makeItem()):[],X=D.slice(B);gt(X,Te=>zn.remove(_,Te)),gt(V,Te=>zn.append(_,Te));const ce=zn.contents(_);gt(ce,(Te,ye)=>{t.setupItem(y,Te,x[ye],ye)})})},g=t.shell?{behaviours:[zn.config({})],components:[]}:{behaviours:[],components:s},p=y=>t.shell?O.some(y):zs(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:$a(t.listBehaviours,g.behaviours),apis:{setItems:d}}},V$=ma({name:HH(),configFields:F$(),partFields:L$(),factory:H$,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),x0=q([Je("dom"),xe("shell",!0),ic("toolbarBehaviours",[zn])]),eZ=q([Di({name:"groups",overrides:()=>({behaviours:vt([zn.config({})])})})]),tZ=(t,s,a,l)=>{const d=(y,x)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{zn.set(_,x)})},g=y=>t.shell?O.some(y):zs(y,t,"groups"),p=t.shell?{behaviours:[zn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:$a(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},jm=ma({name:"Toolbar",configFields:x0(),partFields:eZ(),factory:tZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),zH=G,UH=Zn,E4=q([]);var _4=Object.freeze({__proto__:null,setup:zH,isDocked:UH,getBehaviours:E4});const O4=t=>(ar(Ys(t,"position"),"fixed")?O.none():Sl(t)).orThunk(()=>{const l=pe.fromTag("span");return ra(t).bind(d=>{ll(d,l);const g=Sl(l);return Ll(l),g})}),z$=t=>O4(t).map(ws).getOrThunk(()=>vo(0,0)),U$=(t,s)=>{const a=t.element;Ma(a,s.transitionClass),Qs(a,s.fadeOutClass),Ma(a,s.fadeInClass),s.onShow(t)},WH=(t,s)=>{const a=t.element;Ma(a,s.transitionClass),Qs(a,s.fadeInClass),Ma(a,s.fadeOutClass),s.onHide(t)},ZH=(t,s)=>t.y<s.bottom&&t.bottom>s.y,W$=(t,s)=>t.y>=s.y,Z$=(t,s)=>t.bottom<=s.bottom,MC=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),ok=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),A4=t=>t.box.x-t.win.x,jH=(t,s,a)=>{const l=s.win,d=s.box,g=A4(s);return Jo(t,p=>{switch(p){case"bottom":return Z$(d,a.bounds)?O.none():O.some(ok(l,g,a));case"top":return W$(d,a.bounds)?O.none():O.some(MC(l,g,a));default:return O.none()}}).getOr({location:"no-dock"})},GH=(t,s,a)=>Gs(t,l=>{switch(l){case"bottom":return Z$(s,a.bounds);case"top":return W$(s,a.bounds)}}),qH=(t,s)=>{const a=s.optScrollEnv.fold(q(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return vo(t.bounds.x,a)},j$=(t,s)=>{const a=s.optScrollEnv.fold(q(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return vo(t.x,a)},D4=(t,s,a)=>a.getInitialPos().map(l=>{const d=qH(l,s);return{box:Zs(d.left,d.top,ca(t),Le(t)),location:l.location}}),NC=(t,s,a,l,d)=>{const g=j$(s,a),p=Zs(g.left,g.top,s.width,s.height);l.setInitialPos({style:qr(t),position:Qe(t,"position")||"static",bounds:p,location:d.location})},KH=(t,s,a,l,d)=>{l.getInitialPos().fold(()=>NC(t,s,a,l,d),()=>G)},BC=(t,s,a)=>a.getInitialPos().bind(l=>{var d;switch(a.clearInitialPos(),l.position){case"static":return O.some({morph:"static"});case"absolute":const g=O4(t).getOr(Ws()),p=E(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return O.some({morph:"absolute",positionCss:vu("absolute",ht(l.style,"left").map(x=>s.x-p.x),ht(l.style,"top").map(x=>s.y-p.y+y),ht(l.style,"right").map(x=>p.right-s.right),ht(l.style,"bottom").map(x=>p.bottom-s.bottom))});default:return O.none()}}),YH=(t,s,a)=>D4(t,s,a).filter(({box:l})=>GH(a.getModes(),l,s)).bind(({box:l})=>BC(t,l,a)),$C=t=>{switch(t.location){case"top":return O.some({morph:"fixed",positionCss:vu("fixed",O.some(t.leftX),O.some(t.topY),O.none(),O.none())});case"bottom":return O.some({morph:"fixed",positionCss:vu("fixed",O.some(t.leftX),O.none(),O.none(),O.some(t.bottomY))});default:return O.none()}},PC=(t,s,a)=>{const l=E(t),d=de(),g=jH(a.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(NC(t,l,s,a,g),$C(g)):O.none()},G$=(t,s,a)=>YH(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>D4(t,s,a)).bind(({box:l,location:d})=>{const g=de(),p=A4({win:g,box:l}),y=d==="top"?MC(g,p,s):ok(g,p,s);return $C(y)})),XH=(t,s,a)=>{const l=t.element;return ar(Ys(l,"position"),"fixed")?G$(l,s,a):PC(l,s,a)},q$=(t,s,a)=>{const l=t.element;return D4(l,s,a).bind(({box:d})=>BC(l,d,a))},K$=(t,s,a,l)=>{const d=E(t),g=de(),p=A4({win:g,box:d}),y=l(g,p,s);return y.location==="bottom"||y.location==="top"?(KH(t,d,s,a,y),$C(y)):O.none()},R4=(t,s,a)=>{a.setDocked(!1),gt(["left","right","top","bottom","position"],l=>mo(t.element,l)),s.onUndocked(t)},M4=(t,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),By(t.element,l),(d?s.onDocked:s.onUndocked)(t)},sk=(t,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const y=ZH(p,l.bounds);y!==a.isVisible()&&(a.setVisible(y),d&&!y?(hu(t.element,[g.fadeOutClass]),g.onHide(t)):(y?U$:WH)(t,g))})})},IC=(t,s,a,l,d)=>{sk(t,s,a,l,!0),M4(t,s,a,d.positionCss)},JH=(t,s,a,l,d)=>{switch(d.morph){case"static":return R4(t,s,a);case"absolute":return M4(t,s,a,d.positionCss);case"fixed":return IC(t,s,a,l,d)}},QH=(t,s,a)=>{const l=s.lazyViewport(t);sk(t,s,a,l),XH(t,l,a).each(d=>{JH(t,s,a,l,d)})},T0=(t,s,a)=>{const l=t.element;a.setDocked(!1);const d=s.lazyViewport(t);q$(t,d,a).each(g=>{switch(g.morph){case"static":{R4(t,s,a);break}case"absolute":{M4(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Jc(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),FC(t,s,a)},FC=(t,s,a)=>{t.getSystem().isConnected()&&QH(t,s,a)},Y$=(t,s,a)=>{a.isDocked()&&T0(t,s,a)},N4=t=>(s,a,l)=>{const d=a.lazyViewport(s);K$(s.element,d,l,t).each(p=>{IC(s,a,l,d,p)})},B4=N4(MC),$4=N4(ok);var P4=Object.freeze({__proto__:null,refresh:FC,reset:Y$,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:B4,forceDockToBottom:$4}),eV=Object.freeze({__proto__:null,events:(t,s)=>Js([yh(gh(),(a,l)=>{t.contextual.each(d=>{Xc(a.element,d.transitionClass)&&(Jc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),et(Hp(),(a,l)=>{FC(a,t,s)}),et(r2(),(a,l)=>{FC(a,t,s)}),et(rg(),(a,l)=>{Y$(a,t,s)})])}),tV=[za("contextual",[Qr("fadeInClass"),Qr("fadeOutClass"),Qr("transitionClass"),Ti("lazyContext"),Ao("onShow"),Ao("onShown"),Ao("onHide"),Ao("onHidden")]),Ca("lazyViewport",()=>({bounds:de(),optScrollEnv:O.none()})),uh("modes",["top","bottom"],Va),Ao("onDocked"),Ao("onUndocked")],nV=Object.freeze({__proto__:null,init:t=>{const s=S(!1),a=S(!0),l=Cs(),d=S(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return rc({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ga=Ec({fields:tV,name:"docking",active:eV,apis:P4,state:nV}),I4=q(nn("toolbar-height-change")),Gm={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},X$="tox-tinymce--toolbar-sticky-on",k0="tox-tinymce--toolbar-sticky-off",oV=(t,s)=>{const a=va(s),d=ec(s).dom.innerHeight,g=Bc(a),p=pe.fromDom(t.elm),y=M(p),x=Le(p),_=y.y,D=_+x,B=ws(s),I=Le(s),V=B.top,X=V+I,ce=Math.abs(V-g.top)<2,Te=Math.abs(X-(g.top+d))<2;if(ce&&_<X)nf(g.left,_-I,a);else if(Te&&D>V){const ye=_-d+x+I;nf(g.left,ye,a)}},F4=(t,s)=>po(Ga.getModes(t),s),LC=t=>{const s=l=>tn(l)+(parseInt(Qe(l,"margin-top"),10)||0)+(parseInt(Qe(l,"margin-bottom"),10)||0),a=t.element;bc(a).each(l=>{const d="padding-"+Ga.getModes(t)[0];if(Ga.isDocked(t)){const g=ca(l);Kt(a,"width",g+"px"),Kt(l,d,s(a)+"px")}else mo(a,"width"),mo(l,d)})},L4=(t,s)=>{s?(Qs(t,Gm.fadeOutClass),hu(t,[Gm.transitionClass,Gm.fadeInClass])):(Qs(t,Gm.fadeInClass),hu(t,[Gm.fadeOutClass,Gm.transitionClass]))},J$=(t,s)=>{const a=pe.fromDom(t.getContainer());s?(Ma(a,X$),Qs(a,k0)):(Ma(a,k0),Qs(a,X$))},sV=(t,s)=>{const a=va(s);Gd(a).filter(l=>!es(s,l)).filter(l=>es(l,pe.fromDom(a.dom.body))||sa(t,l)).each(()=>pu(s))},rV=(t,s)=>bu(t).orThunk(()=>s().toOptional().bind(a=>bu(a.element))),aV=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Ga.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(LC)}),t.on("SkinLoaded",()=>{a().each(l=>{Ga.isDocked(l)?Ga.reset(l):Ga.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Ga.reset)})),t.on("AfterScrollIntoView",l=>{a().each(d=>{Ga.refresh(d);const g=d.element;ta(g)&&oV(l,g)})}),t.on("PostRender",()=>{J$(t,!1)})},cV=t=>t().map(Ga.isDocked).getOr(!1),lV=()=>[ua.config({channels:{[I4()]:{onReceive:LC}}})],Q$=(t,s)=>{const a=Cs(),l=s.getSink,d=y=>{l().each(x=>y(x.element))},g=y=>{t.inline||LC(y),J$(t,Ga.isDocked(y)),y.getSystem().broadcastOn([Vh()],{}),l().each(x=>x.getSystem().broadcastOn([Vh()],{}))},p=t.inline?[]:lV();return[$n.config({}),Ga.config({contextual:{lazyContext:y=>{const x=tn(y.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return O.from(_).map(D=>{const B=E(pe.fromDom(D));return lC(t,y.element).fold(()=>{const V=B.height-x,X=B.y+(F4(y,"top")?0:x);return Zs(B.x,X,B.width,V)},V=>{const X=z(B,yT(V));return Zs(X.x,X.y,X.width,X.height-x)})})},onShow:()=>{d(y=>L4(y,!0))},onShown:y=>{d(x=>Jc(x,[Gm.transitionClass,Gm.fadeInClass])),a.get().each(x=>{sV(y.element,x),a.clear()})},onHide:y=>{rV(y.element,l).fold(a.clear,a.set),d(x=>L4(x,!1))},onHidden:()=>{d(y=>Jc(y,[Gm.transitionClass]))},...Gm},lazyViewport:y=>lC(t,y.element).fold(()=>{const _=de(),D=CR(t),B=_.y+(F4(y,"top")?D:0),I=_.height-(F4(y,"bottom")?D:0);return{bounds:Zs(_.x,B,_.width,I),optScrollEnv:O.none()}},_=>({bounds:yT(_),optScrollEnv:O.some({currentScrollTop:_.element.dom.scrollTop,scrollElmTop:ws(_.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var iV=Object.freeze({__proto__:null,setup:aV,isDocked:cV,getBehaviours:Q$});const uV=t=>{const s=t.editor,a=t.sticky?Q$:E4;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:vt(a(s,t.sharedBackstage))}},eP=ze([xa,ml("items",ei([$p([op,Ol("items",Va)]),Va]))].concat(Qw)),H4=t=>oo("GroupToolbarButton",eP,t),V4=[ea("text"),ea("tooltip"),ea("icon"),Ic("search",!1,ei([bm,ze([ea("placeholder")])],t=>Qt(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),Ti("fetch"),Ca("onSetup",()=>G)],tP=ze([xa,...V4]),nP=t=>oo("menubutton",tP,t),dV=ze([xa,Jx,Qd,ap,JR,eL,rp,ni("presets","normal",["normal","color","listpreview"]),o0(1),sp,tL]),mV=t=>oo("SplitButton",dV,t);var E0=Kr({factory:(t,s)=>{const a=(d,g)=>{const p=_e(g,y=>{const x={type:"menubutton",text:y.text,fetch:D=>{D(y.getItems())}},_=nP(x).mapError(D=>_l(D)).getOrDie();return xC(_,"tox-mbtn",s.backstage,O.some("menuitem"))});zn.set(d,p)},l={focus:Cn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:vt([zn.config({}),ro("menubar-events",[Fr(d=>{t.onSetup(d)}),et(ki(),(d,g)=>{_r(d.element,".tox-mbtn--active").each(p=>{Yu(g.event.target,".tox-mbtn").each(y=>{es(p,y)||d.getSystem().getByDom(p).each(x=>{d.getSystem().getByDom(y).each(_=>{Ou.expand(_),Ou.close(x),$n.focus(_)})})})})}),et(ff(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{Ou.isOpen(p)&&(Ou.expand(y),Ou.close(p))})})})]),Cn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),O.some(!0))}),Yr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Je("dom"),Je("uid"),Je("onEscape"),Je("backstage"),xe("onSetup",G)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const z4="â¡ï¸Upgrade",fV="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",gV=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:fV,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:z4}}]}),oP="container",hV=[ic("slotBehaviours",[])],U4=t=>"<alloy.field."+t+">",sP=t=>{const s=(()=>{const g=[];return{slot:(y,x)=>(g.push(y),bw(oP,U4(y),x)),record:q(g)}})(),a=t(s),l=s.record(),d=_e(l,g=>uc({name:g,pname:U4(g)}));return Sw(oP,hV,d,pV,a)},pV=(t,s)=>{const a=ce=>nx(t),l=(ce,Te)=>zs(ce,t,Te),d=(ce,Te)=>(ye,he)=>zs(ye,t,he).map(Ue=>ce(Ue,he)).getOr(Te),g=ce=>(Te,ye)=>{gt(ye,he=>ce(Te,he))},p=(ce,Te)=>jr(ce.element,"aria-hidden")!=="true",y=(ce,Te)=>{if(!p(ce)){const ye=ce.element;mo(ye,"display"),ne(ye,"aria-hidden"),xn(ce,ay(),{name:Te,visible:!0})}},x=(ce,Te)=>{if(p(ce)){const ye=ce.element;Kt(ye,"display","none"),Vn(ye,"aria-hidden","true"),xn(ce,ay(),{name:Te,visible:!1})}},_=d(p,!1),D=d(x),B=g(D),I=ce=>B(ce,a()),V=d(y),X={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:D,hideAllSlots:I,showSlot:V};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ki(t.slotBehaviours),apis:X}},Vc={...qt({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>hf(t)),sketch:sP},ak=ze([Qd,Jx,Ca("onShow",G),Ca("onHide",G),rp]),bV=t=>oo("sidebar",ak,t),vV=t=>{const{sidebars:s}=t.ui.registry.getAll();gt(Uo(s),a=>{const l=s[a],d=()=>ar(O.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},yV=t=>({element:()=>t.element.dom}),wV=(t,s)=>{const a=_e(Uo(s),l=>{const d=s[l],g=Vl(bV(d));return{name:l,getApi:yV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return _e(a,l=>{const d=S(G);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:cp.unnamedEvents([Y1(l,d),X1(l,d),et(ay(),(g,p)=>{const y=p.event;Tt(a,_=>_.name===y.name).each(_=>{(y.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},W4=t=>Vc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:wV(s,t),slotBehaviours:cp.unnamedEvents([Fr(a=>Vc.hideAllSlots(a))])})),Z4=(t,s,a)=>{So.getCurrent(t).each(d=>{zn.set(d,[W4(s)]);const g=a==null?void 0:a.toLowerCase();_t(g)&&so(s,g)&&So.getCurrent(d).each(p=>{Vc.showSlot(p,g),nu.immediateGrow(d),mo(d.element,"width"),_0(t.element,"region")})})},_0=(t,s)=>{Vn(t,"role",s)},CV=(t,s)=>{So.getCurrent(t).each(l=>{So.getCurrent(l).each(g=>{nu.hasGrown(l)?Vc.isShowing(g,s)?(nu.shrink(l),_0(t.element,"presentation")):(Vc.hideAllSlots(g),Vc.showSlot(g,s),_0(t.element,"region")):(Vc.hideAllSlots(g),Vc.showSlot(g,s),nu.grow(l),_0(t.element,"region"))})})},j4=t=>So.getCurrent(t).bind(a=>nu.isGrowing(a)||nu.hasGrown(a)?So.getCurrent(a).bind(g=>Tt(Vc.getSlotNames(g),p=>Vc.isShowing(g,p))):O.none()),G4=nn("FixSizeEvent"),q4=nn("AutoSizeEvent"),SV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:vt([Yr.config({}),$n.config({}),nu.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{So.getCurrent(s).each(Vc.hideAllSlots),Go(s,q4)},onGrown:s=>{Go(s,q4)},onStartGrow:s=>{xn(s,G4,{width:Ys(s.element,"width").getOr("")})},onStartShrink:s=>{xn(s,G4,{width:ca(s.element)+"px"})}}),zn.config({}),So.config({find:s=>{const a=zn.contents(s);return Ms(a)}})])}],behaviours:vt([tu.childAt(0),ro("sidebar-sliding-events",[et(G4,(s,a)=>{Kt(s.element,"width",a.event.width)}),et(q4,(s,a)=>{mo(s.element,"width")})])])});var xV=Object.freeze({__proto__:null,block:(t,s,a,l)=>{Vn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=vt([Cn.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),$n.config({})]),p=l(d,g),y=d.getSystem().build(p);zn.append(d,zl(y)),y.hasConfigured(Cn)&&s.focus&&Cn.focusIn(y),a.isBlocked()||s.onBlock(t),a.blockWith(()=>zn.remove(d,y))},unblock:(t,s,a)=>{ne(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),TV=[Ca("getRoot",O.none),Fc("focus",!0),Ao("onBlock"),Ao("onUnblock")],iZ=Object.freeze({__proto__:null,init:()=>{const t=Dh(),s=a=>{t.set({destroy:a})};return rc({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const zf=Ec({fields:TV,name:"blocking",apis:xV,state:iZ}),kV=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return In(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},rP=t=>Array.prototype.slice.call(t.dom.classList,0),bp=t=>{const s=pe.fromHtml(t),a=ya(s),l=kV(s),d=rP(s),g=a.length===0?{}:{innerHtml:Lb(s)};return{tag:Qa(s),classes:d,attributes:l,...g}},EV=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:bp('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),aP=t=>So.getCurrent(t).each(s=>pu(s.element)),_V=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;O.from(t.iframeElement).map(pe.fromDom).each(d=>{s?($(d,a).each(g=>Vn(d,l,g)),Vn(d,a,-1)):(ne(d,a),$(d,l).each(g=>{Vn(d,a,g),ne(d,l)}))})},OV=(t,s,a,l)=>{const d=s.element;if(_V(t,a),a)zf.block(s,EV(l)),mo(d,"display"),ne(d,"aria-hidden"),t.hasFocus()&&aP(s);else{const g=So.getCurrent(s).exists(p=>r1(p.element));zf.unblock(s),Kt(d,"display","none"),Vn(d,"aria-hidden","true"),g&&t.focus()}},cP=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:vt([zn.config({}),zf.config({focus:!1}),So.config({find:s=>Ms(s.components())})]),components:[]}),AV=t=>t.type==="focusin",DV=t=>AV(t)?(t.composed?Ms(t.composedPath()):O.from(t.target)).map(pe.fromDom).filter(Lo).exists(a=>Xc(a,"mce-pastebin")):!1,RV=(t,s,a)=>{const l=S(!1),d=Cs(),g=y=>{l.get()&&!DV(y)&&(y.preventDefault(),aP(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const p=y=>{y!==l.get()&&(l.set(y),OV(t,s(),y,a.providers),lT(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),Sn(y.time)){const x=Tx.setEditorTimeout(t,()=>p(y.state),y.time);d.set(x)}else p(y.state),d.clear()})},uZ=(t,s)=>In(t,(d,g)=>s(g,d.len).fold(q(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,lP=(t,s,a)=>({within:t,extra:s,withinWidth:a}),K4=(t,s,a)=>{const l=uZ(t,(y,x)=>{const _=a(y);return O.some({element:y,start:x,finish:x+_,width:_})}),d=Fn(l,y=>y.finish<=s),g=ms(d,(y,x)=>y+x.width,0),p=l.slice(d.length);return{within:d,extra:p,withinWidth:g}},HC=t=>_e(t,s=>s.element),MV=(t,s,a)=>{const l=HC(t.concat(s));return lP(l,[],a)},NV=(t,s,a,l)=>{const d=HC(t).concat([a]);return lP(d,HC(s),l)},fd=(t,s,a)=>lP(HC(t),[],a),BV=(t,s,a)=>{const l=K4(s,t,a);return l.extra.length===0?O.some(l):O.none()},iP=(t,s,a,l)=>{const d=BV(t,s,a).getOrThunk(()=>K4(s,t-a(l),a)),g=d.within,p=d.extra,y=d.withinWidth;return p.length===1&&p[0].width<=a(l)?MV(g,p,y):p.length>=1?NV(g,p,l,y):fd(g,p,y)},Y4=(t,s)=>{const a=_e(s,l=>zl(l));jm.setGroups(t,a)},$V=t=>Jo(t,s=>bu(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),O0=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=nd(t,s,"primary"),g=na.getCoupled(t,"overflowGroup");Kt(d.element,"visibility","hidden");const p=l.concat([g]),y=$V(p);a([]),Y4(d,p);const x=ca(d.element),_=iP(x,s.builtGroups.get(),D=>ca(D.element),g);_.extra.length===0?(zn.remove(d,g),a([])):(Y4(d,_.within),a(_.extra)),mo(d.element,"visibility"),Y(d.element),y.each($n.focus)},uP=q([ic("splitToolbarBehaviours",[na]),Pc("builtGroups",()=>S([]))]),lk=q([mg(["overflowToggledClass"]),vm("getOverflowBounds"),Je("lazySink"),Pc("overflowGroups",()=>S([])),Ao("onOpened"),Ao("onClosed")].concat(uP())),PV=q([uc({factory:jm,schema:x0(),name:"primary"}),Su({schema:x0(),name:"overflow"}),Su({name:"overflow-button"}),Su({name:"overflow-group"})]),A0=q((t,s)=>{Pl(t,Math.floor(s))}),IV=q([mg(["toggledClass"]),Je("lazySink"),Ti("fetch"),vm("getBounds"),za("fireDismissalEventInstead",[xe("event",xm())]),Ju(),Ao("onToggled")]),sm=q([Su({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:vt([go.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Su({factory:jm,schema:x0(),name:"toolbar",overrides:t=>({toolbarBehaviours:vt([Cn.config({mode:"cyclic",onEscape:s=>(zs(s,t,"button").each($n.focus),O.none())})])})})]),ik=Cs(),uk=(t,s)=>{ik.set(!0),dk(t,s),ik.clear()},dk=(t,s)=>{const a=na.getCoupled(t,"toolbarSandbox");Po.isOpen(a)?Po.close(a):Po.open(a,s.toolbar())},X4=(t,s,a,l)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();Ba.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:A0()}}},d)},dP=(t,s,a,l,d)=>{jm.setGroups(s,d),X4(t,s,a,l),go.on(t)},FV=(t,s,a)=>{const l=py(),d=(p,y)=>{const x=ik.get().getOr(!1);a.fetch().get(_=>{dP(t,y,a,s.layouts,_),l.link(t.element),x||Cn.focusIn(y)})},g=()=>{go.off(t),ik.get().getOr(!1)||$n.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:vt([Cn.config({mode:"special",onEscape:p=>(Po.close(p),O.some(!0))}),Po.config({onOpen:d,onClose:g,isPartOf:(p,y,x)=>wf(y,x)||wf(t,x),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ua.config({channels:{...$m({isExtraPart:Zn,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...sw({doReposition:()=>{Po.getState(na.getCoupled(t,"toolbarSandbox")).each(p=>{X4(t,p,a,s.layouts)})}})}})])}},vp=ma({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...Dr.sketch({...l.button(),action:d=>{dk(d,l)},buttonBehaviours:Cu.augment({dump:l.button().buttonBehaviours},[na.config({others:{toolbarSandbox:d=>FV(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Po.getState(na.getCoupled(d,"toolbarSandbox")).each(p=>{dP(d,p,t,a.layouts,g)})},reposition:d=>{Po.getState(na.getCoupled(d,"toolbarSandbox")).each(g=>{X4(d,g,t,a.layouts)})},toggle:d=>{dk(d,l)},toggleWithoutFocusing:d=>{uk(d,l)},getToolbar:d=>Po.getState(na.getCoupled(d,"toolbarSandbox")),isOpen:d=>Po.isOpen(na.getCoupled(d,"toolbarSandbox"))}}),configFields:IV(),partFields:sm(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),LV=q([Je("items"),mg(["itemSelector"]),ic("tgroupBehaviours",[Cn])]),HV=q([Af({name:"items",unit:"item"})]),mP=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:$a(t.tgroupBehaviours,[Cn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),VC=ma({name:"ToolbarGroup",configFields:LV(),partFields:HV(),factory:mP}),J4=t=>_e(t,s=>zl(s)),fP=(t,s,a)=>{O0(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(d=>{vp.setGroups(d,J4(l))})})},gP=(t,s,a,l)=>{const d=bs(vp.sketch({fetch:()=>vl.nu(g=>{g(J4(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Na,kc],onRtl:()=>[kc,Na],onBottomLtr:()=>[Or,li],onBottomRtl:()=>[li,Or]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:$a(t.splitToolbarBehaviours,[na.config({others:{overflowGroup:()=>VC.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(_e(p,g.getSystem().build)),fP(g,d,t)},refresh:g=>fP(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{vp.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(vp.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(vp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{vp.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(vp.getToolbar)},domModification:{attributes:{role:"group"}}}},hP=ma({name:"SplitFloatingToolbar",configFields:lk(),partFields:PV(),factory:gP,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),VV=q([mg(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ao("onOpened"),Ao("onClosed")].concat(uP())),zV=q([uc({factory:jm,schema:x0(),name:"primary"}),uc({factory:jm,schema:x0(),name:"overflow",overrides:t=>({toolbarBehaviours:vt([nu.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{zs(s,t,"overflow-button").each(a=>{go.off(a),$n.focus(a)}),t.onClosed(s)},onGrown:s=>{Cn.focusIn(s),t.onOpened(s)},onStartGrow:s=>{zs(s,t,"overflow-button").each(go.on)}}),Cn.config({mode:"acyclic",onEscape:s=>(zs(s,t,"overflow-button").each($n.focus),O.some(!0))})])})}),Su({name:"overflow-button",overrides:t=>({buttonBehaviours:vt([go.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Su({name:"overflow-group"})]),UV=(t,s)=>zs(t,s,"overflow").map(nu.hasGrown).getOr(!1),pP=(t,s)=>{zs(t,s,"overflow-button").bind(()=>zs(t,s,"overflow")).each(a=>{Q4(t,s),nu.toggleGrow(a)})},Q4=(t,s)=>{zs(t,s,"overflow").each(a=>{O0(t,s,l=>{const d=_e(l,g=>zl(g));jm.setGroups(a,d)}),zs(t,s,"overflow-button").each(l=>{nu.hasGrown(a)&&go.on(l)}),nu.refresh(a)})},WV=(t,s,a,l)=>{const d="alloy.toolbar.toggle",g=(p,y)=>{const x=_e(y,p.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:s,behaviours:$a(t.splitToolbarBehaviours,[na.config({others:{overflowGroup:p=>VC.sketch({...l["overflow-group"](),items:[Dr.sketch({...l["overflow-button"](),action:y=>{Go(p,d)}})]})}}),ro("toolbar-toggle-events",[et(d,p=>{pP(p,t)})])]),apis:{setGroups:(p,y)=>{g(p,y),Q4(p,t)},refresh:p=>Q4(p,t),toggle:p=>pP(p,t),isOpen:p=>UV(p,t)},domModification:{attributes:{role:"group"}}}},eD=ma({name:"SplitSlidingToolbar",configFields:VV(),partFields:zV(),factory:WV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),bP=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[VC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:vt([Yr.config({}),$n.config({})])}},mk=t=>VC.sketch(bP(t)),vP=(t,s)=>{const a=Fr(l=>{const d=_e(t.initGroups,mk);jm.setGroups(l,d)});return vt([_u.toolbarButton(t.providers.isDisabled),mc(),Cn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),ro("toolbar-events",[a])])},yP=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":bP({title:O.none(),items:[]}),"overflow-button":UB({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("More..."),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:vP(t,s)}},ZV=t=>{const s=yP(t),a=4,l=hP.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return hP.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=M(d),p=Yl(d),y=M(p),x=Math.max(p.dom.scrollHeight,y.height);return Zs(g.x+a,y.y,g.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},wP=t=>{const s=eD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=eD.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=yP(t);return eD.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([I4()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([I4()],{type:"closed"}),t.onToggled(d,!1)}})},ib=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return jm.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Eu.scrolling?["tox-toolbar--scrolling"]:[])},components:[jm.parts.groups({})],toolbarBehaviours:vP(t,s)})},fk=[ap,Qd,ea("tooltip"),ni("buttonType","secondary",["primary","secondary"]),Fc("borderless",!1),Ti("onAction")],jV=[...fk,Hg,du("type",["button"])],GV=[...fk,Fc("active",!1),du("type",["togglebutton"])],tD={button:jV,togglebutton:GV},qV=[du("type",["group"]),uh("buttons",[],dl("type",tD))],KV=dl("type",{...tD,group:qV}),YV=ze([uh("buttons",[],KV),Ti("onShow"),Ti("onHide")]),CP=t=>oo("view",YV,t),XV=(t,s)=>{var a,l;const d=t.type==="togglebutton",g=t.icon.map(Ue=>Zg(Ue,s.icons)).map(bs),y=(()=>Ue=>{const Ze=Dt=>{g.map(hn=>hn.getOpt(Ue).each(Ro=>{zn.set(Ro,[Zg(Dt,s.icons)])}))},kt=Dt=>{const hn=Ue.element;Dt?(Ma(hn,"tox-button--enabled"),Vn(hn,"aria-pressed",!0)):(Qs(hn,"tox-button--enabled"),ne(hn,"aria-pressed"))},st=()=>Xc(Ue.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Ze,setActive:kt,isActive:st});if(t.type==="button")return t.onAction({setIcon:Ze})})(),x={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},_=m4((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),D=d?t.text.map(s.translate):O.some(s.translate(t.text)),B=D.map(Er),I=x.tooltip.or(D).map(Ue=>({"aria-label":s.translate(Ue),title:s.translate(Ue)})).getOr({}),V=g.map(Ue=>Ue.asSpec()),X=a0([V,B]),ce=t.icon.isSome()&&B.isSome(),Te={tag:"button",classes:_.concat(...t.icon.isSome()&&!ce?["tox-button--icon"]:[]).concat(...ce?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},ye=[],he=WT(x,O.some(y),ye,Te,X,s);return Dr.sketch(he)},SP=(t,s)=>XV(t,s),nD=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:_e(t.buttons,a=>SP(a,s))}),xP=Cc().deviceType,JV=xP.isPhone(),TP=xP.isTablet(),QV=t=>{let s=!1;const a=_e(t.buttons,l=>l.type==="group"?(s=!0,nD(l,t.providers)):SP(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...JV||TP?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:vt([$n.config({}),Cn.config({mode:"flow",selector:"button, .tox-button",focusInside:Yh.OnEnterOrSpaceMode})]),components:s?a:[zm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),zm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},kP=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),ez=(t,s,a,l)=>{const d={getPane:g=>Oc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var ub=ma({name:"silver.View",configFields:[Je("viewConfig")],partFields:[Di({factory:{sketch:QV},schema:[Je("buttons"),Je("providers")],name:"header"}),Di({factory:{sketch:kP},schema:[],name:"pane"})],factory:ez,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const tz=(t,s,a)=>rr(s,(l,d)=>{const g=Vl(CP(l));return t.slot(d,ub.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[ub.parts.header({buttons:g.buttons,providers:a})]:[],ub.parts.pane({})]}))}),nz=(t,s)=>Vc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:tz(a,t,s),slotBehaviours:cp.unnamedEvents([Fr(l=>Vc.hideAllSlots(l))])})),EP=t=>Tt(Vc.getSlotNames(t),s=>Vc.isShowing(t,s)),_P=t=>{const s=t.element;Kt(s,"display","none"),Vn(s,"aria-hidden","true")},oz=t=>{const s=t.element;mo(s,"display"),ne(s,"aria-hidden")},sz=t=>({getContainer:q(t)}),OP=(t,s,a)=>{Vc.getSlot(t,s).each(l=>{ub.getPane(l).each(d=>{a(l)(sz(d.element.dom))})})},oD=(t,s)=>OP(t,s,ub.getOnShow),sD=(t,s)=>OP(t,s,ub.getOnHide);var gk=Kr({factory:(t,s)=>{const g={setViews:(p,y)=>{zn.set(p,[nz(y,s.backstage.shared.providers)])},whichView:p=>So.getCurrent(p).bind(EP),toggleView:(p,y,x,_)=>So.getCurrent(p).exists(D=>{const B=EP(D),I=B.exists(X=>_===X),V=Vc.getSlot(D,_).isSome();return V&&(Vc.hideAllSlots(D),I?(_P(p),y()):(x(),oz(p),Vc.showSlot(D,_),oD(D,_)),B.each(X=>sD(D,X))),V})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:vt([zn.config({}),So.config({find:p=>{const y=zn.contents(p);return Ms(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Je("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,d)=>t.toggleView(s,a,l,d),whichView:(t,s)=>t.whichView(s)}});const rz=(t,s,a)=>{let l=!1;const d={getSocket:g=>Oc.getPart(g,t,"socket"),setSidebar:(g,p,y)=>{Oc.getPart(g,t,"sidebar").each(x=>Z4(x,p,y))},toggleSidebar:(g,p)=>{Oc.getPart(g,t,"sidebar").each(y=>CV(y,p))},whichSidebar:g=>Oc.getPart(g,t,"sidebar").bind(j4).getOrNull(),getHeader:g=>Oc.getPart(g,t,"header"),getToolbar:g=>Oc.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{Oc.getPart(g,t,"toolbar").each(y=>{const x=_e(p,mk);y.getApis().setGroups(y,x)})},setToolbars:(g,p)=>{Oc.getPart(g,t,"multiple-toolbar").each(y=>{const x=_e(p,_=>_e(_,mk));V$.setItems(y,x)})},refreshToolbar:g=>{Oc.getPart(g,t,"toolbar").each(y=>y.getApis().refresh(y))},toggleToolbarDrawer:g=>{Oc.getPart(g,t,"toolbar").each(p=>{Wo(p.getApis().toggle,y=>y(p))})},toggleToolbarDrawerWithoutFocusing:g=>{Oc.getPart(g,t,"toolbar").each(p=>{Wo(p.getApis().toggleWithoutFocusing,y=>y(p))})},isToolbarDrawerToggled:g=>Oc.getPart(g,t,"toolbar").bind(p=>O.from(p.getApis().isOpen).map(y=>y(p))).getOr(!1),getThrobber:g=>Oc.getPart(g,t,"throbber"),focusToolbar:g=>{Oc.getPart(g,t,"toolbar").orThunk(()=>Oc.getPart(g,t,"multiple-toolbar")).each(y=>{Cn.focusIn(y)})},setMenubar:(g,p)=>{Oc.getPart(g,t,"menubar").each(y=>{E0.setMenus(y,p)})},focusMenubar:g=>{Oc.getPart(g,t,"menubar").each(p=>{E0.focus(p)})},setViews:(g,p)=>{Oc.getPart(g,t,"viewWrapper").each(y=>{gk.setViews(y,p)})},toggleView:(g,p)=>Oc.getPart(g,t,"viewWrapper").exists(y=>gk.toggleView(y,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>Oc.getPart(g,t,"viewWrapper").bind(gk.whichView).getOrNull(),hideMainView:g=>{l=d.isToolbarDrawerToggled(g),l&&d.toggleToolbarDrawer(g),Oc.getPart(g,t,"editorContainer").each(p=>{const y=p.element;Kt(y,"display","none"),Vn(y,"aria-hidden","true")})},showMainView:g=>{l&&d.toggleToolbarDrawer(g),Oc.getPart(g,t,"editorContainer").each(p=>{const y=p.element;mo(y,"display"),ne(y,"aria-hidden")}),d.refreshToolbar(g)}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},az=Vf.optional({factory:E0,name:"menubar",schema:[Je("backstage")]}),cz=t=>t.type===Eu.sliding?wP:t.type===Eu.floating?ZV:ib,lz=Vf.optional({factory:{sketch:t=>V$.sketch({uid:t.uid,dom:t.dom,listBehaviours:vt([Cn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>ib({type:t.type,uid:nn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(s,a,l,d)=>{jm.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Je("dom"),Je("onEscape")]}),iz=Vf.optional({factory:{sketch:t=>{const s=cz(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Je("dom"),Je("onEscape"),Je("getSink")]}),uz=Vf.optional({factory:{sketch:uV},name:"header",schema:[Je("dom")]}),AP=Vf.optional({factory:{sketch:gV},name:"promotion",schema:[Je("dom")]}),hk=Vf.optional({name:"socket",schema:[Je("dom")]}),rD=Vf.optional({factory:{sketch:SV},name:"sidebar",schema:[Je("dom")]}),DP=Vf.optional({factory:{sketch:cP},name:"throbber",schema:[Je("dom")]}),yp=Vf.optional({factory:gk,name:"viewWrapper",schema:[Je("backstage")]}),RP=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),dz=Vf.optional({factory:{sketch:RP},name:"editorContainer",schema:[]});var nr=ma({name:"OuterContainer",factory:rz,configFields:[Je("dom"),Je("behaviours")],partFields:[uz,az,iz,lz,hk,rD,AP,DP,yp,dz],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const mz="file edit view insert format tools table help",MP={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},fz=(t,s,a)=>{const l=yR(a).split(/[ ,]/);return{text:t.title,getItems:()=>De(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Xo(l,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},aD=t=>t.split(" "),NP=(t,s)=>{const a={...MP,...s.menus},l=Uo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?aD(mz):aD(s.menubar===!1?"":s.menubar),g=Fn(d,y=>{const x=so(MP,y);return l?x||ht(s.menus,y).exists(_=>so(_,"items")):x}),p=_e(g,y=>{const x=a[y];return fz({title:x.title,items:aD(x.items)},s,t)});return Fn(p,y=>{const x=_=>_t(_)||_.type!=="separator";return y.getItems().length>0&&Xo(y.getItems(),x)})},cD=t=>{const s=()=>{t._skinLoaded=!0,WO(t)};return()=>{t.initialized?s():t.on("init",s)}},gz=(t,s)=>()=>DL(t,{message:s}),BP=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),lD=(t,s)=>{const a=s+"/skin.min.css";return BP(t,a,t.ui.styleSheetLoader)},hz=(t,s)=>{if(wn(pe.fromDom(t.getElement()))){const l=s+"/skin.shadowdom.min.css";return BP(t,l,Pg.DOM.styleSheetLoader)}else return Promise.resolve()},$P=(t,s)=>{const a=NR(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!Ig(s)&&_t(a)?Promise.all([lD(s,a),hz(s,a)]).then(cD(s),gz(s,"Skin could not be loaded")):Promise.resolve(cD(s)())},pz=Bt($P,!1),bz=Bt($P,!0),pk=(t,s)=>a=>{const l=Xu(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},zC=(t,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},iD=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Mu=(t,s)=>()=>t.execCommand(s),PP=(t,s,a)=>{const l=(y,x,_,D)=>{const B=s.shared.providers.translate(y.title);if(y.type==="separator")return O.some({type:"separator",text:B});if(y.type==="submenu"){const I=De(y.getStyleItems(),V=>d(V,x,D));return x===0&&I.length<=0?O.none():O.some({type:"nestedmenuitem",text:B,enabled:I.length>0,getSubmenuItems:()=>De(y.getStyleItems(),V=>d(V,x,D))})}else return O.some({type:"togglemenuitem",text:B,icon:y.icon,active:y.isSelected(D),enabled:!_,onAction:a.onAction(y),...y.getStylePreview().fold(()=>({}),I=>({meta:{style:I}}))})},d=(y,x,_)=>{const D=y.type==="formatter"&&a.isInvalid(y);return x===0?D?[]:l(y,x,!1,_).toArray():l(y,x,D,_).toArray()},g=y=>{const x=a.getCurrentValue(),_=a.shouldHide?0:1;return De(y,D=>d(D,_,x))};return{validateItems:g,getFetch:(y,x)=>(_,D)=>{const B=x(),I=g(B),V=Ff(I,ad.CLOSE_ON_EXECUTE,y,{isHorizontalMenu:!1,search:O.none()});D(V)}}},D0=(t,s,a)=>{const l=a.dataset,d=l.type==="basic"?()=>_e(l.data,g=>y$(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:PP(t,s,a),getStyleItems:d}},R0=(t,s,a)=>{const{items:l,getStyleItems:d}=D0(t,s,a),g=y=>({getComponent:q(y)}),p=zC(t,"NodeChange",y=>{const x=y.getComponent();a.updateText(x)});return KA({text:a.icon.isSome()?O.none():a.text,icon:a.icon,tooltip:O.from(a.tooltip),role:O.none(),fetch:l.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},vz=t=>_e(t,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),yz=t=>({type:"basic",data:t});var M0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(M0||(M0={}));const IP=(t,s)=>s===M0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),uD=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:vz(IP(l,a))}},bk=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],FP=t=>{const s=()=>Tt(bk,y=>t.formatter.match(y.format)),a=y=>()=>t.formatter.match(y),l=y=>O.none,d=y=>{const _=s().fold(q("left"),D=>D.title.toLowerCase());xn(y,lb,{icon:`align-${_}`})},g=yz(bk),p=y=>()=>Tt(bk,x=>x.format===y.format).each(x=>t.execCommand(x.command));return{tooltip:"Align",text:O.none(),icon:O.some("align-left"),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},wz=(t,s)=>R0(t,s,FP(t)),Cz=(t,s)=>{const a=D0(t,s,FP(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},LP=(t,s)=>{const a=s(),l=_e(a,d=>d.format);return O.from(t.formatter.closest(l)).bind(d=>Tt(a,g=>g.format===d)).orThunk(()=>_n(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},HP=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),l=p=>()=>{const y=t.formatter.get(p);return y?O.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},d=p=>{const x=LP(t,()=>g.data).fold(q(s),_=>_.title);xn(p,md,{text:x})},g=uD(t,"block_formats",M0.SemiColon);return{tooltip:"Blocks",text:O.some(s),icon:O.none(),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:iD(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},Sz=(t,s)=>R0(t,s,HP(t)),VP=(t,s)=>{const a=D0(t,s,HP(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},xz=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],zP=t=>{const s=t.split(/\s*,\s*/);return _e(s,a=>a.replace(/^['"]+|['"]+$/g,""))},Tz=t=>{const s=()=>{const a=zP(t.toLowerCase());return Gs(xz,l=>a.indexOf(l.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},UP=t=>{const s="System Font",a=()=>{const _=X=>X?zP(X)[0]:"",D=t.queryCommandValue("FontName"),B=x.data,I=D?D.toLowerCase():"";return{matchOpt:Tt(B,X=>{const ce=X.format;return ce.toLowerCase()===I||_(ce).toLowerCase()===_(I).toLowerCase()}).orThunk(()=>_n(Tz(I),{title:s,format:I})),font:D}},l=_=>D=>D.exists(B=>B.format===_),d=()=>{const{matchOpt:_}=a();return _},g=_=>()=>O.some({tag:"div",styles:_.indexOf("dings")===-1?{"font-family":_}:{}}),p=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,_.format)})},y=_=>{const{matchOpt:D,font:B}=a(),I=D.fold(q(B),V=>V.title);xn(_,md,{text:I})},x=uD(t,"font_family_formats",M0.SemiColon);return{tooltip:"Fonts",text:O.some(s),icon:O.none(),isSelectedFor:l,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:y,dataset:x,shouldHide:!1,isInvalid:Zn}},kz=(t,s)=>R0(t,s,UP(t)),Ez=(t,s)=>{const a=D0(t,s,UP(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},_z={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},WP=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",d=y=>`(?:${y})?`,p=`[+-]?(?:${["Infinity",t+l+d(t)+d(a),l+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),Oz=(t,s)=>Xo(s,a=>Xo(_z[a],l=>t===l)),vk=(t,s)=>O.from(WP.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return Oz(g,s)?O.some({value:d,unit:g}):O.none()}),ZP=(t,s)=>vk(t,s).map(({value:a,unit:l})=>a+l),jP={tab:q(9),escape:q(27),enter:q(13),backspace:q(8),delete:q(46),left:q(37),up:q(38),right:q(39),down:q(40),space:q(32),home:q(36),end:q(35),pageUp:q(33),pageDown:q(34)},GP=(t,s,a)=>{let l=O.none();const d=he=>he.map(Ue=>zt.getValue(Ue)).getOr(""),g=zC(t,"NodeChange",he=>{const Ue=he.getComponent();l=O.some(Ue),a.updateInputValue(Ue)}),p=he=>({getComponent:q(he)}),y=S(G),x=nn("custom-number-input-events"),_=(he,Ue,Ze)=>{const kt=d(l),st=a.getNewValue(kt,he),Dt=kt.length-`${st}`.length,hn=l.map(pn=>pn.element.dom.selectionStart-Dt),Ro=l.map(pn=>pn.element.dom.selectionEnd-Dt);a.onAction(st,Ze),l.each(pn=>{zt.setValue(pn,st),Ue&&(hn.each(xo=>pn.element.dom.selectionStart=xo),Ro.each(xo=>pn.element.dom.selectionEnd=xo))})},D=(he,Ue)=>_((Ze,kt)=>Ze-kt,he,Ue),B=(he,Ue)=>_((Ze,kt)=>Ze+kt,he,Ue),I=he=>bc(he.element).fold(O.none,Ue=>(pu(Ue),O.some(!0))),V=he=>r1(he.element)?(Xl(he.element).each(Ue=>pu(Ue)),O.some(!0)):O.none(),X=(he,Ue,Ze,kt)=>{const st=s.shared.providers.translate(Ze),Dt=nn("altExecuting"),hn=()=>he(!0);return Dr.sketch({dom:{tag:"button",attributes:{title:st,"aria-label":st},classes:kt.concat(Ue)},components:[cb(Ue,s.shared.providers.icons)],buttonBehaviours:vt([ro(Dt,[et(ri(),(Ro,pn)=>{(pn.event.raw.keyCode===jP.space()||pn.event.raw.keyCode===jP.enter())&&he(!1)}),et(Zi(),hn),et(Hs(),hn)])]),eventOrder:{[ri()]:[Dt,"keying"],[Zi()]:[Dt,"alloy.base.behaviour"],[Hs()]:[Dt,"alloy.base.behaviour"]}})},ce=bs(X(he=>D(!1,he),"minus","Decrease font size",["highlight-on-focus"])),Te=bs(X(he=>B(!1,he),"plus","Increase font size",["highlight-on-focus"])),ye=bs({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[W1.sketch({inputBehaviours:vt([ro(x,[Y1({onSetup:g,getApi:p},y),X1({getApi:p},y)]),ro("input-update-display-text",[et(md,(he,Ue)=>{zt.setValue(he,Ue.event.text)}),et(Nb(),he=>{a.onAction(zt.getValue(he))}),et(gu(),he=>{a.onAction(zt.getValue(he))})]),Cn.config({mode:"special",onEnter:he=>(_(ft,!0,!0),O.some(!0)),onEscape:I,onUp:he=>(B(!0,!1),O.some(!0)),onDown:he=>(D(!0,!1),O.some(!0)),onLeft:(he,Ue)=>(Ue.cut(),O.none()),onRight:(he,Ue)=>(Ue.cut(),O.none())})])})],behaviours:vt([$n.config({}),Cn.config({mode:"special",onEnter:V,onSpace:V,onEscape:I}),ro("input-wrapper-events",[et(ki(),he=>{gt([ce,Te],Ue=>{const Ze=pe.fromDom(Ue.get(he).element.dom);r1(Ze)&&Ny(Ze)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[ce.asSpec(),ye.asSpec(),Te.asSpec()],behaviours:vt([$n.config({}),Cn.config({mode:"flow",focusInside:Yh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:he=>r1(he.element)?O.none():(pu(he.element),O.some(!0))})])}},qP={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},Az={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Dz=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},Rz=(t,s)=>/[0-9.]+px$/.test(t)?Dz(parseInt(t,10)*72/96,s||0)+"pt":ht(Az,t).getOr(t),N0=t=>ht(qP,t).getOr(""),KP=t=>{const s=()=>{let x=O.none();const _=y.data,D=t.queryCommandValue("FontSize");if(D)for(let B=3;x.isNone()&&B>=0;B--){const I=Rz(D,B),V=N0(I);x=Tt(_,X=>X.format===D||X.format===I||X.format===V)}return{matchOpt:x,size:D}},a=x=>_=>_.exists(D=>D.format===x),l=()=>{const{matchOpt:x}=s();return x},d=q(O.none),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,x.format)})},p=x=>{const{matchOpt:_,size:D}=s(),B=_.fold(q(D),I=>I.title);xn(x,md,{text:B})},y=uD(t,"font_size_formats",M0.Space);return{tooltip:"Font sizes",text:O.some("12pt"),icon:O.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:p,dataset:y,shouldHide:!1,isInvalid:Zn}},Mz=(t,s)=>R0(t,s,KP(t)),Nz=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},Bz=16,$z=t=>t>=0,Pz=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>xn(l,md,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{vk(l,["unsupportedLength","empty"]);const g=vk(l,["unsupportedLength","empty"]).or(vk(s(),["unsupportedLength","empty"])),p=g.map(D=>D.value).getOr(Bz),y=Mx(t),x=g.map(D=>D.unit).filter(D=>D!=="").getOr(y),_=d(p,Nz(x).step);return`${$z(_)?_:p}${x}`}}},Iz=(t,s)=>GP(t,s,Pz(t)),Fz=(t,s)=>{const a=D0(t,s,KP(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},yk=(t,s)=>{const a="Paragraph",l=p=>()=>t.formatter.match(p),d=p=>()=>{const y=t.formatter.get(p);return y!==void 0?O.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},g=p=>{const y=B=>d$(B)?De(B.items,y):y4(B)?[{title:B.title,format:B.format}]:[],x=De(b$(t),y),D=LP(t,q(x)).fold(q(a),B=>B.title);xn(p,md,{text:D})};return{tooltip:"Formats",text:O.some(a),icon:O.none(),isSelectedFor:l,getCurrentValue:O.none,getPreviewFor:d,onAction:iD(t),updateText:g,shouldHide:rO(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},Lz=(t,s)=>{const a={type:"advanced",...s.styles};return R0(t,s,yk(t,a))},Hz=(t,s)=>{const a={type:"advanced",...s.styles},l=D0(t,s,yk(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},YP=q([Je("toggleClass"),Je("fetch"),fg("onExecute"),xe("getHotspot",O.some),xe("getAnchorOverrides",q({})),Ju(),fg("onItemExecute"),rs("lazySink"),Je("dom"),Ao("onOpen"),ic("splitDropdownBehaviours",[na,Cn,$n]),xe("matchWidth",!1),xe("useMinWidth",!1),xe("eventOrder",{}),rs("role")].concat(dA())),XP=uc({factory:Dr,schema:[Je("dom")],name:"arrow",defaults:()=>({buttonBehaviours:vt([$n.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Ld)},buttonBehaviours:vt([go.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),Vz=uc({factory:Dr,schema:[Je("dom")],name:"button",defaults:()=>({buttonBehaviours:vt([$n.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),zz=q([XP,Vz,Di({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Je("text")],name:"aria-descriptor"}),Su({schema:[Zd()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),lN()]),Uz=(t,s,a,l)=>{const d=D=>{So.getCurrent(D).each(B=>{qo.highlightFirst(B),Cn.focusIn(B)})},g=D=>{uA(t,ft,D,l,d,fi.HighlightMenuAndItem).get(G)},p=D=>(g(D),O.some(!0)),y=D=>{const B=nd(D,t,"button");return Ld(B),O.some(!0)},x={...Js([Fr((D,B)=>{zs(D,t,"aria-descriptor").each(V=>{const X=nn("aria");Vn(V.element,"id",X),Vn(D.element,"aria-describedby",X)})})]),...Cx(O.some(g))},_={repositionMenus:D=>{go.isOn(D)&&uN(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:{...t.eventOrder,[hl()]:["disabling","toggling","alloy.base.behaviour"]},events:x,behaviours:$a(t.splitDropdownBehaviours,[na.config({others:{sandbox:D=>{const B=nd(D,t,"arrow");return hT(t,D,{onOpen:()=>{go.on(B),go.on(D)},onClose:()=>{go.off(B),go.off(D)}})}}}),Cn.config({mode:"special",onSpace:y,onEnter:y,onDown:p}),$n.config({}),go.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},wk=ma({name:"SplitDropdown",configFields:YP(),partFields:zz(),factory:Uz,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),JP=t=>({isEnabled:()=>!Dn.isDisabled(t),setEnabled:s=>Dn.set(t,!s),setText:s=>xn(t,md,{text:s}),setIcon:s=>xn(t,lb,{icon:s})}),Wz=t=>({setActive:s=>{go.set(t,s)},isActive:()=>go.isOn(t),isEnabled:()=>!Dn.isDisabled(t),setEnabled:s=>Dn.set(t,!s),setText:s=>xn(t,md,{text:s}),setIcon:s=>xn(t,lb,{icon:s})}),QP=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),eI=nn("focus-button"),Ck=(t,s,a,l,d)=>{const g=s.map(y=>bs(qA(y,"tox-tbtn",d))),p=t.map(y=>bs(Zg(y,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:QP(a,d)},components:a0([p.map(y=>y.asSpec()),g.map(y=>y.asSpec())]),eventOrder:{[As()]:["focusing","alloy.base.behaviour",hp],[Fd()]:[hp,"toolbar-group-button-events"]},buttonBehaviours:vt([_u.toolbarButton(d.isDisabled),mc(),ro(hp,[Fr((y,x)=>y0(y)),et(md,(y,x)=>{g.bind(_=>_.getOpt(y)).each(_=>{zn.set(_,[Er(d.translate(x.event.text))])})}),et(lb,(y,x)=>{p.bind(_=>_.getOpt(y)).each(_=>{zn.set(_,[Zg(x.event.icon,d.icons)])})}),et(As(),(y,x)=>{x.event.prevent(),Go(y,eI)})])].concat(l.getOr([])))}},Zz=(t,s,a,l)=>{const d=s.shared,g=S(G),p={toolbarButtonBehaviours:[],getApi:JP,onSetup:t.onSetup},y=[ro("toolbar-group-button-events",[Y1(p,g),X1(p,g)])];return vp.sketch({lazySink:d.getSink,fetch:()=>vl.nu(x=>{x(_e(a(t.items),mk))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Ck(t.icon,t.text,t.tooltip,O.some(y),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},Sk=(t,s,a)=>{var l;const d=S(G),g=Ck(t.icon,t.text,t.tooltip,O.none(),a);return Dr.sketch({dom:g.dom,components:g.components,eventOrder:$T,buttonBehaviours:{...vt([ro("toolbar-button-events",[hB({onAction:t.onAction,getApi:s.getApi}),Y1(s,d),X1(s,d)]),_u.toolbarButton(()=>!t.enabled||a.isDisabled()),mc()].concat(s.toolbarButtonBehaviours)),[hp]:(l=g.buttonBehaviours)===null||l===void 0?void 0:l[hp]}})},jz=(t,s)=>tI(t,s,[]),tI=(t,s,a)=>Sk(t,{toolbarButtonBehaviours:a.length>0?[ro("toolbarButtonWith",a)]:[],getApi:JP,onSetup:t.onSetup},s),Gz=(t,s)=>dD(t,s,[]),dD=(t,s,a)=>Sk(t,{toolbarButtonBehaviours:[zn.config({}),go.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[ro("toolbarToggleButtonWith",a)]:[]),getApi:Wz,onSetup:t.onSetup},s),xk=(t,s,a)=>l=>vl.nu(d=>s.fetch(d)).map(d=>O.from(vT($s(cC(nn("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,ad.CLOSE_ON_EXECUTE,s.select.getOr(Zn),a),{movement:uT(s.columns,s.presets),menuBehaviours:cp.unnamedEvents(s.columns!=="auto"?[]:[Fr((g,p)=>{BO(g,4,HR(s.presets)).each(({numRows:y,numColumns:x})=>{Cn.setGridSize(g,y,x)})})])})))),qz=(t,s)=>{const a=g=>({isEnabled:()=>!Dn.isDisabled(g),setEnabled:p=>Dn.set(g,!p),setIconFill:(p,y)=>{_r(g.element,`svg path[id="${p}"], rect[id="${p}"]`).each(x=>{Vn(x,"fill",y)})},setActive:p=>{Vn(g.element,"aria-pressed",p),_r(g.element,"span").each(y=>{g.getSystem().getByDom(y).each(x=>go.set(x,p))})},isActive:()=>_r(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists(go.isOn)),setText:p=>_r(g.element,"span").each(y=>g.getSystem().getByDom(y).each(x=>xn(x,md,{text:p}))),setIcon:p=>_r(g.element,"span").each(y=>g.getSystem().getByDom(y).each(x=>xn(x,lb,{icon:p})))}),l=S(G),d={getApi:a,onSetup:t.onSetup};return wk.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...QP(t.tooltip,s.providers)}},onExecute:g=>{const p=a(g);p.isEnabled()&&t.onAction(p)},onItemExecute:(g,p,y)=>{},splitDropdownBehaviours:vt([_u.splitButton(s.providers.isDisabled),mc(),ro("split-dropdown-events",[Fr((g,p)=>y0(g)),et(eI,$n.focus),Y1(d,l),X1(d,l)]),u0.config({})]),eventOrder:{[Fd()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:xk(a,t,s.providers),parts:{menu:Wx(!1,t.columns,t.presets)},components:[wk.parts.button(Ck(t.icon,t.text,O.none(),O.some([go.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),wk.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:gR("chevron-down",s.providers.icons)},buttonBehaviours:vt([_u.splitButton(s.providers.isDisabled),mc(),eO()])}),wk.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},Tk=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],wp=(t,s)=>(a,l,d)=>{const g=t(a).mapError(p=>_l(p)).getOrDie();return s(g,l,d)},nI={button:wp(kO,(t,s)=>jz(t,s.shared.providers)),togglebutton:wp(_O,(t,s)=>Gz(t,s.shared.providers)),menubutton:wp(nP,(t,s)=>xC(t,"tox-tbtn",s,O.none(),!1)),splitbutton:wp(mV,(t,s)=>qz(t,s.shared)),grouptoolbarbutton:wp(H4,(t,s,a)=>{const l=a.ui.registry.getAll().buttons,d=p=>UC(a,{buttons:l,toolbar:p,allowToolbarGroups:!1},s,O.none()),g={[gv]:s.shared.header.isPositionedAtTop()?qd.TopToBottom:qd.BottomToTop};switch(tp(a)){case Eu.floating:return Zz(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Kz=(t,s,a)=>ht(nI,t.type).fold(()=>(console.error("skipping button defined by",t),O.none()),l=>O.some(l(t,s,a))),oI={styles:Lz,fontsize:Mz,fontsizeinput:Iz,fontfamily:kz,blocks:Sz,align:wz},Yz=t=>{const s=_e(Tk,a=>{const l=Fn(a.items,d=>so(t,d)||so(oI,d));return{name:a.name,items:l}});return Fn(s,a=>a.items.length>0)},Xz=t=>{const s=t.split("|");return _e(s,a=>({items:a.trim().split(" ")}))},Jz=t=>qe(t,s=>so(s,"name")&&so(s,"items")),Qz=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?Yz(a):_t(s)?Xz(s):Jz(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},kk=(t,s,a,l,d,g)=>ht(s,a.toLowerCase()).orThunk(()=>g.bind(p=>Jo(p,y=>ht(s,y+a.toLowerCase())))).fold(()=>ht(oI,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),O.none()):Kz(p,d,t)),UC=(t,s,a,l)=>{const d=Qz(s),g=_e(d,p=>{const y=De(p.items,x=>x.trim().length===0?[]:kk(t,s.buttons,x,s.allowToolbarGroups,a,l).toArray());return{title:O.from(t.translate(p.name)),items:y}});return Fn(g,p=>p.items.length>0)},mD=(t,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(qe(g,_t)){const y=g.map(x=>{const _={toolbar:x,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return UC(t,_,l,O.none())});nr.setToolbars(d,y)}else nr.setToolbar(d,UC(t,a,l,O.none()))},fD=Cc(),sI=fD.os.isiOS()&&fD.os.version.major<=12,e9=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=S(vo(d.innerWidth,d.innerHeight)),y=S(vo(g.offsetWidth,g.offsetHeight)),x=()=>{const I=p.get();(I.left!==d.innerWidth||I.top!==d.innerHeight)&&(p.set(vo(d.innerWidth,d.innerHeight)),cT(t))},_=()=>{const I=t.getDoc().documentElement,V=y.get();(V.left!==I.offsetWidth||V.top!==I.offsetHeight)&&(y.set(vo(I.offsetWidth,I.offsetHeight)),cT(t))},D=I=>{ZO(t,I)};l.bind(d,"resize",x),l.bind(d,"scroll",D);const B=Py(pe.fromDom(t.getBody()),"load",_);t.on("hide",()=>{gt(a,I=>{Kt(I.element,"display","none")})}),t.on("show",()=>{gt(a,I=>{mo(I.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{B.unbind(),l.unbind(d,"resize",x),l.unbind(d,"scroll",D),d=null})},rI=(t,s,a)=>{Jd(t)&&Eg(a.mainUi.mothership.element,a.popupUi.mothership),Av(s,a.dialogUi.mothership)};var t9=Object.freeze({__proto__:null,render:async(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=s,y=S(0),x=g.outerContainer;await pz(t);const _=pe.fromDom(d.targetNode),D=rt($e(_));Eg(_,g.mothership),rI(t,D,s),t.on("PostRender",()=>{nr.setSidebar(x,a.sidebar,MR(t)),mD(t,s,a,l),y.set(t.getWin().innerWidth),nr.setMenubar(x,NP(t,a)),nr.setViews(x,a.views),e9(t,s)});const B=nr.getSocket(x).getOrDie("Could not find expected socket element");if(sI){Nr(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ce=U7(()=>{t.dispatch("ScrollContent")},20),Te=bl(B.element,"scroll",ce.throttle);t.on("remove",Te.unbind)}SM(t,s),t.addCommand("ToggleSidebar",(ce,Te)=>{nr.toggleSidebar(x,Te),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ce;return(ce=nr.whichSidebar(x))!==null&&ce!==void 0?ce:""}),t.addCommand("ToggleView",(ce,Te)=>{if(nr.toggleView(x,Te)){const ye=x.element;g.mothership.broadcastOn([Bm()],{target:ye}),gt(p,he=>{he.broadcastOn([Bm()],{target:ye})}),un(nr.whichView(x))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var ce;return(ce=nr.whichView(x))!==null&&ce!==void 0?ce:""});const I=tp(t),V=()=>{nr.refreshToolbar(s.mainUi.outerContainer)};(I===Eu.sliding||I===Eu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ce=t.getWin().innerWidth;ce!==y.get()&&(V(),y.set(ce))});const X={setEnabled:ce=>{nT(s,!ce)},isEnabled:()=>!Dn.isDisabled(x)};return{iframeContainer:B.element.dom,editorContainer:x.element.dom,api:X}}});const gD=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),hD=t=>Sn(t)?t+"px":t,Ek=(t,s,a)=>{const l=s.filter(g=>t<g),d=a.filter(g=>t>g);return l.or(d).getOr(t)},n9=t=>{const s=Ox(t),a=oO(t),l=sO(t);return gD(s).map(d=>Ek(d,a,l))},o9=t=>n9(t).getOr(Ox(t)),aI=t=>{const s=Ax(t),a=Zw(t),l=jw(t);return gD(s).map(d=>Ek(d,a,l))},cI=t=>aI(t).getOr(Ax(t)),{ToolbarLocation:pD,ToolbarMode:bD}=MF,s9=40,r9=(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=a,y=Pg.DOM,x=np(t),_=Kw(t),D=jw(t).or(aI(t)),B=l.shared.header,I=B.isPositionedAtTop,V=tp(t),X=V===bD.sliding||V===bD.floating,ce=S(!1),Te=()=>ce.get()&&!t.removed,ye=Un=>X?Un.fold(q(0),Ss=>Ss.components().length>1?Le(Ss.components()[1].element):0):0,he=Un=>{switch(Dx(t)){case pD.auto:const Ss=nr.getToolbar(g.outerContainer),Mt=ye(Ss),fn=Le(Un.element)-Mt,Wt=E(s);if(Wt.y>fn)return"top";{const ao=Yl(s),Mo=Math.max(ao.dom.scrollHeight,Le(ao));return Wt.bottom<Mo-fn||de().bottom<Wt.bottom-fn?"bottom":"top"}case pD.bottom:return"bottom";case pD.top:default:return"top"}},Ue=Un=>{d.on(Ss=>{Ga.setModes(Ss,[Un]),B.setDockingMode(Un);const Mt=I()?qd.TopToBottom:qd.BottomToTop;Vn(Ss.element,gv,Mt)})},Ze=()=>{d.on(Un=>{const Ss=D.getOrThunk(()=>{const Mt=gD(Qe(Ws(),"margin-left")).getOr(0);return ca(Ws())-ws(s).left+Mt});Kt(Un.element,"max-width",Ss+"px")})},kt=Un=>{d.on(Ss=>{const Mt=nr.getToolbar(g.outerContainer),fn=ye(Mt),Wt=E(s),{top:Pn,left:ao}=st(t,g.outerContainer.element).fold(()=>({top:I()?Math.max(Wt.y-Le(Ss.element)+fn,0):Wt.bottom,left:Wt.x}),as=>{var Gl;const Jr=E(as),wd=(Gl=as.dom.scrollTop)!==null&&Gl!==void 0?Gl:0,lm=es(as,Ws()),Jg=lm?Math.max(Wt.y-Le(Ss.element)+fn,0):Wt.y-Jr.y+wd-Le(Ss.element)+fn;return{top:I()?Jg:Wt.bottom,left:lm?Wt.x:Wt.x-Jr.x}}),Mo={position:"absolute",left:Math.round(ao)+"px",top:Math.round(Pn)+"px"},ka=Un.map(as=>{const Gl=Bc(),Jr=150,wd=window.innerWidth-(ao-Gl.left);return{width:Math.max(Math.min(as,wd),Jr)+"px"}}).getOr({});Nr(g.outerContainer.element,{...Mo,...ka})})},st=(Un,Ss)=>Jd(Un)?O4(Ss):O.none(),Dt=()=>{gt(p,Un=>{Un.broadcastOn([Vh()],{})})},hn=()=>{if(x)return O.none();if(ws(g.outerContainer.element).left+Xs(g.outerContainer.element)>=window.innerWidth-s9||Ys(g.outerContainer.element,"width").isSome()){Kt(g.outerContainer.element,"position","absolute"),Kt(g.outerContainer.element,"left","0px"),mo(g.outerContainer.element,"width");const Ss=Xs(g.outerContainer.element);return O.some(Ss)}else return O.none()},Ro=Un=>{if(!Te())return;x||Ze();const Ss=x?O.none():hn();X&&nr.refreshToolbar(g.outerContainer),x||kt(Ss),_&&d.on(Un),Dt()},pn=()=>x||!_||!Te()?!1:d.get().exists(Un=>{const Ss=B.getDockingMode(),Mt=he(Un);return Mt!==Ss?(Ue(Mt),!0):!1});return{isVisible:Te,isPositionedAtTop:I,show:()=>{ce.set(!0),Kt(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),gt(p,Un=>{mo(Un.element,"display")}),pn(),Jd(t)?Ro(Un=>Ga.isDocked(Un)?Ga.reset(Un):Ga.refresh(Un)):Ro(Ga.refresh)},hide:()=>{ce.set(!1),Kt(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),gt(p,Un=>{Kt(Un.element,"display","none")})},update:Ro,updateMode:()=>{pn()&&Ro(Ga.reset)},repositionPopups:Dt}},lI=(t,s)=>{const a=E(t);return{pos:s?a.y:a.bottom,bounds:a}},a9=(t,s,a,l)=>{const d=S(lI(s,a.isPositionedAtTop())),g=_=>{const{pos:D,bounds:B}=lI(s,a.isPositionedAtTop()),{pos:I,bounds:V}=d.get(),X=B.height!==V.height||B.width!==V.width;d.set({pos:D,bounds:B}),X&&cT(t,_),a.isVisible()&&(I!==D?a.update(Ga.reset):X&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Ga.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let p=0;const y=a4(()=>a.update(Ga.refresh),33);t.on("ScrollWindow",()=>{const _=Bc().left;_!==p&&(p=_,y.throttle()),a.updateMode()}),Jd(t)&&t.on("ElementScroll",_=>{a.update(Ga.refresh)});const x=Xu();x.set(Py(pe.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{x.clear()})};var WC=Object.freeze({__proto__:null,render:async(t,s,a,l,d)=>{const{mainUi:g}=s,p=Cs(),y=pe.fromDom(d.targetNode),x=r9(t,y,s,l,p),_=wR(t);await bz(t);const D=()=>{if(p.isSet()){x.show();return}p.set(nr.getHeader(g.outerContainer).getOrDie());const I=dO(t);Jd(t)?(Eg(y,g.mothership),Eg(y,s.popupUi.mothership)):Av(I,g.mothership),Av(I,s.dialogUi.mothership),mD(t,s,a,l),nr.setMenubar(g.outerContainer,NP(t,a)),x.show(),a9(t,y,x,_),t.nodeChanged()};t.on("show",D),t.on("hide",x.hide),_||(t.on("focus",D),t.on("blur",x.hide)),t.on("init",()=>{(t.hasFocus()||_)&&D()}),SM(t,s);const B={show:D,hide:x.hide,setEnabled:I=>{nT(s,!I)},isEnabled:()=>!Dn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const iI=()=>{const t=Cs(),s=Cs(),a=Cs();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),p=s.get().map(y=>y.mothership);return g.fold(()=>p.toArray(),y=>p.fold(()=>[y],x=>es(y.element,x.element)?[y]:[y,x]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(y=>p(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},c9="contexttoolbar-show",uI="contexttoolbar-hide",dI=t=>({hide:()=>Go(t,ph()),getValue:()=>zt.getValue(t)}),_k=(t,s)=>et(gB,(a,l)=>{const d=t.get(a),g=dI(d);s.onAction(g,l.event.buttonApi)}),mI=(t,s,a)=>{const{primary:l,...d}=s.original,g=Vl(kO({...d,type:"button",onAction:G}));return tI(g,a,[_k(t,s)])},fI=(t,s,a)=>{const{primary:l,...d}=s.original,g=Vl(_O({...d,type:"togglebutton",onAction:G}));return dD(g,a,[_k(t,s)])},l9=t=>t.type==="contextformtogglebutton",B0=(t,s,a)=>l9(s)?fI(t,s,a):mI(t,s,a),Ok=(t,s,a)=>{const l=_e(s,p=>bs(B0(t,p,a)));return{asSpecs:()=>_e(l,p=>p.asSpec()),findPrimary:p=>Jo(s,(y,x)=>y.primary?O.from(l[x]).bind(_=>_.getOpt(p)).filter(Pe(Dn.isDisabled)):O.none())}},Ak=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=bs(W1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:vt([Cn.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(Ld(p),!0)),onLeft:(g,p)=>(p.cut(),O.none()),onRight:(g,p)=>(p.cut(),O.none())})])})),d=Ok(l,t.commands,s);return[{title:O.none(),items:[l.asSpec()]},{title:O.none(),items:d.asSpecs()}]},gI={renderContextForm:(t,s,a)=>ib({type:t,uid:nn("context-toolbar"),initGroups:Ak(s,a),onEscape:O.none,cyclicKeying:!0,providers:a}),buildInitGroups:Ak},hI=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,pI=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Jl(pe.fromDom(t.startContainer),t.startOffset).element;return(ba(a)?ra(a):O.some(a)).filter(Lo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},vD=t=>{const s=t.selection.getRng(),a=pI(s);if(t.inline){const l=Bc();return Zs(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=M(pe.fromDom(t.getBody()));return Zs(l.x+a.left,l.y+a.top,a.width,a.height)}},u9=(t,s)=>s.filter(a=>$o(a)&&sl(a)).map(M).getOrThunk(()=>vD(t)),d9=(t,s,a)=>{const l=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:l,width:d-l}},m9=(t,s,a,l,d,g)=>{const p=pe.fromDom(t.getContainer()),y=_r(p,".tox-editor-header").getOr(p),x=E(y),_=x.y>=s.bottom,D=l&&!_;if(t.inline&&D)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const B=d==="line"?E(p):s;return D?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(B.bottom-g,a.bottom)}:{y:Math.max(B.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},bI=(t,s,a,l=0)=>{const d=rf(window),g=E(pe.fromDom(t.getContentAreaContainer())),p=Bx(t)||Px(t)||qw(t),{x:y,width:x}=d9(g,d,l);if(t.inline&&!p)return Zs(y,d.y,x,d.height);{const _=s.header.isPositionedAtTop(),{y:D,bottom:B}=m9(t,g,d,_,a,l);return Zs(y,D,x,B-D)}},ZC=12,jC={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},yD={maxHeightFunction:vg(),maxWidthFunction:A0()},vI=(t,s)=>{const a=t.selection.getRng(),l=Jl(pe.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&es(l.element,s)},wD=(t,s,a)=>{const l=Ys(t,"position");Kt(t,"position",s);const d=a(t);return l.each(g=>Kt(t,"position",g)),d},yI=t=>t==="node",wI=(t,s,a,l,d)=>{const g=vD(t),p=l.lastElement().exists(y=>es(a,y));if(vI(t,a))return p?c$:Hf;if(p)return wD(s,l.getMode(),()=>hI(g,E(s),-20)&&!l.isReposition()?dH:c$);{const y=l.getMode()==="fixed"?d.y+Bc().top:d.y,x=Le(s)+ZC;return y+x<=g.y?Hf:RC}},f9=(t,s,a,l)=>{const d=x=>(_,D,B,I,V)=>{const X=wI(t,I,x,a,V),ce={..._,y:V.y,height:V.height};return{...X(ce,D,B,I,V),alwaysFit:!0}},g=x=>yI(l)?[d(x)]:[];return s?{onLtr:x=>[Ar,kc,Na,li,Or,qi].concat(g(x)),onRtl:x=>[Ar,Na,kc,Or,li,qi].concat(g(x))}:{onLtr:x=>[qi,Ar,li,kc,Or,Na].concat(g(x)),onRtl:x=>[qi,Ar,Or,Na,li,kc].concat(g(x))}},g9=(t,s,a,l)=>s==="line"?{bubble:Mh(ZC,0,jC),layouts:{onLtr:()=>[Oy],onRtl:()=>[Ay]},overrides:yD}:{bubble:Mh(0,ZC,jC,1/ZC),layouts:f9(t,a,l,s),overrides:yD},$0=(t,s)=>{const a=Fn(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=Hr(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},CI=t=>{if(t.length<=1)return t;{const s=g=>Xo(t,p=>p.position===g),a=g=>Fn(t,p=>p.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),p=_e(a("selection"),y=>({...y,position:"node"}));return g.concat(p)}else return a(l?"selection":"node");else return a("line")}},h9=t=>{if(t.length<=1)return t;{const s=l=>Tt(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>Fn(t,d=>d.position===l))}},p9=(t,s,a)=>{const l=$0(t,s);if(l.contextForms.length>0)return O.some({elem:t,toolbars:[l.contextForms[0]]});{const d=$0(t,a);if(d.contextForms.length>0)return O.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=CI(l.contextToolbars.concat(d.contextToolbars));return O.some({elem:t,toolbars:g})}else return O.none()}},b9=(t,s,a)=>t(s)?O.none():Zu(s,l=>{if(Lo(l)){const{contextToolbars:d,contextForms:g}=$0(l,a.inNodeScope),p=g.length>0?g:h9(d);return p.length>0?O.some({elem:l,toolbars:p}):O.none()}else return O.none()},t),v9=(t,s)=>{const a=pe.fromDom(s.getBody()),l=p=>es(p,a),d=p=>!l(p)&&!sa(a,p),g=pe.fromDom(s.selection.getNode());return d(g)?O.none():p9(g,t.inNodeScope,t.inEditorScope).orThunk(()=>b9(l,g,t))},y9=(t,s)=>{const a={},l=[],d=[],g={},p={},y=(D,B)=>{const I=Vl(q1(B));a[D]=I,I.launch.map(V=>{g["form:"+D]={...B.launch,type:V.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?d.push(I):l.push(I),p[D]=I},x=(D,B)=>{DO(B).each(I=>{B.scope==="editor"?d.push(I):l.push(I),p[D]=I})},_=Uo(t);return gt(_,D=>{const B=t[D];B.type==="contextform"?y(D,B):B.type==="contexttoolbar"&&x(D,B)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:p,formNavigators:g}},CD=nn("forward-slide"),SD=nn("backward-slide"),xD=nn("change-slide-event"),TD="tox-pop--resizing",SI=t=>{const s=S([]);return pr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),pr.getContent(a).each(l=>{mo(l.element,"visibility")}),Qs(a.element,TD),mo(a.element,"width")},inlineBehaviours:vt([ro("context-toolbar-events",[yh(gh(),(a,l)=>{l.event.raw.propertyName==="width"&&(Qs(a.element,TD),mo(a.element,"width"))}),et(xD,(a,l)=>{const d=a.element;mo(d,"width");const g=ca(d);pr.setContent(a,l.event.contents),Ma(d,TD);const p=ca(d);Kt(d,"width",g+"px"),pr.getContent(a).each(y=>{l.event.focus.bind(x=>(pu(x),bu(d))).orThunk(()=>(Cn.focusIn(y),Gd($e(d))))}),setTimeout(()=>{Kt(a.element,"width",p+"px")},0)}),et(CD,(a,l)=>{pr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Gd($e(a.element))}]))}),xn(a,xD,{contents:l.event.forwardContents,focus:O.none()})}),et(SD,(a,l)=>{Wr(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),xn(a,xD,{contents:zl(d.bar),focus:d.focus})})})]),Cn.config({mode:"special",onEscape:a=>Wr(s.get()).fold(()=>t.onEscape(),l=>(Go(a,SD),O.some(!0)))})]),lazySink:()=>St.value(t.sink)})},kD="tox-pop--transition",w9=(t,s,a,l)=>{const d=l.backstage,g=d.shared,p=Cc().deviceType.isTouch,y=Cs(),x=Cs(),_=Cs(),D=cc(SI({sink:a,onEscape:()=>(t.focus(),O.some(!0))})),B=()=>{const pn=_.get().getOr("node"),xo=yI(pn)?1:0;return bI(t,g,pn,xo)},I=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),V=pn=>ar(Ya(pn,y.get(),es),!0),X=()=>{if(I()){const pn=B(),xo=ar(_.get(),"node")?u9(t,y.get()):vD(t);return pn.height<=0||!hI(xo,pn,.01)}else return!0},ce=()=>{y.clear(),x.clear(),_.clear(),pr.hide(D)},Te=()=>{if(pr.isOpen(D)){const pn=D.element;mo(pn,"display"),X()?Kt(pn,"display","none"):(x.set(0),pr.reposition(D))}},ye=pn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[pn],behaviours:vt([Cn.config({mode:"acyclic"}),ro("pop-dialog-wrap-events",[Fr(xo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Cn.focusIn(xo))}),Al(xo=>{t.shortcuts.remove("ctrl+F9")})])])}),he=Ii(()=>y9(s,pn=>{const xo=kt([pn]);xn(D,CD,{forwardContents:ye(xo)})})),Ue=(pn,xo)=>UC(t,{buttons:pn,toolbar:xo.items,allowToolbarGroups:!1},l.backstage,O.some(["form:"])),Ze=(pn,xo)=>gI.buildInitGroups(pn,xo),kt=pn=>{const{buttons:xo}=t.ui.registry.getAll(),Qn=he(),To={...xo,...Qn.formNavigators},Un=tp(t)===Eu.scrolling?Eu.scrolling:Eu.default,Ss=Vt(_e(pn,Mt=>Mt.type==="contexttoolbar"?Ue(To,Mt):Ze(Mt,g.providers)));return ib({type:Un,uid:nn("context-toolbar"),initGroups:Ss,onEscape:O.none,cyclicKeying:!0,providers:g.providers})},st=(pn,xo)=>{const Qn=pn==="node"?g.anchors.node(xo):g.anchors.cursor(),To=g9(t,pn,p(),{lastElement:y.get,isReposition:()=>ar(x.get(),0),getMode:()=>Ba.getMode(a)});return $s(Qn,To)},Dt=(pn,xo)=>{if(Ro.cancel(),!I())return;const Qn=kt(pn),To=pn[0].position,Un=st(To,xo);_.set(To),x.set(1);const Ss=D.element;mo(Ss,"display"),V(xo)||(Qs(Ss,kD),Ba.reset(a,D)),pr.showWithinBounds(D,ye(Qn),{anchor:Un,transition:{classes:[kD],mode:"placement"}},()=>O.some(B())),xo.fold(y.clear,y.set),X()&&Kt(Ss,"display","none")};let hn=!1;const Ro=a4(()=>{if(!(!t.hasFocus()||t.removed||hn))if(Xc(D.element,kD))Ro.throttle();else{const pn=he();v9(pn,t).fold(ce,xo=>{Dt(xo.toolbars,O.some(xo.elem))})}},17);t.on("init",()=>{t.on("remove",ce),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Te),t.on("click keyup focus SetContent",Ro.throttle),t.on(uI,ce),t.on(c9,pn=>{const xo=he();ht(xo.lookupTable,pn.toolbarKey).each(Qn=>{Dt([Qn],_n(pn.target!==t,pn.target)),pr.getContent(D).each(Cn.focusIn)})}),t.on("focusout",pn=>{Tx.setEditorTimeout(t,()=>{bu(a.element).isNone()&&bu(D.element).isNone()&&ce()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ce()}),t.on("AfterProgressState",pn=>{pn.state?ce():t.hasFocus()&&Ro.throttle()}),t.on("dragstart",()=>{hn=!0}),t.on("dragend drop",()=>{hn=!1}),t.on("NodeChange",pn=>{bu(D.element).fold(Ro.throttle,G)})})},C9=t=>{gt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Mu(t,a.cmd),onSetup:pk(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Mu(t,"JustifyNone")})},xI=(t,s)=>{const a=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Cs();return _e(l,p=>({type:"togglemenuitem",text:s.display(p),onSetup:y=>{const x=D=>{D&&(g.on(B=>B.setActive(!1)),g.set(y)),y.setActive(D)};x(ar(d,s.hash(p)));const _=s.watcher(t,p,x);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},S9={name:"lineheight",text:"Line height",icon:"line-height",getOptions:$x,hash:t=>ZP(t,["fixed","relative","empty"]).getOr(t),display:ft,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>O.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},ED=t=>O.from(vR(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:q(a),hash:l=>dt(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var p;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:l=>{const d=pe.fromDom(l.selection.getNode());return oi(d,g=>O.some(g).filter(Lo).bind(p=>$(p,"lang").map(x=>{const _=$(p,"data-mce-lang").getOrUndefined();return{code:x,customCode:_,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=Xu();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),d.clear}})),x9=t=>{xI(t,S9),ED(t).each(s=>xI(t,s))},T9=(t,s)=>{Cz(t,s),Ez(t,s),Hz(t,s),VP(t,s),Fz(t,s)},_D=t=>zC(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),TI=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:_D(t),onAction:Mu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Mu(t,"indent")})},kI=t=>{TI(t)},EI=(t,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",l),()=>t.off("PastePlainTextToggle",l)},k9=t=>{const s=S(RR(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:EI(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:EI(t,s)})},OD=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},E9=t=>{gp.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:pk(t,s.name),onAction:OD(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:pk(t,a),onAction:OD(t,a)})}},_9=t=>{gp.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Mu(t,s.action)})})},_I=t=>{gp.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Mu(t,s.action),onSetup:pk(t,s.name)})})},O9=t=>{E9(t),_9(t),_I(t)},OI=t=>{gp.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Mu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:OD(t,"code")})},A9=t=>{O9(t),OI(t)},Dk=(t,s)=>zC(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),AD=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Dk(t,"hasUndo"),onAction:Mu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Dk(t,"hasRedo"),onAction:Mu(t,"redo")})},AI=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Dk(t,"hasUndo"),onAction:Mu(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Dk(t,"hasRedo"),onAction:Mu(t,"redo")})},D9=t=>{AD(t),AI(t)},R9=t=>zC(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),DD=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:R9(t),onAction:Mu(t,"mceToggleVisualAid")})},M9=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Mu(t,"mceToggleVisualAid")})},N9=t=>{M9(t),DD(t)},B9=(t,s)=>{C9(t),A9(t),T9(t,s),D9(t),rA(t),N9(t),kI(t),x9(t),k9(t)},$9=t=>_t(t)?t.split(/[ ,]/):t,DI=t=>s=>s.options.get(t),RI=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:_t(a)||qe(a,_t)?{value:$9(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},MI=DI("contextmenu_never_use_native"),P9=DI("contextmenu_avoid_overlap"),I9=t=>NI(t).length===0,NI=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Fn(a,l=>so(s,l))},GC=(t,s)=>({type:"makeshift",x:t,y:s}),F9=(t,s,a)=>GC(t.x+s,t.y+a),BI=t=>t.type==="longpress"||t.type.indexOf("touch")===0,L9=t=>{if(BI(t)){const s=t.touches[0];return GC(s.pageX,s.pageY)}else return GC(t.pageX,t.pageY)},$I=t=>{if(BI(t)){const s=t.touches[0];return GC(s.clientX,s.clientY)}else return GC(t.clientX,t.clientY)},H9=(t,s)=>{const a=Pg.DOM.getPos(t);return F9(s,a.x,a.y)},PI=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?L9(s):H9(t.getContentAreaContainer(),$I(s)):II(t),II=t=>({type:"selection",root:pe.fromDom(t.selection.getNode())}),V9=t=>({type:"node",node:O.some(pe.fromDom(t.selection.getNode())),root:pe.fromDom(t.getBody())}),FI=(t,s,a)=>{switch(a){case"node":return V9(t);case"point":return PI(t,s);case"selection":return II(t)}},db=(t,s,a,l,d,g)=>{const p=a(),y=FI(t,s,g);Ff(p,ad.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:O.none()}).map(x=>{s.preventDefault(),pr.showMenuAt(d,{anchor:y},{menu:{markers:Fg("normal")},data:x})})},LI={onLtr:()=>[Ar,kc,Na,li,Or,qi,Hf,RC,DC,XT,AC,OC],onRtl:()=>[Ar,Na,kc,Or,li,qi,Hf,RC,AC,OC,DC,XT]},z9=12,U9={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},W9=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return jy(t.getWin(),f1.domRange(d)).exists(p=>p.left<=l.clientX&&p.right>=l.clientX&&p.top<=l.clientY&&p.bottom>=l.clientY)}},Z9=t=>{const s=t.selection.getRng(),a=()=>{Tx.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const l=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",l)}},HI=(t,s,a)=>{const l=FI(t,s,a);return{bubble:Mh(0,a==="point"?z9:0,U9),layouts:LI,overrides:{maxWidthFunction:A0(),maxHeightFunction:vg()},...l}},j9=(t,s,a,l,d,g,p)=>{const y=HI(t,s,g);Ff(a,ad.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:O.none()}).map(x=>{s.preventDefault();const _=p?fi.HighlightMenuAndItem:fi.HighlightNone;pr.showMenuWithinBounds(d,{anchor:y},{menu:{markers:Fg("normal"),highlightOnOpen:_},data:x,type:"horizontal"},()=>O.some(bI(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(uI)})},G9=(t,s,a,l,d,g)=>{const p=Cc(),y=p.os.isiOS(),x=p.os.isMacOS(),_=p.os.isAndroid(),D=p.deviceType.isTouch(),B=()=>!(_||y||x&&D),I=()=>{const V=a();j9(t,s,V,l,d,g,B())};if((x||y)&&g!=="node"){const V=()=>{Z9(t),I()};W9(t,s)?V():(t.once("selectionchange",V),t.once("touchend",()=>t.off("selectionchange",V)))}else I()},VI=t=>_t(t)?t==="|":t.type==="separator",RD={type:"separator"},zI=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(_t(t))return t;switch(t.type){case"separator":return RD;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return _t(l)?l:_e(l,zI)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Xe(a.onAction)}}},UI=(t,s)=>{if(s.length===0)return t;const l=Wr(t).filter(d=>!VI(d)).fold(()=>[],d=>[RD]);return t.concat(l).concat(s).concat([RD])},q9=(t,s,a)=>{const l=In(s,(d,g)=>ht(t,g.toLowerCase()).map(p=>{const y=p.update(a);if(_t(y))return UI(d,y.split(" "));if(y.length>0){const x=_e(y,zI);return UI(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&VI(l[l.length-1])&&l.pop(),l},K9=(t,s)=>s.ctrlKey&&!MI(t),WI=t=>t.type==="longpress"||so(t,"touches"),MD=(t,s)=>!WI(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),ZI=(t,s)=>MD(t,s)?t.selection.getStart(!0):s.target,qC=(t,s)=>{const a=P9(t),l=MD(t,s)?"selection":"point";if(Be(a)){const d=ZI(t,s);return iC(pe.fromDom(d),a)?"node":l}else return l},Y9=(t,s,a)=>{const d=Cc().deviceType.isTouch,g=cc(pr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:vt([ro("dismissContextMenu",[et(xm(),(x,_)=>{Po.close(x),t.focus()})])])})),p=()=>pr.hide(g),y=x=>{if(MI(t)&&x.preventDefault(),K9(t,x)||I9(t))return;const _=qC(t,x),D=()=>{const I=ZI(t,x),V=t.ui.registry.getAll(),X=NI(t);return q9(V.contextMenus,X,I)};(d()?G9:db)(t,x,D,a,g,_)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(x,p),t.on("longpress contextmenu",y)})},ND=W.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),P0=t=>s=>s.translate(-t.left,-t.top),Rk=t=>s=>s.translate(t.left,t.top),qg=t=>(s,a)=>In(t,(l,d)=>d(l),vo(s,a)),Mk=(t,s,a)=>t.fold(qg([Rk(a),P0(s)]),qg([P0(s)]),qg([])),I0=(t,s,a)=>t.fold(qg([Rk(a)]),qg([]),qg([Rk(s)])),jI=(t,s,a)=>t.fold(qg([]),qg([P0(a)]),qg([Rk(s),P0(a)])),X9=(t,s,a,l,d,g)=>{const p=I0(t,d,g),y=I0(s,d,g);return Math.abs(p.left-y.left)<=a&&Math.abs(p.top-y.top)<=l},J9=(t,s,a,l,d,g)=>{const p=I0(t,d,g),y=I0(s,d,g),x=Math.abs(p.left-y.left),_=Math.abs(p.top-y.top);return vo(x,_)},GI=(t,s,a)=>{const l=t.fold((d,g)=>({position:O.some("absolute"),left:O.some(d+"px"),top:O.some(g+"px")}),(d,g)=>({position:O.some("absolute"),left:O.some(d-a.left+"px"),top:O.some(g-a.top+"px")}),(d,g)=>({position:O.some("fixed"),left:O.some(d+"px"),top:O.some(g+"px")}));return{right:O.none(),bottom:O.none(),...l}},Q9=(t,s,a)=>t.fold((l,d)=>Nk(l+s,d+a),(l,d)=>Cp(l+s,d+a),(l,d)=>mb(l+s,d+a)),BD=(t,s,a,l)=>{const d=(g,p)=>(y,x)=>{const _=g(s,a,l);return p(y.getOr(_.left),x.getOr(_.top))};return t.fold(d(jI,Nk),d(I0,Cp),d(Mk,mb))},Nk=ND.offset,Cp=ND.absolute,mb=ND.fixed,qI=(t,s)=>{const a=jr(t,s);return dt(a)?NaN:parseInt(a,10)},eU=(t,s)=>{const a=t.element,l=qI(a,s.leftAttr),d=qI(a,s.topAttr);return isNaN(l)||isNaN(d)?O.none():O.some(vo(l,d))},tU=(t,s,a)=>{const l=t.element;Vn(l,s.leftAttr,a.left+"px"),Vn(l,s.topAttr,a.top+"px")},nU=(t,s)=>{const a=t.element;ne(a,s.leftAttr),ne(a,s.topAttr)},Bk=(t,s,a,l)=>eU(t,s).fold(()=>a,d=>mb(d.left+l.left,d.top+l.top)),oU=(t,s,a,l,d,g)=>{const p=Bk(t,s,a,l),y=s.mustSnap?rU(t,s,p,d,g):aU(t,s,p,d,g),x=Mk(p,d,g);return tU(t,s,x),y.fold(()=>({coord:mb(x.left,x.top),extra:O.none()}),_=>({coord:_.output,extra:_.extra}))},sU=(t,s)=>{nU(t,s)},KI=(t,s,a,l)=>Jo(t,d=>{const g=d.sensor;return X9(s,g,d.range.left,d.range.top,a,l)?O.some({output:BD(d.output,s,a,l),extra:d.extra}):O.none()}),rU=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return KI(g,a,l,d).orThunk(()=>In(g,(x,_)=>{const D=_.sensor,B=J9(a,D,_.range.left,_.range.top,l,d);return x.deltas.fold(()=>({deltas:O.some(B),snap:O.some(_)}),I=>{const V=(B.left+B.top)/2,X=(I.left+I.top)/2;return V<=X?{deltas:O.some(B),snap:O.some(_)}:x})},{deltas:O.none(),snap:O.none()}).snap.map(x=>({output:BD(x.output,a,l,d),extra:x.extra})))},aU=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return KI(g,a,l,d)},cU=(t,s,a)=>({coord:BD(t.output,t.output,s,a),extra:t.extra});var iU=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=va(t.element),p=Bc(g),y=z$(d),x=cU(l,p,y),_=GI(x.coord,p,y);Gr(d,_)}}});const $D="data-initial-z-index",uU=t=>{ra(t.element).filter(Lo).each(s=>{$(s,$D).fold(()=>mo(s,"z-index"),a=>Kt(s,"z-index",a)),ne(s,$D)})},dU=t=>{ra(t.element).filter(Lo).each(s=>{Ys(s,"z-index").each(a=>{Vn(s,$D,a)}),Kt(s,"z-index",Qe(t.element,"z-index"))})},YI=(t,s)=>{t.getSystem().addToGui(s),dU(s)},PD=t=>{uU(t),t.getSystem().removeFromGui(t)},ID=(t,s,a)=>t.getSystem().build(zm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var mU=za("snaps",[Je("getSnapPoints"),Ao("onSensor"),Je("leftAttr"),Je("topAttr"),xe("lazyViewport",de),xe("mustSnap",!1)]);const FD=[xe("useFixed",Zn),Je("blockerClass"),xe("getTarget",ft),xe("onDrag",G),xe("repositionTarget",!0),xe("onDrop",G),Ca("getBounds",de),mU],fU=t=>pa(Ys(t,"left"),Ys(t,"top"),Ys(t,"position"),(s,a,l)=>(l==="fixed"?mb:Nk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ws(t);return Cp(s.left,s.top)}),gU=(t,s,a,l,d)=>{const g=d.bounds,p=I0(s,a,l),y=_i(p.left,g.x,g.x+g.width-d.width),x=_i(p.top,g.y,g.y+g.height-d.height),_=Cp(y,x);return s.fold(()=>{const D=jI(_,a,l);return Nk(D.left,D.top)},q(_),()=>{const D=Mk(_,a,l);return mb(D.left,D.top)})},hU=(t,s,a,l,d,g,p)=>{const y=s.fold(()=>{const x=Q9(a,g.left,g.top),_=Mk(x,l,d);return mb(_.left,_.top)},x=>{const _=oU(t,x,a,g,l,d);return _.extra.each(D=>{x.onSensor(t,D)}),_.coord});return gU(t,y,l,d,p)},pU=(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=va(t.element),p=Bc(g),y=z$(d),x=fU(d),_=hU(t,s.snaps,x,p,y,l,a),D=GI(_,p,y);Gr(d,D)}s.onDrag(t,d,l)},XI=(t,s)=>({bounds:t.getBounds(),height:tn(s.element),width:Xs(s.element)}),LD=(t,s,a,l,d)=>{const g=a.update(l,d),p=a.getStartData().getOrThunk(()=>XI(s,t));g.each(y=>{pU(t,s,p,y)})},JI=(t,s,a,l)=>{s.each(PD),a.snaps.each(g=>{sU(t,g)});const d=a.getTarget(t.element);l.reset(),a.onDrop(t,d)},HD=t=>(s,a)=>{const l=d=>{a.setStartData(XI(s,d))};return Js([et(Hp(),d=>{a.getStartData().each(()=>l(d))}),...t(s,a,l)])},bU=t=>Js([et(As(),t.forceDrop),et(Sm(),t.drop),et(fh(),(s,a)=>{t.move(a.event)}),et(Cm(),t.delayDrop)]);var vU=Object.freeze({__proto__:null,getData:t=>O.from(vo(t.x,t.y)),getDelta:(t,s)=>vo(s.left-t.left,s.top-t.top)});const QI=(t,s,a)=>[et(As(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>JI(l,O.some(_),t,s),y=fN(p,200),x={drop:p,delayDrop:y.schedule,forceDrop:p,move:B=>{y.cancel(),LD(l,t,s,vU,B)}},_=ID(l,t.blockerClass,bU(x));(()=>{a(l),YI(l,_)})()})],yU=[...FD,us("dragger",{handlers:HD(QI)})],wU=t=>Js([et(fu(),t.forceDrop),et(Hs(),t.drop),et(Yc(),t.drop),et(Oo(),(s,a)=>{t.move(a.event)})]),CU=t=>{const s=t[0];return O.some(vo(s.clientX,s.clientY))};var e5=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?CU(a):O.none()},getDelta:(t,s)=>vo(s.left-t.left,s.top-t.top)});const VD=(t,s,a)=>{const l=Cs(),d=g=>{JI(g,l.get(),t,s),l.clear()};return[et(fu(),(g,p)=>{p.stop();const y=()=>d(g),x={drop:y,delayDrop:G,forceDrop:y,move:B=>{LD(g,t,s,e5,B)}},_=ID(g,t.blockerClass,wU(x));l.set(_),(()=>{a(g),YI(g,_)})()}),et(Oo(),(g,p)=>{p.stop(),LD(g,t,s,e5,p.event)}),et(Hs(),(g,p)=>{p.stop(),d(g)}),et(Yc(),d)]},t5=[...FD,us("dragger",{handlers:HD(VD)})],fb=(t,s,a)=>[...QI(t,s,a),...VD(t,s,a)],SU=[...FD,us("dragger",{handlers:HD(fb)})];var xU=Object.freeze({__proto__:null,mouse:yU,touch:t5,mouseOrTouch:SU}),TU=Object.freeze({__proto__:null,init:()=>{let t=O.none(),s=O.none();const a=()=>{t=O.none(),s=O.none()},l=(x,_)=>{const D=t.map(B=>x.getDelta(B,_));return t=O.some(_),D},d=(x,_)=>x.getData(_).bind(D=>l(x,D)),g=x=>{s=O.some(x)},p=()=>s,y=q({});return rc({readState:y,reset:a,update:d,getStartData:p,setStartData:g})}});const gb=My({branchKey:"mode",branches:xU,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:TU,apis:iU}),Kg=40,KC=Kg/2,o5=(t,s,a,l,d,g)=>t.fold(()=>gb.snap({sensor:Cp(a-KC,l-KC),range:vo(d,g),output:Cp(O.some(a),O.some(l)),extra:{td:s}}),p=>{const y=a-KC,x=l-KC,_=Kg,D=Kg,B=p.element.dom.getBoundingClientRect();return gb.snap({sensor:Cp(y,x),range:vo(_,D),output:Cp(O.some(a-B.width/2),O.some(l-B.height/2)),extra:{td:s}})}),s5=(t,s,a)=>{const l=(d,g)=>d.exists(p=>es(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;l(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},r5=t=>bs(Dr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:vt([gb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),u0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),kU=(t,s)=>{const a=S([]),l=S([]),d=S(!1),g=Cs(),p=Cs(),y=Dt=>{const hn=M(Dt);return o5(V.getOpt(s),Dt,hn.x,hn.y,hn.width,hn.height)},x=()=>_e(a.get(),Dt=>y(Dt)),_=Dt=>{const hn=M(Dt);return o5(X.getOpt(s),Dt,hn.right,hn.bottom,hn.width,hn.height)},D=()=>_e(l.get(),Dt=>_(Dt)),B=s5(x,g,Dt=>{p.get().each(hn=>{t.dispatch("TableSelectorChange",{start:Dt,finish:hn})})}),I=s5(D,p,Dt=>{g.get().each(hn=>{t.dispatch("TableSelectorChange",{start:hn,finish:Dt})})}),V=r5(B),X=r5(I),ce=cc(V.asSpec()),Te=cc(X.asSpec()),ye=(Dt,hn,Ro,pn)=>{const xo=hn.dom.getBoundingClientRect();mo(Dt.element,"display");const Qn=ec(pe.fromDom(t.getBody())).dom.innerHeight,To=Ro(xo),Un=pn(xo,Qn);(To||Un)&&Kt(Dt.element,"display","none")},he=(Dt,hn,Ro,pn)=>{const xo=Ro(hn);gb.snapTo(Dt,xo),ye(Dt,hn,Un=>Un[pn]<0,(Un,Ss)=>Un[pn]>Ss)},Ue=Dt=>he(ce,Dt,y,"top"),Ze=()=>g.get().each(Ue),kt=Dt=>he(Te,Dt,_,"bottom"),st=()=>p.get().each(kt);Cc().deviceType.isTouch()&&(t.on("TableSelectionChange",Dt=>{d.get()||(Kd(s,ce),Kd(s,Te),d.set(!0)),g.set(Dt.start),p.set(Dt.finish),Dt.otherCells.each(hn=>{a.set(hn.upOrLeftCells),l.set(hn.downOrRightCells),Ue(Dt.start),kt(Dt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ze(),st()}),t.on("TableSelectionClear",()=>{d.get()&&(Yd(ce),Yd(Te),d.set(!1)),g.clear(),p.clear()}))};var EU=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const _U=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",OU=(t,s,a)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"âº",g=(_,D,B)=>Dr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B,"aria-level":B+1}},components:[Er(_)],action:I=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:vt([_u.button(a.isDisabled),mc()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Er(` ${d} `)]}),y=_=>In(_,(D,B,I)=>{const V=g(B.name,B.element,I);return I===0?D.concat([V]):D.concat([p(),V])},[]),x=_=>{const D=[];let B=_.length;for(;B-- >0;){const I=_[B];if(I.nodeType===1&&!_U(I)){const V=RL(t,I);if(V.isDefaultPrevented()||D.push({name:V.name,element:I}),V.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:vt([Cn.config({mode:"flow",selector:"div[role=button]"}),Dn.config({disabled:a.isDisabled}),mc(),Yr.config({}),zn.config({}),ro("elementPathEvents",[Fr((_,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Cn.focusIn(_)),t.on("NodeChange",B=>{const I=x(B.parents),V=I.length>0?y(I):[];zn.set(_,V)})})])]),components:[]}};var hb;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(hb||(hb={}));const UD=(t,s,a,l,d)=>{const g={height:Ek(l+s.top,oO(t),sO(t))};return a===hb.Both&&(g.width=Ek(d+s.left,Zw(t),jw(t))),g},F0=(t,s,a)=>{const l=pe.fromDom(t.getContainer()),d=UD(t,s,a,Le(l),ca(l));Ye(d,(g,p)=>{Sn(g)&&Kt(l,p,hD(g))}),$M(t)},WD=t=>{const s=iO(t);return s===!1?hb.None:s==="both"?hb.Both:hb.Vertical},pb=(t,s,a,l)=>{const g=vo(a*20,l*20);return F0(t,g,s),O.some(!0)},bb=(t,s)=>{const a=WD(t);return a===hb.None?O.none():O.some(rd("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[gb.config({mode:"mouse",repositionTarget:!1,onDrag:(l,d,g)=>F0(t,g,a),blockerClass:"tox-blocker"}),Cn.config({mode:"special",onLeft:()=>pb(t,a,-1,0),onRight:()=>pb(t,a,1,0),onUp:()=>pb(t,a,0,-1),onDown:()=>pb(t,a,0,1)}),Yr.config({}),$n.config({})]},s.icons))},$k=(t,s)=>{const a=(l,d,g)=>zn.set(l,[Er(s.translate(["{0} "+g,d[g]]))]);return Dr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:vt([_u.button(s.isDisabled),mc(),Yr.config({}),zn.config({}),zt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ro("wordcount-events",[Vd(l=>{const d=zt.getValue(l),g=d.mode==="words"?"characters":"words";zt.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),Fr(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=zt.getValue(l);zt.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[hl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},AU=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":ku.translate(["Powered by {0}","Tiny"])},innerHtml:EU.trim()},behaviours:vt([$n.config({})])}]}),l=()=>{const g=[];return AR(t)&&g.push(OU(t,{},s)),t.hasPlugin("wordcount")&&g.push($k(t,s)),DR(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=l(),p=bb(t,s);return g.concat(p.toArray())})()}},ZD=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),a5=(t,s)=>{const a=t.inline,l=a?WC:t9,d=Kw(t)?iV:_4,g=iI(),p=Cs(),y=Cs(),x=Cs(),I=Cc().deviceType.isTouch()?["tox-platform-touch"]:[],V=Fx(t),X=tp(t),ce=bs({dom:{tag:"div",classes:["tox-anchorbar"]}}),Te=()=>g.mainUi.get().map(Wt=>Wt.outerContainer).bind(nr.getHeader),ye=()=>St.fromOption(g.dialogUi.get().map(Wt=>Wt.sink),"UI has not been rendered"),he=()=>St.fromOption(g.popupUi.get().map(Wt=>Wt.sink),"(popup) UI has not been rendered"),Ue=g.lazyGetInOuterOrDie("anchor bar",ce.getOpt),Ze=g.lazyGetInOuterOrDie("toolbar",nr.getToolbar),kt=g.lazyGetInOuterOrDie("throbber",nr.getThrobber),st=IH({popup:he,dialog:ye},t,Ue),Dt=()=>{const Wt={attributes:{[gv]:V?qd.BottomToTop:qd.TopToBottom}},Pn=nr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:st.popup,onEscape:()=>{t.focus()}}),ao=nr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:st.popup.shared.getSink,providers:st.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Uk=>{ML(t,Uk)},type:X,lazyToolbar:Ze,lazyHeader:()=>Te().getOrDie("Could not find header element"),...Wt}),Mo=nr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:st.popup.shared.providers,onEscape:()=>{t.focus()},type:X}),ka=qw(t),as=Px(t),Gl=Bx(t),Jr=Nx(t),wd=hn(),lm=ka||as||Gl,Jg=()=>ka?[Mo]:as?[ao]:[],JC=Jr?[wd,Pn]:[Pn];return nr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(lm?[]:["tox-editor-header--empty"]),...Wt},components:Vt([Gl?JC:[],Jg(),np(t)?[]:[ce.asSpec()]]),sticky:Kw(t),editor:t,sharedBackstage:st.popup.shared})},hn=()=>nr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ro=()=>{const Wt=nr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Pn=nr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Wt,Pn]}},pn=()=>{const Wt=dO(t),Pn=es(Ws(),Wt)&&Qe(Wt,"display")==="grid",ao={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{...ku.isRtl()?{dir:"rtl"}:{}}},behaviours:vt([Ba.config({useFixed:()=>d.isDocked(Te)})])},Mo={dom:{styles:{width:document.body.clientWidth+"px"}},events:Js([et(rg(),Gl=>{Kt(Gl.element,"width",document.body.clientWidth+"px")})])},ka=cc($s(ao,Pn?Mo:{})),as=hA(ka);return y.set(as),{sink:ka,mothership:as}},xo=()=>{const Wt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{...ku.isRtl()?{dir:"rtl"}:{}}},behaviours:vt([Ba.config({useFixed:()=>d.isDocked(Te),getBounds:()=>s.getPopupSinkBounds()})])},Pn=cc(Wt),ao=hA(Pn);return x.set(ao),{sink:Pn,mothership:ao}},Qn=()=>{const Wt=Dt(),Pn=Ro(),ao=nr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:st.popup}),Mo=nr.parts.viewWrapper({backstage:st.popup}),ka=OR(t)&&!a?O.some(AU(t,st.popup.shared.providers)):O.none(),as=Vt([V?[]:[Wt],a?[]:[Pn],V?[Wt]:[]]),Gl=nr.parts.editorContainer({components:Vt([as,a?[]:ka.toArray()])}),Jr=Lx(t),wd={role:"application",...ku.isRtl()?{dir:"rtl"}:{},...Jr?{"aria-hidden":"true"}:{}},lm=cc(nr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(V?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...Jr?{opacity:"0",border:"0"}:{}},attributes:wd},components:[Gl,...a?[]:[Mo],ao],behaviours:vt([mc(),Dn.config({disableClass:"tox-tinymce--disabled"}),Cn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Jg=hA(lm);return p.set(Jg),{mothership:Jg,outerContainer:lm}},To=Wt=>{const Pn=hD(o9(t)),ao=hD(cI(t));return t.inline||(Cd("div","width",ao)&&Kt(Wt.element,"width",ao),Cd("div","height",Pn)?Kt(Wt.element,"height",Pn):Kt(Wt.element,"height","400px")),Pn},Un=Wt=>{t.addShortcut("alt+F9","focus menubar",()=>{nr.focusMenubar(Wt)}),t.addShortcut("alt+F10","focus toolbar",()=>{nr.focusToolbar(Wt)}),t.addCommand("ToggleToolbarDrawer",(Pn,ao)=>{ao!=null&&ao.skipFocus?nr.toggleToolbarDrawerWithoutFocusing(Wt):nr.toggleToolbarDrawer(Wt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>nr.isToolbarDrawerToggled(Wt))},Ss=Wt=>{const{mainUi:Pn,popupUi:ao,uiMotherships:Mo}=Wt;qt(aO(t),(xb,t3)=>{t.ui.registry.addGroupToolbarButton(t3,xb)});const{buttons:ka,menuItems:as,contextToolbars:Gl,sidebars:Jr,views:wd}=t.ui.registry.getAll(),lm=Ix(t),Jg={menuItems:as,menus:BR(t),menubar:SR(t),toolbar:lm.getOrThunk(()=>Rx(t)),allowToolbarGroups:X===Eu.floating,buttons:ka,sidebar:Jr,views:wd};Un(Pn.outerContainer),FH(t,Pn.mothership,Mo),d.setup(t,st.popup.shared,Te),B9(t,st.popup),Y9(t,st.popup.shared.getSink,st.popup),vV(t),RV(t,kt,st.popup.shared),w9(t,Gl,ao.sink,{backstage:st.popup}),kU(t,ao.sink);const JC=t.getElement(),Uk=To(Pn.outerContainer),G0={targetNode:JC,height:Uk};return l.render(t,Wt,Jg,st.popup,G0)},Mt=Wt=>(x.set(Wt.mothership),Wt),fn=()=>{const Wt=Qn(),Pn=pn(),ao=Jd(t)?xo():Mt(Pn);g.dialogUi.set(Pn),g.popupUi.set(ao),g.mainUi.set(Wt);const Mo={popupUi:ao,dialogUi:Pn,mainUi:Wt,uiMotherships:g.getUiMotherships()};return Ss(Mo)};return{popups:{backstage:st.popup,getMothership:()=>ZD("popups",x)},dialogs:{backstage:st.dialog,getMothership:()=>ZD("dialogs",y)},renderUI:fn}},c5=(t,s)=>{const a=O.from(jr(t,"id")).fold(()=>{const l=nn("dialog-describe");return Vn(s,"id",l),l},ft);Vn(t,"aria-describedby",a)},DU=(t,s)=>{const a=$(t,"id").fold(()=>{const l=nn("dialog-label");return Vn(s,"id",l),l},ft);Vn(t,"aria-labelledby",a)},RU=q([Je("lazySink"),rs("dragBlockClass"),Ca("getBounds",de),xe("useTabstopAt",jt),xe("firstTabstop",0),xe("eventOrder",{}),ic("modalBehaviours",[Cn]),Ur("onExecute"),e1("onEscape")]),jD={sketch:ft},l5=q([Di({name:"draghandle",overrides:(t,s)=>({behaviours:vt([gb.config({mode:"mouse",getTarget:a=>Ul(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),uc({schema:[Je("dom")],name:"title"}),uc({factory:jD,schema:[Je("dom")],name:"close"}),uc({factory:jD,schema:[Je("dom")],name:"body"}),Di({factory:jD,schema:[Je("dom")],name:"footer"}),Su({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[xe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),xe("components",[])],name:"blocker"})]),i5=(t,s,a,l)=>{const d=Cs(),g=V=>{d.set(V);const X=t.lazySink(V).getOrDie(),ce=l.blocker(),Te=X.getSystem().build({...ce,components:ce.components.concat([zl(V)]),behaviours:vt([$n.config({}),ro("dialog-blocker-events",[yh(df(),()=>{Cn.focusIn(V)})])])});Kd(X,Te),Cn.focusIn(V)},p=V=>{d.clear(),ra(V.element).each(X=>{V.getSystem().getByDom(X).each(ce=>{Yd(ce)})})},y=V=>nd(V,t,"body"),x=V=>nd(V,t,"footer"),_=(V,X)=>{zf.block(V,X)},D=V=>{zf.unblock(V)},B=nn("modal-events"),I={...t.eventOrder,[Fd()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:y,getFooter:x,setIdle:D,setBusy:_},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:$a(t.modalBehaviours,[zn.config({}),Cn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),zf.config({getRoot:d.get}),ro(B,[Fr(V=>{DU(V.element,nd(V,t,"title").element),c5(V.element,nd(V,t,"body").element)})])])}},Pa=ma({name:"ModalDialog",configFields:RU(),partFields:l5(),factory:i5,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),MU=ze([xa,op].concat(K1)),NU=bm,GD=[eT("button"),Qd,ni("align","end",["start","end"]),Jw,cd,fl("buttonType",["primary","secondary"])],qD=[...GD,Hg],KD=[du("type",["submit","cancel","custom"]),...qD],BU=[du("type",["menu"]),ap,Jx,Qd,Ol("items",MU),...GD],$U=[...GD,du("type",["togglebutton"]),Qr("tooltip"),Xx,ap,Fc("active",!1)],YD=dl("type",{submit:KD,cancel:KD,custom:KD,menu:BU,togglebutton:$U}),XD=[xa,Hg,du("level",["info","warn","error","success"]),Xx,xe("url","")],PU=ze(XD),u5=t=>[xa,t],IU=[xa,Hg,cd,eT("button"),Qd,oL,fl("buttonType",["primary","secondary","toolbar"]),Jw],FU=ze(IU),vb=[xa,op],qm=vb.concat([xO]),LU=vb.concat([wO,cd]),yb=ze(LU),d5=bm,HU=qm.concat([o0("auto")]),Pk=ze(HU),L0=$p([j1,Hg,Xx]),Ik=qm.concat([Sc("storageKey","default")]),m5=ze(Ik),Fk=Va,Lk=ze(qm),f5=Va,g5=vb.concat([Sc("tag","textarea"),Qr("scriptId"),Qr("scriptUrl"),ny("settings",void 0)]),VU=vb.concat([Sc("tag","textarea"),Ti("init")]),zU=gr(t=>oo("customeditor.old",il(VU),t).orThunk(()=>oo("customeditor.new",il(g5),t))),Sp=Va,UU=ze(qm),h5=ch(),H0=t=>[xa,eg("columns"),t],Hk=[xa,Qr("html"),ni("presets","presentation",["presentation","document"])],p5=ze(Hk),WU=qm.concat([Fc("sandboxed",!0),Fc("transparent",!0)]),ZU=ze(WU),jU=Va,GU=ze(vb.concat([ea("height")])),V0=ze([Qr("url"),tg("zoom"),tg("cachedWidth"),tg("cachedHeight")]),CZ=qm.concat([ea("inputMode"),ea("placeholder"),Fc("maximized",!1),cd]),qU=ze(CZ),KU=Va,SZ=t=>[xa,wO,t],YU=[Hg,j1],XU=[Hg,Ol("items",ti("items",()=>z0))],z0=ei([ze(YU),ze(XU)]),JU=qm.concat([Ol("items",z0),cd]),QU=ze(JU),b5=Va,eW=qm.concat([Mb("items",[Hg,j1]),lf("size",1),cd]),xZ=ze(eW),e=Va,n=qm.concat([Fc("constrain",!0),cd]),o=ze(n),r=ze([Qr("width"),Qr("height")]),c=vb.concat([wO,lf("min",0),lf("max",0)]),u=ze(c),f=xi,b=[xa,Ol("header",Va),Ol("cells",zi(Va))],w=ze(b),k=qm.concat([ea("placeholder"),Fc("maximized",!1),cd]),N=ze(k),R=Va,L=[du("type",["directory","leaf"]),CO,Qr("id"),mu("menu",tP)],te=ze(L),j=L.concat([Ol("children",ti("children",()=>Ui("type",{directory:ee,leaf:te})))]),ee=ze(j),ve=Ui("type",{directory:ee,leaf:te}),ge=[xa,Ol("items",ve),vm("onLeafAction")],we=ze(ge),ke=qm.concat([ni("filetype","file",["image","media","file"]),cd]),Ke=ze(ke),Ot=ze([j1,Qx]),yt=t=>ps("items","items",la(),zi(gr(s=>oo(`Checking item of ${t}`,Me,s).fold(a=>St.error(_l(a)),a=>St.value(a))))),Me=ia(()=>Ui("type",{alertbanner:PU,bar:ze(u5(yt("bar"))),button:FU,checkbox:yb,colorinput:m5,colorpicker:Lk,dropzone:UU,grid:ze(H0(yt("grid"))),iframe:ZU,input:qU,listbox:QU,selectbox:xZ,sizeinput:o,slider:u,textarea:N,urlinput:Ke,customeditor:zU,htmlpanel:p5,imagepreview:GU,collection:Pk,label:ze(SZ(yt("label"))),table:w,tree:we,panel:Ut})),Ne=[xa,xe("classes",[]),Ol("items",Me)],Ut=ze(Ne),bn=[eT("tab"),CO,Ol("items",Me)],Rn=[xa,Mb("tabs",bn)],co=ze(Rn),Do=qD,vs=YD,Us=ze([Qr("title"),ml("body",Ui("type",{panel:Ut,tabpanel:co})),Sc("size","normal"),Ol("buttons",vs),xe("initialData",{}),Ca("onAction",G),Ca("onChange",G),Ca("onSubmit",G),Ca("onClose",G),Ca("onCancel",G),Ca("onTabChange",G)]),oa=t=>oo("dialog",Us,t),yl=ze([du("type",["cancel","custom"]),...Do]),fc=ze([Qr("title"),Qr("url"),tg("height"),tg("width"),ng("buttons",yl),Ca("onAction",G),Ca("onCancel",G),Ca("onClose",G),Ca("onMessage",G)]),wt=t=>oo("dialog",fc,t),ln=t=>Zt(t)?[t].concat(De(Mr(t),ln)):vn(t)?De(t,ln):[],Ko=t=>_t(t.type)&&_t(t.name),Ft={checkbox:d5,colorinput:Fk,colorpicker:f5,dropzone:h5,input:KU,iframe:jU,imagepreview:V0,selectbox:e,sizeinput:r,slider:f,listbox:b5,size:r,textarea:R,urlinput:Ot,customeditor:Sp,collection:L0,togglemenuitem:NU},An=t=>O.from(Ft[t.type]),Nn=t=>Fn(ln(t),Ko),Lt=t=>{const s=Nn(t),a=De(s,l=>An(l).fold(()=>[],d=>[ml(l.name,d)]));return ze(a)},yo=t=>{var s;const a=Vl(oa(t)),l=Lt(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:d}},io={open:(t,s)=>{const a=yo(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Vl(wt(s));return t(a)},redial:t=>yo(t)};var br=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,d)=>{t.updateState.each(g=>{const p=g(l,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?F3:I3)(l,p)})};return Js([et(Ir(),(l,d)=>{const g=d;if(!g.universal){const p=t.channel;po(g.channels,p)&&a(l,g.data)}}),Fr((l,d)=>{t.initialData.each(g=>{a(l,g)})})])}}),ns=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Ta=[Je("channel"),rs("renderComponents"),rs("updateState"),rs("initialData"),Fc("reuseDom",!0)],Xr=Object.freeze({__proto__:null,init:()=>{const t=S(O.none()),s=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Es=Ec({fields:Ta,name:"reflecting",active:br,apis:ns,state:Xr}),vr=t=>{const s=[],a={};return Ye(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?St.error(s):St.value(a)},Ia=(t,s,a)=>{const l=bs(p0.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:_e(t.items,g=>h4(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:vt([Cn.config({mode:"acyclic",useTabstopAt:Pe(CC)}),tu.memento(l),Du.memento(l,{postprocess:d=>vr(d).fold(g=>(console.error(g),{}),ft)})])}},gd=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Cx(t.action),behaviours:$a(t.tabButtonBehaviours,[$n.config({}),Cn.config({mode:"execution",useSpace:!0,useEnter:!0}),zt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),wl=Kr({name:"TabButton",configFields:[xe("uid",void 0),Je("value"),ps("dom","dom",Bd(()=>({attributes:{role:"tab",id:nn("aria"),"aria-selected":"false"}})),oc()),rs("action"),xe("domModification",{}),ic("tabButtonBehaviours",[$n,Cn,zt]),Je("view")],factory:gd}),Km=q([Je("tabs"),Je("dom"),xe("clickToDismiss",!1),ic("tabbarBehaviours",[qo,Cn]),mg(["tabClass","selectedClass"])]),Nu=Af({factory:wl,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{qo.dehighlight(l,d),xn(l,a2(),{tabbar:l,button:d})},a=(l,d)=>{qo.highlight(l,d),xn(l,cy(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=qo.isHighlighted(d,l);(()=>g&&t.clickToDismiss?s:g?G:a)()(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),wb=q([Nu]),Cb=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:$a(t.tabbarBehaviours,[qo.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Vn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Vn(g.element,"aria-selected","false")}}),Cn.config({mode:"flow",getInitial:d=>qo.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),rm=ma({name:"Tabbar",configFields:Km(),partFields:wb(),factory:Cb}),am=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:$a(t.tabviewBehaviours,[zn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),qa=Kr({name:"Tabview",configFields:[ic("tabviewBehaviours",[zn])],factory:am}),hd=q([xe("selectFirst",!0),Ao("onChangeTab"),Ao("onDismissTab"),xe("tabs",[]),ic("tabSectionBehaviours",[])]),Ym=uc({factory:rm,schema:[Je("dom"),Wu("markers",[Je("tabClass"),Je("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),pd=uc({factory:qa,name:"tabview"}),bd=q([Ym,pd]),Uf=(t,s,a,l)=>{const d=p=>{const y=zt.getValue(p);zs(p,t,"tabview").each(x=>{Tt(t.tabs,D=>D.value===y).each(D=>{const B=D.view();$(p.element,"id").each(I=>{Vn(x.element,"aria-labelledby",I)}),zn.set(x,B),t.onChangeTab(x,p,B)})})},g=(p,y)=>{zs(p,t,"tabbar").each(x=>{y(x).each(Ld)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ki(t.tabSectionBehaviours),events:Js(Vt([t.selectFirst?[Fr((p,y)=>{g(p,qo.getFirst)})]:[],[et(cy(),(p,y)=>{const x=y.event.button;d(x)}),et(a2(),(p,y)=>{const x=y.event.button;t.onDismissTab(p,x)})]])),apis:{getViewItems:p=>zs(p,t,"tabview").map(y=>zn.contents(y)).getOr([]),showTab:(p,y)=>{g(p,_=>{const D=qo.getCandidates(_);return Tt(D,I=>zt.getValue(I)===y).filter(I=>!qo.isHighlighted(_,I))})}}}},gc=ma({name:"TabSection",configFields:hd(),partFields:bd(),factory:Uf,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Yg=(t,s,a)=>_e(t,(l,d)=>{zn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return zn.set(a,[]),g.height}),Wf=t=>Ms(_a(t,(s,a)=>s>a?-1:s<a?1:0)),cm=(t,s,a)=>{const l=Yl(t).dom,d=Ul(t,".tox-dialog-wrap").getOr(t),g=Qe(d,"position")==="fixed";let p;g?p=Math.max(l.clientHeight,window.innerHeight):p=Math.max(l.offsetHeight,l.scrollHeight);const y=Le(s),_=s.dom.offsetLeft>=a.dom.offsetLeft+ca(a)?Math.max(Le(a),y):y,D=parseInt(Qe(t,"margin-top"),10)||0,B=parseInt(Qe(t,"margin-bottom"),10)||0,V=Le(t)+D+B-_;return p-V},xp=(t,s)=>{Ms(t).each(a=>gc.showTab(s,a.value))},U0=(t,s)=>{Kt(t,"height",s+"px"),Kt(t,"flex-basis",s+"px")},W0=(t,s,a)=>{Ul(t,'[role="dialog"]').each(l=>{_r(l,'[role="tablist"]').each(d=>{a.get().map(g=>(Kt(s,"height","0"),Kt(s,"flex-basis","0"),Math.min(g,cm(l,s,d)))).each(g=>{U0(s,g)})})})},Z0=t=>_r(t,'[role="tabpanel"]'),JD=t=>{const s=Cs();return{extraEvents:[Fr(d=>{const g=d.element;Z0(g).each(p=>{Kt(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(y=>{const x=Yg(t,p,y);Wf(x).fold(s.clear,s.set)}),W0(g,p,s),mo(p,"visibility"),xp(t,d),requestAnimationFrame(()=>{W0(g,p,s)})})}),et(rg(),d=>{const g=d.element;Z0(g).each(p=>{W0(g,p,s)})}),et(xN,(d,g)=>{const p=d.element;Z0(p).each(y=>{const x=Gd($e(y));Kt(y,"visibility","hidden");const _=Ys(y,"height").map(I=>parseInt(I,10));mo(y,"height"),mo(y,"flex-basis");const D=y.dom.getBoundingClientRect().height;_.forall(I=>D>I)?(s.set(D),W0(p,y,s)):_.each(I=>{U0(y,I)}),mo(y,"visibility"),x.each(pu)})})],selectFirst:!1}},Vk="send-data-to-section",QD="send-data-to-view",Xm=(t,s,a)=>{const l=S({}),d=_=>{const D=zt.getValue(_),B=vr(D).getOr({}),I=l.get(),V=$s(I,B);l.set(V)},g=_=>{const D=l.get();zt.setValue(_,D)},p=S(null),y=_e(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Er(a.shared.providers.translate(_.title))],view:()=>[p0.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:_e(_.items,B=>h4(D,B,s,a)),formBehaviours:vt([Cn.config({mode:"acyclic",useTabstopAt:Pe(CC)}),ro("TabView.form.events",[Fr(g),Al(d)]),ua.config({channels:ts([{key:Vk,value:{onReceive:d}},{key:QD,value:{onReceive:g}}])})])}))]})),x=JD(y);return gc.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,B)=>{const I=zt.getValue(D);xn(_,SN,{name:I,oldName:p.get()}),p.set(I)},tabs:y,components:[gc.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[rm.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:vt([Yr.config({})])}),gc.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:vt([ro("tabpanel",x.extraEvents),Cn.config({mode:"acyclic"}),So.config({find:_=>Ms(gc.getViewItems(_))}),Du.withComp(O.none(),_=>(_.getSystem().broadcastOn([Vk],{}),l.get()),(_,D)=>{l.set(D),_.getSystem().broadcastOn([QD],{})})])})},Tp=nn("update-dialog"),Ee=nn("update-title"),Oe=nn("update-body"),Ct=nn("update-footer"),ut=nn("body-send-message"),Tn=(t,s,a,l,d)=>{const g=x=>{const _=x.body;switch(_.type){case"tabpanel":return[Xm(_,x.initialData,l)];default:return[Ia(_,x.initialData,l)]}},p=(x,_)=>O.some({isTabPanel:()=>_.body.type==="tabpanel"}),y={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?y:{}}},components:[],behaviours:vt([tu.childAt(0),Es.config({channel:`${Oe}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},Yo=(t,s,a,l,d)=>Tn(t,s,O.some(a),l,d),lr=(t,s,a)=>{const l=Tn(t,s,O.none(),a,!1);return Pa.parts.body(l)},ir=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[dB({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:vt([Yr.config({}),$n.config({})])})]}],behaviours:vt([Cn.config({mode:"acyclic",useTabstopAt:Pe(CC)})])};return Pa.parts.body(s)};function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},vd(t)}function Sb(t,s){return Sb=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},Sb(t,s)}function v5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function YC(t,s,a){return v5()?YC=Reflect.construct:YC=function(d,g,p){var y=[null];y.push.apply(y,g);var x=Function.bind.apply(d,y),_=new x;return p&&Sb(_,p.prototype),_},YC.apply(null,arguments)}function Jm(t){return ho(t)||Fe(t)||mn(t)||fa()}function ho(t){if(Array.isArray(t))return Gn(t)}function Fe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mn(t,s){if(t){if(typeof t=="string")return Gn(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Gn(t,s)}}function Gn(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,l=new Array(s);a<s;a++)l[a]=t[a];return l}function fa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Bu=Object.hasOwnProperty,gi=Object.setPrototypeOf,hi=Object.isFrozen,zk=Object.getPrototypeOf,pi=Object.getOwnPropertyDescriptor,$i=Object.freeze,Zf=Object.seal,tW=Object.create,nW=typeof Reflect<"u"&&Reflect,y5=nW.apply,oW=nW.construct;y5||(y5=function(s,a,l){return s.apply(a,l)}),$i||($i=function(s){return s}),Zf||(Zf=function(s){return s}),oW||(oW=function(s,a){return YC(s,Jm(a))});var Sj=Xg(Array.prototype.forEach),xj=Xg(Array.prototype.pop),e3=Xg(Array.prototype.push),w5=Xg(String.prototype.toLowerCase),Tj=Xg(String.prototype.match),j0=Xg(String.prototype.replace),kj=Xg(String.prototype.indexOf),Ej=Xg(String.prototype.trim),yd=Xg(RegExp.prototype.test),sW=_j(TypeError);function Xg(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return y5(t,s,l)}}function _j(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return oW(t,a)}}function sr(t,s){gi&&gi(t,null);for(var a=s.length;a--;){var l=s[a];if(typeof l=="string"){var d=w5(l);d!==l&&(hi(s)||(s[a]=d),l=d)}t[l]=!0}return t}function XC(t){var s=tW(null),a;for(a in t)y5(Bu,t,[a])&&(s[a]=t[a]);return s}function C5(t,s){for(;t!==null;){var a=pi(t,s);if(a){if(a.get)return Xg(a.get);if(typeof a.value=="function")return Xg(a.value)}t=zk(t)}function l(d){return console.warn("fallback value for",d),null}return l}var TZ=$i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rW=$i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),aW=$i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Oj=$i(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cW=$i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Aj=$i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kZ=$i(["#text"]),EZ=$i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),lW=$i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_Z=$i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),S5=$i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Dj=Zf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Rj=Zf(/<%[\w\W]*|[\w\W]*%>/gm),Mj=Zf(/^data-[\-\w.\u00B7-\uFFFF]/),Nj=Zf(/^aria-[\-\w]+$/),Bj=Zf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$j=Zf(/^(?:\w+script|data):/i),Pj=Zf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ij=Zf(/^html$/i),Fj=function(){return typeof window>"u"?null:window},Lj=function(s,a){if(vd(s)!=="object"||typeof s.createPolicy!="function")return null;var l=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(l=a.currentScript.getAttribute(d));var g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML:function(y){return y}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function OZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fj(),s=function(Ve){return OZ(Ve)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,l=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,y=t.Element,x=t.NodeFilter,_=t.NamedNodeMap,D=_===void 0?t.NamedNodeMap||t.MozNamedAttrMap:_,B=t.HTMLFormElement,I=t.DOMParser,V=t.trustedTypes,X=y.prototype,ce=C5(X,"cloneNode"),Te=C5(X,"nextSibling"),ye=C5(X,"childNodes"),he=C5(X,"parentNode");if(typeof g=="function"){var Ue=l.createElement("template");Ue.content&&Ue.content.ownerDocument&&(l=Ue.content.ownerDocument)}var Ze=Lj(V,a),kt=Ze?Ze.createHTML(""):"",st=l,Dt=st.implementation,hn=st.createNodeIterator,Ro=st.createDocumentFragment,pn=st.getElementsByTagName,xo=a.importNode,Qn={};try{Qn=XC(l).documentMode?l.documentMode:{}}catch{}var To={};s.isSupported=typeof he=="function"&&Dt&&typeof Dt.createHTMLDocument<"u"&&Qn!==9;var Un=Dj,Ss=Rj,Mt=Mj,fn=Nj,Wt=$j,Pn=Pj,ao=Bj,Mo=null,ka=sr({},[].concat(Jm(TZ),Jm(rW),Jm(aW),Jm(cW),Jm(kZ))),as=null,Gl=sr({},[].concat(Jm(EZ),Jm(lW),Jm(_Z),Jm(S5))),Jr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),wd=null,lm=null,Jg=!0,JC=!0,Uk=!1,G0=!1,xb=!1,t3=!1,fW=!1,Wk=!1,x5=!1,T5=!1,KZ=!0,gW=!0,n3=!1,Zk={},jk=null,YZ=sr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),XZ=null,JZ=sr({},["audio","video","img","source","image","track"]),hW=null,QZ=sr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pW="http://www.w3.org/1998/Math/MathML",bW="http://www.w3.org/2000/svg",q0="http://www.w3.org/1999/xhtml",k5=q0,vW=!1,Gk,mG=["application/xhtml+xml","text/html"],fG="text/html",QC,qk=null,gG=l.createElement("form"),ej=function(Ve){return Ve instanceof RegExp||Ve instanceof Function},yW=function(Ve){qk&&qk===Ve||((!Ve||vd(Ve)!=="object")&&(Ve={}),Ve=XC(Ve),Mo="ALLOWED_TAGS"in Ve?sr({},Ve.ALLOWED_TAGS):ka,as="ALLOWED_ATTR"in Ve?sr({},Ve.ALLOWED_ATTR):Gl,hW="ADD_URI_SAFE_ATTR"in Ve?sr(XC(QZ),Ve.ADD_URI_SAFE_ATTR):QZ,XZ="ADD_DATA_URI_TAGS"in Ve?sr(XC(JZ),Ve.ADD_DATA_URI_TAGS):JZ,jk="FORBID_CONTENTS"in Ve?sr({},Ve.FORBID_CONTENTS):YZ,wd="FORBID_TAGS"in Ve?sr({},Ve.FORBID_TAGS):{},lm="FORBID_ATTR"in Ve?sr({},Ve.FORBID_ATTR):{},Zk="USE_PROFILES"in Ve?Ve.USE_PROFILES:!1,Jg=Ve.ALLOW_ARIA_ATTR!==!1,JC=Ve.ALLOW_DATA_ATTR!==!1,Uk=Ve.ALLOW_UNKNOWN_PROTOCOLS||!1,G0=Ve.SAFE_FOR_TEMPLATES||!1,xb=Ve.WHOLE_DOCUMENT||!1,Wk=Ve.RETURN_DOM||!1,x5=Ve.RETURN_DOM_FRAGMENT||!1,T5=Ve.RETURN_TRUSTED_TYPE||!1,fW=Ve.FORCE_BODY||!1,KZ=Ve.SANITIZE_DOM!==!1,gW=Ve.KEEP_CONTENT!==!1,n3=Ve.IN_PLACE||!1,ao=Ve.ALLOWED_URI_REGEXP||ao,k5=Ve.NAMESPACE||q0,Ve.CUSTOM_ELEMENT_HANDLING&&ej(Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Jr.tagNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&ej(Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Jr.attributeNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&typeof Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Jr.allowCustomizedBuiltInElements=Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Gk=mG.indexOf(Ve.PARSER_MEDIA_TYPE)===-1?Gk=fG:Gk=Ve.PARSER_MEDIA_TYPE,QC=Gk==="application/xhtml+xml"?function(gn){return gn}:w5,G0&&(JC=!1),x5&&(Wk=!0),Zk&&(Mo=sr({},Jm(kZ)),as=[],Zk.html===!0&&(sr(Mo,TZ),sr(as,EZ)),Zk.svg===!0&&(sr(Mo,rW),sr(as,lW),sr(as,S5)),Zk.svgFilters===!0&&(sr(Mo,aW),sr(as,lW),sr(as,S5)),Zk.mathMl===!0&&(sr(Mo,cW),sr(as,_Z),sr(as,S5))),Ve.ADD_TAGS&&(Mo===ka&&(Mo=XC(Mo)),sr(Mo,Ve.ADD_TAGS)),Ve.ADD_ATTR&&(as===Gl&&(as=XC(as)),sr(as,Ve.ADD_ATTR)),Ve.ADD_URI_SAFE_ATTR&&sr(hW,Ve.ADD_URI_SAFE_ATTR),Ve.FORBID_CONTENTS&&(jk===YZ&&(jk=XC(jk)),sr(jk,Ve.FORBID_CONTENTS)),gW&&(Mo["#text"]=!0),xb&&sr(Mo,["html","head","body"]),Mo.table&&(sr(Mo,["tbody"]),delete wd.tbody),$i&&$i(Ve),qk=Ve)},tj=sr({},["mi","mo","mn","ms","mtext"]),nj=sr({},["foreignobject","desc","title","annotation-xml"]),hG=sr({},["title","style","font","a","script"]),E5=sr({},rW);sr(E5,aW),sr(E5,Oj);var wW=sr({},cW);sr(wW,Aj);var pG=function(Ve){var gn=he(Ve);(!gn||!gn.tagName)&&(gn={namespaceURI:q0,tagName:"template"});var eo=w5(Ve.tagName),Fa=w5(gn.tagName);return Ve.namespaceURI===bW?gn.namespaceURI===q0?eo==="svg":gn.namespaceURI===pW?eo==="svg"&&(Fa==="annotation-xml"||tj[Fa]):!!E5[eo]:Ve.namespaceURI===pW?gn.namespaceURI===q0?eo==="math":gn.namespaceURI===bW?eo==="math"&&nj[Fa]:!!wW[eo]:Ve.namespaceURI===q0?gn.namespaceURI===bW&&!nj[Fa]||gn.namespaceURI===pW&&!tj[Fa]?!1:!wW[eo]&&(hG[eo]||!E5[eo]):!1},Tb=function(Ve){e3(s.removed,{element:Ve});try{Ve.parentNode.removeChild(Ve)}catch{try{Ve.outerHTML=kt}catch{Ve.remove()}}},_5=function(Ve,gn){try{e3(s.removed,{attribute:gn.getAttributeNode(Ve),from:gn})}catch{e3(s.removed,{attribute:null,from:gn})}if(gn.removeAttribute(Ve),Ve==="is"&&!as[Ve])if(Wk||x5)try{Tb(gn)}catch{}else try{gn.setAttribute(Ve,"")}catch{}},oj=function(Ve){var gn,eo;if(fW)Ve="<remove></remove>"+Ve;else{var Fa=Tj(Ve,/^[\r\n\t ]+/);eo=Fa&&Fa[0]}Gk==="application/xhtml+xml"&&(Ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ve+"</body></html>");var im=Ze?Ze.createHTML(Ve):Ve;if(k5===q0)try{gn=new I().parseFromString(im,Gk)}catch{}if(!gn||!gn.documentElement){gn=Dt.createDocument(k5,"template",null);try{gn.documentElement.innerHTML=vW?"":im}catch{}}var $u=gn.body||gn.documentElement;return Ve&&eo&&$u.insertBefore(l.createTextNode(eo),$u.childNodes[0]||null),k5===q0?pn.call(gn,xb?"html":"body")[0]:xb?gn.documentElement:$u},sj=function(Ve){return hn.call(Ve.ownerDocument||Ve,Ve,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},bG=function(Ve){return Ve instanceof B&&(typeof Ve.nodeName!="string"||typeof Ve.textContent!="string"||typeof Ve.removeChild!="function"||!(Ve.attributes instanceof D)||typeof Ve.removeAttribute!="function"||typeof Ve.setAttribute!="function"||typeof Ve.namespaceURI!="string"||typeof Ve.insertBefore!="function")},o3=function(Ve){return vd(p)==="object"?Ve instanceof p:Ve&&vd(Ve)==="object"&&typeof Ve.nodeType=="number"&&typeof Ve.nodeName=="string"},kb=function(Ve,gn,eo){To[Ve]&&Sj(To[Ve],function(Fa){Fa.call(s,gn,eo,qk)})},rj=function(Ve){var gn;if(kb("beforeSanitizeElements",Ve,null),bG(Ve)||yd(/[\u0080-\uFFFF]/,Ve.nodeName))return Tb(Ve),!0;var eo=QC(Ve.nodeName);if(kb("uponSanitizeElement",Ve,{tagName:eo,allowedTags:Mo}),Ve.hasChildNodes()&&!o3(Ve.firstElementChild)&&(!o3(Ve.content)||!o3(Ve.content.firstElementChild))&&yd(/<[/\w]/g,Ve.innerHTML)&&yd(/<[/\w]/g,Ve.textContent)||eo==="select"&&yd(/<template/i,Ve.innerHTML))return Tb(Ve),!0;if(!Mo[eo]||wd[eo]){if(!wd[eo]&&cj(eo)&&(Jr.tagNameCheck instanceof RegExp&&yd(Jr.tagNameCheck,eo)||Jr.tagNameCheck instanceof Function&&Jr.tagNameCheck(eo)))return!1;if(gW&&!jk[eo]){var Fa=he(Ve)||Ve.parentNode,im=ye(Ve)||Ve.childNodes;if(im&&Fa)for(var $u=im.length,su=$u-1;su>=0;--su)Fa.insertBefore(ce(im[su],!0),Te(Ve))}return Tb(Ve),!0}return Ve instanceof y&&!pG(Ve)||(eo==="noscript"||eo==="noembed")&&yd(/<\/no(script|embed)/i,Ve.innerHTML)?(Tb(Ve),!0):(G0&&Ve.nodeType===3&&(gn=Ve.textContent,gn=j0(gn,Un," "),gn=j0(gn,Ss," "),Ve.textContent!==gn&&(e3(s.removed,{element:Ve.cloneNode()}),Ve.textContent=gn)),kb("afterSanitizeElements",Ve,null),!1)},aj=function(Ve,gn,eo){if(KZ&&(gn==="id"||gn==="name")&&(eo in l||eo in gG))return!1;if(!(JC&&!lm[gn]&&yd(Mt,gn))){if(!(Jg&&yd(fn,gn))){if(!as[gn]||lm[gn]){if(!(cj(Ve)&&(Jr.tagNameCheck instanceof RegExp&&yd(Jr.tagNameCheck,Ve)||Jr.tagNameCheck instanceof Function&&Jr.tagNameCheck(Ve))&&(Jr.attributeNameCheck instanceof RegExp&&yd(Jr.attributeNameCheck,gn)||Jr.attributeNameCheck instanceof Function&&Jr.attributeNameCheck(gn))||gn==="is"&&Jr.allowCustomizedBuiltInElements&&(Jr.tagNameCheck instanceof RegExp&&yd(Jr.tagNameCheck,eo)||Jr.tagNameCheck instanceof Function&&Jr.tagNameCheck(eo))))return!1}else if(!hW[gn]){if(!yd(ao,j0(eo,Pn,""))){if(!((gn==="src"||gn==="xlink:href"||gn==="href")&&Ve!=="script"&&kj(eo,"data:")===0&&XZ[Ve])){if(!(Uk&&!yd(Wt,j0(eo,Pn,"")))){if(eo)return!1}}}}}}return!0},cj=function(Ve){return Ve.indexOf("-")>0},lj=function(Ve){var gn,eo,Fa,im;kb("beforeSanitizeAttributes",Ve,null);var $u=Ve.attributes;if($u){var su={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:as};for(im=$u.length;im--;){gn=$u[im];var O5=gn,ru=O5.name,ij=O5.namespaceURI;eo=ru==="value"?gn.value:Ej(gn.value),Fa=QC(ru);var yG=eo;if(su.attrName=Fa,su.attrValue=eo,su.keepAttr=!0,su.forceKeepAttr=void 0,kb("uponSanitizeAttribute",Ve,su),eo=su.attrValue,!su.forceKeepAttr){if(!su.keepAttr){_5(ru,Ve);continue}if(yd(/\/>/i,eo)){_5(ru,Ve);continue}G0&&(eo=j0(eo,Un," "),eo=j0(eo,Ss," "));var wG=QC(Ve.nodeName);if(!aj(wG,Fa,eo)){_5(ru,Ve);continue}if(eo!==yG)try{ij?Ve.setAttributeNS(ij,ru,eo):Ve.setAttribute(ru,eo)}catch{_5(ru,Ve)}}}kb("afterSanitizeAttributes",Ve,null)}},vG=function ko(Ve){var gn,eo=sj(Ve);for(kb("beforeSanitizeShadowDOM",Ve,null);gn=eo.nextNode();)kb("uponSanitizeShadowNode",gn,null),!rj(gn)&&(gn.content instanceof d&&ko(gn.content),lj(gn));kb("afterSanitizeShadowDOM",Ve,null)};return s.sanitize=function(ko,Ve){var gn,eo,Fa,im,$u;if(vW=!ko,vW&&(ko="<!-->"),typeof ko!="string"&&!o3(ko)){if(typeof ko.toString!="function")throw sW("toString is not a function");if(ko=ko.toString(),typeof ko!="string")throw sW("dirty is not a string, aborting")}if(!s.isSupported){if(vd(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof ko=="string")return t.toStaticHTML(ko);if(o3(ko))return t.toStaticHTML(ko.outerHTML)}return ko}if(t3||yW(Ve),s.removed=[],typeof ko=="string"&&(n3=!1),n3){if(ko.nodeName){var su=QC(ko.nodeName);if(!Mo[su]||wd[su])throw sW("root node is forbidden and cannot be sanitized in-place")}}else if(ko instanceof p)gn=oj("<!---->"),eo=gn.ownerDocument.importNode(ko,!0),eo.nodeType===1&&eo.nodeName==="BODY"||eo.nodeName==="HTML"?gn=eo:gn.appendChild(eo);else{if(!Wk&&!G0&&!xb&&ko.indexOf("<")===-1)return Ze&&T5?Ze.createHTML(ko):ko;if(gn=oj(ko),!gn)return Wk?null:T5?kt:""}gn&&fW&&Tb(gn.firstChild);for(var O5=sj(n3?ko:gn);Fa=O5.nextNode();)Fa.nodeType===3&&Fa===im||rj(Fa)||(Fa.content instanceof d&&vG(Fa.content),lj(Fa),im=Fa);if(im=null,n3)return ko;if(Wk){if(x5)for($u=Ro.call(gn.ownerDocument);gn.firstChild;)$u.appendChild(gn.firstChild);else $u=gn;return as.shadowroot&&($u=xo.call(a,$u,!0)),$u}var ru=xb?gn.outerHTML:gn.innerHTML;return xb&&Mo["!doctype"]&&gn.ownerDocument&&gn.ownerDocument.doctype&&gn.ownerDocument.doctype.name&&yd(Ij,gn.ownerDocument.doctype.name)&&(ru="<!DOCTYPE "+gn.ownerDocument.doctype.name+`>
`+ru),G0&&(ru=j0(ru,Un," "),ru=j0(ru,Ss," ")),Ze&&T5?Ze.createHTML(ru):ru},s.setConfig=function(ko){yW(ko),t3=!0},s.clearConfig=function(){qk=null,t3=!1},s.isValidAttribute=function(ko,Ve,gn){qk||yW({});var eo=QC(ko),Fa=QC(Ve);return aj(eo,Fa,gn)},s.addHook=function(ko,Ve){typeof Ve=="function"&&(To[ko]=To[ko]||[],e3(To[ko],Ve))},s.removeHook=function(ko){if(To[ko])return xj(To[ko])},s.removeHooks=function(ko){To[ko]&&(To[ko]=[])},s.removeAllHooks=function(){To={}},s}var Hj=OZ();const Vj=t=>Hj().sanitize(t),zj=U1.deviceType.isTouch(),AZ=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),DZ=(t,s)=>Pa.parts.close(Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:vt([Yr.config({})])})),RZ=()=>Pa.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),MZ=(t,s)=>Pa.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:bp(`<p>${Vj(s.translate(t))}</p>`)}]}]}),NZ=t=>Pa.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),BZ=(t,s)=>[zm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),zm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],iW=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return Pa.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),O.some(!0)),useTabstopAt:g=>!CC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:bp(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:zj?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:vt([$n.config({}),ro("dialog-events",t.dialogEvents.concat([yh(df(),(g,p)=>{Cn.focusIn(g)})])),ro("scroll-lock",[Fr(()=>{Ma(Ws(),d)}),Al(()=>{Qs(Ws(),d)})]),...t.extraBehaviours]),eventOrder:{[hl()]:["dialog-events"],[Fd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ju()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},$Z=t=>Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:vt([Yr.config({})]),components:[rd("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{Go(s,ob)}}),PZ=(t,s,a,l)=>{const d=g=>[Er(l.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:vt([Es.config({channel:`${Ee}-${s}`,initialData:t,renderComponents:d})])}},IZ=()=>({dom:bp('<div class="tox-dialog__draghandle"></div>')}),Uj=(t,s,a,l)=>zm.sketch({dom:bp('<div class="tox-dialog__header"></div>'),components:[PZ(t,s,O.some(a),l),IZ(),$Z(l)],containerBehaviours:vt([gb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Yu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Wj=(t,s,a)=>{const l=Pa.parts.title(PZ(t,s,O.none(),a)),d=Pa.parts.draghandle(IZ()),g=Pa.parts.close($Z(a)),p=[l].concat(t.draggable?[d]:[]).concat([g]);return zm.sketch({dom:bp('<div class="tox-dialog__header"></div>'),components:p})},FZ=(t,s,a)=>Wj({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),LZ=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:bp('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),HZ=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{Pa.setBusy(t(),(d,g)=>LZ(l.message,g,s))},onUnblock:()=>{Pa.setIdle(t())}}),VZ=(t,s,a,l)=>{const d=(g,p)=>O.some(p);return cc(iW({...t,firstTabstop:1,lazySink:l.shared.getSink,extraBehaviours:[Es.config({channel:`${Tp}-${t.id}`,updateState:d,initialData:s}),Du.memory({}),...t.extraBehaviours],onEscape:g=>{Go(g,ob)},dialogEvents:a,eventOrder:{[Ir()]:[Es.name(),ua.name()],[Fd()]:["scroll-lock",Es.name(),"messages","dialog-events","alloy.base.behaviour"],[ju()]:["alloy.base.behaviour","dialog-events","messages",Es.name(),"scroll-lock"]}}))},uW=(t,s={})=>{const a=l=>{const d=_e(l.items,g=>{const p=ht(s,g.name).getOr(S(!1));return{...g,storage:p}});return{...l,items:d}};return _e(t,l=>l.type==="menu"?a(l):l)},zZ=t=>In(t,(s,a)=>a.type==="menu"?In(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),UZ=(t,s)=>[Up(df(),i7),t(dC,(a,l,d,g)=>{Gd($e(g.element)).fold(G,Ny),s.onClose(),l.onClose()}),t(ob,(a,l,d,g)=>{l.onCancel(a),Go(g,dC)}),et(vA,(a,l)=>s.onUnblock()),et(bA,(a,l)=>s.onBlock(l.event))],dW={initUrlDialog:(t,s)=>{const a=(d,g)=>et(d,(p,y)=>{l(p,(x,_)=>{g(t(),x,y.event,p)})}),l=(d,g)=>{Es.getState(d).get().each(p=>{g(p,d)})};return[...UZ(a,s),a(Bf,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const l=(g,p)=>et(g,(y,x)=>{d(y,(_,D)=>{p(t(),_,x.event,y)})}),d=(g,p)=>{Es.getState(g).get().each(y=>{p(y.internalDialog,g)})};return[...UZ(l,s),l(mC,(g,p)=>p.onSubmit(g)),l(Qi,(g,p,y)=>{p.onChange(g,{name:y.name})}),l(Bf,(g,p,y,x)=>{const _=()=>Cn.focusIn(x),D=V=>K(V,"disabled")||$(V,"aria-disabled").exists(X=>X==="true"),B=$e(x.element),I=Gd(B);p.onAction(g,{name:y.name,value:y.value}),Gd(B).fold(_,V=>{D(V)||I.exists(X=>sa(V,X)&&D(X))?_():a().toOptional().filter(X=>!sa(X.element,V)).each(_)})}),l(SN,(g,p,y)=>{p.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),Al(g=>{const p=t();zt.setValue(g,p.getData())})]}},Zj=(t,s)=>ZT(t,t.type,s),jj=(t,s,a)=>Tt(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),Gj=(t,s)=>{const a=s.map(y=>y.footerButtons).getOr([]),l=Hr(a,y=>y.align==="start"),d=(y,x)=>zm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:_e(x,_=>_.memento.asSpec())}),g=d("start",l.pass),p=d("end",l.fail);return[g,p]},WZ=(t,s,a)=>{const l=(d,g)=>{const p=_e(g.buttons,x=>{const _=bs(Zj(x,a));return{name:x.name,align:x.align,memento:_}}),y=x=>jj(d,p,x);return O.some({lookupByName:y,footerButtons:p})};return{dom:bp('<div class="tox-dialog__footer"></div>'),components:[],behaviours:vt([Es.config({channel:`${Ct}-${s}`,initialData:t,updateState:l,renderComponents:Gj})])}},qj=(t,s,a)=>WZ(t,s,a),ZZ=(t,s,a)=>Pa.parts.footer(WZ(t,s,a)),jZ=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=So.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return p0.getField(l,s).orThunk(()=>{const d=t.getFooter();return Es.getState(d).get().bind(p=>p.lookupByName(s))})}else return O.none()},Kj=(t,s)=>{const a=t.getRoot();return Es.getState(a).get().map(l=>Vl(oo("data",l.dataValidator,s))).getOr(s)},GZ=(t,s,a)=>{const l=X=>{const ce=t.getRoot();ce.getSystem().isConnected()&&X(ce)},V={getData:()=>{const X=t.getRoot(),ce=X.getSystem().isConnected()?t.getFormWrapper():X,Te=zt.getValue(ce),ye=qt(a,he=>he.get());return{...Te,...ye}},setData:X=>{l(ce=>{const Te=V.getData(),ye=$s(Te,X),he=Kj(t,ye),Ue=t.getFormWrapper();zt.setValue(Ue,he),Ye(a,(Ze,kt)=>{so(ye,kt)&&Ze.set(ye[kt])})})},setEnabled:(X,ce)=>{jZ(t,X).each(ce?Dn.enable:Dn.disable)},focus:X=>{jZ(t,X).each($n.focus)},block:X=>{if(!_t(X))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(ce=>{xn(ce,bA,{message:X})})},unblock:()=>{l(X=>{Go(X,vA)})},showTab:X=>{l(ce=>{const Te=t.getBody();Es.getState(Te).get().exists(he=>he.isTabPanel())&&So.getCurrent(Te).each(he=>{gc.showTab(he,X)})})},redial:X=>{l(ce=>{const Te=t.getId(),ye=s(X),he=uW(ye.internalDialog.buttons,a);ce.getSystem().broadcastOn([`${Tp}-${Te}`],ye),ce.getSystem().broadcastOn([`${Ee}-${Te}`],ye.internalDialog),ce.getSystem().broadcastOn([`${Oe}-${Te}`],ye.internalDialog),ce.getSystem().broadcastOn([`${Ct}-${Te}`],{...ye.internalDialog,buttons:he}),V.setData(ye.initialData)})},close:()=>{l(X=>{Go(X,dC)})},toggleFullscreen:t.toggleFullscreen};return V},Yj=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},Xj=(t,s,a)=>{const l=nn("dialog"),d=t.internalDialog,g=FZ(d.title,l,a),p=lr({body:d.body,initialData:d.initialData},l,a),y=uW(d.buttons),x=zZ(y),_=ZZ({buttons:y},l,a),D=dW.initDialog(()=>ce,HZ(()=>V,a.shared.providers,s),a.shared.getSink),B=Yj(d.size),I={id:l,header:g,body:p,footer:O.some(_),extraClasses:B,extraBehaviours:[],extraStyles:{}},V=VZ(I,t,D,a),X=(()=>{const Te=()=>{const he=Pa.getBody(V);return So.getCurrent(he).getOr(he)},ye=()=>{const he="tox-dialog--fullscreen",Ue=pe.fromDom(V.element.dom);Xc(Ue,he)?(Qs(Ue,he),hu(Ue,B)):(Jc(Ue,B),Ma(Ue,he))};return{getId:q(l),getRoot:q(V),getBody:()=>Pa.getBody(V),getFooter:()=>Pa.getFooter(V),getFormWrapper:Te,toggleFullscreen:ye}})(),ce=GZ(X,s.redial,x);return{dialog:V,instanceApi:ce}},Jj=(t,s,a,l)=>{const d=nn("dialog"),g=nn("dialog-label"),p=nn("dialog-content"),y=t.internalDialog,x=(Ue,Ze)=>O.some(Ze),_=bs(Uj({title:y.title,draggable:!0},d,g,a.shared.providers)),D=bs(Yo({body:y.body,initialData:y.initialData},d,p,a,l)),B=uW(y.buttons),I=zZ(B),V=bs(qj({buttons:B},d,a)),X=dW.initDialog(()=>he,{onBlock:Ue=>{zf.block(Te,(Ze,kt)=>LZ(Ue.message,kt,a.shared.providers))},onUnblock:()=>{zf.unblock(Te)},onClose:()=>s.closeWindow()},a.shared.getSink),ce="tox-dialog-inline",Te=cc({dom:{tag:"div",classes:["tox-dialog",ce],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:p}},eventOrder:{[Ir()]:[Es.name(),ua.name()],[hl()]:["execute-on-form"],[Fd()]:["reflecting","execute-on-form"]},behaviours:vt([Cn.config({mode:"cyclic",onEscape:Ue=>(Go(Ue,dC),O.some(!0)),useTabstopAt:Ue=>!CC(Ue)&&(Qa(Ue)!=="button"||jr(Ue,"disabled")!=="disabled"),firstTabstop:1}),Es.config({channel:`${Tp}-${d}`,updateState:x,initialData:t}),$n.config({}),ro("execute-on-form",X.concat([yh(df(),(Ue,Ze)=>{Cn.focusIn(Ue)})])),zf.config({getRoot:()=>O.some(Te)}),zn.config({}),Du.memory({})]),components:[_.asSpec(),D.asSpec(),V.asSpec()]}),ye=()=>{const Ue="tox-dialog--fullscreen",Ze=pe.fromDom(Te.element.dom);Om(Ze,[Ue])?(Jc(Ze,[Ue]),hu(Ze,[ce])):(Jc(Ze,[ce]),hu(Ze,[Ue]))},he=GZ({getId:q(d),getRoot:q(Te),getFooter:()=>V.get(Te),getBody:()=>D.get(Te),getFormWrapper:()=>{const Ue=D.get(Te);return So.getCurrent(Ue).getOr(Ue)},toggleFullscreen:ye},s.redial,I);return{dialog:Te,instanceApi:he}};var mW=tinymce.util.Tools.resolve("tinymce.util.URI");const Qj=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!_t(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{xn(y,bA,{message:p})})},unblock:()=>{s(p=>{Go(p,vA)})},close:()=>{s(p=>{Go(p,dC)})},sendMessage:p=>{s(y=>{y.getSystem().broadcastOn([ut],p)})}}},eG=["insertContent","setContent","execCommand","close","block","unblock"],qZ=t=>Zt(t)&&eG.indexOf(t.mceAction)!==-1,tG=t=>!qZ(t)&&Zt(t)&&so(t,"mceAction"),nG=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=Qt(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},oG=(t,s,a,l)=>{const d=nn("dialog"),g=FZ(t.title,d,l),p=ir(t),y=t.buttons.bind(he=>he.length===0?O.none():O.some(ZZ({buttons:he},d,l))),x=dW.initUrlDialog(()=>ye,HZ(()=>Te,l.shared.providers,s)),_={...t.height.fold(()=>({}),he=>({height:he+"px","max-height":he+"px"})),...t.width.fold(()=>({}),he=>({width:he+"px","max-width":he+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new mW(t.url,{base_uri:new mW(window.location.href)}),I=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,V=Xu(),X=[ro("messages",[Fr(()=>{const he=bl(pe.fromDom(window),"message",Ue=>{if(B.isSameOrigin(new mW(Ue.raw.origin))){const Ze=Ue.raw.data;qZ(Ze)?nG(a,ye,Ze):tG(Ze)&&t.onMessage(ye,Ze)}});V.set(he)}),Al(V.clear)]),ua.config({channels:{[ut]:{onReceive:(he,Ue)=>{_r(he.element,"iframe").each(Ze=>{const kt=Ze.dom.contentWindow;it(kt)&&kt.postMessage(Ue,I)})}}}})],Te=VZ({id:d,header:g,body:p,footer:y,extraClasses:D,extraBehaviours:X,extraStyles:_},t,x,l),ye=Qj(Te);return{dialog:Te,instanceApi:ye}},sG=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{Pa.hide(_),d()},p=bs(ZT({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),y=RZ(),x=DZ(g,s.providers),_=cc(iW({lazySink:()=>s.getSink(),header:AZ(y,x),body:MZ(l,s.providers),footer:O.some(NZ(BZ([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[et(ob,g)],eventOrder:{}}));Pa.show(_);const D=p.get(_);$n.focus(D)}}},rG=t=>{const s=t.shared;return{open:(l,d)=>{const g=I=>{Pa.hide(D),d(I)},p=bs(ZT({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),y=ZT({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),x=RZ(),_=DZ(()=>g(!1),s.providers),D=cc(iW({lazySink:()=>s.getSink(),header:AZ(x,_),body:MZ(l,s.providers),footer:O.some(NZ(BZ([],[y,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[et(ob,()=>g(!1)),et(mC,()=>g(!0))],eventOrder:{}}));Pa.show(D);const B=p.get(D);$n.focus(B)}}},aG=(t,s)=>Vl(oo("data",s,t)),cG=t=>iC(t,".tox-alert-dialog")||iC(t,".tox-confirm-dialog"),lG=(t,s,a)=>s&&a?[]:[Ga.config({contextual:{lazyContext:()=>O.some(E(pe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>lC(t,l.element).map(g=>({bounds:yT(g),optScrollEnv:O.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:ws(g.element).top})})).getOrThunk(()=>({bounds:de(),optScrollEnv:O.none()}))})],iG=t=>{const s=t.editor,a=Kw(s),l=sG(t.backstages.dialog),d=rG(t.backstages.dialog),g=(V,X,ce)=>X!==void 0&&X.inline==="toolbar"?_(V,t.backstages.popup.shared.anchors.inlineDialog(),ce,X.ariaAttrs):X!==void 0&&X.inline==="cursor"?_(V,t.backstages.popup.shared.anchors.cursor(),ce,X.ariaAttrs):x(V,ce),p=(V,X)=>y(V,X),y=(V,X)=>{const ce=Te=>{const ye=oG(Te,{closeWindow:()=>{Pa.hide(ye.dialog),X(ye.instanceApi)}},s,t.backstages.dialog);return Pa.show(ye.dialog),ye.instanceApi};return io.openUrl(ce,V)},x=(V,X)=>{const ce=(Te,ye,he)=>{const Ue=ye,kt=Xj({dataValidator:he,initialData:Ue,internalDialog:Te},{redial:io.redial,closeWindow:()=>{Pa.hide(kt.dialog),X(kt.instanceApi)}},t.backstages.dialog);return Pa.show(kt.dialog),kt.instanceApi.setData(Ue),kt.instanceApi};return io.open(ce,V)},_=(V,X,ce,Te=!1)=>{const ye=(he,Ue,Ze)=>{const kt=aG(Ue,Ze),st=Cs(),Dt=t.backstages.popup.shared.header.isPositionedAtTop(),hn={dataValidator:Ze,initialData:kt,internalDialog:he},Ro=()=>st.on(To=>{pr.reposition(To),Ga.refresh(To)}),pn=Jj(hn,{redial:io.redial,closeWindow:()=>{st.on(pr.hide),s.off("ResizeEditor",Ro),st.clear(),ce(pn.instanceApi)}},t.backstages.popup,Te),xo=cc(pr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...Dt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:vt([ro("window-manager-inline-events",[et(xm(),(To,Un)=>{Go(pn.dialog,ob)})]),...lG(s,a,Dt)]),isExtraPart:(To,Un)=>cG(Un)}));st.set(xo);const Qn=()=>{const To=s.inline?Ws():pe.fromDom(s.getContainer()),Un=E(To);return O.some(Un)};return pr.showWithinBounds(xo,zl(pn.dialog),{anchor:X},Qn),(!a||!Dt)&&(Ga.refresh(xo),s.on("ResizeEditor",Ro)),pn.instanceApi.setData(kt),Cn.focusIn(pn.dialog),pn.instanceApi};return io.open(ye,V)};return{open:g,openUrl:p,alert:(V,X)=>{l.open(V,X)},close:V=>{V.close()},confirm:(V,X)=>{d.open(V,X)}}},uG=t=>{hR(t),PL(t),RI(t)};var dG=()=>{xt.add("silver",t=>{uG(t);let s=()=>de();const{dialogs:a,popups:l,renderUI:d}=a5(t,{getPopupSinkBounds:()=>s()}),g=async()=>{const x=await d();return lC(t,l.getMothership().element).each(D=>{s=()=>yT(D)}),x};S6.register(t,l.backstage.shared);const p=iG({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),y=()=>DF(t,{backstage:l.backstage},l.getMothership());return{renderUI:g,getWindowManagerImpl:q(p),getNotificationManagerImpl:y}})};dG()})();const nq=["id"],oq={class:"grid"},sq={class:"field"},rq={class:"type-label"},aq={class:"field"},cq={class:"type-label"},lq={class:"field half"},iq={class:"type-label"},uq={class:"field half-right"},dq={class:"type-label"},mq={class:"content"},fq={class:"content"},gq=["src"],hq={class:"grid"},pq={class:"field half"},bq={class:"type-label"},vq={class:"field half-right"},yq={class:"type-label"},wq={class:"field half"},Cq={class:"type-label"},Sq={class:"field half-right"},xq={class:"type-label"},Tq={key:1,class:"field half"},kq={class:"type-label"},Eq={class:"content"},_q={key:0,class:"media-preview",controls:"true"},Oq=["src"],Aq=["src"],Dq={class:"grid"},Rq={class:"field"},Mq={class:"type-label"},Nq={class:"field half"},Bq={class:"type-label"},$q={class:"field half-right"},Pq={class:"type-label"},Iq={class:"grid"},Fq={class:"field"},Lq={class:"type-label"},Hq=bj({__name:"input-rich-text-html",props:{value:{},field:{},toolbar:{default:()=>["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","code","fullscreen"]},font:{default:"sans-serif"},customFormats:{default:()=>[]},tinymceOverrides:{},disabled:{type:Boolean,default:!0},imageToken:{},folder:{},softLength:{},direction:{}},emits:["input"],setup(ct,{emit:En}){var js;const sn=ct,{t:pt}=DG(),Rt=ql(null),Jt=ql(null),{imageToken:Hn}=vj(sn),_t=SG();let Zt=ql("all"),Wn=ql([]);(js=_t.settings)!=null&&js.storage_asset_transform&&(Zt.value=_t.settings.storage_asset_transform,Wn.value=_t.settings.storage_asset_presets??[]);let vn=ql(0);const{imageDrawerOpen:un,imageSelection:Qt,closeImageDrawer:dt,onImageSelect:Ht,saveImage:it,imageButton:ot}=XG(Rt,Hn,{storageAssetTransform:Zt,storageAssetPresets:Wn}),{mediaDrawerOpen:Sn,mediaSelection:qe,closeMediaDrawer:G,openMediaTab:Xe,onMediaSelect:Nt,embed:at,saveMedia:q,mediaHeight:ft,mediaWidth:Mn,mediaSource:Bt,mediaButton:Pe}=QG(Rt,Hn),{linkButton:fe,linkDrawerOpen:Vo,closeLinkDrawer:Zn,saveLink:jt,linkSelection:O,linkNode:Eo}=JG(Rt),{codeDrawerOpen:nt,code:No,closeCodeDrawer:dn,saveCode:je,sourceCodeButton:po}=eq(Rt),Xo=Kk({get(){return sn.value||""},set(Tt){sn.value!==Tt&&Hr()}});n2(()=>[sn.direction,Rt],()=>{var Tt,$t,Vt,De,Gs,cs;Rt.value&&(sn.direction==="rtl"?(Vt=($t=(Tt=Rt.value.editorCommands)==null?void 0:Tt.commands)==null?void 0:$t.exec)==null||Vt.mcedirectionrtl():(cs=(Gs=(De=Rt.value.editorCommands)==null?void 0:De.commands)==null?void 0:Gs.exec)==null||cs.mcedirectionltr())});const Bo=Kk(()=>{let Tt=null;Array.isArray(sn.customFormats)&&sn.customFormats.length>0&&(Tt=sn.customFormats);let $t=(sn.toolbar??[]).map(Vt=>Vt.replace(/^link$/g,"customLink").replace(/^media$/g,"customMedia").replace(/^code$/g,"customCode").replace(/^image$/g,"customImage")).join(" ");return Tt&&($t+=" styles"),{skin:!1,content_css:!1,content_style:YG(sn.font),plugins:["media","table","lists","image","link","pagebreak","code","insertdatetime","autoresize","preview","fullscreen","directionality"],branding:!1,max_height:1e3,elementpath:!1,statusbar:!1,menubar:!1,convert_urls:!1,image_dimensions:!1,extended_valid_elements:"audio[loop|controls],source[src|type]",toolbar:$t,style_formats:Tt,file_picker_types:"customImage customMedia image media",link_default_protocol:"https",browser_spellcheck:!0,directionality:sn.direction,paste_data_images:!1,setup:ms,...sn.tinymceOverrides||{}}}),Ps=Kk(()=>xG(vn.value,sn.softLength)??100);let _e,gt;function H(){var $t,Vt,De;const Tt=($t=Rt.value)==null?void 0:$t.contentWindow.document.getElementById("tinymce");vn.value=((De=(Vt=Tt==null?void 0:Tt.textContent)==null?void 0:Vt.replace(`
`,""))==null?void 0:De.length)??0}function Hr(){if(H(),!_e)return;const Tt=Rt.value.getContent()?Rt.value.getContent():null;Tt!==gt&&(gt=Tt,En("input",Tt))}function Fn(){if(_e)return;const Tt=Rt.value.contentWindow.document.getElementById("tinymce");_e=new MutationObserver(Vt=>{Hr()});const $t={characterData:!0,childList:!0,subtree:!0};_e.observe(Tt,$t)}function ms(Tt){Rt.value=Tt,Tt.ui.registry.addToggleButton("customImage",ot),Tt.ui.registry.addToggleButton("customMedia",Pe),Tt.ui.registry.addToggleButton("customLink",fe),Tt.ui.registry.addButton("customCode",po),Tt.on("init",function(){Tt.shortcuts.remove("meta+k"),Tt.addShortcut("meta+k","Insert Link",()=>{Tt.ui.registry.getAll().buttons.customlink.onAction()}),H()}),Tt.on("OpenWindow",function($t){var Vt,De;if((Vt=$t.dialog)!=null&&Vt.getData){const Gs=(De=$t.dialog)==null?void 0:De.getData();Gs&&(Gs.url&&($t.dialog.close(),Tt.ui.registry.getAll().buttons.customlink.onAction()),Gs.src&&($t.dialog.close(),Tt.ui.registry.getAll().buttons.customimage.onAction(!0)))}})}function In(Tt){var Vt;if(Jt.value==null)return;const $t=(Vt=Jt.value.$el.parentElement)==null?void 0:Vt.querySelector(".tox-tinymce");$t!=null&&(Tt?$t.classList.add("focus"):$t.classList.remove("focus"))}return(Tt,$t)=>{const Vt=Pi("v-card-title"),De=Pi("v-input"),Gs=Pi("v-checkbox"),cs=Pi("v-card-text"),rn=Pi("v-button"),Ea=Pi("v-card-actions"),zo=Pi("v-card"),_a=Pi("v-dialog"),ls=Pi("interface-input-code"),Ms=Pi("v-icon"),Wr=Pi("v-drawer"),ur=Pi("v-select"),Jo=Pi("v-upload"),Uo=Pi("v-tab"),tt=Pi("v-tabs"),Ye=Pi("v-tab-item"),qt=Pi("v-textarea"),en=Pi("v-tabs-items"),Bn=AG("tooltip");return jf(),K0("div",{id:Tt.field,class:mj(["wysiwyg",{disabled:Tt.disabled}])},[Rr(kn(ZG),{ref_key:"editorElement",ref:Jt,modelValue:Xo.value,"onUpdate:modelValue":$t[0]||($t[0]=Yt=>Xo.value=Yt),init:Bo.value,disabled:Tt.disabled,"model-events":"change keydown blur focus paste ExecCommand SetContent",onFocusin:$t[1]||($t[1]=Yt=>In(!0)),onFocusout:$t[2]||($t[2]=Yt=>In(!1)),onFocus:Fn,onSetContent:Hr},null,8,["modelValue","init","disabled"]),Tt.softLength?(jf(),K0("span",{key:0,class:mj(["remaining",{warning:Ps.value<10,danger:Ps.value<5}])},bi(Tt.softLength-kn(vn)),3)):s3("",!0),Rr(_a,{modelValue:kn(Vo),"onUpdate:modelValue":$t[7]||($t[7]=Yt=>kp(Vo)?Vo.value=Yt:null)},{default:tl(()=>[Rr(zo,null,{default:tl(()=>[Rr(Vt,null,{default:tl(()=>[r3(bi(kn(pt)("wysiwyg_options.link")),1)]),_:1}),Rr(cs,null,{default:tl(()=>[Lr("div",oq,[Lr("div",sq,[Lr("div",rq,bi(kn(pt)("url")),1),Rr(De,{modelValue:kn(O).url,"onUpdate:modelValue":$t[3]||($t[3]=Yt=>kn(O).url=Yt),placeholder:kn(pt)("url_placeholder")},null,8,["modelValue","placeholder"])]),Lr("div",aq,[Lr("div",cq,bi(kn(pt)("display_text")),1),Rr(De,{modelValue:kn(O).displayText,"onUpdate:modelValue":$t[4]||($t[4]=Yt=>kn(O).displayText=Yt),placeholder:kn(pt)("display_text_placeholder")},null,8,["modelValue","placeholder"])]),Lr("div",lq,[Lr("div",iq,bi(kn(pt)("tooltip")),1),Rr(De,{modelValue:kn(O).title,"onUpdate:modelValue":$t[5]||($t[5]=Yt=>kn(O).title=Yt),placeholder:kn(pt)("tooltip_placeholder")},null,8,["modelValue","placeholder"])]),Lr("div",uq,[Lr("div",dq,bi(kn(pt)("open_link_in")),1),Rr(Gs,{modelValue:kn(O).newTab,"onUpdate:modelValue":$t[6]||($t[6]=Yt=>kn(O).newTab=Yt),block:"",label:kn(pt)(kn(O).newTab?"new_tab":"current_tab")},null,8,["modelValue","label"])])])]),_:1}),Rr(Ea,null,{default:tl(()=>[Rr(rn,{secondary:"",onClick:kn(Zn)},{default:tl(()=>[r3(bi(kn(pt)("cancel")),1)]),_:1},8,["onClick"]),Rr(rn,{disabled:kn(O).url===null&&!kn(Eo),onClick:kn(jt)},{default:tl(()=>[r3(bi(kn(pt)("save")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),Rr(Wr,{modelValue:kn(nt),"onUpdate:modelValue":$t[9]||($t[9]=Yt=>kp(nt)?nt.value=Yt:null),title:kn(pt)("wysiwyg_options.source_code"),icon:"code",onCancel:kn(dn)},{actions:tl(()=>[Rr(rn,{icon:"",rounded:"",onClick:kn(je)},{default:tl(()=>[Rr(Ms,{name:"check"})]),_:1},8,["onClick"])]),default:tl(()=>[Lr("div",mq,[Rr(ls,{value:kn(No),language:"htmlmixed","line-wrapping":!0,onInput:$t[8]||($t[8]=Yt=>No.value=Yt)},null,8,["value"])])]),_:1},8,["modelValue","title","onCancel"]),Rr(Wr,{modelValue:kn(un),"onUpdate:modelValue":$t[15]||($t[15]=Yt=>kp(un)?un.value=Yt:null),title:kn(pt)("wysiwyg_options.image"),icon:"image",onCancel:kn(dt)},{actions:tl(()=>[fj((jf(),A5(rn,{icon:"",rounded:"",onClick:kn(it)},{default:tl(()=>[Rr(Ms,{name:"check"})]),_:1},8,["onClick"])),[[Bn,kn(pt)("save_image"),void 0,{bottom:!0}]])]),default:tl(()=>[Lr("div",fq,[kn(Qt)?(jf(),K0(CW,{key:0},[Lr("img",{class:"image-preview",src:kn(Qt).previewUrl},null,8,gq),Lr("div",hq,[Lr("div",pq,[Lr("div",bq,bi(kn(pt)("image_url")),1),Rr(De,{modelValue:kn(Qt).imageUrl,"onUpdate:modelValue":$t[10]||($t[10]=Yt=>kn(Qt).imageUrl=Yt)},null,8,["modelValue"])]),Lr("div",vq,[Lr("div",yq,bi(kn(pt)("alt_text")),1),Rr(De,{modelValue:kn(Qt).alt,"onUpdate:modelValue":$t[11]||($t[11]=Yt=>kn(Qt).alt=Yt),nullable:!1},null,8,["modelValue"])]),kn(Zt)==="all"?(jf(),K0(CW,{key:0},[Lr("div",wq,[Lr("div",Cq,bi(kn(pt)("width")),1),Rr(De,{modelValue:kn(Qt).width,"onUpdate:modelValue":$t[12]||($t[12]=Yt=>kn(Qt).width=Yt),disabled:!!kn(Qt).transformationKey},null,8,["modelValue","disabled"])]),Lr("div",Sq,[Lr("div",xq,bi(kn(pt)("height")),1),Rr(De,{modelValue:kn(Qt).height,"onUpdate:modelValue":$t[13]||($t[13]=Yt=>kn(Qt).height=Yt),disabled:!!kn(Qt).transformationKey},null,8,["modelValue","disabled"])])],64)):s3("",!0),kn(Zt)!=="none"&&kn(Wn).length>0?(jf(),K0("div",Tq,[Lr("div",kq,bi(kn(pt)("transformation_preset_key")),1),Rr(ur,{modelValue:kn(Qt).transformationKey,"onUpdate:modelValue":$t[14]||($t[14]=Yt=>kn(Qt).transformationKey=Yt),items:kn(Wn).map(Yt=>({text:Yt.key,value:Yt.key})),"show-deselect":!0},null,8,["modelValue","items"])])):s3("",!0)])],64)):(jf(),A5(Jo,{key:1,multiple:!1,"from-library":"","from-url":"",folder:Tt.folder,onInput:kn(Ht)},null,8,["folder","onInput"]))])]),_:1},8,["modelValue","title","onCancel"]),Rr(Wr,{modelValue:kn(Sn),"onUpdate:modelValue":$t[22]||($t[22]=Yt=>kp(Sn)?Sn.value=Yt:null),title:kn(pt)("wysiwyg_options.media"),icon:"slideshow",onCancel:kn(G)},{sidebar:tl(()=>[Rr(tt,{modelValue:kn(Xe),"onUpdate:modelValue":$t[16]||($t[16]=Yt=>kp(Xe)?Xe.value=Yt:null),vertical:""},{default:tl(()=>[Rr(Uo,{value:"video"},{default:tl(()=>[r3(bi(kn(pt)("media")),1)]),_:1}),Rr(Uo,{value:"embed"},{default:tl(()=>[r3(bi(kn(pt)("embed")),1)]),_:1})]),_:1},8,["modelValue"])]),actions:tl(()=>[fj((jf(),A5(rn,{icon:"",rounded:"",onClick:kn(q)},{default:tl(()=>[Rr(Ms,{name:"check"})]),_:1},8,["onClick"])),[[Bn,kn(pt)("save_media"),void 0,{bottom:!0}]])]),default:tl(()=>[Lr("div",Eq,[Rr(en,{modelValue:kn(Xe),"onUpdate:modelValue":$t[21]||($t[21]=Yt=>kp(Xe)?Xe.value=Yt:null)},{default:tl(()=>[Rr(Ye,{value:"video"},{default:tl(()=>[kn(qe)?(jf(),K0(CW,{key:0},[kn(qe).tag!=="iframe"?(jf(),K0("video",_q,[Lr("source",{src:kn(qe).previewUrl},null,8,Oq)])):s3("",!0),kn(qe).tag==="iframe"?(jf(),K0("iframe",{key:1,class:"media-preview",src:kn(qe).previewUrl},null,8,Aq)):s3("",!0),Lr("div",Dq,[Lr("div",Rq,[Lr("div",Mq,bi(kn(pt)("source")),1),Rr(De,{modelValue:kn(Bt),"onUpdate:modelValue":$t[17]||($t[17]=Yt=>kp(Bt)?Bt.value=Yt:null)},null,8,["modelValue"])]),Lr("div",Nq,[Lr("div",Bq,bi(kn(pt)("width")),1),Rr(De,{modelValue:kn(Mn),"onUpdate:modelValue":$t[18]||($t[18]=Yt=>kp(Mn)?Mn.value=Yt:null)},null,8,["modelValue"])]),Lr("div",$q,[Lr("div",Pq,bi(kn(pt)("height")),1),Rr(De,{modelValue:kn(ft),"onUpdate:modelValue":$t[19]||($t[19]=Yt=>kp(ft)?ft.value=Yt:null)},null,8,["modelValue"])])])],64)):(jf(),A5(Jo,{key:1,multiple:!1,"from-library":"","from-url":"",folder:Tt.folder,onInput:kn(Nt)},null,8,["folder","onInput"]))]),_:1}),Rr(Ye,{value:"embed"},{default:tl(()=>[Lr("div",Iq,[Lr("div",Fq,[Lr("div",Lq,bi(kn(pt)("embed")),1),Rr(qt,{modelValue:kn(at),"onUpdate:modelValue":$t[20]||($t[20]=Yt=>kp(at)?at.value=Yt:null),nullable:!1},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title","onCancel"])],10,nq)}}});const Xq=TG(Hq,[["__scopeId","data-v-b5c40add"]]);export{Xq as default};
