import{T as we,a as ke,v as Ne}from"./vue.runtime.esm-bundler-af75f279.js";import{h as Be,u as $e,j as Se,_ as E,k as re,l as ee,n as ce,o as Ie,M as Te,q as oe,t as Ue,v as Ee,w as Oe,x as be,y as je,z as Le,A as Re,B as Ae,C as Fe,D as ze,E as He,F as qe,G as Ge,V as ye,H as Ye}from"./index.5574472a.entry.js";import{storeToRefs as ne}from"./pinia.c34b9328.entry.js";import{useI18n as P}from"./vue-i18n.2a6793e5.entry.js";import{useRouter as We}from"./vue-router.60d75471.entry.js";import{d as O,c as $,e as V,be as ue,w as Q,a$ as v,b0 as te,bt as q,aS as l,a7 as b,br as i,a9 as M,H as ae,j as c,a8 as T,aa as x,aH as j,b1 as Ve,u as p,ae as U,ba as N,aZ as se,aJ as Ze,az as Xe,a_ as G,aG as Pe,n as Je,p as Ke,ac as Qe,aI as et,ar as tt,aV as ot,aT as nt}from"./runtime-core.esm-bundler-474556af.js";import{u as at}from"./index-16d1f70d.js";const st=["src"],it=O({__name:"module-bar-logo",setup(f){const{t:e}=P(),r=Be(),n=$e(),t=$(()=>{var _;return n.settings===null||!((_=n.settings)!=null&&_.project_logo)?null:`${Se()}assets/${n.settings.project_logo}`}),o=V(!1),{queueHasItems:a}=ue(r);Q(()=>a.value,_=>{_&&(o.value=!0)});const s=$(()=>{var _;return(_=n.settings)==null?void 0:_.project_url}),u=$(()=>{var _;return(_=n.settings)!=null&&_.project_url?e("view_project"):!1});function m(){a.value===!1&&(o.value=!1)}return(_,y)=>{const S=v("v-progress-linear"),C=te("tooltip");return q((l(),b(Ve(s.value?"a":"div"),{href:s.value,target:s.value?"_blank":void 0,rel:s.value?"noopener noreferrer":void 0,class:j(["module-bar-logo",{loading:o.value}])},{default:i(()=>[t.value?(l(),M(ae,{key:0},[c(we,{name:"fade"},{default:i(()=>[o.value?(l(),b(S,{key:0,indeterminate:"",rounded:"",onAnimationiteration:m})):T("",!0)]),_:1}),x("img",{class:"custom-logo",src:t.value,alt:"Project Logo"},null,8,st)],64)):(l(),M("div",{key:1,class:j(["logo",{running:o.value}]),onAnimationiteration:m},null,34))]),_:1},8,["href","target","rel","class"])),[[C,u.value,void 0,{right:!0}]])}}});const lt=E(it,[["__scopeId","data-v-f249298d"]]),rt={class:"module-bar-avatar"},ct=["src","alt"],ut=O({__name:"module-bar-avatar",setup(f){const{t:e}=P(),r=re(),n=ee(),{notificationsDrawerOpen:t}=ne(r),{unread:o}=ne(n),a=ce(),s=V(!1),u=$(()=>{var C;return!a.currentUser||!("avatar"in a.currentUser)||!((C=a.currentUser)!=null&&C.avatar)?null:Ie(`${Se()}assets/${a.currentUser.avatar.id}?key=system-medium-cover`)}),m=V(null),_=$(()=>`/users/${a.currentUser.id}`),y=$(()=>"/logout"),S=a.fullName??void 0;return(C,g)=>{const W=v("v-icon"),L=v("v-button"),w=v("v-badge"),k=v("v-card-title"),D=v("v-card-actions"),F=v("v-card"),Y=v("v-dialog"),Z=v("v-avatar"),J=v("router-link"),K=v("v-hover"),X=te("tooltip");return l(),M("div",rt,[c(w,{value:p(o),disabled:p(o)==0,class:"notifications-badge"},{default:i(()=>[q((l(),b(L,{tile:"",icon:"","x-large":"",class:"notifications",onClick:g[0]||(g[0]=R=>t.value=!0)},{default:i(()=>[c(W,{name:"notifications"})]),_:1})),[[X,p(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),c(K,null,{default:i(({hover:R})=>[c(Y,{modelValue:s.value,"onUpdate:modelValue":g[2]||(g[2]=B=>s.value=B),onEsc:g[3]||(g[3]=B=>s.value=!1)},{activator:i(({on:B})=>[c(we,{name:"sign-out"},{default:i(()=>[R?q((l(),b(L,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:B},{default:i(()=>[c(W,{name:"logout"})]),_:2},1032,["onClick"])),[[X,p(e)("sign_out"),void 0,{right:!0}]]):T("",!0)]),_:2},1024)]),default:i(()=>[c(F,null,{default:i(()=>[c(k,null,{default:i(()=>[U(N(p(e)("sign_out_confirm")),1)]),_:1}),c(D,null,{default:i(()=>[c(L,{secondary:"",onClick:g[1]||(g[1]=B=>s.value=!s.value)},{default:i(()=>[U(N(p(e)("cancel")),1)]),_:1}),c(L,{to:y.value},{default:i(()=>[U(N(p(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),c(J,{to:_.value},{default:i(()=>[q((l(),b(Z,{tile:"",large:"",class:j({"no-avatar":!u.value})},{default:i(()=>[u.value&&!m.value?(l(),M("img",{key:0,src:u.value,alt:p(S),class:"avatar-image",onError:g[4]||(g[4]=B=>m.value=B)},null,40,ct)):(l(),b(W,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[X,p(S),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}});const dt=E(ut,[["__scopeId","data-v-5436e6a5"]]),_t={class:"module-bar"},vt={class:"modules"},pt=O({__name:"module-bar",setup(f){const e=$e(),{modules:r}=Ee(),n=$(()=>r.value.map(o=>o.id)),t=$(()=>e.settings?(e.settings.module_bar??Te).filter(o=>o.type==="link"?!0:o.enabled&&n.value.includes(o.id)).map(o=>{if(o.type==="link"){const s=oe.omit(o,["url"]);return o.url.startsWith("/")?s.to=o.url:s.href=o.url,Ue(s)}const a=r.value.find(s=>s.id===o.id);return{...o,...r.value.find(s=>s.id===o.id),to:`/${a.id}`}}):[]);return(o,a)=>{const s=v("v-icon"),u=v("v-button"),m=te("tooltip");return l(),M("div",_t,[c(lt),x("div",vt,[(l(!0),M(ae,null,se(t.value,_=>q((l(),b(u,{key:_.id,icon:"","x-large":"",to:_.to,href:_.href,tile:"",style:Ze(_.color?{"--v-button-color-active":_.color}:null)},{default:i(()=>[c(s,{name:_.icon},null,8,["name"])]),_:2},1032,["to","href","style"])),[[m,_.name,void 0,{right:!0}]])),128))]),c(dt)])}}});const mt=E(pt,[["__scopeId","data-v-b7cddd54"]]),ft={class:"notification-dialogs"},ht={target:"_blank",href:"https://github.com/directus/directus/issues/new?template=bug_report.yml"},gt=O({__name:"notification-dialogs",setup(f){const{t:e}=P(),r=ee(),{isAdmin:n}=ce(),t=$(()=>r.dialogs);function o(a){r.remove(a)}return(a,s)=>{const u=v("v-card-title"),m=v("v-error"),_=v("v-card-text"),y=v("v-button"),S=v("v-card-actions"),C=v("v-card"),g=v("v-dialog");return l(),M("div",ft,[(l(!0),M(ae,null,se(t.value,W=>(l(),b(g,{key:W.id,"model-value":!0,persist:""},{default:i(()=>[c(C,{class:j([W.type])},{default:i(()=>[c(u,null,{default:i(()=>[U(N(W.title),1)]),_:2},1024),W.text||W.error?(l(),b(_,{key:0},{default:i(()=>[U(N(W.text)+" ",1),W.error?(l(),b(m,{key:0,error:W.error},null,8,["error"])):T("",!0)]),_:2},1024)):T("",!0),c(S,null,{default:i(()=>[W.type==="error"&&p(n)&&W.code==="UNKNOWN"?(l(),b(y,{key:0,secondary:""},{default:i(()=>[x("a",ht,N(p(e)("report_error")),1)]),_:1})):T("",!0),c(y,{onClick:L=>o(W.id)},{default:i(()=>[U(N(p(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}});const bt=E(gt,[["__scopeId","data-v-1177261b"]]),yt=O({__name:"notifications-drawer",setup(f){const{t:e}=P(),r=re(),n=ce(),t=ee(),o=Oe(),a=We(),s=V([]),u=V(!1),m=V(null),_=V([]),y=V(["inbox"]),{notificationsDrawerOpen:S}=ne(r),C=V([{text:e("subject"),value:"subject",sortable:!1,width:300,align:"left",description:null},{text:e("timestamp"),value:"timestampDistance",sortable:!1,width:180,align:"left",description:null}]);g(),Q(y,()=>g());async function g(){u.value=!0;try{const w=await be.get("/notifications",{params:{filter:{_and:[{recipient:{_eq:n.currentUser.id}},{status:{_eq:y.value[0]}}]},fields:["id","subject","collection","item","timestamp"],sort:["-timestamp"]}});await t.getUnreadCount();const k=w.data.data,D=[];for(const F of k)D.push({...F,timestampDistance:je(Le(F.timestamp),new Date,{addSuffix:!0})});s.value=D}catch(w){m.value=w}finally{u.value=!1}}async function W(){await be.patch("/notifications",{keys:_.value.map(({id:w})=>w),data:{status:y.value[0]==="inbox"?"archived":"inbox"}}),await g(),_.value=[]}function L({item:w}){var k;if(w.collection){const D=o.getCollection(w.collection);(k=D==null?void 0:D.meta)!=null&&k.singleton?a.push(`/content/${w.collection}`):a.push(`/content/${w.collection}/${w.item}`)}else String(w.item).startsWith("/")&&a.push(w.item);S.value=!1}return(w,k)=>{const D=v("v-icon"),F=v("v-button"),Y=v("v-list-item-icon"),Z=v("v-list-item-content"),J=v("v-tab"),K=v("v-tabs"),X=v("v-info"),R=v("v-table"),B=v("v-drawer"),de=te("tooltip");return l(),b(B,{modelValue:p(S),"onUpdate:modelValue":k[3]||(k[3]=A=>Xe(S)?S.value=A:null),icon:"notifications",title:p(e)("notifications"),onCancel:k[4]||(k[4]=A=>S.value=!1)},{actions:i(()=>[q((l(),b(F,{icon:"",rounded:"",disabled:_.value.length===0,secondary:"",onClick:W},{default:i(()=>[c(D,{name:y.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[de,y.value[0]==="inbox"?p(e)("archive"):p(e)("unarchive"),void 0,{bottom:!0}]])]),sidebar:i(()=>[c(K,{modelValue:y.value,"onUpdate:modelValue":k[0]||(k[0]=A=>y.value=A),vertical:""},{default:i(()=>[c(J,{value:"inbox"},{default:i(()=>[c(Y,null,{default:i(()=>[c(D,{name:"inbox"})]),_:1}),c(Z,null,{default:i(()=>[U(N(p(e)("inbox")),1)]),_:1})]),_:1}),c(J,{value:"archived"},{default:i(()=>[c(Y,null,{default:i(()=>[c(D,{name:"archive"})]),_:1}),c(Z,null,{default:i(()=>[U(N(p(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:i(()=>[!u.value&&s.value.length===0?(l(),b(X,{key:0,icon:"notifications",title:p(e)("no_notifications"),center:""},{default:i(()=>[U(N(p(e)("no_notifications_copy")),1)]),_:1},8,["title"])):(l(),b(R,{key:1,modelValue:_.value,"onUpdate:modelValue":k[1]||(k[1]=A=>_.value=A),headers:C.value,"onUpdate:headers":k[2]||(k[2]=A=>C.value=A),"show-select":"",loading:u.value,items:s.value,"item-key":"id","onClick:row":L},null,8,["modelValue","headers","loading","items"]))]),_:1},8,["modelValue","title"])}}});const wt=E(yt,[["__scopeId","data-v-93655246"]]),kt={key:0,class:"icon"},$t={class:"content"},St={class:"title selectable"},Wt={key:0,class:"text selectable"},Vt=O({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{}},setup(f){const e=f,r=ee();function n(){e.showClose===!0&&r.remove(e.id)}return(t,o)=>{const a=v("v-progress-circular"),s=v("v-icon");return l(),M("div",{class:j(["notification-item",[t.type,{tail:t.tail,dense:t.dense}]]),onClick:n},[t.loading||t.progress||t.icon?(l(),M("div",kt,[t.loading?(l(),b(a,{key:0,indeterminate:"",small:""})):t.progress?(l(),b(a,{key:1,small:"",value:t.progress},null,8,["value"])):(l(),b(s,{key:2,name:t.icon},null,8,["name"]))])):T("",!0),x("div",$t,[x("p",St,N(t.title),1),t.text?(l(),M("p",Wt,N(t.text),1)):T("",!0)]),t.showClose?(l(),b(s,{key:1,name:"close",clickable:"",class:"close",onClick:n})):T("",!0)],2)}}});const Me=E(Vt,[["__scopeId","data-v-650a7430"]]),Mt=O({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(f){const e=ee(),r=ue(e).queue;return(n,t)=>(l(),b(ke,{class:j(["notifications-group",{"sidebar-open":n.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:i(()=>[G(n.$slots,"default",{},void 0,!0),(l(!0),M(ae,null,se(p(r),(o,a)=>(l(),b(Me,{id:o.id,key:o.id,title:o.title,icon:o.icon,type:o.type,loading:o.loading,progress:o.progress,tail:a===p(r).length-1,dense:n.sidebarOpen===!1,"show-close":o.persist===!0&&o.closeable!==!1},null,8,["id","title","icon","type","loading","progress","tail","dense","show-close"]))),128))]),_:3},8,["class"]))}});const xt=E(Mt,[["__scopeId","data-v-2450412a"]]),Ct={class:"icon"},Dt={key:0,class:"title"},Nt=O({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(f){const e=re(),{sidebarOpen:r}=ue(e);return(n,t)=>{const o=v("v-icon");return l(),b(Ve(n.to?"router-link":"button"),{class:j(["sidebar-button",{active:n.active}]),onClick:t[0]||(t[0]=a=>n.$emit("click",a))},{default:i(()=>[x("div",Ct,[c(o,{name:n.icon},null,8,["name"])]),p(r)?(l(),M("div",Dt,[G(n.$slots,"default",{},void 0,!0)])):T("",!0)]),_:3},8,["class"])}}});const Bt=E(Nt,[["__scopeId","data-v-96223f6b"]]),It={class:"notifications-preview"},Tt={key:0,class:"inline"},Ut={class:"padding-box"},Et=O({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(f){const{t:e}=P(),r=ee(),{lastFour:n}=ne(r);return(t,o)=>{const a=v("router-link"),s=v("transition-expand"),u=te("tooltip");return l(),M("div",It,[c(s,{tag:"div"},{default:i(()=>[t.modelValue?(l(),M("div",Tt,[x("div",Ut,[c(a,{class:j(["link",{"has-items":p(n).length>0}]),to:"/activity"},{default:i(()=>[U(N(p(e)("show_all_activity")),1)]),_:1},8,["class"]),c(ke,{tag:"div",name:"notification",class:"transition"},{default:i(()=>[(l(!0),M(ae,null,se(p(n),m=>(l(),b(Me,Pe({key:m.id},m),null,16))),128))]),_:1})])])):T("",!0)]),_:1}),q((l(),b(Bt,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:o[0]||(o[0]=m=>t.$emit("update:modelValue",!t.modelValue))},{default:i(()=>[U(N(p(e)("activity_log")),1)]),_:1},8,["active"])),[[u,!t.sidebarOpen&&p(e)("activity_log"),void 0,{left:!0}]])])}}});const Ot=E(Et,[["__scopeId","data-v-0bfd5b25"]]);function jt(f){if(typeof f!="number")throw new TypeError("Expected a number");const e=f>0?Math.floor:Math.ceil;return{days:e(f/864e5),hours:e(f/36e5)%24,minutes:e(f/6e4)%60,seconds:e(f/1e3)%60,milliseconds:e(f)%1e3,microseconds:e(f*1e3)%1e3,nanoseconds:e(f*1e6)%1e3}}const Lt=(f,e)=>e===1?f:`${f}s`,Rt=1e-7;function le(f,e={}){if(!Number.isFinite(f))throw new TypeError("Expected a finite number");e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);const r=[],n=(a,s)=>{const u=Math.floor(a*10**s+Rt);return(Math.round(u)/10**s).toFixed(s)},t=(a,s,u,m)=>{if((r.length===0||!e.colonNotation)&&a===0&&!(e.colonNotation&&u==="m"))return;m=(m||a||"0").toString();let _,y;if(e.colonNotation){_=r.length>0?":":"",y="";const S=m.includes(".")?m.split(".")[0].length:m.length,C=r.length>0?2:1;m="0".repeat(Math.max(0,C-S))+m}else _="",y=e.verbose?" "+Lt(s,a):u;r.push(_+m+y)},o=jt(f);if(t(Math.trunc(o.days/365),"year","y"),t(o.days%365,"day","d"),t(o.hours,"hour","h"),t(o.minutes,"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&f<1e3)if(t(o.seconds,"second","s"),e.formatSubMilliseconds)t(o.milliseconds,"millisecond","ms"),t(o.microseconds,"microsecond","Âµs"),t(o.nanoseconds,"nanosecond","ns");else{const a=o.milliseconds+o.microseconds/1e3+o.nanoseconds/1e6,s=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,u=a>=1?Math.round(a):Math.ceil(a),m=s?a.toFixed(s):u;t(Number.parseFloat(m),"millisecond","ms",m)}else{const a=f/1e3%60,s=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,u=n(a,s),m=e.keepDecimalsOnWholeSeconds?u:u.replace(/\.0+$/,"");t(Number.parseFloat(m),"second","s",m)}if(r.length===0)return"0"+(e.verbose?" milliseconds":"ms");if(e.compact)return r[0];if(typeof e.unitCount=="number"){const a=e.colonNotation?"":" ";return r.slice(0,Math.max(e.unitCount,1)).join(a)}return e.colonNotation?r.join(""):r.join(" ")}const At={class:"latency-indicator"},Ft=O({__name:"latency-indicator",setup(f){const{t:e}=P(),r=Re(),n=$(()=>{const u=oe.sortBy(r.latency,["timestamp"]);return u[u.length-1]}),t=$(()=>{if(!r.latency||r.latency.length===0)return 0;const u=oe.sortBy(r.latency,["timestamp"]),m=u.slice(Math.max(u.length-5,0));let _=0;for(const{latency:y}of m)_+=y;return Math.round(_/m.length)}),o=$(()=>t.value<=250?4:t.value>250&&t.value<=500?3:t.value>500&&t.value<=750?2:1),a=$(()=>{switch(o.value){case 4:return`${e("connection_excellent")}
(${le(t.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${le(t.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${le(t.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${le(t.value)} ${e("latency")})`;default:return null}}),s=$(()=>{switch(o.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(u,m)=>{const _=v("v-progress-circular"),y=v("v-icon"),S=te("tooltip");return q((l(),M("div",At,[n.value?(l(),b(y,{key:1,name:s.value},null,8,["name"])):(l(),b(_,{key:0,indeterminate:""}))])),[[S,a.value,void 0,{bottom:!0,end:!0}]])}}});const zt=E(Ft,[["__scopeId","data-v-7a4905b7"]]),Ht={class:"project-info"},qt={class:"name-container"},Gt=O({__name:"project-info",setup(f){const e=Ae(),r=$(()=>{var t,o;return(o=(t=e.info)==null?void 0:t.project)==null?void 0:o.project_name}),n=$(()=>{var t,o;return(o=(t=e.info)==null?void 0:t.project)==null?void 0:o.project_descriptor});return(t,o)=>{const a=v("v-text-overflow");return l(),M("div",Ht,[c(zt),x("div",qt,[c(a,{placement:"right",class:"name",text:r.value},null,8,["text"]),n.value?(l(),b(a,{key:0,placement:"right",class:"descriptor",text:n.value},null,8,["text"])):T("",!0)])])}}});const Yt=E(Gt,[["__scopeId","data-v-b282b76d"]]),Zt=O({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(f){const e=f,r=V([]),n=V(!1);return Q(()=>e.sidebarOpen,async t=>{t===!1?r.value=[]:(n.value=!0,await Je(),n.value=!1)}),(t,o)=>{const a=v("v-item-group");return l(),b(a,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:n.value},{default:i(()=>[G(t.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}});const Xt=E(Zt,[["__scopeId","data-v-e8deac9f"]]),Pt=f=>(ot("data-v-faefd58d"),f=f(),nt(),f),Jt={class:"module-nav alt-colors"},Kt={class:"module-nav-content"},Qt={class:"content-wrapper"},eo={class:"flex-container"},to=Pt(()=>x("div",{class:"spacer"},null,-1)),oo=O({__name:"private-view",props:{title:{default:null},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(f,{emit:e}){var me,fe;const r=f,n={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},{t}=P(),o=We(),{title:a}=ue(r),s=at(r,"splitView",e),u=V(),m=V(),_=V();let y,S=null;const C=()=>{S!==null&&u.value&&(u.value.style.overflowY=S,S=null),clearTimeout(y)};Q(s,()=>{if(!m.value||!u.value)return;S=u.value.style.overflowX,u.value.style.overflowX="hidden",y=setTimeout(C,1500);const d=u.value.style.overflowY;u.value.style.overflowY="hidden";let h,H;const ie=()=>{u.value&&(u.value.style.overflowY=d),clearTimeout(h),H()};h=setTimeout(ie,1500),H=Fe(m.value,"transitionend",ie)});const{width:g}=ze(),{width:W}=He(_),L=$(()=>{if(!s.value)return!0;let d;return g.value>=1260?d=g.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-W.value:g.value>=960?d=g.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-n.collapsedSidebarWidth:d=g.value-n.minContentWidth,d>=r.splitViewMinWidth}),{data:w}=qe("module-width",{}),k=V(pe((me=w.value)==null?void 0:me.nav,n.minModuleNavWidth));Q(k,oe.debounce(d=>{w.value={...w.value??{},nav:d}},300));const D=V(pe((fe=w.value)==null?void 0:fe.main,n.minContentWidth));Q(D,oe.debounce(d=>{w.value={...w.value??{},main:d}},300));const F=V(!1),Y=$(()=>{const d=s.value?r.splitViewMinWidth:0,h=L.value?n.minContentWidth+d:n.minContentWidth;let H;return g.value>=1260?H=g.value-n.moduleBarWidth-h-W.value:g.value>=960?H=g.value-n.moduleBarWidth-h-n.collapsedSidebarWidth:H=g.value-n.moduleBarWidth+n.overlaySpace,Math.max(H,n.minModuleNavWidth)}),Z=$(()=>{const d=s.value?r.splitViewMinWidth:0;let h;return g.value>=1260?h=g.value-n.moduleBarWidth-k.value-d-W.value:g.value>=960?h=g.value-n.moduleBarWidth-k.value-d-n.collapsedSidebarWidth:h=g.value-d,Math.max(h,n.minContentWidth)}),J=$(()=>({snapZones:[{width:40,snapPos:n.minModuleNavWidth,direction:"left"},{width:40,snapPos:Y.value,direction:"right"}]})),K=V(!1),X=$(()=>({snapZones:[{width:40,snapPos:n.minContentWidth,direction:"left"},{width:40,snapPos:Z.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:F.value})),R=V(!1),B=ce(),de=re(),A=$(()=>{var d,h;return B.currentUser?((h=(d=B.currentUser)==null?void 0:d.role)==null?void 0:h.app_access)||!1:!0}),_e=V(!1),{sidebarOpen:z,fullScreen:ve}=ne(de),xe=$(()=>B.currentUser&&"theme"in B.currentUser?B.currentUser.theme:"auto");Ke("main-element",u),o.afterEach(()=>{var d;(d=u.value)==null||d.scrollTo({top:0}),ve.value=!1}),Ge(a);function Ce(d){d.target&&d.target.classList.contains("close")===!1&&(z.value=!0)}function pe(d,h){return d&&!Number.isNaN(d)?Number(d):h}return(d,h)=>{const H=v("v-button"),ie=v("v-info"),he=v("v-overlay");return A.value===!1?(l(),b(ie,{key:0,center:"",title:p(t)("no_app_access"),type:"danger",icon:"block"},{append:i(()=>[c(H,{to:"/logout"},{default:i(()=>[U(N(p(t)("switch_user")),1)]),_:1})]),default:i(()=>[U(N(p(t)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(l(),M("div",{key:1,class:j(["private-view",{theme:xe.value,"full-screen":p(ve),splitView:d.splitView}])},[x("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:j({"is-open":R.value,"has-shadow":d.sidebarShadow})},[c(mt),c(ye,{width:k.value,"onUpdate:width":h[0]||(h[0]=I=>k.value=I),"min-width":n.minModuleNavWidth,"max-width":Y.value,options:J.value,onDragging:h[1]||(h[1]=I=>F.value=I),onTransitionEnd:C},{default:i(()=>[x("div",Jt,[c(Yt),x("div",Kt,[G(d.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),x("div",{id:"main-content",ref_key:"contentEl",ref:u,class:"content"},[c(Ye,{ref_key:"headerBarEl",ref:m,small:d.smallHeader||d.splitView,shadow:d.headerShadow||d.splitView,"show-sidebar-toggle":"",title:p(a),"onToggle:sidebar":h[2]||(h[2]=I=>z.value=!p(z)),onPrimary:h[3]||(h[3]=I=>R.value=!R.value)},Qe({_:2},[se(d.$slots,(I,ge)=>({name:ge,fn:i(De=>[G(d.$slots,ge,et(tt(De)),void 0,!0)])}))]),1032,["small","shadow","title"]),x("div",Qt,[c(ye,{width:D.value,"onUpdate:width":h[4]||(h[4]=I=>D.value=I),"min-width":n.minContentWidth,"max-width":Z.value,disabled:!p(s),options:X.value,onDragging:h[5]||(h[5]=I=>K.value=I)},{default:i(()=>[q(x("main",null,[G(d.$slots,"default",{},void 0,!0)],512),[[Ne,L.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),d.splitView?(l(),M("div",{key:0,id:"split-content",class:j({"is-dragging":K.value})},[G(d.$slots,"splitView",{},void 0,!0)],2)):T("",!0)])],512),x("aside",{id:"sidebar",ref_key:"sidebarEl",ref:_,role:"contentinfo",class:j(["alt-colors",{"is-open":p(z),"has-shadow":d.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:Ce},[x("div",eo,[c(Xt,{"sidebar-open":p(z)},{default:i(()=>[G(d.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),to,c(Ot,{modelValue:_e.value,"onUpdate:modelValue":h[6]||(h[6]=I=>_e.value=I),"sidebar-open":p(z)},null,8,["modelValue","sidebar-open"])])],2),c(he,{class:"nav-overlay",active:R.value,onClick:h[7]||(h[7]=I=>R.value=!1)},null,8,["active"]),c(he,{class:"sidebar-overlay",active:p(z),onClick:h[8]||(h[8]=I=>z.value=!1)},null,8,["active"]),c(wt),_e.value===!1?(l(),b(xt,{key:0,"sidebar-open":p(z)},null,8,["sidebar-open"])):T("",!0),c(bt)],2))}}});const uo=E(oo,[["__scopeId","data-v-faefd58d"]]);export{uo as PrivateView,uo as default};
